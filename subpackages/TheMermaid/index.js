window.__require=function e(t,n,r){function a(o,c){if(!n[o]){if(!t[o]){var s=o.split("/");if(s=s[s.length-1],!t[s]){var u="function"==typeof __require&&__require;if(!c&&u)return u(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+o+"'")}o=s}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){return a(t[o][1][e]||e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof __require&&__require,o=0;o<r.length;o++)a(r[o]);return a}({TheMermaid_Cfg:[function(e,t,n){"use strict";var r;function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}cc._RF.push(t,"b1211uCyxhFn6zz2Xh10x01","TheMermaid_Cfg");var i={symbol:(r={},a(r,1,{node:"s1",win_node:"w1",win_ani:{name:"animation",zIndex:100}}),a(r,2,{node:"s2",win_node:"w2",win_ani:{name:"animation",zIndex:100},stop_ani:{name:"animation1",zIndex:200}}),a(r,3,{node:"s3",win_node:"w3",win_ani:{name:"animation",zIndex:100}}),a(r,4,{node:"s4",win_node:"w4",win_ani:{name:"animation",zIndex:100}}),a(r,5,{node:"s5",win_node:"w5",win_ani:{name:"animation",zIndex:100}}),a(r,6,{node:"s6",win_node:"w6",win_ani:{name:"animation",zIndex:100}}),a(r,7,{node:"s7",win_node:"w7",win_ani:{name:"animation",zIndex:100}}),a(r,8,{node:"s8",win_node:"w8",win_ani:{name:"animation",zIndex:100}}),a(r,9,{node:"s9",win_node:"w9",win_ani:{name:"animation",zIndex:100}}),a(r,10,{node:"s10",win_node:"w10",win_ani:{name:"animation",zIndex:100}}),a(r,11,{node:"s11",win_node:"w11",win_ani:{name:"animation",zIndex:100}}),a(r,12,{node:"s12",win_node:"w12",win_ani:{name:"animation",zIndex:100}}),a(r,13,{node:"s13",win_node:"w13",win_ani:{name:"animation2",zIndex:100},stop_ani:{name:"animation1",zIndex:200}}),a(r,101,{node:"s101",win_node:"",win_ani:""}),a(r,102,{node:"s102",win_node:"",win_ani:""}),a(r,103,{node:"s103",win_node:"",win_ani:""}),a(r,111,{node:"d101",win_node:"",win_ani:""}),a(r,112,{node:"d102",win_node:"",win_ani:""}),a(r,113,{node:"d103",win_node:"",win_ani:""}),r),scripts:{Top:"LMSlots_Top_Base",Bottom:"LMSlots_Bottom_Base",Slots:"TheMermaid_Slots",Reels:"LMSlots_Reel_Base",Symbols:"TheMermaid_Symbol"},helpItems:["games/TheMermaid/prefab/LMSlots_Help_item1","games/TheMermaid/prefab/LMSlots_Help_item2","games/TheMermaid/prefab/LMSlots_Help_item3","games/TheMermaid/prefab/LMSlots_Help_item4","games/TheMermaid/prefab/LMSlots_Help_item5","games/TheMermaid/prefab/LMSlots_Help_item8","games/TheMermaid/prefab/LMSlots_Help_item9"],col:15,row:3,scatterId:2,collectId:1,bonusId:13,symbolPrefab:"TheMermaid_Symbol",symbolSize:{height:98},randomSymbols:[1,3,4,5,6,7,8,9,10,11,12],kuang:"TheMermaid_kuang",autoModelDelay:.8,speed:3e3,reelStopInter:.2,auto_stop_time:1,AddAntiTime:2.3,bounce:!0,bounceInfo:{distance:30,time:.1},normalBgm:"base_bgm",commEffect:{path:"games/TheMermaid/",win1:["win1","win1end"],win2:["win2","win2end"],clickSpin:"common_click"},reelStateInfo:[{id:[2],mini:3,counts:[1,1,1,1,1],antiNode:"node_anti",path:"games/TheMermaid/",reelStopSound:"reel_stop",symbolStopSound:"symbol_scatter",antSound:"reel_notify",antSpeed:2400},{id:[13],mini:10,counts:[0,0,1,1,1,10],antiNode:"",path:"games/TheMermaid/",reelStopSound:"reel_stop",symbolStopSound:"symbol_bonus",antSound:"reel_notify",antSpeed:1700}]};t.exports=i,cc._RF.pop()},{}],TheMermaid_GameData:[function(e,t,n){"use strict";function r(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=a(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(c)throw i}}}}function a(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}cc._RF.push(t,"ef48e3K1jJA4ZBJS7mLqSgQ","TheMermaid_GameData"),cc.Class({extends:e("LMSlots_GameData_Base"),properties:{mapInfo:null,progressData:null,needBet:0},init:function(e,t,n){this._super(e,t,n),this.mapInfo=this._deskInfo.mapInfo,this.progressData=this.mapInfo.progressData,this.needBet=this.mapInfo.needBet},GetGameWin:function(){if(!this._gameInfo)return 0;var e=this._gameInfo.wincoin;if(this._gameInfo.mapFreeGameData&&this._gameInfo.mapFreeGameData.length>0){e=0;var t,n=r(this._gameInfo.mapFreeGameData);try{for(n.s();!(t=n.n()).done;){e+=t.value.winCoin}}catch(e){n.e(e)}finally{n.f()}}return e},GetMaxBetIdx:function(){return this._deskInfo.mults.length},SetSubGameData:function(e){this._subGame=e},GetSubGameData:function(){return this._subGame},GetGameTotalFreeWin:function(){return this._gameInfo?this._gameInfo.freeWinCoin:0},isEnterMapGames:function(){return cc.vv.gameData.mapInfo.state!=Global.QUEENOFSEA_MAP_STATE.COLLECT_ENERGY},isTriggerFreeGames:function(){return this._deskInfo.restFreeCount>0&&this._deskInfo.restFreeCount==this._deskInfo.allFreeCount},isFinishFreeGames:function(){return 0==this._deskInfo.restFreeCount&&this._deskInfo.allFreeCount>0},isFreeGamesTime:function(){return this._deskInfo.allFreeCount>0&&this._deskInfo.restFreeCount<this._deskInfo.allFreeCount},isOpenCollectProgress:function(){return this.GetBetIdx()>=this.needBet},ReqSpin:function(e){var t={c:MsgId.SLOT_START};t.betIndex=e,t.gameid=this._gameId,cc.vv.NetManager.send(t,!0)},OnRcvNetSpine:function(e){if(200==e.code){if(e.spcode&&967==e.spcode)return void cc.vv.FloatTip.show("\u6d41\u7a0b\u9519\u8bef\uff01\uff01\uff01");this.mapInfo=e.mapInfo,this.progressData=e.mapInfo.progressData,this.wildCols=e.wildCols,this._super(e)}},reqSubGame:function(e,t){var n=this;return new Promise(function(r){var a={c:MsgId.SLOT_SUBGAME_DATA,gameid:n._gameId,data:{rtype:e}};1==e&&(a.data.choiceGameId=t),3==e&&(a.data.choiceId=t);cc.vv.NetManager.registerMsg(MsgId.SLOT_SUBGAME_DATA,function e(t){cc.vv.NetManager.unregisterMsg(MsgId.SLOT_SUBGAME_DATA,e,!1,n),console.log("reqSubGame-resp:",t),200===t.code&&t.data.mapInfo&&(n.mapInfo=t.data.mapInfo),r(t)},n),cc.vv.NetManager.send(a,!0)})}}),cc._RF.pop()},{LMSlots_GameData_Base:void 0}],TheMermaid_Logic:[function(e,t,n){"use strict";cc._RF.push(t,"bf2deZS60hO0bM83gy4mLkX","TheMermaid_Logic"),cc.Class({extends:e("LMSlots_Logic_Base"),properties:{},onLoad:function(){window.SlotsFacade=this,this.dm=cc.vv.gameData,this.mainPanel=cc.find("safe_node",this.node),this.soundMgr=this.addComponent("TheMermaid_Sound"),this.InitCommComponent(),this.QueenSeaMap=cc.find("node_pop_ui/map",this.mainPanel).getComponent("TheMermaid_Map"),this.QueenSeaCollectProgress=cc.find("slots/collect_progress",this.mainPanel).getComponent("TheMermaid_MapCollectProgress"),this.QueenSeaStar=cc.find("slots/collect_seaStar",this.mainPanel).getComponent("TheMermaid_StarFish"),this.topCmp=cc.vv.gameData.GetTopScript(),this.bottomCmp=cc.vv.gameData.GetBottomScript(),this.slots=cc.vv.gameData.GetSlotsScript()},onDestroy:function(){window.SlotsFacade=null,this.dm=null},delayTime:function(e){var t=this;return new Promise(function(n,r){t.scheduleOnce(function(){n()},e)})},start:function(){this._super()}}),cc._RF.pop()},{LMSlots_Logic_Base:void 0}],TheMermaid_MapCollectProgress:[function(e,t,n){"use strict";function r(e,t,n,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(a,i){var o=e.apply(t,n);function c(e){r(o,a,i,c,s,"next",e)}function s(e){r(o,a,i,c,s,"throw",e)}c(void 0)})}}cc._RF.push(t,"a29bfMm1A9GiKkCpNvaVV/z","TheMermaid_MapCollectProgress"),cc.Class({extends:cc.Component,properties:{percent:0,_isCollectState:!1,lblCollectNum:cc.Label,progressBar:cc.ProgressBar,spine_renyu:sp.Skeleton,spine_tips:sp.Skeleton,collect_track_particle:cc.Node,spine_progress_complete:sp.Skeleton,spine_progress_coming:sp.Skeleton,spine_progress_add:sp.Skeleton},onLoad:function(){var e=cc.vv.gameData.progressData;this.setProgress(e.needCnt>0?e.totalCnt/e.needCnt:0),this.setCollectNum(e.needCnt-e.totalCnt),this._initListener()},start:function(){this.showCollect(cc.vv.gameData.isOpenCollectProgress())},_initListener:function(){Global.btnClickEvent(cc.find("btnUnlock",this.node),this.onBtnUnlockClicked,this),Global.registerEvent(cc.vv.gameData._EventId.SLOT_TOTALBET_UPDATED,this.onEventTotalbetUpdated,this)},onBtnUnlockClicked:function(){cc.vv.gameData.GetFreeTime()>0||cc.vv.gameData.GetAutoModelTime()>0||this.spine_tips.node.active&&cc.vv.gameData.GetMaxBetIdx()>=cc.vv.gameData.needBet&&(cc.vv.gameData.SetBetIdx(cc.vv.gameData.needBet),cc.vv.gameData._serverRawMult=cc.vv.gameData.needBet,cc.vv.UserManager.setEnterSelectBet(null),cc.vv.gameData.GetSlotsScript()._bottomScript.ShowBetCoin(),Global.dispatchEvent(cc.vv.gameData._EventId.SLOT_TOTALBET_UPDATED,cc.vv.gameData.GetTotalBet()))},setCollectNum:function(e){this.lblCollectNum.string=e.toString()},setBtnsClickEnable:function(e){cc.find("btnMapInfo",this.node).getComponent(cc.Button).interactable=e,cc.find("btnUnlock",this.node).getComponent(cc.Button).interactable=e},onEventTotalbetUpdated:function(e){this.showCollect(cc.vv.gameData.isOpenCollectProgress())},collectEnergy:function(e,t){var n=this;return a(regeneratorRuntime.mark(function r(){var a,i,o,c;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=Math.max(Math.min(t,1),0),Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.collect),a=n.spine_renyu.node.getPosition(),i=[],e.forEach(function(e){var t=n.node.convertToNodeSpaceAR(e),r=cc.instantiate(n.collect_track_particle);r.parent=n.node,r.x=t.x,r.y=t.y,r.active=!0,r.getComponent(cc.ParticleSystem).resetSystem(),i.push(new Promise(function(e){cc.tween(r).to(.5,{x:a.x,y:a.y}).call(function(){r.removeFromParent(),e()}).start()}))}),r.next=7,Promise.all(i);case 7:n.setProgress(t),o=cc.vv.gameData.progressData,c=Math.max(o.needCnt-o.totalCnt,0),n.setCollectNum(c);case 11:case"end":return r.stop()}},r)}))()},showCollect:function(e){var t=this;this._isCollectState!=e&&(e?(Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.unlock),this.spine_tips.node.active=!0,this.spine_tips.setAnimation(0,"animation3",!1),this.spine_tips.setCompleteListener(function(){t.spine_tips.node.active=!1,t.spine_tips.setCompleteListener(null)})):(Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.lock),this.spine_tips.node.active=!0,this.spine_tips.setAnimation(0,"animation2",!0))),this._isCollectState=e},setProgress:function(e){var t=this;this.progressBar.progress=e,e>0?(this.spine_progress_coming.node.x=this.progressBar.node.width*e,this.spine_progress_add.node.x=this.spine_progress_coming.node.x,this.spine_progress_add.node.active=!0,this.spine_progress_add.setAnimation(0,"animation",!1),this.spine_progress_add.setCompleteListener(function(){t.spine_progress_add.node.active=!1,t.spine_progress_add.setCompleteListener(null),1==e&&(t.spine_progress_complete.node.active=!0,t.spine_progress_complete.setAnimation(0,"animation",!1))})):this.spine_progress_coming.node.x=0},onBtnShowInfoClicked:function(){var e=this;cc.vv.gameData.GetFreeTime()>0||cc.vv.gameData.GetAutoModelTime()>0||(Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.common_click),cc.vv.gameData.GetSlotsScript()._bottomScript.SetWin(0),SlotsFacade.QueenSeaMap.enterMap(!0,!0),this.setBtnsClickEnable(!1),this.scheduleOnce(function(){e.setBtnsClickEnable(!0)},1))}}),cc._RF.pop()},{}],TheMermaid_Map:[function(e,t,n){"use strict";function r(e,t,n,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(a,i){var o=e.apply(t,n);function c(e){r(o,a,i,c,s,"next",e)}function s(e){r(o,a,i,c,s,"throw",e)}c(void 0)})}}function i(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=o(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a,i=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function o(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}cc._RF.push(t,"86ed0aPn41J0IT3R48+AU9u","TheMermaid_Map");var s=e("EventDef");s.QUEEN_ENTER_MAP="QUEEN_ENTER_MAP",s.QUEEN_EXIT_MAP="QUEEN_EXIT_MAP";var u={1:{2:[2,[5,6,7,8,9,10,11]],5:[6,[39,38,37,36,35,34,33]],6:[1,[4,3,2,1]]},2:{3:[3,[12,13,14,15,16,17,18]],1:[2,[11,10,9,8,7,6,5]],6:[7,[43,42,41,40]]},3:{4:[4,[19,20,21,22,23,24,25]],2:[3,[18,17,16,15,14,13,12]],6:[8,[47,46,45,44]]},4:{5:[5,[26,27,28,29,30,31,32]],3:[4,[25,24,23,22,21,20,19]],6:[9,[51,50,49,48]]},5:{1:[6,[33,34,35,36,37,38,39]],4:[5,[32,31,30,29,28,27,26]],6:[10,[55,54,53,52]]},6:{1:[1,[1,2,3,4]],2:[7,[40,41,42,43]],3:[8,[44,45,46,47]],4:[9,[48,49,50,51]],5:[10,[52,53,54,55]]}},l=[{idx:1,pointNum:4,lightAnim:"animation1"},{idx:2,pointNum:7,lightAnim:"animation6"},{idx:3,pointNum:7,lightAnim:"animation5"},{idx:4,pointNum:7,lightAnim:"animation4"},{idx:5,pointNum:7,lightAnim:"animation3"},{idx:6,pointNum:7,lightAnim:"animation2"},{idx:7,pointNum:4,lightAnim:"animation7"},{idx:8,pointNum:4,lightAnim:"animation8"},{idx:9,pointNum:4,lightAnim:"animation9"},{idx:10,pointNum:4,lightAnim:"animation10"}],m=[0,1,5,4,3,2],p=e("GlobalVar");p.QUEENOFSEA_SUBGAME={BEKE:1,YELLOW_FISH:2,DICE:3,WHEEL:4,RENYU:5,GOLDSHIP:6},p.QUEENOFSEA_MAP_RTYPE={CHOOSE_SUBGAME:1,COLLECT_WHEEL:2,OPERATE_SUBGAME:3},p.QUEENOFSEA_MAP_STATE={COLLECT_ENERGY:0,CHOOSE_SUBGAME:1,COLLECT_WHEEL:2,ENTER_SUBGAME:3};var f=function(e,t){this.node=e,this.id=t,this.spine=cc.find("spine",e),this.spine_light=cc.find("spine_light",e),this.spine_stroke=cc.find("spine_stroke",e),this.treasurebox_normal=cc.find("treasurebox",e),this.spine_treasurebox=cc.find("spine_treasurebox",e),this.spine_treasurebox.active=!1,this.treasurebox_open=cc.find("treasurebox_open",e),this.treasurebox_open.active=!1,this.isEnabled=!1,this.setClickCallback=function(e){var t=this;Global.btnClickEvent(this.node,function(){Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.common_click),e(t)},this)},this.setEnabled=function(e){this.isEnabled=e,this.setLightActive(e),e&&(this.setGray(!1),this.setStrokeActive(!1))},this.setGray=function(e){var t,n=e?cc.Color.GRAY:cc.Color.WHITE,r=i(this.node.children);try{for(r.s();!(t=r.n()).done;){t.value.color=n}}catch(e){r.e(e)}finally{r.f()}e&&(this.setLightActive(!1),this.setStrokeActive(!1))},this.setLightActive=function(e){this.spine_light.active=e},this.setStrokeActive=function(e){this.spine_stroke.active=e},this.setBoxNormal=function(e){this.treasurebox_normal.active=e,this.treasurebox_open.active=!e}};cc.Class({extends:cc.Component,properties:{_mapNode:null,_mapPathNode:null,_moveUser:null,_islandArr:null,_mapPointArr:null,_curIslandId:0,_mIsLandCallback:null,_isLook:!1},onLoad:function(){var e,t=this,n=i(this.node.children);try{for(n.s();!(e=n.n()).done;){e.value.active=!1}}catch(e){n.e(e)}finally{n.f()}this._mapNode=cc.find("mapMain",this.node),this._mapPathNode=cc.find("nodeMapPath",this._mapNode),this._moveUser=cc.find("theme163_map_user",this._mapPathNode),this._islandArr=[];for(var r=1;r<=6;r++){var a=new f(cc.find("theme163_map_dao"+r,this._mapPathNode),r);this._islandArr.push(a),a.setClickCallback(this.onIslandClicked.bind(this))}this._mapPointArr=[];for(var o=1;o<=10;o++){var c=cc.find("theme163_map_road"+o,this._mapPathNode);c.getComponent(cc.Sprite).enabled=!1,c.getChildByName("spine").active=!1;var s,u=i(c.children);try{for(u.s();!(s=u.n()).done;){var l=s.value;"spine"!=l.name&&(this._mapPointArr[parseInt(l.name.substr(-2,2))]=l)}}catch(e){u.e(e)}finally{u.f()}}Global.btnClickEvent(cc.find("uiChooseIslandSureTips/ui/btnYES",this._mapNode),this.onChooseYES.bind(this),this),Global.btnClickEvent(cc.find("uiChooseIslandSureTips/ui/btnNO",this._mapNode),this.onChooseNO.bind(this),this),Global.btnClickEvent(cc.find("btnHelp",this._mapNode),function(){Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.common_click);var e=cc.find("uiHelp",t._mapNode);e.active=!e.active,e.stopAllActions(),e.runAction(cc.sequence(cc.delayTime(3),cc.callFunc(function(){e.active=!1}))),Global.btnClickEvent(e,function(){Global.SlotsSoundMgr.playEffect(Global.SlotsSoundMgr.common_click),e.stopAllActions(),e.active=!1},t)},this),Global.btnClickEvent(cc.find("backToGame",this._mapNode),function(){t.moveupMap()},this),this._bekeGameCmp=this.addComponent("TheMermaid_subGameBeke"),this._yellowFishGameCmp=this.addComponent("TheMermaid_subGameYellowFish"),this._diceGameCmp=this.addComponent("TheMermaid_subGameDice"),this._multWheelGameCmp=this.addComponent("TheMermaid_subGameMultWheel"),this._renyuGameCmp=this.addComponent("TheMermaid_subGameRenyu"),this._goldShipGameCmp=this.addComponent("TheMermaid_subGameGoldShip"),this._collectWheelCmp=this.addComponent("TheMermaid_subGameCollectWheel"),this.autoAdaptSize()},autoAdaptSize:function(){},start:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.restoreMapByData(),cc.vv.gameData.mapInfo.state!=Global.QUEENOFSEA_MAP_STATE.COLLECT_ENERGY&&e.enterMap(!1,!1);case 2:case"end":return t.stop()}},t)}))()},restoreMapByData:function(){var e=cc.vv.gameData.mapInfo;cc.find("backToGame",this._mapNode).active=this._isLook;for(var t=0;t<6;t++){var n=cc.find("nodePrizePool/complete_island_"+(t+1),this._mapNode);n&&(n.active=!1),this.setIslandTipsActive(t+1,!1),this._islandArr[t].setEnabled(!1),this._islandArr[t].setStrokeActive(!1),this._islandArr[t].setGray(!0)}for(var r in e.completeGame){var a=e.completeGame[r];this._islandArr[a-1].setGray(!1),this._islandArr[a-1].setBoxNormal(!1);var i=cc.find("nodePrizePool/complete_island_"+(parseInt(r)+1),this._mapNode);i.active=!0,i.getComponent(cc.Sprite).spriteFrame=cc.vv.gameData.GetAtlasByName("map").getSpriteFrame("theme163_map_over_sp"+m[a])}e.nextGame>0&&(this._islandArr[e.nextGame-1].setGray(!1),this._islandArr[e.nextGame-1].setStrokeActive(!0));for(var o=1;o<=10;o++)cc.find("theme163_map_road"+o,this._mapPathNode).getComponent(cc.Sprite).enabled=!1;var c=this.getCurRoadNode();c&&(c.getComponent(cc.Sprite).enabled=!0);var s=this.getNextStepNode();s&&!cc.vv.gameData._gameInfo&&(this._moveUser.position=this.convertNodePosToLocalPos(s,this._moveUser.parent))},enterMap:function(e,t){var n=this;return a(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n._isLook=e,n._bTriggerSubGame=!1,Global.dispatchEvent(EventId.QUEEN_ENTER_MAP),n.restoreMapByData(n._isLook),r.abrupt("return",new Promise(function(){var r=a(regeneratorRuntime.mark(function r(a){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!t){r.next=5;break}return r.next=3,n.movedownMap();case 3:r.next=7;break;case 5:n._mapNode.y=0,n._mapNode.active=!0;case 7:if(e){r.next=14;break}return r.next=10,n.nextStep();case 10:return r.next=12,n.showCollectWheel();case 12:return r.next=14,n.exitMap();case 14:a();case 15:case"end":return r.stop()}},r)}));return function(e){return r.apply(this,arguments)}}()));case 5:case"end":return r.stop()}},r)}))()},exitMap:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.moveupMap();case 2:case"end":return t.stop()}},t)}))()},isTriggerSubGame:function(){return this._bTriggerSubGame},nextStep:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=a(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.moveNextStep();case 2:return t.next=4,e.chooseNextSubGame();case 4:return t.next=6,e.triggerSubGame();case 6:n();case 7:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},getCurRoadData:function(){var e=cc.vv.gameData.mapInfo,t=e.prevGame||6,n=e.nextGame;return u[t][n]},getCurRoadNode:function(){var e=this.getCurRoadData(),t=null;return e&&(t=cc.find("theme163_map_road"+e[0],this._mapPathNode)),t},getNextStepNode:function(){var e=cc.vv.gameData.mapInfo,t=this.getCurRoadData();if(0==e.restStep)return 0==e.prevGame&&0==e.nextGame?this._islandArr[Global.QUEENOFSEA_SUBGAME.GOLDSHIP-1].node:this._islandArr[e.nextGame-1].node;var n=t[1];return this._mapPointArr[n[n.length-e.restStep]]},moveNextStep:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=a(regeneratorRuntime.mark(function t(n){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=e.getNextStepNode())){t.next=7;break}return Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.move),t.next=5,e.playActions(e._moveUser,[cc.moveTo(.8,e.convertNodePosToLocalPos(r,e._moveUser.parent))]);case 5:return t.next=7,e.awaitTime(1);case 7:n();case 8:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},convertNodePosToLocalPos:function(e,t){return t.convertToNodeSpaceAR(e.parent.convertToWorldSpaceAR(e.position))},popUIChooseIslandTips:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=a(regeneratorRuntime.mark(function t(n){var r,i,o,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(r=cc.find("uiChooseIslandTips",e._mapNode)).active=!0,t.next=4,e.setUIVisible(cc.find("ui",r),!0);case 4:(i=cc.find("ui/btnLetsGo",r)).off("click"),o=e,c=function(){var e=a(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.common_click),i.stopAllActions(),e.next=4,o.setUIVisible(cc.find("ui",r),!1);case 4:r.active=!1,(t=cc.find("chooseIslandTips",o._mapPathNode)).active=!0,t.stopAllActions(),t.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.5,.9),cc.scaleTo(.2,1),cc.delayTime(2)))),n();case 10:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),cc.vv.gameData.checkAutoPlay(i,c),Global.btnClickEvent(i,a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:c();case 1:case"end":return e.stop()}},e)})),e);case 10:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},findIslandToEnable:function(){var e=cc.vv.gameData.mapInfo,t=e.nextGame||6,n=u[t];for(var r in n){if(!(6===parseInt(r)&&e.completeGame.length<5))this._islandArr[parseInt(r)-1].setEnabled(!0)}},chooseNextSubGame:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=a(regeneratorRuntime.mark(function t(n){var r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(cc.vv.gameData.mapInfo.state==Global.QUEENOFSEA_MAP_STATE.CHOOSE_SUBGAME){for(e.popUIChooseIslandTips(),r=1;r<=10;r++)cc.find("theme163_map_road"+r,e._mapPathNode).getComponent(cc.Sprite).enabled=!1;for(i=0;i<6;i++)e._islandArr[i].setEnabled(!1),e._islandArr[i].setStrokeActive(!1),e._islandArr[i].setGray(!0);e.findIslandToEnable(),e._mIsLandCallback=a(regeneratorRuntime.mark(function t(){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,cc.vv.gameData.reqSubGame(Global.QUEENOFSEA_MAP_RTYPE.CHOOSE_SUBGAME,e._curIslandId);case 2:200===t.sent.code?((r=e.getCurRoadNode()).getComponent(cc.Sprite).enabled=!0,Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.path),e.playSpine(r.getChildByName("spine"),null,l[e.getCurRoadData()[0]-1].lightAnim,!1),n()):AppLog.err("\u8bf7\u6c42\u6570\u636e\u9519\u8bef");case 4:case"end":return t.stop()}},t)}))}else n();case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},triggerSubGame:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=a(regeneratorRuntime.mark(function t(n){var r,a,i,o,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(cc.vv.gameData.mapInfo.state!=Global.QUEENOFSEA_MAP_STATE.ENTER_SUBGAME){t.next=46;break}r=cc.vv.gameData.mapInfo.nextGame,a=!0,t.t0=r,t.next=t.t0===Global.QUEENOFSEA_SUBGAME.BEKE?7:t.t0===Global.QUEENOFSEA_SUBGAME.YELLOW_FISH?10:t.t0===Global.QUEENOFSEA_SUBGAME.DICE?13:t.t0===Global.QUEENOFSEA_SUBGAME.WHEEL?16:t.t0===Global.QUEENOFSEA_SUBGAME.RENYU?19:t.t0===Global.QUEENOFSEA_SUBGAME.GOLDSHIP?22:27;break;case 7:return t.next=9,e.getBekeCmp().enterGame();case 9:return t.abrupt("break",29);case 10:return t.next=12,e.getYellowFishCmp().enterGame();case 12:return t.abrupt("break",29);case 13:return t.next=15,e.getDiceCmp().enterGame();case 15:return t.abrupt("break",29);case 16:return t.next=18,e.getMultWheelCmp().enterGame();case 18:return t.abrupt("break",29);case 19:return t.next=21,e.getRenyuCmp().enterGame();case 21:return t.abrupt("break",29);case 22:return t.next=24,e.getGoldShipCmp().enterGame();case 24:return cc.vv.gameData.mapInfo.completeGame=[],e.restoreMapByData(),t.abrupt("break",29);case 27:return a=!1,t.abrupt("break",29);case 29:if(!a){t.next=46;break}if(e._bTriggerSubGame=!0,i=cc.vv.gameData.mapInfo.completeGame,r!=i[i.length-1]){t.next=44;break}return(o=cc.find("nodePrizePool/complete_island_"+i.length,e._mapNode)).active=!0,o.getComponent(cc.Sprite).spriteFrame=cc.vv.gameData.GetAtlasByName("map").getSpriteFrame("theme163_map_over_sp"+m[r]),c=o.position,o.position=o.parent.convertToNodeSpace(e._mapPathNode.convertToWorldSpace(e._islandArr[r-1].node.position)),Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.map_collect),t.next=41,e.playActions(o,[cc.moveTo(.5,c)]);case 41:return e.playSpine(o.getChildByName("spine"),null,"animation",!1),t.next=44,e.awaitTime(.5);case 44:return t.next=46,e.chooseNextSubGame();case 46:n();case 47:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},showCollectWheel:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=a(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(cc.vv.gameData.mapInfo.state!=Global.QUEENOFSEA_MAP_STATE.COLLECT_WHEEL){t.next=5;break}return t.next=4,e.getCollectWheelCmp().enterGame();case 4:SlotsFacade.QueenSeaCollectProgress.setProgress(0);case 5:n();case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},setUIVisible:function(e,t){var n=this;return a(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise(function(){var r=a(regeneratorRuntime.mark(function r(a){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:e.active==t&&a(),t?(Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.tips),e.scale=0,e.active=t,n.playActions(e,[cc.scaleTo(.3,1.2),cc.scaleTo(.1,1)])):(Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.tips_close),e.scale=1,n.playActions(e,[cc.scaleTo(.1,1.2),cc.scaleTo(.3,0),cc.callFunc(function(){e.active=t})])),a();case 3:case"end":return r.stop()}},r)}));return function(e){return r.apply(this,arguments)}}()));case 1:case"end":return r.stop()}},r)}))()},movedownMap:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.map_open),t.next=3,e.playActions(e._mapNode,[cc.callFunc(function(){e._mapNode.y=(e.node.height+e._mapNode.height)/2}),cc.delayTime(.05),cc.moveTo(.5,cc.v2(0,0))]);case 3:case"end":return t.stop()}},t)}))()},moveupMap:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.map_close),t.next=3,e.playActions(e._mapNode,[cc.callFunc(function(){e._mapNode.y=0}),cc.moveTo(.5,cc.v2(0,(e.node.height+e._mapNode.height)/2)),cc.callFunc(function(){Global.dispatchEvent(EventId.QUEEN_EXIT_MAP)})]);case 3:case"end":return t.stop()}},t)}))()},onIslandClicked:function(e){if(e.isEnabled){this._curIslandId=e.id;for(var t=0;t<6;t++)this._islandArr[t].setEnabled(!1);this._islandArr[this._curIslandId-1].setStrokeActive(!0),cc.find("chooseIslandTips",this._mapPathNode).active=!1,this.setUIChooseIslandSureTipsVisible(!0)}else this.setIslandTipsActive(e.id,!0)},setUIChooseIslandSureTipsVisible:function(e){for(var t=cc.find("uiChooseIslandSureTips",this._mapNode),n=1;n<=6;n++)cc.find("ui/theme163_d_choose_type"+n,t).active=n==this._curIslandId;if(e){var r=cc.find("uiChooseIslandSureTips/ui/btnYES",this._mapNode);r.getComponent(cc.Button).enabled=!0,cc.find("uiChooseIslandSureTips/ui/btnNO",this._mapNode).getComponent(cc.Button).enabled=!0,t.active=e,this.setUIVisible(t.getChildByName("ui"),!0),cc.vv.gameData.checkAutoPlay(r,this.onChooseYES.bind(this))}else this.setUIVisible(t.getChildByName("ui"),!1),t.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){t.active=e})))},onChooseYES:function(){var e=cc.find("uiChooseIslandSureTips/ui/btnYES",this._mapNode);e.getComponent(cc.Button).enabled=!1,cc.find("uiChooseIslandSureTips/ui/btnNO",this._mapNode).getComponent(cc.Button).enabled=!1,e.stopAllActions(),Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.common_click),this.setUIChooseIslandSureTipsVisible(!1),this._mIsLandCallback()},onChooseNO:function(){var e=cc.find("uiChooseIslandSureTips/ui/btnYES",this._mapNode);e.getComponent(cc.Button).enabled=!1,cc.find("uiChooseIslandSureTips/ui/btnNO",this._mapNode).getComponent(cc.Button).enabled=!1,e.stopAllActions(),Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.common_click),this.setUIChooseIslandSureTipsVisible(!1),this.findIslandToEnable(),cc.find("chooseIslandTips",this._mapPathNode).active=!0},setIslandTipsActive:function(e,t){var n=cc.find("islandTips"+e,this._mapPathNode);n.active=t,n.stopAllActions(),n.runAction(cc.sequence(cc.delayTime(3),cc.callFunc(function(){n.active=!1})))},playSpine:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"animation",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e?(e.active=!0,e.getComponent(sp.Skeleton).setAnimation(0,n,r),r||e.getComponent(sp.Skeleton).setCompleteListener(function(){t&&t()})):t&&t()},playActions:function(e,t){return new Promise(function(n){t.push(cc.callFunc(function(){n()})),e.active=!0,e.stopAllActions(),e.runAction(cc.sequence(t))})},awaitTime:function(e){var t=this;return new Promise(function(n){t.scheduleOnce(function(){n()},e)})},getBekeCmp:function(){return this._bekeGameCmp},getYellowFishCmp:function(){return this._yellowFishGameCmp},getDiceCmp:function(){return this._diceGameCmp},getMultWheelCmp:function(){return this._multWheelGameCmp},getGoldShipCmp:function(){return this._goldShipGameCmp},getRenyuCmp:function(){return this._renyuGameCmp},getCollectWheelCmp:function(){return this._collectWheelCmp}}),cc._RF.pop()},{EventDef:void 0,GlobalVar:void 0}],TheMermaid_Pop:[function(e,t,n){"use strict";function r(e,t,n,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(a,i){var o=e.apply(t,n);function c(e){r(o,a,i,c,s,"next",e)}function s(e){r(o,a,i,c,s,"throw",e)}c(void 0)})}}cc._RF.push(t,"78b66KjqNJG1ahuVOGDSS9B","TheMermaid_Pop"),cc.Class({extends:cc.Component,properties:{_showNode:null},onLoad:function(){},showFreeCount:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=a(regeneratorRuntime.mark(function t(n){var r,i,o,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(r=cc.find("free_game_start",e.node)).active=!0,(i=r.getChildByName("ui")).scale=0,i.runAction(cc.sequence(cc.scaleTo(.5,1.2),cc.scaleTo(.2,1))),(o=i.getChildByName("btnStart")).getComponent(cc.Button).enabled=!1,t.next=9,e.delayTime(1);case 9:o.getComponent(cc.Button).enabled=!0,o.off("click"),c=function(){var t=a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o.getComponent(cc.Button).enabled=!1,Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.common_click),i.runAction(cc.sequence(cc.scaleTo(.2,1.2),cc.scaleTo(.5,0))),t.next=5,e.delayTime(1);case 5:r.active=!1,n();case 7:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),cc.vv.gameData.checkAutoPlay(o,c),Global.btnClickEvent(o,a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o.stopAllActions(),e.next=3,c();case 3:case"end":return e.stop()}},e)})),e);case 14:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},showLoadingPage:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.transition_free);var n=cc.find("subGameLoading",e.node);n.active=!0;var r=cc.find("spineNode",n);e.playSpine(r,function(){n.active=!1,t()},"skill")}));case 1:case"end":return t.stop()}},t)}))()},showExtraFreeGameTip:function(){var e=this;return a(regeneratorRuntime.mark(function t(){var n,r,a,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for((n=cc.find("extraFreeGamesTip",e.node)).active=!0,r=1;r<=3;r++)n.getChildByName("tips_"+r).active=!1;return a=Math.min(3,cc.vv.gameData._gameInfo.mapFreeGameData.length),(i=n.getChildByName("tips_"+a)).active=!0,i.scale=0,t.next=9,e.playActions(i,[cc.scaleTo(.3,1.2),cc.scaleTo(.1,1)]);case 9:return t.next=11,e.delayTime(1);case 11:return t.next=13,e.playActions(i,[cc.scaleTo(.1,1.2),cc.scaleTo(.3,0)]);case 13:n.active=!1;case 14:case"end":return t.stop()}},t)}))()},showSttlDialog:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=a(regeneratorRuntime.mark(function t(n){var r,i,o,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(r=cc.find("free_game_win",e.node)).active=!0,(i=r.getChildByName("ui")).scale=0,i.getChildByName("lblWinCoin").getComponent(cc.Label).string="",(o=i.getChildByName("btnCollect")).getComponent(cc.Button).enabled=!1,t.next=9,e.playActions(i,[cc.scaleTo(.3,1.2),cc.scaleTo(.1,1)]);case 9:o.getComponent(cc.Button).enabled=!0,Global.doRoallNumEff(i.getChildByName("lblWinCoin"),0,cc.vv.gameData.GetGameTotalFreeWin(),3,null,null,0,!0),o.off("click"),c=function(){var t=a(regeneratorRuntime.mark(function t(){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o.getComponent(cc.Button).enabled=!1,Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.common_click),a=cc.find("renyu_free_loading",e.node),e.playSpine(a),t.next=6,e.delayTime(.3);case 6:r.active=!1,n();case 8:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),cc.vv.gameData.checkAutoPlay(o,c),Global.btnClickEvent(o,a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o.stopAllActions(),e.next=3,c();case 3:case"end":return e.stop()}},e)})),e);case 15:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},delayTime:function(e){var t=this;return new Promise(function(n,r){t.scheduleOnce(function(){n()},e)})},playSpine:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"animation",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e?(e.active=!0,e.getComponent(sp.Skeleton).setAnimation(0,n,r),r||e.getComponent(sp.Skeleton).setCompleteListener(function(){t&&t()})):t&&t()},playActions:function(e,t){return new Promise(function(n){t.push(cc.callFunc(function(){n()})),e.active=!0,e.runAction(cc.sequence(t))})}}),cc._RF.pop()},{}],TheMermaid_PrizePool:[function(e,t,n){"use strict";cc._RF.push(t,"65c50A++PRN64SMUt4eANR3","TheMermaid_PrizePool"),cc.Class({extends:e("LMSlots_PrizePool_Base"),properties:{},start:function(){var e=this;this._super(),this.scheduleOnce(function(){e.node.y>cc.winSize.height/2&&(e.node.y=cc.winSize.height/2)},0)}}),cc._RF.pop()},{LMSlots_PrizePool_Base:void 0}],TheMermaid_Slots:[function(e,t,n){"use strict";function r(e,t,n,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(a,i){var o=e.apply(t,n);function c(e){r(o,a,i,c,s,"next",e)}function s(e){r(o,a,i,c,s,"throw",e)}c(void 0)})}}function i(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=o(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a,i=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function o(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}cc._RF.push(t,"1f74cg7oHBD2pWRJEsqnAUo","TheMermaid_Slots"),cc.Class({extends:e("LMSlots_Slots_Base"),properties:{_popUIScript:null,_slotsCnt:1,_wildOpacity1_0List:null,_bWildAnimation:!1},onLoad:function(){this._super(),this._scatterTopAniNode=cc.find("scatter_top_ani",this.node)},start:function(){},adaptDifferentScreen:function(){if(!this._isAdapted){this._isAdapted=!0;var e=cc.find("Canvas/safe_node/LMSlots_Top/topBg"),t=e.convertToWorldSpaceAR(cc.v2(0,.5*-e.height)).y,n=cc.find("Canvas/safe_node/slots/reels_bg1"),r=n.convertToWorldSpaceAR(cc.v2(0,2.65*n.height)).y,a=cc.find("Canvas/safe_node/LMSlots_PrizePool_1");a.y=a.parent.convertToNodeSpaceAR(cc.v3(0,r+.5*(t-r),0)).y;var i=cc.find("Canvas/safe_node/LMSlots_PrizePool_1/nodesize"),o=i.convertToWorldSpaceAR(cc.v2(0,.5*i.height)).y,c=cc.find("Canvas/safe_node/spine_logo/nodesize"),s=(c.convertToWorldSpaceAR(cc.v2(0,.5*c.height)).y,cc.find("Canvas/safe_node/spine_logo"));s.y=s.parent.convertToNodeSpaceAR(cc.v3(0,o+.7*c.height,0)).y,cc.find("Canvas/safe_node/spine_logo").active=!1}},RegisterEvent:function(){Global.registerEvent(EventId.QUEEN_ENTER_MAP,this.onRcvEvtEnterMap,this),Global.registerEvent(EventId.QUEEN_EXIT_MAP,this.onRcvEvtExitMap,this)},Init:function(){this._super(),this._popUIScript=cc.find("Canvas/safe_node/node_pop_ui").addComponent("TheMermaid_Pop"),this._slotsCnt=cc.vv.gameData._deskInfo.slotscnt||1,this.showSlots()},getSlotsCount:function(){return this._slotsCnt||1},StartMove:function(){this._bStopRightnow=null,this._gameInfo=null,this._topScript.StartMove(),this.ClearAllTopAni(),cc.vv.gameData.ClearOneRoundData(),this.MoveReels(this.getCurReels()),this._wildOpacity1_0List=null,SlotsFacade.QueenSeaCollectProgress.setBtnsClickEnable(!1),this._stopTime=this.GetStopTime(),SlotsFacade.QueenSeaStar.removeOldWild(),cc.vv.gameData.isFreeGamesTime()||Global.SlotsSoundMgr.playNormalBgm()},ClearAllTopAni:function(){var e,t=i(this.getCurReels());try{for(t.s();!(e=t.n()).done;)for(var n=e.value,r=0;r<this._row;r++){var a=n.GetSymbolByRow(r);a&&(a.ShowNormal(),a.ShowKuang(!1))}}catch(e){t.e(e)}finally{t.f()}this._topAniNode.destroyAllChildren(),this._scatterTopAniNode.destroyAllChildren()},getCurReels:function(){for(var e=[],t=1;t<=this._slotsCnt;t++)for(var n=0;n<5;n++)e.push(this._reels[5*(t-1)+n]);return e},addSlots:function(){this._slotsCnt>=3||(Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.bell),this._slotsCnt+=1,this.showSlots(!0),SlotsFacade.QueenSeaStar.restoreByServerData())},showSlots:function(e){for(var t=1;t<=3;t++)cc.find("reels_bg"+t,this.node).active=!1;for(var n=1;n<=this._slotsCnt;n++)cc.find("reels_bg"+n,this.node).active=!0;var r,a=i(this._reels);try{for(a.s();!(r=a.n()).done;){r.value.node.active=!1}}catch(e){a.e(e)}finally{a.f()}var o,c=i(this.getCurReels());try{for(c.s();!(o=c.n()).done;){o.value.node.active=!0}}catch(e){c.e(e)}finally{c.f()}if(cc.find("collect_progress",this.node).y=cc.find("reels_bg"+this._slotsCnt,this.node).y+170,e){var s=cc.find("spineAddSlots",this.node);s.active=!0,s.position=cc.find("reels_bg"+this._slotsCnt,this.node).position;var u=s.getComponent(sp.Skeleton);u.setAnimation(0,"animation",!1),u.setCompleteListener(function(){s.active=!1})}},ShowWinTrace:function(){if(this._gameInfo){var e=[];if(this._gameInfo.mapFreeGameData&&this._gameInfo.mapFreeGameData.length>0)for(var t in this._gameInfo.mapFreeGameData)for(var n=this._gameInfo.mapFreeGameData[t].traceResult,r=0;r<n.length;r++)for(var a=n[r],i=0;i<a.indexs.length;i++){var o=a.indexs[i],c=(o-1)%5;e[5*Math.floor((o-1)/5)*this._slotsCnt+5*t+c+1]=1}else for(var s=0;s<this._gameInfo.zjLuXian.length;s++)for(var u=this._gameInfo.zjLuXian[s],l=0;l<u.indexs.length;l++)e[u.indexs[l]]=1;for(var m in e){var p=this.GetSymbolByIdx(Number(m));p&&(p.playWinAnimation(),p.ShowKuang())}}},ShowScatterWin:function(){if(this._gameInfo){var e=[];if(this._gameInfo.mapFreeGameData&&this._gameInfo.mapFreeGameData.length>0)for(var t in this._gameInfo.mapFreeGameData){var n=this._gameInfo.mapFreeGameData[t].scatterResult;if(n&&n.indexs)for(var r=0;r<n.indexs.length;r++){var a=n.indexs[r],i=(a-1)%5;e[5*Math.floor((a-1)/5)*this._slotsCnt+5*t+i+1]=1}}else if(this._gameInfo.scatterZJLuXian&&this._gameInfo.scatterZJLuXian.indexs)for(var o=0;o<this._gameInfo.scatterZJLuXian.indexs.length;o++){e[this._gameInfo.scatterZJLuXian.indexs[o]]=1}var c=cc.vv.gameData.getGameCfg();for(var s in e){var u=this.GetSymbolByIdx(Number(s));if(u){var l=cc.instantiate(u.node).getComponent(c.scripts.Symbols);l.node.parent=this._scatterTopAniNode,l.node.active=!0,l.node.position=this._scatterTopAniNode.convertToNodeSpaceAR(u.node.convertToWorldSpaceAR(cc.v2(0,0))),l.setTopAniNode(this._scatterTopAniNode),l.playWinAnimation(),u._showNode.active=!1}}}},SetSlotsResult:function(e){var t=e.resultCards;if(e.mapFreeGameData&&e.mapFreeGameData.length>0){t=[];for(var n=0;n<this._row;n++){var r,a=i(e.mapFreeGameData);try{for(a.s();!(r=a.n()).done;)for(var o=r.value,c=0;c<5;c++)t.push(o.cards[5*n+c])}catch(e){a.e(e)}finally{a.f()}}}for(var s=[],u=5*this._slotsCnt,l=0;l<t.length;l++){Math.floor(l/u);var m=l%u;if(this._cfg.symbol[t[l]]){var p={};p.sid=t[l],p.data=this.GetBonusData(p.sid,m),s[m]||(s[m]=[]),s[m].unshift(p)}}for(var f=0;f<5*this._slotsCnt;f++){var d=this._reels[f],h=s[f];d.SetResult(h)}},GetBonusData:function(e,t){if(13==e)return{bPlayEff:!0}},onMsgSpine:function(e){this._gameInfo=e,this.SetSlotsResult(e);var t=e.resultCards;e.mapFreeGameData&&e.mapFreeGameData.length>0&&(t=e.mapFreeGameData[0].cards),this.SetReelStateInfo(t)},GetSymbolByIdx:function(e){var t=5*this._slotsCnt,n=(e-1)%t,r=this._row-Math.floor((e-1)/t)-1;return this._reels[n].GetSymbolByRow(r)},showCollectEnegy:function(){var e=this;return new Promise(function(){var t=a(regeneratorRuntime.mark(function t(n){var r,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=cc.vv.gameData.progressData)){t.next=7;break}if(a=[],e._reels.forEach(function(t){if(t.node.active)for(var n=0;n<e._row;n++){var r=t.GetSymbolByRow(n);r.GetShowId()==cc.vv.gameData.getGameCfg().collectId&&a.push(r.node.parent.convertToWorldSpaceAR(r.node.position))}}),!(a.length>0)){t.next=7;break}return t.next=7,SlotsFacade.QueenSeaCollectProgress.collectEnergy(a,r.totalCnt/r.needCnt);case 7:n();case 8:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())},OnReelSpinEnd:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){var r,a,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e+1,a=Math.floor(r/5),!((i=r%5-2)>=0&&t.isExistBonusSymbolOfReel(r))){n.next=8;break}return t._bWildAnimation=!0,n.next=7,t.awaitTime(.75);case 7:SlotsFacade.QueenSeaStar.playWildReel(a,i,Global.WILD_ANIMTION.OPACITY_0_1,!1,function(){SlotsFacade.QueenSeaStar.playWildReel(a,i,Global.WILD_ANIMTION.NOMARL_LOOP,!0)});case 8:case"end":return n.stop()}},n)}))()},isExistBonusSymbolOfReel:function(e){var t=!1,n=this._reels[e];if(n){var r,a=i(n._originResult);try{for(a.s();!(r=a.n()).done;){var o=r.value;if(o&&13==o.sid){t=!0;break}}}catch(e){a.e(e)}finally{a.f()}}return t},isExistSpecialSymbolOfReel:function(e){var t=!1,n=this._reels[e];if(n){var r,a=i(n._originResult);try{for(a.s();!(r=a.n()).done;){var o=r.value;if(o&&(2==o.sid||13==o.sid)){t=!0;break}}}catch(e){a.e(e)}finally{a.f()}}return t},SetReelStateInfo:function(e){var t=this;if(this._cfg.reelStateInfo){for(var n=[],r=0;r<e.length;r++){var a=e[r],o=r%5;n[o]||(n[o]=[]),n[o].push(a)}var c,s=i(this._cfg.reelStateInfo);try{var u=function(){var e=c.value,r=Global.copy(e);r.isStop=!1,r.isAnt=!1;for(var a=r.mini,i=Global.copy(r.counts),o=0,s=0;s<n.length;s++){var u=t._reels[s],l=n[s];r.isStop=!1,r.isAnt=!1,o>=a-1&&r.counts[s]>0&&(r.isAnt=!0);var m=l.reduce(function(e,t){return r.id.includes(t)?e+1:e+0},0);o+=m,i.shift();var p=(i.length>0?i.reduce(function(e,t){return e+t}):0)+o;m>0&&p>=a&&(r.isStop=!0),u.AddReelStateInfo(Global.copy(r))}};for(s.s();!(c=s.n()).done;)u()}catch(e){s.e(e)}finally{s.f()}}},DoCheckReelAnti:function(e){if(!this._bStopRightnow)for(var t=!1,n=0;n<5*this._slotsCnt;n++){var r=this._reels[n].GetReelIdx();if(r==e+1){t=this._reels[n].playAntiAnimation();var a=e+1;Math.floor(a/5)}if(r>e&&t){var i=cc.vv.gameData.getGameCfg().AddAntiTime||1;this._reels[n].AddDelayTime(i)}}},OnSpinEnd:function(){var e=this;return a(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=i(e._reels);try{for(n.s();!(r=n.n()).done;)r.value.ShowAntiEffect(!1)}catch(e){n.e(e)}finally{n.f()}if(!e._bWildAnimation){t.next=6;break}return e._bWildAnimation=!1,t.next=6,e.awaitTime(.75);case 6:if(e._bottomScript.ShowBtnsByState("moveing_1"),!cc.vv.gameData.isOpenCollectProgress()){t.next=10;break}return t.next=10,e.showCollectEnegy();case 10:return e.ShowWinTrace(),t.next=13,e.playBottomWin();case 13:if(!e.CheckTriggerMapSubGame()){t.next=24;break}return t.next=16,e.awaitTime(.5);case 16:return e._isSpinEndEnterMap=!0,e._bottomScript.SetWin(0),t.next=20,SlotsFacade.QueenSeaMap.enterMap(!1,!0);case 20:if(!SlotsFacade.QueenSeaMap.isTriggerSubGame()){t.next=23;break}return t.next=23,e.playBottomWin(e._bottomScript.getCurrentWin());case 23:cc.vv.gameData.isFreeGamesTime()&&e._bottomScript.SetWin(cc.vv.gameData.GetGameTotalFreeWin());case 24:if(!e.CheckEnterFreeGame()){t.next=38;break}return Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.bell),e.ShowScatterWin(),t.next=29,e.awaitTime(2);case 29:return Global.SlotsSoundMgr.stopBgm(),Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.free_dialog_start_show),t.next=33,e._popUIScript.showFreeCount();case 33:return e.scheduleOnce(function(){SlotsFacade.QueenSeaStar.Init(),e.showFreeGames(),e.Backup()},.5),t.next=36,e._popUIScript.showLoadingPage();case 36:t.next=60;break;case 38:if(!e.CheckFreeGameFinish()){t.next=50;break}return Global.SlotsSoundMgr.stopBgm(),Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.free_dialog_collect_show),t.next=43,e._popUIScript.showSttlDialog();case 43:return e.scheduleOnce(function(){e.ClearAllTopAni(),e._slotsCnt=1,e.showSlots(!1),e.showFreeGames(),Global.SlotsSoundMgr.stopBgm(),e.Resume(),cc.vv.gameData._gameInfo.slotscnt=e._slotsCnt,SlotsFacade.QueenSeaStar.restoreByServerData()},.5),t.next=46,e._popUIScript.showLoadingPage();case 46:return t.next=48,e.playBottomWin(null,!0);case 48:t.next=60;break;case 50:if(!cc.vv.gameData._gameInfo.slotsadd){t.next=60;break}return Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.free_dialog_more_show),e.ShowScatterWin(),t.next=55,e.awaitTime(.5);case 55:return t.next=57,e._popUIScript.showExtraFreeGameTip();case 57:return e.addSlots(),t.next=60,e.awaitTime(1.5);case 60:SlotsFacade.QueenSeaCollectProgress.setBtnsClickEnable(!0),e.CanDoNextRound();case 62:case"end":return t.stop()}},t)}))()},playBottomWin:function(e,t){var n=this;return a(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise(function(r){var i=e||cc.vv.gameData.GetGameWin(),o=i,c=!0;!e&&cc.vv.gameData.GetTotalFree()>0&&cc.vv.gameData.GetTotalFree()!=cc.vv.gameData.GetFreeTime()&&(o=cc.vv.gameData.GetGameTotalFreeWin(),c=0==cc.vv.gameData.GetFreeTime()),t&&(o=i=cc.vv.gameData.GetGameTotalFreeWin(),c=!0),i>0?n.ShowBottomWin(i,o,c,a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r();case 1:case"end":return e.stop()}},e)}))):r()}));case 1:case"end":return r.stop()}},r)}))()},awaitTime:function(e){var t=this;return new Promise(function(n){t.scheduleOnce(function(){n()},e)})},CheckSpecialReward:function(){return this.CheckEnterFreeGame()||this.CheckFreeGameFinish()||this.CheckTriggerMapSubGame()||this.CheckSeaStarShow()},CheckEnterFreeGame:function(){return cc.vv.gameData.isTriggerFreeGames()},CheckFreeGameFinish:function(){return cc.vv.gameData.isFinishFreeGames()},CheckTriggerMapSubGame:function(){return cc.vv.gameData.isEnterMapGames()},CheckSeaStarShow:function(){return SlotsFacade.QueenSeaStar.isPlayAnimtion()},ShowTranstion:function(e){var t=cc.find("Canvas/safe_node/translate_node");t.active=!0,t.getComponent(sp.Skeleton).setAnimation(0,"animation",!1);this.scheduleOnce(function(){e&&e()},.5)},ReconnectShow:function(){var e=this;this.CheckTriggerMapSubGame()||this.showFreeGames()&&(this._bottomScript.ShowBtnsByState("moveing_1"),this.scheduleOnce(function(){e.CanDoNextRound()},1))},showFreeGames:function(){var e=cc.vv.gameData.GetTotalFree(),t=cc.vv.gameData.GetFreeTime();if(t>0){Global.SlotsSoundMgr.stopBgm(),Global.SlotsSoundMgr.playBgm(SlotsFacade.soundMgr.freegame_bgm),this._bottomScript.ShowFreeModel(!0,e-t,e);var n=cc.vv.gameData.GetTotalFreeWin();return n>0&&this._bottomScript.SetWin(n),this._ShowGameBg(!0),!0}return cc.vv.gameData.SetTotalFree(0),this._bottomScript.ShowFreeModel(!1),this._ShowGameBg(!1),!1},_ShowGameBg:function(e){var t=cc.find("Canvas/safe_node/spr_bg_normal"),n=cc.find("Canvas/safe_node/spr_bg_free");t.active=!e,n.active=e},onRcvEvtEnterMap:function(){this._bottomScript.ShowBtnsByState("moveing_1"),this._topScript.SetBackLobby(!1)},onRcvEvtExitMap:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e._isSpinEndEnterMap){t.next=6;break}if(e.showFreeGames(),!SlotsFacade.QueenSeaMap.isTriggerSubGame()){t.next=5;break}return t.next=5,e.playBottomWin(e._bottomScript.getCurrentWin());case 5:e.CanDoNextRound();case 6:e._isSpinEndEnterMap=!1,e._bottomScript.ShowBtnsByState("idle"),e._topScript.SetBackLobby(!0);case 9:case"end":return t.stop()}},t)}))()}}),cc._RF.pop()},{LMSlots_Slots_Base:void 0}],TheMermaid_Sound:[function(e,t,n){"use strict";cc._RF.push(t,"3565409ICFMQaTDLH8KXcva","TheMermaid_Sound"),cc.Class({extends:cc.Component,properties:{_soundPath:"games/TheMermaid/",base_bgm:"base_bgm",bell:"bell",bonus_collect:"bonus_collect",collect:"collect",common_click:"common_click",lock:"lock",unlock:"unlock",symbol_bonus:"symbol_bonus",symbol_scatter:"symbol_scatter",reel_notify:"reel_notify",reel_stop:"reel_stop",reel_up:"reel_up",scatter_notify:"symbol_scatter",win1:"win1",win1end:"win1end",win2:"win2",win2end:"win2end",transition_free:"transition_free",wild_weng:"wild_weng",freegame_bgm:"free_bgm",free_dialog_collect_show:"free_dialog_collect_show",free_dialog_more_show:"free_dialog_more_show",free_dialog_start_show:"free_dialog_start_show",map_close:"map_close",map_collect:"map_collect",map_open:"map_open",path:"path",tips:"tips",tips_close:"tips_close",move:"move",dead:"dead",select1:"select1",select2:"select2",select3:"select3",select4:"select4",select5:"select5",shanhu_result:"shanhu_result",shanhu_show:"shanhu_show",fly_mul:"fly_mul",zhuanpan_show:"zhuanpan_show",island_wheel:"island_wheel",touzi_extra:"touzi_extra",touzi_fly:"touzi_fly",touzi_select:"select4",wheel:"wheel",wheel_click:"wheel_click",wheel_in:"wheel_in",wheel_stop:"wheel_stop"},onLoad:function(){}}),cc._RF.pop()},{}],TheMermaid_StarFish:[function(e,t,n){"use strict";function r(e,t,n,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(a,i){var o=e.apply(t,n);function c(e){r(o,a,i,c,s,"next",e)}function s(e){r(o,a,i,c,s,"throw",e)}c(void 0)})}}function i(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=o(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a,i=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function o(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}cc._RF.push(t,"9cfc9nIQ3NKEZTYO6/pATk2","TheMermaid_StarFish");var s={APPEAR:1,OPACITY_0_1:2,NOMARL_LOOP:3,OPACITY_1_0:4,DISAPPEAR:5};e("GlobalVar").WILD_ANIMTION=s,cc.Class({extends:cc.Component,properties:{_starList:null,_wildSlotsList:null,_spineFlyStar:null,_spineStarFire:null,_particleFly:null},onLoad:function(){this._starList=[];for(var e=1;e<=6;e++){var t=Math.floor((e-1)/2);this._starList[t]=this._starList[t]||[];var n=cc.find("theme163_collect_2_3_"+e,this.node);n.active=!1,this._starList[t].push(n),cc.find("spineFire",n).active=!1}this._wildSlotsList=[];for(var r=1;r<=3;r++){var a=cc.find("slots"+r,this.node);a.active=!0;for(var i=[],o=1;o<=3;o++){var c=cc.find("spineReelWildFrame"+o,a);c.active=!1,i.push(c)}for(var s=[],u=1;u<=3;u++){var l=cc.find("spineReelWild"+u,a);l.active=!1,s.push(l)}this._wildSlotsList.push({node:a,wildFrameList:i,wildList:s})}this._spineFlyStar=cc.find("spineFlySeaStar",this.node),this._spineFlyStar.active=!1,this._spineStarFire=cc.find("spineSeaStarFire",this.node),this._spineStarFire.active=!1,this._particleFly=cc.find("particleFly",this.node),this._particleFly.active=!1},start:function(){this.restoreByServerData()},Init:function(){var e,t=i(this._starList);try{for(t.s();!(e=t.n()).done;){var n,r=i(e.value);try{for(r.s();!(n=r.n()).done;){n.value.active=!1}}catch(e){r.e(e)}finally{r.f()}}}catch(e){t.e(e)}finally{t.f()}var a,o=i(this._wildSlotsList);try{for(o.s();!(a=o.n()).done;){var c,s=a.value,u=i(s.wildFrameList);try{for(u.s();!(c=u.n()).done;){c.value.active=!1}}catch(e){u.e(e)}finally{u.f()}var l,m=i(s.wildList);try{for(m.s();!(l=m.n()).done;){l.value.active=!1}}catch(e){m.e(e)}finally{m.f()}}}catch(e){o.e(e)}finally{o.f()}},restoreByServerData:function(){this.Init()},isPlayAnimtion:function(){var e=cc.vv.gameData.wildCols;return!!(e&&e.length>0)},removeOldWild:function(){var e=this;return a(regeneratorRuntime.mark(function t(){var n,r,a,o,c,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=!1,r=i(e._wildSlotsList);try{for(r.s();!(a=r.n()).done;)for(o=a.value,c=function(t){var r=o.wildList[t];r.active&&(n=!0,o.wildFrameList[t].active=!1,e.playSpine(r,function(){r.active=!1},"animation"+s.DISAPPEAR,!1))},u=0;u<o.wildList.length;u++)c(u)}catch(e){r.e(e)}finally{r.f()}if(!n){t.next=6;break}return t.next=6,e.awaitTime(1);case 6:case"end":return t.stop()}},t)}))()},showNewWild:function(){var e=this;return a(regeneratorRuntime.mark(function t(){var n,r,a,o,c,u,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!cc.vv.gameData._gameInfo){t.next=11;break}if(n=cc.vv.gameData.starFishInfo,!(r=n.currWildCols)||!r.length){t.next=11;break}Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.reel_up),a=cc.vv.gameData.GetSlotsScript().getSlotsCount(),o=[],c=i(r);try{for(l=function(){for(var t=u.value-3,n=function(n){e.playWildReel(n,t,s.APPEAR,!1,function(){e._wildSlotsList[n].wildFrameList[t].active=!1,e.playWildReel(n,t,s.NOMARL_LOOP,!0)})},r=0;r<a;r++)n(r)},c.s();!(u=c.n()).done;)l()}catch(e){c.e(e)}finally{c.f()}return t.next=11,e.playNewWildFrame(o);case 11:case"end":return t.stop()}},t)}))()},playStarFish:function(e){var t=this;return a(regeneratorRuntime.mark(function e(){var n,r,a,o,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=cc.vv.gameData.wildCols)&&n.length>0)){e.next=7;break}r=[],a=i(n);try{for(a.s();!(o=a.n()).done;)c=o.value,r.push(c-3)}catch(e){a.e(e)}finally{a.f()}return e.next=7,t.flyParticleToRenyuHand(r);case 7:case"end":return e.stop()}},e)}))()},playNewWildFrame:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){var r,a,o,c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(AppLog.warn("SlotsFacade.QueenSeaStar:  playNewWildFrame1"),!(e&&e.length>0)){n.next=8;break}AppLog.warn("SlotsFacade.QueenSeaStar:  playNewWildFrame2"),r=[],a=i(e);try{for(a.s();!(o=a.n()).done;)c=o.value,r.push(t._playWildFrame(c.slotIdx,c.colIdx))}catch(e){a.e(e)}finally{a.f()}return n.next=8,Promise.all(r);case 8:case"end":return n.stop()}},n)}))()},_playWildFrame:function(e,t){var n=this;return new Promise(function(r){n.playSpine(n._wildSlotsList[e].wildFrameList[t],function(){r()})})},playWildReel:function(e,t,n,r,a){(n!=s.DISAPPEAR&&n!=s.OPACITY_1_0||this._wildSlotsList[e].wildList[t].active)&&this.playSpine(this._wildSlotsList[e].wildList[t],a,"animation"+n,r)},collectStar:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){var r,a,o,c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(e&&e.length>0)){n.next=7;break}Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.bonus_collect),r=[],a=i(e);try{for(a.s();!(o=a.n()).done;)c=o.value,r.push(t._flyStar(t.convertNodePosToLocalPos(c.node,t.node),c.colIdx))}catch(e){a.e(e)}finally{a.f()}return n.next=7,Promise.all(r);case 7:case"end":return n.stop()}},n)}))()},flyParticleToRenyuHand:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){var r,a,o,c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(!cc.vv.gameData.isFreeGamesTime()&&e&&e.length>0)){n.next=9;break}r=[],a=i(e);try{for(a.s();!(o=a.n()).done;)c=o.value,r.push(t._flyParticleToRenyuStarFire(c))}catch(e){a.e(e)}finally{a.f()}return n.next=6,Promise.all(r);case 6:return t.playSpine(t._spineStarFire,function(){t._spineStarFire.active=!1}),n.next=9,t.awaitTime(1);case 9:case"end":return n.stop()}},n)}))()},_flyStar:function(e,t){var n=this;return new Promise(function(r){var a=n._starList[t][0];a.active&&(a=n._starList[t][1]);var i=n.convertNodePosToLocalPos(a,n.node),o=cc.instantiate(n._spineFlyStar);o.parent=n.node,o.position=e,o.active=!0,cc.tween(o).to(1,{x:i.x,y:i.y},{easing:"backInOut"}).call(function(){a.active=!0;var e=a.getChildByName("spineFire");n.playSpine(e,function(){e.active=!1,r()})}).removeSelf().start()})},_flyParticleToRenyuStarFire:function(e){var t=this;return new Promise(function(n){var r=t._wildSlotsList[0].wildFrameList[e],a=t.convertNodePosToLocalPos(r,t.node);a.y+=120;var i=cc.find("Canvas/safe_node/slots/spine_role/handStar"),o=t.convertNodePosToLocalPos(i,t.node),c=cc.instantiate(t._particleFly);c.parent=t.node,c.position=a,c.active=!0,c.getComponent(cc.ParticleSystem).resetSystem(),cc.tween(c).to(.5,{x:o.x,y:o.y}).call(function(){c.removeFromParent(),n()}).start()})},convertNodePosToLocalPos:function(e,t){return t.convertToNodeSpaceAR(e.parent.convertToWorldSpaceAR(e.position))},playSpine:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"animation",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e?(e.active=!0,e.getComponent(sp.Skeleton).setAnimation(0,n,r),r||e.getComponent(sp.Skeleton).setCompleteListener(function(){t&&t()})):t&&t()},awaitTime:function(e){var t=this;return new Promise(function(n){t.scheduleOnce(function(){n()},e)})}}),cc._RF.pop()},{GlobalVar:void 0}],TheMermaid_Symbol:[function(e,t,n){"use strict";cc._RF.push(t,"06c967OrxtIvYBUVeH6FYJF","TheMermaid_Symbol"),cc.Class({extends:e("LMSlots_Symbol_Base"),properties:{},GetKuangShowParent:function(){return cc.find("Canvas/safe_node/slots/scatter_top_ani")},playStopAnimation:function(){var e=this,t=this._id,n=cc.vv.gameData.getGameCfg();if(n.symbol[t]&&n.symbol[t].win_node&&n.symbol[t].stop_ani&&(this._state="stop",this._showNode&&(this._showNode.active=!1),this._showNode=cc.find(n.symbol[t].win_node,this.node),this._showNode.active=!0,""!=n.symbol[t].stop_ani.name)){this.node.zIndex=n.symbol[t].stop_ani.zIndex-this._symbolIdx+10*this._reelIdx;var r=this._showNode.getComponent(sp.Skeleton);r&&(r.setAnimation(0,n.symbol[t].stop_ani.name,!1),r.setCompleteListener(function(){13==e._id&&e._data&&e._data.bPlayEff&&e.playWinAnimation(),r.setCompleteListener(null)}))}},setTopAniNode:function(e){this._topAniNode=e}}),cc._RF.pop()},{LMSlots_Symbol_Base:void 0}],TheMermaid_subGameBase:[function(e,t,n){"use strict";function r(e,t,n,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(a,i){var o=e.apply(t,n);function c(e){r(o,a,i,c,s,"next",e)}function s(e){r(o,a,i,c,s,"throw",e)}c(void 0)})}}cc._RF.push(t,"d933cfKT31PjrWstm/B1scz","TheMermaid_subGameBase"),cc.Class({extends:cc.Component,properties:{_soundPath:"games/TheMermaid/",_subGameNodeName:"subGame____",_subGameNode:null,_spineNodeLoading:null,_node_start:null,_node_main:null,_node_win:null,machine:{default:null,visible:!1}},onLoad:function(){this._subGameNode=cc.find(this._subGameNodeName,this.node),this._spineNodeLoading=cc.find("spineNodeLoading",this._subGameNode),this._node_start=cc.find("node_start",this._subGameNode),this._node_main=cc.find("node_main",this._subGameNode),this._node_win=cc.find("node_win",this._subGameNode),this._subGameNode.active=!1,this._spineNodeLoading.active=!1,this._node_start.active=!1,this._node_main.active=!1,this._node_win.active=!1},enterGame:function(e){return a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))()},exitGame:function(){return a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))()},showStart:function(){return a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))()},showMain:function(){return a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))()},showResult:function(){return a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))()},playFullScreen:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.setFullScreenVisible(!0),t.playSpine(t._spineNodeLoading),n.next=4,t.awaitTime(e||1);case 4:t.setFullScreenVisible(!1);case 5:case"end":return n.stop()}},n)}))()},setFullScreenVisible:function(e){this._spineNodeLoading.active=e},setSubGameNodeVisible:function(e){this._subGameNode.active=e,e||(this._node_start.active=!1,this._node_main.active=!1,this._node_win.active=!1)},convertNumToShortStr:function(e){return Global.convertNumToShort(e,1e3,1,["","K","M","B","T","Q"])},rollToNumOfLabel:function(e,t){var n=this,r=100,a=t/r;a<0&&(a=1,r=Math.floor(t));for(var i=[],o=0;o<r;o++)i.push(a*o);i.push(t);var c=0;e.runAction(cc.repeatForever(cc.sequence(cc.callFunc(function(){c<i.length?(e.getComponent(cc.Label).string=n.convertNumToShortStr(i[c]),c++):(e.stopAllActions(),e.getComponent(cc.Label).string=n.convertNumToShortStr(t))}),cc.delayTime(.03))))},setLabel:function(e,t){e&&(e.getComponent(cc.Label).string=t)},playSpine:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"animation",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e?(e.active=!0,e.getComponent(sp.Skeleton).setAnimation(0,n,r),r||e.getComponent(sp.Skeleton).setCompleteListener(function(){t&&t()})):t&&t()},playActions:function(e,t){return new Promise(function(n){t.push(cc.callFunc(function(){n()})),e.active=!0,e.runAction(cc.sequence(t))})},awaitTime:function(e){var t=this;return new Promise(function(n){t.scheduleOnce(function(){n()},e)})}}),cc._RF.pop()},{}],TheMermaid_subGameBeke:[function(e,t,n){"use strict";function r(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=a(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(c)throw i}}}}function a(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t,n,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var i=e.apply(t,n);function c(e){o(i,r,a,c,s,"next",e)}function s(e){o(i,r,a,c,s,"throw",e)}c(void 0)})}}cc._RF.push(t,"ea9e1bPlz5GwKsAuXbHmJ9P","TheMermaid_subGameBeke");var s=["death",16,36,60,180,600,"win_all"],u={0:0,16:1,36:2,60:3,180:4,600:5,"-1":6};cc.Class({extends:e("TheMermaid_subGameBase"),properties:{_subGameNodeName:"subGameBeke",_lblStartPrize:null,_lblPickMult:null,_sprPickTips:null,_bekeLayerListNode:null,_pickLeftNum:5,_pickMultNum:0},onLoad:function(){var e=this;return c(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e._super(),e._lblStartPrize=cc.find("nodePrizePool/theme163_game_c_2/lblStartPrize",e._node_main),e._lblPickMult=cc.find("nodePrizePool/theme163_game_c_3/lblPickMult",e._node_main),e._sprPickTips=cc.find("nodeList/theme163_game4_5/theme163_game4_1",e._node_main),e._bekeLayerListNode=cc.find("nodeList/list",e._node_main),e.init();case 6:case"end":return t.stop()}},t)}))()},init:function(){this.setLabel(this._lblPickMult,this._pickMultNum?this._pickMultNum+"X":""),this.resetAllLayer()},restoreByData:function(){var e=cc.vv.gameData.mapInfo.gameInfo;for(var t in this._subGameNode.active=!0,this.setLabel(this._lblPickMult,e.mult+"X"),this._pickLeftNum=5-e.layerChoiceId.length,e.layerItemList){var n=this.getLayer(parseInt(t)+1);this.showLayerRestItems(n,e.layerChoiceId[t],e.layerItemList[t]),this.setItemGray(n.getChildByName("item"+e.layerChoiceId[t]),!1)}},enterGame:function(){var e=this;return c(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=cc.vv.gameData.mapInfo.gameInfo,e._pickLeftNum=n.times||5,e._pickMultNum=n.mult,e.setLabel(e._lblStartPrize,Global.FormatNumToComma(n.startPrize)),e.init(),t.abrupt("return",new Promise(function(){var t=c(regeneratorRuntime.mark(function t(r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n.mult>0)){t.next=4;break}e.restoreByData(),t.next=6;break;case 4:return t.next=6,e.showStart();case 6:return t.next=8,e.showMain();case 8:return t.next=10,e.showResult();case 10:return t.next=12,e.exitGame();case 12:r();case 13:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 6:case"end":return t.stop()}},t)}))()},exitGame:function(){var e=this;return c(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=c(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.playFullScreen(1);case 2:e.setSubGameNodeVisible(!1),n();case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},showStart:function(){var e=this;return c(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=c(regeneratorRuntime.mark(function t(n){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._subGameNode.active=!0,e._node_start.active=!0,e._node_start.scale=0,t.next=5,e.playActions(e._node_start,[cc.scaleTo(.35,1.5),cc.scaleTo(.15,1.3)]);case 5:r=function(){Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.common_click),e.playActions(e._node_start,[cc.scaleTo(.15,1.5),cc.scaleTo(.35,0)]),n()},cc.vv.gameData.checkAutoPlay(e._node_start.getChildByName("btnStart"),r),Global.btnClickEvent(e._node_start.getChildByName("btnStart"),function(){e._node_start.getChildByName("btnStart").stopAllActions(),r()},e);case 8:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},showMain:function(){var e=this;return c(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=c(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(cc.vv.gameData.mapInfo.gameInfo.mult<=0)){t.next=4;break}return t.next=4,e.playFullScreen(.5);case 4:return e._node_start.active=!1,e._node_main.active=!0,t.next=8,e.awaitTime(.2);case 8:return t.next=10,e.awaitOrOperate();case 10:return e.setPlayPickTipsAction(!1),t.next=13,e.awaitTime(1);case 13:n();case 14:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},setPlayPickTipsAction:function(e){e?(this._sprPickTips.scale=1,this._sprPickTips.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.5,.9),cc.scaleTo(.2,1),cc.delayTime(2))))):(this._sprPickTips.stopAllActions(),this._sprPickTips.scale=1)},resetLayer:function(e){e.getChildByName("select").active=!1;for(var t=1;t<=5;t++){var n=e.getChildByName("item"+t);n.getComponent(cc.Button).enabled=!1,this.playSpine(n,null,"animation1",!1),n.getChildByName("mult").active=!1,this.playSpine(n.getChildByName("spine"),null,"animation2",!1),this.setItemGray(n,!0)}},resetAllLayer:function(){for(var e=1;e<=5;e++)this.resetLayer(this.getLayer(e))},setLayerEnable:function(e,t,n){e.getChildByName("select").active=t,t&&this.setLayerGray(e,!1);for(var r=1;r<=5;r++){var a=e.getChildByName("item"+r);a.getComponent(cc.Button).enabled=t,r!=n&&(this.playSpine(a,null,t?"animation1":"animation2",!1),this.playSpine(a.getChildByName("spine"),null,"animation2",!1))}},setLayerGray:function(e,t,n){for(var r=1;r<=5;r++){var a=e.getChildByName("item"+r);r===n?this.setItemGray(a,!t):this.setItemGray(a,t)}},getLayer:function(e){return this._bekeLayerListNode.getChildByName("cell_"+e)},getLayerIdxEnable:function(){return 5-this._pickLeftNum+1},getLayerItemList:function(e){return e.layerItemList[e.layerId-1]},getMultIdByData:function(e){var t=e.layerChoiceId[e.layerId-1];return this.getLayerItemList(e)[t-1]},showLayerRestItems:function(e,t,n){for(var r in n){var a=e.getChildByName("item"+(parseInt(r)+1)),i=a.getChildByName("mult");i.active=!0,i.getComponent(cc.Sprite).spriteFrame=cc.vv.gameData.GetAtlasByName("game4_shell").getSpriteFrame("theme163_game4_result_"+s[u[n[r]]]),parseInt(r)+1===t&&this.playSpine(a.getChildByName("spine"),null,"animation4",!1)}},playShowLayerRestItems:function(e,t,n){for(var r=1;r<=5;r++){var a=e.getChildByName("item"+r);if(r!==t){var i=a.getChildByName("mult");i.active=!0,i.getComponent(cc.Sprite).spriteFrame=cc.vv.gameData.GetAtlasByName("game4_shell").getSpriteFrame("theme163_game4_result_"+s[u[n[r-1]]]),this.playActions(a,[cc.scaleTo(.3,1.2),cc.scaleTo(.1,1)])}}},awaitOrOperate:function(){var e=this;return c(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=c(regeneratorRuntime.mark(function t(n,r){var a,i,o,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(e.setPlayPickTipsAction(!0),e.setLayerEnable(e.getLayer(e.getLayerIdxEnable()),!0),a=1;a<=5;a++)for(i=e.getLayer(a),o=function(t){var a=i.getChildByName("item"+t);a.off("click"),Global.btnClickEvent(a,c(regeneratorRuntime.mark(function i(){var o,c,l,m,p,f;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.common_click),e.setPlayPickTipsAction(!1),i.next=4,cc.vv.gameData.reqSubGame(Global.QUEENOFSEA_MAP_RTYPE.OPERATE_SUBGAME,t);case 4:if(200!==(o=i.sent).code){i.next=36;break}return e._pickLeftNum--,(c=o.data.mapInfo.gameInfo).multId=e.getMultIdByData(c),l=e.getLayer(e.getLayerIdxEnable()-1),Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr["select"+c.layerId]),e.setLayerEnable(l,!1,c.layerChoiceId[c.layerId-1]),Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.select1),e.playSpine(a.getChildByName("spine"),function(){e.playSpine(a.getChildByName("spine"),null,"animation4",!1)},"animation3",!1),i.next=16,e.awaitTime(.8);case 16:return(m=a.getChildByName("mult")).active=!0,m.getComponent(cc.Sprite).spriteFrame=cc.vv.gameData.GetAtlasByName("game4_shell").getSpriteFrame("theme163_game4_result_"+s[u[c.multId]]),m.scale=0,i.next=22,e.playActions(m,[cc.scaleTo(.3,1.2),cc.scaleTo(.1,1)]);case 22:if(!(c.multId>0)){i.next=29;break}if(p=0,6==c.multId)for(f=1;f<=5;f++)p+=s[f];else p=s[u[c.multId]];return i.next=27,e.playMultFlyEff(a,p);case 27:return i.next=29,e.awaitTime(.5);case 29:return e.setLayerGray(l,!0,t),e.playShowLayerRestItems(l,t,e.getLayerItemList(c)),i.next=33,e.awaitTime(.5);case 33:e._pickLeftNum>0&&c.multId>0?(Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.dead),e.setPlayPickTipsAction(!0),e.setLayerEnable(e.getLayer(e.getLayerIdxEnable()),!0)):n(),i.next=38;break;case 36:AppLog.warn("\u8fd4\u56de\u6570\u636e\u9519\u8bef!"),r();case 38:case"end":return i.stop()}},i)})))},l=1;l<=5;l++)o(l);case 3:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},playMultFlyEff:function(e,t){var n=this;return c(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise(function(){var r=c(regeneratorRuntime.mark(function r(a){var i,o,c,s,u;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return i=n._node_main.convertToNodeSpaceAR(e.parent.convertToWorldSpaceAR(e.position)),o=cc.find("nodePrizePool/theme163_game_c_3",n._node_main),c=n._node_main.convertToNodeSpaceAR(o.parent.convertToWorldSpaceAR(o.position)),(s=cc.find("nodeFlyMultNum",n._node_main)).position=i,s.scale=1,s.getComponent(cc.ParticleSystem).resetSystem(),r.next=9,n.playActions(s,[cc.moveTo(.5,c),cc.scaleTo(.1,0)]);case 9:return u=cc.find("nodePrizePool/spineNodeMult",n._node_main),n.playSpine(u),r.next=13,n.awaitTime(.2);case 13:n._pickMultNum+=t,n.setLabel(n._lblPickMult,n._pickMultNum?n._pickMultNum+"X":""),a();case 16:case"end":return r.stop()}},r)}));return function(e){return r.apply(this,arguments)}}()));case 1:case"end":return r.stop()}},r)}))()},setItemGray:function(e,t){var n,a=t?cc.Color.GRAY:cc.Color.WHITE,i=r(e.children);try{for(i.s();!(n=i.n()).done;){n.value.color=a}}catch(e){i.e(e)}finally{i.f()}},showResult:function(){var e=this;return c(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=c(regeneratorRuntime.mark(function t(n){var r,a,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._node_win.active=!0,(r=e._node_win.getChildByName("ui")).scale=0,a=Global.FormatCommaNumToNum(e._lblStartPrize.getComponent(cc.Label).string),r.getChildByName("btnCollect").getComponent(cc.Button).enabled=!1,e.setLabel(r.getChildByName("lblWinCoinShow"),e._pickMultNum+" X "+e.convertNumToShortStr(a)+" = "+e.convertNumToShortStr(e._pickMultNum*a)),e.rollToNumOfLabel(r.getChildByName("lblWinCoin"),e._pickMultNum*a),t.next=9,e.playActions(r,[cc.scaleTo(.3,1.2),cc.scaleTo(.1,1)]);case 9:cc.vv.gameData.GetSlotsScript()._bottomScript.SetWin(e._pickMultNum*a),r.getChildByName("btnCollect").getComponent(cc.Button).enabled=!0,i=function(){Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.common_click),r.getChildByName("lblWinCoin").stopAllActions(),e.setLabel(r.getChildByName("lblWinCoin"),e.convertNumToShortStr(e._pickMultNum*a)),e.playActions(r,[cc.scaleTo(.1,1.2),cc.scaleTo(.3,0)]),n()},cc.vv.gameData.checkAutoPlay(r.getChildByName("btnCollect"),i),Global.btnClickEvent(r.getChildByName("btnCollect"),function(){r.getChildByName("btnCollect").stopAllActions(),i()},e);case 14:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()}}),cc._RF.pop()},{TheMermaid_subGameBase:"TheMermaid_subGameBase"}],TheMermaid_subGameCollectWheel:[function(e,t,n){"use strict";function r(e,t,n,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(a,i){var o=e.apply(t,n);function c(e){r(o,a,i,c,s,"next",e)}function s(e){r(o,a,i,c,s,"throw",e)}c(void 0)})}}cc._RF.push(t,"283c9iR1EZOTrFZlbU72DyY","TheMermaid_subGameCollectWheel"),cc.Class({extends:cc.Component,properties:{_soundPath:"games/TheMermaid/",_subGameNode:null,_node_main:null,_spineNodeLoading:null,_targetIdx:7},onLoad:function(){this._subGameNode=cc.find("/subGameCollectWheel",this.node),this._node_main=cc.find("node_main",this._subGameNode),this._spineNodeLoading=cc.find("spineNodeLoading",this._subGameNode),this.init()},init:function(){this._spineNodeLoading.active=!1,this._subGameNode.active=!1,this._node_main.active=!1,cc.find("spineEff1",this._node_main).active=!1,cc.find("spineEff2",this._node_main).active=!1,cc.find("spineEffWin",this._node_main).active=!1},enterGame:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._targetIdx=0,e.init(),t.next=4,e.showMain();case 4:return t.next=6,e.showResult();case 6:return t.next=8,e.exitGame();case 8:case"end":return t.stop()}},t)}))()},exitGame:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.awaitTime(1);case 2:return t.next=4,e.playActions(e._node_main,[cc.scaleTo(.2,1.2),cc.scaleTo(.5,0)]);case 4:e._subGameNode.active=!1;case 5:case"end":return t.stop()}},t)}))()},showMain:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=a(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._subGameNode.active=!0,t.next=3,e.awaitTime(.5);case 3:return e._node_main.active=!0,e._node_main.scale=0,cc.find("spineEff1",e._node_main).active=!0,cc.find("spineEff2",e._node_main).active=!0,cc.find("btn_spin",e._node_main).getComponent(cc.Button).enabled=!1,Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.wheel_in),t.next=12,e.playActions(e._node_main,[cc.scaleTo(.5,1.2),cc.scaleTo(.2,1)]);case 12:return t.next=14,e.awaitOrOperate();case 14:n();case 15:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},awaitOrOperate:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=a(regeneratorRuntime.mark(function t(n){var r,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:(r=cc.find("btn_spin",e._node_main)).getComponent(cc.Button).enabled=!0,r.getComponent(cc.Button).interactable=!0,a=function(){Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.wheel_click),r.getComponent(cc.Button).interactable=!1,n()},cc.vv.gameData.checkAutoPlay(r,a),Global.btnClickEvent(r,function(){r.stopAllActions(),a()});case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},showResult:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=a(regeneratorRuntime.mark(function t(n){var r,a,i,o,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return cc.find("spineEff1",e._node_main).active=!1,cc.find("spineEff2",e._node_main).active=!1,t.next=4,cc.vv.gameData.reqSubGame(Global.QUEENOFSEA_MAP_RTYPE.COLLECT_WHEEL);case 4:if(200!==(r=t.sent).code){t.next=22;break}return SlotsFacade.QueenSeaCollectProgress.setCollectNum(r.data.needCoins),e._targetIdx=r.data.idx-1,(a=cc.find("rorationWheel",e._node_main)).angle=0,i=45*e._targetIdx,o=i-a.angle,c=10,Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.wheel),t.next=16,e.playActions(a,[cc.rotateTo(.5*c,a.angle+360*c+o).easing(cc.easeSineInOut())]);case 16:Global.SlotsSoundMgr.stopEffectByName(SlotsFacade.soundMgr.wheel),Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.wheel_stop),cc.find("spineEffWin",e._node_main).active=!0,n(),t.next=23;break;case 22:AppLog.err("\u8bf7\u6c42\u6570\u636e\u9519\u8bef");case 23:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},playSpine:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"animation",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e?(e.active=!0,e.getComponent(sp.Skeleton).setAnimation(0,n,r),r||e.getComponent(sp.Skeleton).setCompleteListener(function(){t&&t()})):t&&t()},playActions:function(e,t){return new Promise(function(n){t.push(cc.callFunc(function(){n()})),e.active=!0,e.runAction(cc.sequence(t))})},awaitTime:function(e){var t=this;return new Promise(function(n){t.scheduleOnce(function(){n()},e)})}}),cc._RF.pop()},{}],TheMermaid_subGameDice:[function(e,t,n){"use strict";function r(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=a(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(c)throw i}}}}function a(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t,n,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var i=e.apply(t,n);function c(e){o(i,r,a,c,s,"next",e)}function s(e){o(i,r,a,c,s,"throw",e)}c(void 0)})}}cc._RF.push(t,"4ff9dCWtXpJ6I75CFlrfIDt","TheMermaid_subGameDice"),cc.Class({extends:e("TheMermaid_subGameBase"),properties:{_subGameNodeName:"subGameDice",_lblStartPrize:null,_lblPickMult:null,_sprPickTips:null,_diceEffList:null,_winMultList:null,_restDiceList:null,_btnSpin:null,_spinDice:null,_spinBubble:null,_pickLeftNum:5},onLoad:function(){var e=this;return c(regeneratorRuntime.mark(function t(){var n,r,a,i,o,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(e._super(),e._lblStartPrize=cc.find("nodePrizePool/theme163_game_c_2/lblStartPrize",e._node_main),e._lblPickMult=cc.find("nodePrizePool/theme163_game_c_3/lblPickMult",e._node_main),e._sprPickTips=cc.find("nodeDetail/spinTips",e._node_main),n=cc.find("nodeDetail",e._node_main),e._btnSpin=cc.find("btnSpin",n),e._spinDice=cc.find("btnSpin/nodeDice",n),e._spinBubble=cc.find("btnSpin/nodeBubble",n),e._diceEffList=[],r=1;r<=6;r++)e._diceEffList[r]=cc.find("cell_"+r+"/diceSpine",n);for(e._winMultList=[],a=1;a<=6;a++)for(e._winMultList[a]=[],i=1;i<=4;i++)(o=cc.find("cell_"+a+"/winSpine"+i,n))&&(e._winMultList[a][i]=o);for(e._restDiceList=[],c=1;c<=5;c++)e._restDiceList[c]=cc.find("diceList/dice"+c,n);e.init();case 15:case"end":return t.stop()}},t)}))()},init:function(){this.setLabel(this._lblPickMult,"");var e,t=r(this._diceEffList);try{for(t.s();!(e=t.n()).done;){var n=e.value;n&&(n.active=!1)}}catch(e){t.e(e)}finally{t.f()}var a,i=r(this._restDiceList);try{for(i.s();!(a=i.n()).done;){var o=a.value;o&&(o.active=!0)}}catch(e){i.e(e)}finally{i.f()}this.resetWinResultPanel(),this._btnSpin.getComponent(cc.Button).enabled=!0},restoreByData:function(){var e=cc.vv.gameData.mapInfo.gameInfo;this._subGameNode.active=!0,this.setLabel(this._lblPickMult,e.mult+"X"),this._pickLeftNum=e.restCnt,this.refreshRestDice(),this.playSpine(this._spinDice,null,"animation"+e.currDices[e.currDices.length-1],!1),this.playSpine(this._spinBubble,null,"animation1",!0),this.refreshCurWinResultPanel(),this.setPlayPickTipsAction(!0)},enterGame:function(){var e=this;return c(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=cc.vv.gameData.mapInfo.gameInfo,e._pickLeftNum=n.restCnt,e.setLabel(e._lblStartPrize,Global.FormatNumToComma(n.startPrize)),e.init(),t.abrupt("return",new Promise(function(){var t=c(regeneratorRuntime.mark(function t(r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n.mult>0)){t.next=4;break}e.restoreByData(),t.next=6;break;case 4:return t.next=6,e.showStart();case 6:return t.next=8,e.showMain();case 8:return t.next=10,e.showResult();case 10:return t.next=12,e.exitGame();case 12:r();case 13:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 5:case"end":return t.stop()}},t)}))()},exitGame:function(){var e=this;return c(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=c(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.playFullScreen(1);case 2:e.setSubGameNodeVisible(!1),n();case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},showStart:function(){var e=this;return c(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=c(regeneratorRuntime.mark(function t(n){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._subGameNode.active=!0,e._node_start.active=!0,e._node_start.scale=0,t.next=5,e.playActions(e._node_start,[cc.scaleTo(.35,1.5),cc.scaleTo(.15,1.3)]);case 5:r=function(){Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.common_click),e.playActions(e._node_start,[cc.scaleTo(.15,1.5),cc.scaleTo(.35,0)]),n()},cc.vv.gameData.checkAutoPlay(e._node_start.getChildByName("btnStart"),r),Global.btnClickEvent(e._node_start.getChildByName("btnStart"),function(){e._node_start.getChildByName("btnStart").stopAllActions(),r()},e);case 8:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},showMain:function(){var e=this;return c(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=c(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(cc.vv.gameData.mapInfo.gameInfo.mult<=0)){t.next=4;break}return t.next=4,e.playFullScreen(.5);case 4:return e._node_start.active=!1,e._node_main.active=!0,t.next=8,e.awaitTime(.2);case 8:return t.next=10,e.awaitOrOperate();case 10:return e.setPlayPickTipsAction(!1),t.next=13,e.awaitTime(1);case 13:n();case 14:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},setPlayPickTipsAction:function(e){var t=this;e?(this._sprPickTips.scale=1,this._sprPickTips.opacity=0,this._sprPickTips.stopAllActions(),this._sprPickTips.runAction(cc.sequence(cc.fadeIn(.5),cc.callFunc(function(){t._sprPickTips.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.5,.8),cc.scaleTo(.2,1),cc.delayTime(1))))}))),this.playSpine(this._spinBubble,null,"animation1",!0)):(this._sprPickTips.stopAllActions(),this._sprPickTips.runAction(cc.fadeOut(.5)))},awaitOrOperate:function(){var e=this;return c(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=c(regeneratorRuntime.mark(function t(n,r){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.setPlayPickTipsAction(!0),e._btnSpin.getComponent(cc.Button).enabled=!0,e._btnSpin.off("click"),a=function(){var t=c(regeneratorRuntime.mark(function t(){var i,o,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.setPlayPickTipsAction(!1),e._btnSpin.getComponent(cc.Button).enabled=!1,e.playSpine(e._spinBubble,null,"animation2",!1),t.next=5,cc.vv.gameData.reqSubGame(Global.QUEENOFSEA_MAP_RTYPE.OPERATE_SUBGAME);case 5:if(200!==(i=t.sent).code){t.next=29;break}return o=i.data.mapInfo.gameInfo,c=o.currDices[o.currDices.length-1],e._pickLeftNum=o.restCnt,e.refreshRestDice(),Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.move),e.playSpine(e._spinDice,function(){e.playSpine(e._spinDice,null,"animation"+c,!1)},"animation"+c+"_1",!1),t.next=15,e.awaitTime(1.5);case 15:return t.next=17,e.flyDicePointToResultPanel(c);case 17:if(!(e._pickLeftNum>0)){t.next=26;break}return e.playSpine(e._spinBubble,null,"animation3",!1),t.next=21,e.awaitTime(.5);case 21:e.setPlayPickTipsAction(!0),e._btnSpin.getComponent(cc.Button).enabled=!0,cc.vv.gameData.checkAutoPlay(e._btnSpin,a),t.next=27;break;case 26:n();case 27:t.next=31;break;case 29:AppLog.warn("\u8fd4\u56de\u6570\u636e\u9519\u8bef!"),r();case 31:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),cc.vv.gameData.checkAutoPlay(e._btnSpin,a),Global.btnClickEvent(e._btnSpin,c(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._btnSpin.stopAllActions(),t.next=3,a();case 3:case"end":return t.stop()}},t)})));case 6:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},refreshRestDice:function(){var e,t=r(this._restDiceList);try{for(t.s();!(e=t.n()).done;){var n=e.value;n&&(n.active=!1)}}catch(e){t.e(e)}finally{t.f()}for(var a=1;a<=this._pickLeftNum;a++)this._restDiceList[a].active=!0},resetWinResultPanel:function(){for(var e=1;e<=6;e++){var t,n=r(this._winMultList[e]);try{for(n.s();!(t=n.n()).done;){var a=t.value;a&&(a.active=!1)}}catch(e){n.e(e)}finally{n.f()}}},refreshCurWinResultPanel:function(){this.resetWinResultPanel();var e=cc.vv.gameData.mapInfo.gameInfo,t=!1,n=null;for(var r in e.currDices){var a=e.currDices[r];for(var i in this._winMultList[a]){var o=this._winMultList[a][i];if(!o.active){o.active=!0,parseInt(r)==this._winMultList.length-1&&parseInt(i)==this._winMultList[a].length-1&&(t=!0),n=o;break}}}return{isAddTimes:t,node:n}},flyDicePointToResultPanel:function(e){var t=this;return c(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise(function(){var n=c(regeneratorRuntime.mark(function n(r){var a,i,o,c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.touzi_fly),n.next=3,t.playFlyEffect(t._btnSpin,t._diceEffList[e]);case 3:return t.playSpine(t._diceEffList[e],null,"animation",!1),n.next=6,t.awaitTime(.3);case 6:return a=t.refreshCurWinResultPanel(),n.next=9,t.awaitTime(.5);case 9:if(a.isAddTimes){n.next=24;break}return Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.touzi_extra),i=cc.find("nodePrizePool/theme163_game_c_3",t._node_main),Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.touzi_fly),n.next=15,t.playFlyEffect(a.node,i);case 15:return Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.touzi_extra),o=cc.find("nodePrizePool/spineNodeMult",t._node_main),t.playSpine(o),n.next=20,t.awaitTime(.2);case 20:c=cc.vv.gameData.mapInfo.gameInfo.mult,t.setLabel(t._lblPickMult,c?c+"X":""),n.next=27;break;case 24:return n.next=26,t.playFlyEffect(a.node,cc.find("nodeDetail/diceList",t._node_main));case 26:t.refreshRestDice();case 27:return n.next=29,t.awaitTime(.2);case 29:r();case 30:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()));case 1:case"end":return n.stop()}},n)}))()},playFlyEffect:function(e,t){var n=this;return c(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise(function(){var r=c(regeneratorRuntime.mark(function r(a){var i,o,c;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return i=n._node_main.convertToNodeSpaceAR(e.parent.convertToWorldSpaceAR(e.position)),o=n._node_main.convertToNodeSpaceAR(t.parent.convertToWorldSpaceAR(t.position)),(c=cc.find("nodeFlyMultNum",n._node_main)).position=i,c.scale=1,c.getComponent(cc.ParticleSystem).resetSystem(),r.next=8,n.playActions(c,[cc.moveTo(.5,o),cc.scaleTo(.1,0)]);case 8:a();case 9:case"end":return r.stop()}},r)}));return function(e){return r.apply(this,arguments)}}()));case 1:case"end":return r.stop()}},r)}))()},showResult:function(){var e=this;return c(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=c(regeneratorRuntime.mark(function t(n){var r,a,i,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._node_win.active=!0,(r=e._node_win.getChildByName("ui")).scale=0,a=Global.FormatCommaNumToNum(e._lblStartPrize.getComponent(cc.Label).string),i=cc.vv.gameData.mapInfo.gameInfo.mult,r.getChildByName("btnCollect").getComponent(cc.Button).enabled=!1,e.setLabel(r.getChildByName("lblWinCoinShow"),i+" X "+e.convertNumToShortStr(a)+" = "+e.convertNumToShortStr(i*a)),e.rollToNumOfLabel(r.getChildByName("lblWinCoin"),i*a),t.next=10,e.playActions(r,[cc.scaleTo(.3,1.2),cc.scaleTo(.1,1)]);case 10:cc.vv.gameData.GetSlotsScript()._bottomScript.SetWin(i*a),r.getChildByName("btnCollect").getComponent(cc.Button).enabled=!0,o=function(){Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.common_click),r.getChildByName("lblWinCoin").stopAllActions(),e.setLabel(r.getChildByName("lblWinCoin"),e.convertNumToShortStr(i*a)),e.playActions(r,[cc.scaleTo(.1,1.2),cc.scaleTo(.3,0)]),n()},cc.vv.gameData.checkAutoPlay(r.getChildByName("btnCollect"),o),Global.btnClickEvent(r.getChildByName("btnCollect"),function(){r.getChildByName("btnCollect").stopAllActions(),o()},e);case 15:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()}}),cc._RF.pop()},{TheMermaid_subGameBase:"TheMermaid_subGameBase"}],TheMermaid_subGameGoldShip:[function(e,t,n){"use strict";function r(e,t,n,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(a,i){var o=e.apply(t,n);function c(e){r(o,a,i,c,s,"next",e)}function s(e){r(o,a,i,c,s,"throw",e)}c(void 0)})}}function i(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=o(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a,i=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function o(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}cc._RF.push(t,"4aaa8CreKFMxrt+jefDwYtE","TheMermaid_subGameGoldShip");var s=[30,60,90];cc.Class({extends:e("TheMermaid_subGameBase"),properties:{_subGameNodeName:"subGameGoldShip",_lblStartPrize:null,_lblPickMult:null,_boxItems:null,_sprPickTips:null,_pickLeftNum:3,_pickMultNum:0},onLoad:function(){this._super(),this._lblStartPrize=cc.find("nodePrizePool/theme163_game_c_2/lblStartPrize",this._node_main),this._lblPickMult=cc.find("nodePrizePool/theme163_game_c_3/lblPickMult",this._node_main),this._sprPickTips=cc.find("theme163_game9_2/theme163_game9_1",this._node_main),this._boxItems=[];for(var e=1;e<=16;e++)this._boxItems.push(cc.find("nodeBoxList",this._node_main).getChildByName("ItemNode"+e));this.init()},init:function(){this.setLabel(this._lblStartPrize,""),this.setLabel(this._lblPickMult,this._pickMultNum?this._pickMultNum+"X":"");var e,t=i(this._boxItems);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.getChildByName("treasurebox").active=!0,n.getChildByName("spine_treasurebox").active=!1,n.getChildByName("treasurebox_open").active=!1,n.getChildByName("sprPickMult").active=!1,n.getChildByName("sprPickMultDie").active=!1,n.getChildByName("spine_star").active=!1,this.setBoxGray(n,!1)}}catch(e){t.e(e)}finally{t.f()}},restoreByData:function(){var e=cc.vv.gameData.mapInfo.gameInfo;for(var t in this._subGameNode.active=!0,this.setLabel(this._lblPickMult,e.mult+"X"),e.choiceIds){var n=e.choiceIds[t],r=e.choiceItems[t],a=this._boxItems[n-1];a.getChildByName("treasurebox").active=!1,a.getChildByName("treasurebox_open").active=!0;var i=a.getChildByName("sprPickMult");i.active=!0,i.getComponent(cc.Sprite).spriteFrame=cc.vv.gameData.GetAtlasByName("game9_treasuer").getSpriteFrame("theme163_game9_num_"+r.mult)}},enterGame:function(){var e=this;return a(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.init(),n=cc.vv.gameData.mapInfo.gameInfo,e._pickMultNum=n.mult,e.setLabel(e._lblStartPrize,Global.FormatNumToComma(n.startPrize)),t.abrupt("return",new Promise(function(){var t=a(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e._pickMultNum>0)){t.next=4;break}e.restoreByData(),t.next=6;break;case 4:return t.next=6,e.showStart();case 6:return t.next=8,e.showMain();case 8:return t.next=10,e.showResult();case 10:return t.next=12,e.exitGame();case 12:n();case 13:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 5:case"end":return t.stop()}},t)}))()},exitGame:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=a(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.playFullScreen(1);case 2:e.setSubGameNodeVisible(!1),n();case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},showStart:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=a(regeneratorRuntime.mark(function t(n){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._subGameNode.active=!0,e._node_start.active=!0,e._node_start.scale=0,t.next=5,e.playActions(e._node_start,[cc.scaleTo(.35,1.2),cc.scaleTo(.15,1)]);case 5:r=function(){Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.common_click),e.playActions(e._node_start,[cc.scaleTo(.15,1.5),cc.scaleTo(.35,0)]),n()},cc.vv.gameData.checkAutoPlay(e._node_start.getChildByName("btnStart"),r),Global.btnClickEvent(e._node_start.getChildByName("btnStart"),function(){e._node_start.getChildByName("btnStart").stopAllActions(),r()},e);case 8:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},showMain:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=a(regeneratorRuntime.mark(function t(n){var r,a,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.playFullScreen(.5);case 2:return e._node_start.active=!1,e._node_main.active=!0,t.next=6,e.awaitTime(1);case 6:return t.next=8,e.awaitOrOperate();case 8:e.setPlayPickTipsAction(!1),r=i(e._boxItems);try{for(r.s();!(a=r.n()).done;)o=a.value,e.setBoxGray(o,!o.getChildByName("treasurebox_open").active)}catch(e){r.e(e)}finally{r.f()}return t.next=13,e.awaitTime(2);case 13:n();case 14:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},setPlayPickTipsAction:function(e){var t=this;if(e){this._sprPickTips.scale=1,this._sprPickTips.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.5,.9),cc.scaleTo(.2,1),cc.delayTime(2))));var n,r=i(this._boxItems);try{var a=function(){var e=n.value;e.getChildByName("treasurebox_open").active||(setTimeout(function(){e.getChildByName("treasurebox_open").active||t.playSpine(e.getChildByName("spine_star"),null,"animation",!1)},Global.random0To1()>=.5?500:1500),e.getComponent(cc.Button).enabled=!0)};for(r.s();!(n=r.n()).done;)a()}catch(e){r.e(e)}finally{r.f()}}else{this._sprPickTips.stopAllActions(),this._sprPickTips.scale=1;var o,c=i(this._boxItems);try{for(c.s();!(o=c.n()).done;){var s=o.value;s.getChildByName("spine_star").active=!1,s.getComponent(cc.Button).enabled=!1}}catch(e){c.e(e)}finally{c.f()}}},awaitOrOperate:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=a(regeneratorRuntime.mark(function t(n,r){var o,c,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.setPlayPickTipsAction(!0),o=i(e._boxItems);try{for(s=function(){var t=c.value;t.off("click"),Global.btnClickEvent(t,a(regeneratorRuntime.mark(function a(){var i,o,c,s,u;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.common_click),e.setPlayPickTipsAction(!1),a.next=4,cc.vv.gameData.reqSubGame(Global.QUEENOFSEA_MAP_RTYPE.OPERATE_SUBGAME,parseInt(t.name.substring(8,t.name.length)));case 4:if(200!==(i=a.sent).code){a.next=34;break}if(o=i.data.mapInfo.gameInfo,c=o.choiceItems,s=c[c.length-1],t.getChildByName("treasurebox").active=!1,e.playSpine(t.getChildByName("spine_treasurebox"),function(){t.getChildByName("spine_treasurebox").active=!1,t.getChildByName("treasurebox_open").active=!0},"animation2",!1),Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.select5),1!=s.type){a.next=20;break}return t.getChildByName("sprPickMult").active=!0,t.getChildByName("sprPickMult").getComponent(cc.Sprite).spriteFrame=cc.vv.gameData.GetAtlasByName("game9_treasuer").getSpriteFrame("theme163_game9_num_"+s.mult),t.getChildByName("sprPickMult").scale=0,a.next=18,e.playActions(t.getChildByName("sprPickMult"),[cc.scaleTo(.8,1)]);case 18:a.next=27;break;case 20:return u="d"+s.mult,2==s.type&&(u="jackpot"),t.getChildByName("sprPickMultDie").active=!0,t.getChildByName("sprPickMultDie").getComponent(cc.Sprite).spriteFrame=cc.vv.gameData.GetAtlasByName("game9_treasuer").getSpriteFrame("theme163_game9_num_"+u),t.getChildByName("sprPickMultDie").scale=0,a.next=27,e.playActions(t.getChildByName("sprPickMultDie"),[cc.scaleTo(.8,1)]);case 27:return Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.touzi_fly),a.next=30,e.playMultFlyEff(t,s.mult);case 30:Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.touzi_extra),0!=s.type?e.setPlayPickTipsAction(!0):n(),a.next=36;break;case 34:AppLog.warn("\u8fd4\u56de\u6570\u636e\u9519\u8bef!"),r();case 36:case"end":return a.stop()}},a)})),e)},o.s();!(c=o.n()).done;)s()}catch(e){o.e(e)}finally{o.f()}case 3:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},playMultFlyEff:function(e,t){var n=this;return a(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise(function(){var r=a(regeneratorRuntime.mark(function r(a){var i,o,c,s,u;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.fly_mul),i=n._node_main.convertToNodeSpaceAR(e.parent.convertToWorldSpaceAR(e.position)),o=cc.find("nodePrizePool/theme163_game_c_3",n._node_main),c=n._node_main.convertToNodeSpaceAR(o.parent.convertToWorldSpaceAR(o.position)),(s=cc.find("nodeFlyMultNum",n._node_main)).position=i,s.scale=1,s.getComponent(cc.ParticleSystem).resetSystem(),r.next=10,n.playActions(s,[cc.moveTo(.5,c),cc.scaleTo(.1,0)]);case 10:return u=cc.find("nodePrizePool/spineNodeMult",n._node_main),n.playSpine(u),r.next=14,n.awaitTime(.2);case 14:n._pickMultNum+=t,n.setLabel(n._lblPickMult,n._pickMultNum?n._pickMultNum+"X":""),a();case 17:case"end":return r.stop()}},r)}));return function(e){return r.apply(this,arguments)}}()));case 1:case"end":return r.stop()}},r)}))()},setBoxGray:function(e,t){t&&(Global.random0To1()>.6?(e.getChildByName("sprPickMultDie").active=!0,e.getChildByName("sprPickMultDie").getComponent(cc.Sprite).spriteFrame=cc.vv.gameData.GetAtlasByName("game9_treasuer").getSpriteFrame("theme163_game9_num_d"+s[Math.floor(100*Global.random0To1())%s.length])):(e.getChildByName("sprPickMult").active=!0,e.getChildByName("sprPickMult").getComponent(cc.Sprite).spriteFrame=cc.vv.gameData.GetAtlasByName("game9_treasuer").getSpriteFrame("theme163_game9_num_"+s[Math.floor(100*Global.random0To1())%s.length])));var n,r=t?cc.Color.GRAY:cc.Color.WHITE,a=i(e.children);try{for(a.s();!(n=a.n()).done;){n.value.color=r}}catch(e){a.e(e)}finally{a.f()}},showResult:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=a(regeneratorRuntime.mark(function t(n){var r,a,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._node_win.active=!0,(r=e._node_win.getChildByName("ui")).scale=0,a=Global.FormatCommaNumToNum(e._lblStartPrize.getComponent(cc.Label).string),r.getChildByName("btnCollect").getComponent(cc.Button).enabled=!1,e.setLabel(r.getChildByName("lblWinCoinShow"),e._pickMultNum+" X "+e.convertNumToShortStr(a)+" = "+e.convertNumToShortStr(e._pickMultNum*a)),e.rollToNumOfLabel(r.getChildByName("lblWinCoin"),e._pickMultNum*a),t.next=9,e.playActions(r,[cc.scaleTo(.3,1.2),cc.scaleTo(.1,1)]);case 9:cc.vv.gameData.GetSlotsScript()._bottomScript.SetWin(e._pickMultNum*a),r.getChildByName("btnCollect").getComponent(cc.Button).enabled=!0,i=function(){Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.common_click),r.getChildByName("lblWinCoin").stopAllActions(),e.setLabel(r.getChildByName("lblWinCoin"),e.convertNumToShortStr(e._pickMultNum*a)),e.playActions(r,[cc.scaleTo(.1,1.2),cc.scaleTo(.3,0)]),n()},cc.vv.gameData.checkAutoPlay(r.getChildByName("btnCollect"),i),Global.btnClickEvent(r.getChildByName("btnCollect"),function(){r.getChildByName("btnCollect").stopAllActions(),i()},e);case 14:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()}}),cc._RF.pop()},{TheMermaid_subGameBase:"TheMermaid_subGameBase"}],TheMermaid_subGameMultWheel:[function(e,t,n){"use strict";function r(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=a(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(c)throw i}}}}function a(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t,n,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var i=e.apply(t,n);function c(e){o(i,r,a,c,s,"next",e)}function s(e){o(i,r,a,c,s,"throw",e)}c(void 0)})}}cc._RF.push(t,"03739m6HeNPo4E8UFzNAy+B","TheMermaid_subGameMultWheel");var s=[[1,2,3,6,5,1,2,4,6,5],[4,3,1,5,6,4,3,2,5,6],[2,3,4,6,1,2,3,4,5,1]];cc.Class({extends:e("TheMermaid_subGameBase"),properties:{_subGameNodeName:"subGameMultWheel",_lblStartPrize:null,_lblPickMult:null,_sprPickTips:null,_wheelList:null,_grayMaskList:null,_spineWheelWin:null,_winMultList:null,_spineMultWin:null,_btnSpin:null},onLoad:function(){var e=this;return c(regeneratorRuntime.mark(function t(){var n,r,a,i,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(e._super(),e._lblStartPrize=cc.find("nodePrizePool/theme163_game_c_2/lblStartPrize",e._node_main),e._lblPickMult=cc.find("nodePrizePool/theme163_game_c_3/lblPickMult",e._node_main),e._sprPickTips=cc.find("spinTips",e._node_main),n=cc.find("wheelNode",e._node_main),e._btnSpin=cc.find("btnSpin",n),e._wheelList=[],e._grayMaskList=[],r=1;r<=3;r++)e._wheelList[r]=cc.find("rorationWheel"+r,n),e._grayMaskList[r]=cc.find("grayMask"+r,n);for(e._spineWheelWin=cc.find("spineWheelWin",n),e._winMultList=[],a=1;a<=6;a++)for(e._winMultList[a]=[],i=1;i<=3;i++)(o=cc.find("nodePrizePool/theme163_game6_2/win_"+a+"_"+i,e._node_main))&&(e._winMultList[a][i]=o);e._spineMultWin=cc.find("nodePrizePool/theme163_game6_2/spineWin",e._node_main),e.init();case 14:case"end":return t.stop()}},t)}))()},init:function(){this.setLabel(this._lblPickMult,""),this.setLabel(this._lblStartPrize,"");var e,t=r(this._wheelList);try{for(t.s();!(e=t.n()).done;){var n=e.value;n&&(n.rotation=0)}}catch(e){t.e(e)}finally{t.f()}var a,i=r(this._grayMaskList);try{for(i.s();!(a=i.n()).done;){var o=a.value;o&&(o.active=!1)}}catch(e){i.e(e)}finally{i.f()}this._spineWheelWin.active=!1,this._btnSpin.getComponent(cc.Button).interactable=!0,this.resetWinResultPanel(),this._spineMultWin.active=!1},restoreByData:function(){var e=cc.vv.gameData.mapInfo.gameInfo;this._subGameNode.active=!0;for(var t=e.finalColorComb[e.currStep-1],n=1;n<=t.length;n++)this._wheelList[n].rotation=-36*this.getWheelColorPos(n,t[n-1]);this.refreshCurWinResultPanel(),this.setPlayPickTipsAction(!0)},enterGame:function(){var e=this;return c(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.init(),n=cc.vv.gameData.mapInfo.gameInfo,e.setLabel(e._lblStartPrize,Global.FormatNumToComma(n.startPrize)),t.abrupt("return",new Promise(function(){var t=c(regeneratorRuntime.mark(function t(r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n.currStep>0)){t.next=4;break}e.restoreByData(),t.next=6;break;case 4:return t.next=6,e.showStart();case 6:return t.next=8,e.showMain();case 8:return t.next=10,e.showResult();case 10:return t.next=12,e.exitGame();case 12:r();case 13:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 4:case"end":return t.stop()}},t)}))()},exitGame:function(){var e=this;return c(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=c(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.playFullScreen(1);case 2:e.setSubGameNodeVisible(!1),n();case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},showStart:function(){var e=this;return c(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=c(regeneratorRuntime.mark(function t(n){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._subGameNode.active=!0,e._node_start.active=!0,e._node_start.scale=0,t.next=5,e.playActions(e._node_start,[cc.scaleTo(.35,1.5),cc.scaleTo(.15,1.3)]);case 5:r=function(){Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.common_click),e.playActions(e._node_start,[cc.scaleTo(.15,1.5),cc.scaleTo(.35,0)]),n()},cc.vv.gameData.checkAutoPlay(e._node_start.getChildByName("btnStart"),r),Global.btnClickEvent(e._node_start.getChildByName("btnStart"),function(){e._node_start.getChildByName("btnStart").stopAllActions(),r()},e);case 8:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},showMain:function(){var e=this;return c(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=c(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(cc.vv.gameData.mapInfo.gameInfo.currStep<=0)){t.next=4;break}return t.next=4,e.playFullScreen(.5);case 4:return e._node_start.active=!1,e._node_main.active=!0,t.next=8,e.awaitTime(.2);case 8:return t.next=10,e.awaitOrOperate();case 10:return e.setPlayPickTipsAction(!1),t.next=13,e.awaitTime(1);case 13:n();case 14:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},setPlayPickTipsAction:function(e){if(this._sprPickTips.stopAllActions(),this._sprPickTips.scale=1,e){this._sprPickTips.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.5,.8),cc.scaleTo(.2,1),cc.delayTime(1))));var t,n=r(this._grayMaskList);try{for(n.s();!(t=n.n()).done;){var a=t.value;a&&(a.active=!1)}}catch(e){n.e(e)}finally{n.f()}}},awaitOrOperate:function(){var e=this;return c(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=c(regeneratorRuntime.mark(function t(n,r){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.setPlayPickTipsAction(!0),e._btnSpin.getComponent(cc.Button).interactable=!0,e._btnSpin.off("click"),a=function(){var t=c(regeneratorRuntime.mark(function t(){var i,o,c,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.common_click),e.setPlayPickTipsAction(!1),e._btnSpin.getComponent(cc.Button).interactable=!1,t.next=5,cc.vv.gameData.reqSubGame(Global.QUEENOFSEA_MAP_RTYPE.OPERATE_SUBGAME);case 5:if(200!==(i=t.sent).code){t.next=34;break}return o=i.data.mapInfo.gameInfo,c=o.finalColorComb[o.currStep-1],t.next=11,e.rotateWheelToTarget(c);case 11:return t.next=13,e.awaitTime(7.5);case 13:return t.next=15,e.flyWinColorToResultPanel(c);case 15:if(!(o.mult<=0)){t.next=21;break}e.setPlayPickTipsAction(!0),e._btnSpin.getComponent(cc.Button).interactable=!0,cc.vv.gameData.checkAutoPlay(e._btnSpin,a),t.next=32;break;case 21:Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.fly_mul),e.flyWinColorToMultPos(o.finalColorId),s=1;case 24:if(!(s<=3)){t.next=31;break}return e.playSpine(e._spineMultWin,null,"animation"+o.finalColorId,!1),t.next=28,e.awaitTime(.4);case 28:s++,t.next=24;break;case 31:n();case 32:t.next=36;break;case 34:AppLog.warn("\u8fd4\u56de\u6570\u636e\u9519\u8bef!"),r();case 36:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),cc.vv.gameData.checkAutoPlay(e._btnSpin,a),Global.btnClickEvent(e._btnSpin,c(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._btnSpin.stopAllActions(),t.next=3,a();case 3:case"end":return t.stop()}},t)})));case 6:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},rotateWheelToTarget:function(e){var t=this;return c(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise(function(){var n=c(regeneratorRuntime.mark(function n(r){var a,i,o,c,s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.island_wheel),a=1;case 2:if(!(a<=3)){n.next=18;break}return(i=t._wheelList[a]).angle=i.angle%360,o=-36*t.getWheelColorPos(a,e[a-1]),c=o-i.angle,s=6,n.next=10,t.playActions(i,[cc.rotateTo(.5*s,360*s-c).easing(cc.easeSineInOut())]);case 10:return t._grayMaskList[a].active=!0,t.playSpine(t._spineWheelWin,null,"animation"+a,!1),n.next=14,t.awaitTime(.5);case 14:r();case 15:a++,n.next=2;break;case 18:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()));case 1:case"end":return n.stop()}},n)}))()},resetWinResultPanel:function(){for(var e=1;e<=6;e++)for(var t=1;t<=3;t++)this._winMultList[e][t].active=!1},refreshCurWinResultPanel:function(){this.resetWinResultPanel();for(var e=cc.vv.gameData.mapInfo.gameInfo,t=0;t<e.currStep;t++){var n,a=r(e.finalColorComb[t]);try{for(a.s();!(n=a.n()).done;)for(var i=n.value,o=1;o<=3;o++)if(!this._winMultList[i][o].active){this._winMultList[i][o].active=!0;break}}catch(e){a.e(e)}finally{a.f()}}},getWheelColorPos:function(e,t){for(var n=s[e-1],r=0;r<n.length;r++)if(n[r]==t)return r},getColorWinNode:function(e){for(var t=1;t<=3;t++){var n=this._winMultList[e][t];if(!n.active)return n}},getColorCenterNode:function(e){return this._winMultList[e][2]},flyWinColorToResultPanel:function(e){var t=this;return c(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise(function(){var n=c(regeneratorRuntime.mark(function n(r){var a,i,o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.zhuanpan_show),a=1;case 2:if(!(a<=3)){n.next=11;break}return i=cc.find("wheelNode/wheelWinFrame/node"+a,t._node_main),o=t.getColorWinNode(e[a-1]),n.next=7,t.playFlyEffect(i,o);case 7:o&&(o.active=!0);case 8:a++,n.next=2;break;case 11:r();case 12:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()));case 1:case"end":return n.stop()}},n)}))()},flyWinColorToMultPos:function(e){var t=this;return c(regeneratorRuntime.mark(function n(){var r,a,i,o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.getColorCenterNode(e),a=cc.find("nodePrizePool/theme163_game_c_3",t._node_main),n.next=4,t.playFlyEffect(r,a);case 4:return i=cc.find("nodePrizePool/spineNodeMult",t._node_main),t.playSpine(i),n.next=8,t.awaitTime(.2);case 8:o=cc.vv.gameData.mapInfo.gameInfo.mult,t.setLabel(t._lblPickMult,o?o+"X":"");case 10:case"end":return n.stop()}},n)}))()},playFlyEffect:function(e,t){var n=this;return c(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise(function(){var r=c(regeneratorRuntime.mark(function r(a){var i,o,c;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!e||!t){r.next=9;break}return i=n._node_main.convertToNodeSpaceAR(e.parent.convertToWorldSpaceAR(e.position)),o=n._node_main.convertToNodeSpaceAR(t.parent.convertToWorldSpaceAR(t.position)),(c=cc.find("nodeFlyMultNum",n._node_main)).position=i,c.scale=1,c.getComponent(cc.ParticleSystem).resetSystem(),r.next=9,n.playActions(c,[cc.moveTo(.5,o),cc.scaleTo(.1,0)]);case 9:a();case 10:case"end":return r.stop()}},r)}));return function(e){return r.apply(this,arguments)}}()));case 1:case"end":return r.stop()}},r)}))()},showResult:function(){var e=this;return c(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=c(regeneratorRuntime.mark(function t(n){var r,a,i,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._node_win.active=!0,(r=e._node_win.getChildByName("ui")).scale=0,a=Global.FormatCommaNumToNum(e._lblStartPrize.getComponent(cc.Label).string),i=cc.vv.gameData.mapInfo.gameInfo.mult,r.getChildByName("btnCollect").getComponent(cc.Button).enabled=!1,e.setLabel(r.getChildByName("lblWinCoinShow"),i+" X "+e.convertNumToShortStr(a)+" = "+e.convertNumToShortStr(i*a)),e.rollToNumOfLabel(r.getChildByName("lblWinCoin"),i*a),t.next=10,e.playActions(r,[cc.scaleTo(.3,1.2),cc.scaleTo(.1,1)]);case 10:cc.vv.gameData.GetSlotsScript()._bottomScript.SetWin(i*a),r.getChildByName("btnCollect").getComponent(cc.Button).enabled=!0,o=function(){Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.common_click),r.getChildByName("lblWinCoin").stopAllActions(),e.setLabel(r.getChildByName("lblWinCoin"),e.convertNumToShortStr(i*a)),e.playActions(r,[cc.scaleTo(.1,1.2),cc.scaleTo(.3,0)]),n()},cc.vv.gameData.checkAutoPlay(r.getChildByName("btnCollect"),o),Global.btnClickEvent(r.getChildByName("btnCollect"),function(){r.getChildByName("btnCollect").stopAllActions(),o()},e);case 15:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()}}),cc._RF.pop()},{TheMermaid_subGameBase:"TheMermaid_subGameBase"}],TheMermaid_subGameRenyu:[function(e,t,n){"use strict";function r(e,t,n,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(a,i){var o=e.apply(t,n);function c(e){r(o,a,i,c,s,"next",e)}function s(e){r(o,a,i,c,s,"throw",e)}c(void 0)})}}function i(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=o(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a,i=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function o(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}cc._RF.push(t,"e639cLP+vhCqIBbUFRh61kb","TheMermaid_subGameRenyu");var s=[16,36,60,180,600];cc.Class({extends:e("TheMermaid_subGameBase"),properties:{_subGameNodeName:"subGameRenyu",_lblStartPrize:null,_lblPickMult:null,_lblPickLeft:null,_goldCoinItems:null,_sprPickTips:null,_pickLeftNum:3,_pickMultNum:0},onLoad:function(){this._super(),this._lblStartPrize=cc.find("nodePrizePool/theme163_game_c_2/lblStartPrize",this._node_main),this._lblPickMult=cc.find("nodePrizePool/theme163_game_c_3/lblPickMult",this._node_main),this._lblPickLeft=cc.find("theme163_game5_5/lblPickLeft",this._node_main),this._sprPickTips=cc.find("theme163_game5_1",this._node_main),this._goldCoinItems=[];for(var e=1;e<=12;e++)this._goldCoinItems.push(cc.find("nodeRenyuGoldcoinList",this._node_main).getChildByName("ItemNode"+e));this.init()},init:function(){this.setLabel(this._lblStartPrize,""),this.setLabel(this._lblPickMult,this._pickMultNum?this._pickMultNum+"X":"");var e,t=i(this._goldCoinItems);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.getChildByName("spineRenyuGoldcoin").active=!0,n.getChildByName("spineRenyuFire").active=!1,n.getChildByName("sprPickMult").active=!1,n.getChildByName("sprPickMult").scale=0,n.getChildByName("sprPickMult").y=0,n.getChildByName("sprAdd1Pick").active=!1,n.getChildByName("sprAdd1Pick").scale=0,this.setGoldCoinGray(n,!1),this.playSpine(n.getChildByName("spineRenyuGoldcoin"),null,"animation3",!1)}}catch(e){t.e(e)}finally{t.f()}},restoreByData:function(){var e=cc.vv.gameData.mapInfo.gameInfo;for(var t in this._subGameNode.active=!0,this.setLabel(this._lblPickMult,e.mult+"X"),e.choiceIds){var n=e.choiceIds[t],r=e.choiceItems[t],a=this._goldCoinItems[n-1];a.getChildByName("spineRenyuGoldcoin").active=!1;var i=a.getChildByName("sprPickMult");if(i.active=!0,i.scale=1,i.getComponent(cc.Sprite).spriteFrame=cc.vv.gameData.GetAtlasByName("game5_mermaid").getSpriteFrame("theme163_game5_cnt"+r.mult),r.cnt){i.y=25,i.scale=.75;var o=a.getChildByName("sprAdd1Pick");o.active=!0,o.scale=1}this.playSpine(a.getChildByName("spineRenyuFire"),null,"animation",!0)}},enterGame:function(){var e=this;return a(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.init(),n=cc.vv.gameData.mapInfo.gameInfo,e._pickLeftNum=n.restCnt,e._pickMultNum=n.mult,e.setLabel(e._lblStartPrize,Global.FormatNumToComma(n.startPrize)),t.abrupt("return",new Promise(function(){var t=a(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e._pickMultNum>0)){t.next=4;break}e.restoreByData(),t.next=6;break;case 4:return t.next=6,e.showStart();case 6:return t.next=8,e.showMain();case 8:return t.next=10,e.showResult();case 10:return t.next=12,e.exitGame();case 12:n();case 13:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 6:case"end":return t.stop()}},t)}))()},exitGame:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=a(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.playFullScreen(1);case 2:e.setSubGameNodeVisible(!1),n();case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},showStart:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=a(regeneratorRuntime.mark(function t(n){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._subGameNode.active=!0,e._node_start.active=!0,e._node_start.scale=0,t.next=5,e.playActions(e._node_start,[cc.scaleTo(.35,1.2),cc.scaleTo(.15,1)]);case 5:r=function(){Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.common_click),e.playActions(e._node_start,[cc.scaleTo(.15,1.5),cc.scaleTo(.35,0)]),n()},cc.vv.gameData.checkAutoPlay(e._node_start.getChildByName("btnStart"),r),Global.btnClickEvent(e._node_start.getChildByName("btnStart"),function(){e._node_start.getChildByName("btnStart").stopAllActions(),r()},e);case 8:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},showMain:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=a(regeneratorRuntime.mark(function t(n){var r,a,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.playFullScreen(.5);case 2:return e._node_start.active=!1,e._node_main.active=!0,e.setLabel(e._lblPickLeft,e._pickLeftNum),t.next=7,e.awaitTime(1);case 7:return t.next=9,e.awaitOrOperate();case 9:e.setPlayPickTipsAction(!1),r=i(e._goldCoinItems);try{for(r.s();!(a=r.n()).done;)o=a.value,e.setGoldCoinGray(o,!o.getChildByName("sprPickMult").active)}catch(e){r.e(e)}finally{r.f()}return t.next=14,e.awaitTime(2);case 14:n();case 15:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},setPlayPickTipsAction:function(e){var t=this;if(e){this._sprPickTips.scale=1,this._sprPickTips.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.5,.9),cc.scaleTo(.2,1),cc.delayTime(2))));var n,r=i(this._goldCoinItems);try{var a=function(){var e=n.value;e.getChildByName("sprPickMult").active||(setTimeout(function(){e.getChildByName("sprPickMult").active||t.playSpine(e.getChildByName("spineRenyuGoldcoin"),null,"animation1",!0)},Global.random0To1()>=.5?500:1500),e.getComponent(cc.Button).enabled=!0)};for(r.s();!(n=r.n()).done;)a()}catch(e){r.e(e)}finally{r.f()}}else{this._sprPickTips.stopAllActions(),this._sprPickTips.scale=1;var o,c=i(this._goldCoinItems);try{for(c.s();!(o=c.n()).done;){var s=o.value;s.getChildByName("sprPickMult").active||this.playSpine(s.getChildByName("spineRenyuGoldcoin"),null,"animation3",!1),s.getComponent(cc.Button).enabled=!1}}catch(e){c.e(e)}finally{c.f()}}},awaitOrOperate:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=a(regeneratorRuntime.mark(function t(n,r){var o,c,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.setPlayPickTipsAction(!0),o=i(e._goldCoinItems);try{for(s=function(){var t=c.value;t.off("click"),Global.btnClickEvent(t,a(regeneratorRuntime.mark(function a(){var i,o,c,s,u;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.common_click),e.setPlayPickTipsAction(!1),a.next=4,cc.vv.gameData.reqSubGame(Global.QUEENOFSEA_MAP_RTYPE.OPERATE_SUBGAME,parseInt(t.name.substring(8,t.name.length)));case 4:if(200!==(i=a.sent).code){a.next=30;break}return o=i.data.mapInfo.gameInfo,c=o.choiceItems,s=c[c.length-1],e._pickLeftNum--,e.playSpine(t.getChildByName("spineRenyuGoldcoin"),null,"animation2",!1),Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.select4),e.setLabel(e._lblPickLeft,e._pickLeftNum),t.getChildByName("sprPickMult").active=!0,t.getChildByName("sprPickMult").getComponent(cc.Sprite).spriteFrame=cc.vv.gameData.GetAtlasByName("game5_mermaid").getSpriteFrame("theme163_game5_cnt"+s.mult),u=s.cnt,e._pickLeftNum=o.restCnt,u&&(t.getChildByName("sprAdd1Pick").active=!0,t.getChildByName("sprPickMult").y=25,e.playActions(t.getChildByName("sprAdd1Pick"),[cc.scaleTo(.5,1)])),a.next=20,e.playActions(t.getChildByName("sprPickMult"),[cc.scaleTo(.5,u?.75:1)]);case 20:return e.playSpine(t.getChildByName("spineRenyuFire"),null,"animation",!0),u&&e.playAddPickFlyEff(t),Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.touzi_fly),a.next=25,e.playMultFlyEff(t,s.mult);case 25:Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.touzi_extra),e.setLabel(e._lblPickLeft,e._pickLeftNum),e._pickLeftNum>0?e.setPlayPickTipsAction(!0):n(),a.next=32;break;case 30:AppLog.warn("\u8fd4\u56de\u6570\u636e\u9519\u8bef!"),r();case 32:case"end":return a.stop()}},a)})),e)},o.s();!(c=o.n()).done;)s()}catch(e){o.e(e)}finally{o.f()}case 3:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},playMultFlyEff:function(e,t){var n=this;return a(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise(function(){var r=a(regeneratorRuntime.mark(function r(a){var i,o,c,s,u;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.fly_mul),i=n._node_main.convertToNodeSpaceAR(e.parent.convertToWorldSpaceAR(e.position)),o=cc.find("nodePrizePool/theme163_game_c_3",n._node_main),c=n._node_main.convertToNodeSpaceAR(o.parent.convertToWorldSpaceAR(o.position)),(s=cc.find("nodeFlyMultNum",n._node_main)).position=i,s.scale=1,s.getComponent(cc.ParticleSystem).resetSystem(),r.next=10,n.playActions(s,[cc.moveTo(.5,c),cc.scaleTo(.1,0)]);case 10:return u=cc.find("nodePrizePool/spineNodeMult",n._node_main),n.playSpine(u),r.next=14,n.awaitTime(.2);case 14:n._pickMultNum+=t,n.setLabel(n._lblPickMult,n._pickMultNum?n._pickMultNum+"X":""),a();case 17:case"end":return r.stop()}},r)}));return function(e){return r.apply(this,arguments)}}()));case 1:case"end":return r.stop()}},r)}))()},playAddPickFlyEff:function(e){var t=this._node_main.convertToNodeSpaceAR(e.parent.convertToWorldSpaceAR(e.position)),n=this._node_main.convertToNodeSpaceAR(this._lblPickLeft.parent.convertToWorldSpaceAR(this._lblPickLeft.position)),r=cc.find("nodeFlyPickNum",this._node_main);r.position=t,r.scale=1,this.playActions(r,[cc.moveTo(.5,n),cc.scaleTo(.1,0)])},setGoldCoinGray:function(e,t){if(t){this.playSpine(e.getChildByName("spineRenyuGoldcoin"),null,"animation3",!1);var n=Global.random0To1()>.7;e.getChildByName("sprPickMult").active=!0,e.getChildByName("sprPickMult").scale=n?.75:1,e.getChildByName("sprPickMult").y=n?25:0,e.getChildByName("sprPickMult").getComponent(cc.Sprite).spriteFrame=cc.vv.gameData.GetAtlasByName("game5_mermaid").getSpriteFrame("theme163_game5_cnt"+s[Math.floor(100*Global.random0To1())%s.length]),e.getChildByName("sprAdd1Pick").active=n,e.getChildByName("sprAdd1Pick").scale=1}var r,a=t?cc.Color.GRAY:cc.Color.WHITE,o=i(e.children);try{for(o.s();!(r=o.n()).done;){r.value.color=a}}catch(e){o.e(e)}finally{o.f()}},showResult:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=a(regeneratorRuntime.mark(function t(n){var r,a,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._node_win.active=!0,(r=e._node_win.getChildByName("ui")).scale=0,a=Global.FormatCommaNumToNum(e._lblStartPrize.getComponent(cc.Label).string),r.getChildByName("btnCollect").getComponent(cc.Button).enabled=!1,e.setLabel(r.getChildByName("lblWinCoinShow"),e._pickMultNum+" X "+e.convertNumToShortStr(a)+" = "+e.convertNumToShortStr(e._pickMultNum*a)),e.rollToNumOfLabel(r.getChildByName("lblWinCoin"),e._pickMultNum*a),t.next=9,e.playActions(r,[cc.scaleTo(.3,1.2),cc.scaleTo(.1,1)]);case 9:cc.vv.gameData.GetSlotsScript()._bottomScript.SetWin(e._pickMultNum*a),r.getChildByName("btnCollect").getComponent(cc.Button).enabled=!0,i=function(){Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.common_click),r.getChildByName("lblWinCoin").stopAllActions(),e.setLabel(r.getChildByName("lblWinCoin"),e.convertNumToShortStr(e._pickMultNum*a)),e.playActions(r,[cc.scaleTo(.1,1.2),cc.scaleTo(.3,0)]),n()},cc.vv.gameData.checkAutoPlay(r.getChildByName("btnCollect"),i),Global.btnClickEvent(r.getChildByName("btnCollect"),function(){r.getChildByName("btnCollect").stopAllActions(),i()},e);case 14:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()}}),cc._RF.pop()},{TheMermaid_subGameBase:"TheMermaid_subGameBase"}],TheMermaid_subGameYellowFish:[function(e,t,n){"use strict";function r(e,t,n,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(a,i){var o=e.apply(t,n);function c(e){r(o,a,i,c,s,"next",e)}function s(e){r(o,a,i,c,s,"throw",e)}c(void 0)})}}function i(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=o(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a,i=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function o(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}cc._RF.push(t,"5eca24ZBnlOkp0EIVZj4Aev","TheMermaid_subGameYellowFish");var s=["3","1","4","2","5"];cc.Class({extends:e("TheMermaid_subGameBase"),properties:{_subGameNodeName:"subGameYellowFish",_lblStartPrize:null,_sprPickTips:null,_roralsFishList:null,_winList:null,_chooseCount:0},onLoad:function(){this._super(),this._lblStartPrize=cc.find("nodePrizePool/theme163_game_c_2/lblStartPrize",this._node_main),this._sprPickTips=cc.find("nodeDetail/pickTips",this._node_main),this._roralsFishList=[],this._winList=[];for(var e=1;e<=5;e++)this._roralsFishList[e]=cc.find("nodeDetail/fish/fish"+e,this._node_main),this._winList[e]=cc.find("nodeDetail/win/win"+e,this._node_main);this.init()},init:function(){for(var e=1;e<=5;e++){this._winList[e].active=!1;var t=this._roralsFishList[e];t.getComponent(cc.Button).enabled=!0;var n=t.getChildByName("spineParrot");n.active=!0,this.playSpine(n,null,"animation1",!0),t.getChildByName("spineBubble").active=!1}var r,a=i(cc.find("nodeDetail/mult",this._node_main).children);try{for(a.s();!(r=a.n()).done;){r.value.active=!1}}catch(e){a.e(e)}finally{a.f()}},restoreByData:function(){var e=cc.vv.gameData.mapInfo.gameInfo;for(var t in this._subGameNode.active=!0,this._chooseCount=e.useCnt,e.coral){var n=parseInt(t)+1,r=e.coral[t],a=this._roralsFishList[n];a.getComponent(cc.Button).enabled=0==r;var i=a.getChildByName("spineParrot");i.active=0==r,this.playSpine(i,null,"animation1",!0);var o=a.getChildByName("spineBubble");o.active=0!=r,0!=r&&this.playSpine(o,null,"animation"+s[r-1]+"_1",!0),r>0&&(this._winList[r].active=!0)}},enterGame:function(){var e=this;return a(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.init(),n=cc.vv.gameData.mapInfo.gameInfo,e._chooseCount=n.useCnt||0,e.setLabel(e._lblStartPrize,Global.FormatNumToComma(n.startPrize)),t.abrupt("return",new Promise(function(){var t=a(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.restoreByData(),0!=e._chooseCount){t.next=4;break}return t.next=4,e.showStart();case 4:return t.next=6,e.showMain();case 6:return t.next=8,e.showResult();case 8:return t.next=10,e.exitGame();case 10:n();case 11:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 5:case"end":return t.stop()}},t)}))()},exitGame:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=a(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.playFullScreen(1);case 2:e.setSubGameNodeVisible(!1),n();case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},showStart:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=a(regeneratorRuntime.mark(function t(n){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._subGameNode.active=!0,e._node_start.active=!0,e._node_start.scale=0,t.next=5,e.playActions(e._node_start,[cc.scaleTo(.35,1.5),cc.scaleTo(.15,1.3)]);case 5:r=function(){Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.common_click),e.playActions(e._node_start,[cc.scaleTo(.15,1.5),cc.scaleTo(.35,0)]),n()},cc.vv.gameData.checkAutoPlay(e._node_start.getChildByName("btnStart"),r),Global.btnClickEvent(e._node_start.getChildByName("btnStart"),function(){e._node_start.getChildByName("btnStart").stopAllActions(),r()},e);case 8:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},showMain:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=a(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(cc.vv.gameData.mapInfo.gameInfo.mult<=0)){t.next=4;break}return t.next=4,e.playFullScreen(.5);case 4:return e._node_start.active=!1,e._node_main.active=!0,t.next=8,e.awaitTime(.2);case 8:return t.next=10,e.awaitOrOperate();case 10:return e.setPlayPickTipsAction(!1),t.next=13,e.awaitTime(1);case 13:n();case 14:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},setPlayPickTipsAction:function(e){e?(this._sprPickTips.scale=1,this._sprPickTips.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.5,.9),cc.scaleTo(.2,1),cc.delayTime(2))))):(this._sprPickTips.stopAllActions(),this._sprPickTips.scale=1);var t=cc.vv.gameData.mapInfo.gameInfo;for(var n in t.coral){var r=parseInt(n)+1,a=t.coral[n];this._roralsFishList[r].getComponent(cc.Button).enabled=e&&0==a}},awaitOrOperate:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=a(regeneratorRuntime.mark(function t(n,r){var i,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(e.setPlayPickTipsAction(!0),i=function(t){var i=e._roralsFishList[t];i.off("click"),Global.btnClickEvent(i,a(regeneratorRuntime.mark(function a(){var o,c,u,l,m;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.common_click),e.setPlayPickTipsAction(!1),a.next=4,cc.vv.gameData.reqSubGame(Global.QUEENOFSEA_MAP_RTYPE.OPERATE_SUBGAME,t);case 4:if(200!==(o=a.sent).code){a.next=34;break}return c=o.data.mapInfo.gameInfo,u=c.coral[t-1],i.getComponent(cc.Button).enabled=!1,Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.select3),(l=i.getChildByName("spineParrot")).active=!0,e.playSpine(l,function(){l.active=!1},"animation2",!1),a.next=15,e.awaitTime(.3);case 15:return(m=i.getChildByName("spineBubble")).active=!0,e.playSpine(m,function(){e.playSpine(m,null,"animation"+s[u-1]+"_1",!0)},"animation"+s[u-1],!1),a.next=20,e.awaitTime(.5);case 20:return e._winList[u].active=!0,a.next=23,e.awaitTime(.5);case 23:if(!(c.winCoin>0)){a.next=31;break}return Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.dead),cc.find("nodeDetail/mult/spineMult_"+c.mult,e._node_main).active=!0,a.next=28,e.awaitTime(2);case 28:n(),a.next=32;break;case 31:e.setPlayPickTipsAction(!0);case 32:a.next=36;break;case 34:AppLog.warn("\u8fd4\u56de\u6570\u636e\u9519\u8bef!"),r();case 36:case"end":return a.stop()}},a)})))},o=1;o<=5;o++)i(o);case 3:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},showResult:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=a(regeneratorRuntime.mark(function t(n){var r,a,i,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._node_win.active=!0,(r=e._node_win.getChildByName("ui")).scale=0,a=Global.FormatCommaNumToNum(e._lblStartPrize.getComponent(cc.Label).string),i=cc.vv.gameData.mapInfo.gameInfo.mult,r.getChildByName("btnCollect").getComponent(cc.Button).enabled=!1,e.setLabel(r.getChildByName("lblWinCoinShow"),i+" X "+e.convertNumToShortStr(a)+" = "+e.convertNumToShortStr(i*a)),e.rollToNumOfLabel(r.getChildByName("lblWinCoin"),i*a),t.next=10,e.playActions(r,[cc.scaleTo(.3,1.2),cc.scaleTo(.1,1)]);case 10:cc.vv.gameData.GetSlotsScript()._bottomScript.SetWin(i*a),r.getChildByName("btnCollect").getComponent(cc.Button).enabled=!0,o=function(){Global.SlotsSoundMgr.playEffect(SlotsFacade.soundMgr.common_click),r.getChildByName("lblWinCoin").stopAllActions(),e.setLabel(r.getChildByName("lblWinCoin"),e.convertNumToShortStr(i*a)),e.playActions(r,[cc.scaleTo(.1,1.2),cc.scaleTo(.3,0)]),n()},cc.vv.gameData.checkAutoPlay(r.getChildByName("btnCollect"),o),Global.btnClickEvent(r.getChildByName("btnCollect"),function(){r.getChildByName("btnCollect").stopAllActions(),o()},e);case 15:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()}}),cc._RF.pop()},{TheMermaid_subGameBase:"TheMermaid_subGameBase"}]},{},["TheMermaid_Cfg","TheMermaid_GameData","TheMermaid_Logic","TheMermaid_Map","TheMermaid_MapCollectProgress","TheMermaid_Pop","TheMermaid_PrizePool","TheMermaid_Slots","TheMermaid_Sound","TheMermaid_StarFish","TheMermaid_Symbol","TheMermaid_subGameBase","TheMermaid_subGameBeke","TheMermaid_subGameCollectWheel","TheMermaid_subGameDice","TheMermaid_subGameGoldShip","TheMermaid_subGameMultWheel","TheMermaid_subGameRenyu","TheMermaid_subGameYellowFish"]);
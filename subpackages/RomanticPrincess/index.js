window.__require=function e(t,n,o){function a(r,s){if(!n[r]){if(!t[r]){var c=r.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(i)return i(c,!0);throw new Error("Cannot find module '"+r+"'")}r=c}var d=n[r]={exports:{}};t[r][0].call(d.exports,function(e){return a(t[r][1][e]||e)},d,d.exports,e,t,n,o)}return n[r].exports}for(var i="function"==typeof __require&&__require,r=0;r<o.length;r++)a(o[r]);return a}({RomanticPrincess_BonusGame:[function(e,t,n){"use strict";function o(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=a(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i,r=!0,s=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return r=e.done,e},e:function(e){s=!0,i=e},f:function(){try{r||null==o.return||o.return()}finally{if(s)throw i}}}}function a(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function r(e,t,n,o,a,i,r){try{var s=e[i](r),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(o,a)}function s(e){return function(){var t=this,n=arguments;return new Promise(function(o,a){var i=e.apply(t,n);function s(e){r(i,o,a,s,c,"next",e)}function c(e){r(i,o,a,s,c,"throw",e)}s(void 0)})}}cc._RF.push(t,"8b9807c1TxBxbEABklBwC5v","RomanticPrincess_BonusGame"),cc.Class({extends:cc.Component,properties:{labelTemplate:cc.Label,jpParticleArr:[cc.Node],spineCenter:sp.Skeleton,spineBottom:sp.Skeleton,spineMultiple:sp.Skeleton,_cbHandler:null},onLoad:function(){this.labelTemplate.node.active=!1,this.spineCenter.node.active=!1,this.spineMultiple.node.active=!1},enterBonus:function(e){var t=this;return s(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t._cbHandler=e,n.next=3,t.assignmentJp();case 3:return n.next=5,t.settlementCoin();case 5:SlotsFacade.slots.resetReelBonusAni(),e&&e(SlotsFacade.dm.getSpinData().bonusInfo.winCoin);case 7:case"end":return n.stop()}},n)}))()},assignmentJp:function(){var e=this;return s(regeneratorRuntime.mark(function t(){var n,a,i,r,s,c,l,d,u,m,f;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=SlotsFacade.dm.getSpinData().bonusInfo,a=[],i=o(n.items);try{for(i.s();!(r=i.n()).done;)(s=r.value).jackpot&&a.push(s)}catch(e){i.e(e)}finally{i.f()}if(!(a.length<1)){t.next=6;break}return t.abrupt("return");case 6:for(c=0,l=a;c<l.length;c++)d=l[c],SlotsFacade.prizePool.playWinAni(d.jackpot.id-1);return SlotsFacade.soundMgr.playEffect("green_dia_hit"),t.next=10,SlotsFacade.delayTime(1);case 10:for(u=function(){var t=f[m],n=cc.instantiate(e.jpParticleArr[t.jackpot.id-1]);n.active=!0,n.parent=e.node;var o=SlotsFacade.prizePool.getJpGlobalPos(t.jackpot.id-1);o=e.node.convertToNodeSpaceAR(o);var a=SlotsFacade.slots.GetSymbolByIdx(t.idx),i=SlotsFacade.slots.getIdxGlobalPos(t.idx);i=e.node.convertToNodeSpaceAR(i),n.position=o,cc.tween(n).to(.4,{x:i.x,y:i.y}).call(function(){n.removeFromParent(!0),SlotsFacade.soundMgr.playEffect("diamond_text_rotate"),a.showJpSymbolCoin(t.jackpot.value)}).start()},m=0,f=a;m<f.length;m++)u();return t.next=14,SlotsFacade.delayTime(2.2);case 14:case"end":return t.stop()}},t)}))()},settlementCoin:function(){var e=this;return s(regeneratorRuntime.mark(function t(){var n,o,a,i,r,s,c,l,d,u,m,f,p;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=SlotsFacade.mainPanel.slots.convertToWorldSpaceAR(cc.v2(0,0)),n=e.node.convertToNodeSpaceAR(n),(o=cc.instantiate(e.labelTemplate.node).getComponent(cc.Label)).node.parent=e.node,o.node.active=!0,o.string="",o.node.position=n,e.spineCenter.node.position=n,e.spineCenter.node.active=!0,a=SlotsFacade.dm.getSpinData().bonusInfo,(i=a.items.concat()).sort(function(e,t){var n=SlotsFacade.slots.transferIdx(e.idx),o=SlotsFacade.slots.transferIdx(t.idx);return n.col>o.col?1:n.col<o.col?-1:n.row-o.row}),r=0,s=regeneratorRuntime.mark(function t(a){var s,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s=i[a].coin||i[a].jackpot.value,(c=cc.instantiate(e.labelTemplate.node).getComponent(cc.Label)).node.active=!0,c.node.parent=e.node,c.node.position=e.node.convertToNodeSpaceAR(SlotsFacade.slots.getIdxGlobalPos(i[a].idx)),c.string=Global.convertNumToShort(s),SlotsFacade.soundMgr.playEffect(["diamond_collect1","diamond_collect2","diamond_collect3"][Math.floor(3*Math.random())]),cc.tween(c.node).to(.6,{x:n.x,y:n.y},{easing:"cubicIn"}).call(function(){c.node.removeFromParent(!0),e.spineCenter.setAnimation(0,"animation1",!1)}).start(),t.next=10,SlotsFacade.delayTime(.6);case 10:return cc.tween(o.node).to(.3,{scale:1.2*o.node.scale},{easing:"backOut"}).start(),t.next=13,new Promise(function(e){Global.doRoallNumEff(o,r,r+s,1,e,null,0,!0)});case 13:r+=s;case 14:case"end":return t.stop()}},t)}),c=0;case 15:if(!(c<i.length)){t.next=20;break}return t.delegateYield(s(c),"t0",17);case 17:c++,t.next=15;break;case 20:return t.next=22,SlotsFacade.delayTime(.5);case 22:if(!(l=SlotsFacade.dm.getSpinData().storeInfo.freeInfo)){t.next=41;break}if(!(d=l.multBonus)){t.next=41;break}return e.spineMultiple.node.active=!0,e.spineMultiple.node.position=cc.v2(0,0),e.spineMultiple.setAnimation(0,"animation".concat(d,"_1"),!1),e.spineMultiple.addAnimation(0,"animation".concat(d),!1,.35),e.spineMultiple.setCompleteListener(function(){e.spineMultiple.setCompleteListener(null)}),SlotsFacade.soundMgr.playEffect("multi_collect4"),cc.tween(e.spineMultiple.node).to(.9,{x:n.x,y:n.y}).call(function(){e.spineMultiple.node.active=!1}).start(),t.next=35,SlotsFacade.delayTime(.8);case 35:return e.spineCenter.setAnimation(0,"animation2",!1),e.spineCenter.setCompleteListener(function(){e.spineCenter.setCompleteListener(null),e.spineCenter.node.active=!1}),cc.tween(o.node).to(.3,{scale:o.node.scale*(1+d/10)},{easing:"backOut"}).start(),t.next=40,new Promise(function(e){Global.doRoallNumEff(o,r,r*d,1,e,null,0,!0)});case 40:r*=d;case 41:return u=cc.find("winBg/lbl_winNum_nor",SlotsFacade.bottomCmp.node),m=u.convertToWorldSpaceAR(cc.v2(0,0)),m=e.node.convertToNodeSpaceAR(m),SlotsFacade.soundMgr.playEffect("diamond_collectall"),cc.tween(o.node).to(1,{x:m.x,y:m.y},{easing:"cubicIn"}).call(function(){o.node.removeFromParent(!0),e.spineBottom.node.active=!0,e.spineBottom.node.position=m,e.spineBottom.setAnimation(0,"animation",!1),e.spineBottom.setCompleteListener(function(){e.spineBottom.setCompleteListener(null),e.spineBottom.node.active=!1})}).start(),t.next=48,SlotsFacade.delayTime(1);case 48:return f=a.winCoin,p=f,cc.vv.gameData.GetTotalFree()>0&&cc.vv.gameData.GetTotalFree()!=cc.vv.gameData.GetFreeTime()&&(p=cc.vv.gameData.GetGameTotalFreeWin()-cc.vv.gameData.GetGameWin()+f),u.active=!0,t.next=54,new Promise(function(e){Global.doRoallNumEff(u,p-f,p,1,e,null,0,!0)});case 54:return t.next=56,new Promise(function(e){SlotsFacade.slots.ShowBottomWin(f,p,!0,e)});case 56:case"end":return t.stop()}},t)}))()}}),cc._RF.pop()},{}],RomanticPrincess_Cfg:[function(e,t,n){"use strict";var o;function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}cc._RF.push(t,"97d1fKejbVDobayY4aou/a5","RomanticPrincess_Cfg");var i={symbol:(o={},a(o,1,{node:"s1",win_node:"w1",win_ani:{name:"animation1",zIndex:300},stop_ani:{name:"animation1_1",zIndex:300}}),a(o,2,{node:"s2",win_node:"w2",win_ani:{name:"animation1",zIndex:300},trigger_ani:{name:"animation2",zIndex:300,loop:!0},stop_ani:{name:"animation",zIndex:400},idle_ani:{name:"animation1",zIndex:400}}),a(o,3,{node:"s3",win_node:"w3",win_ani:{name:"animation",zIndex:300}}),a(o,4,{node:"s4",win_node:"w4",win_ani:{name:"animation",zIndex:300}}),a(o,5,{node:"s5",win_node:"w5",win_ani:{name:"animation",zIndex:300}}),a(o,6,{node:"s6",win_node:"w6",win_ani:{name:"animation",zIndex:300}}),a(o,7,{node:"s7",win_node:"w7",win_ani:{name:"animation",zIndex:300}}),a(o,8,{node:"s8",win_node:"w8",win_ani:{name:"animation",zIndex:300}}),a(o,9,{node:"s9",win_node:"w9",win_ani:{name:"animation",zIndex:300}}),a(o,10,{node:"s10",win_node:"w10",win_ani:{name:"animation",zIndex:300}}),a(o,11,{node:"s11",win_node:"w11",win_ani:{name:"animation",zIndex:300}}),a(o,12,{node:"s12",win_node:"w12",win_ani:{name:"animation",zIndex:300}}),a(o,13,{node:"s13",win_node:"w13",win_ani:{name:"animation",zIndex:300}}),a(o,301,{node:"s301",win_node:"w301",win_ani:{name:"animation",zIndex:300}}),a(o,302,{node:"s302",win_node:"w302",win_ani:{name:"animation",zIndex:300}}),o),wildId:1,scatterId:2,bonusId:3,scripts:{Top:"LMSlots_Top_Base",Bottom:"LMSlots_Bottom_Base",Slots:"RomanticPrincess_Slots",Reels:"RomanticPrincess_Reel",Symbols:"RomanticPrincess_Symbol"},col:5,row:4,symbolPrefab:"LMSlots_Symbol",symbolSize:{height:110},helpItems:["games/RomanticPrincess/prefab/LMSlots_Help_item1","games/RomanticPrincess/prefab/LMSlots_Help_item2","games/RomanticPrincess/prefab/LMSlots_Help_item3","games/RomanticPrincess/prefab/LMSlots_Help_item4","games/RomanticPrincess/prefab/LMSlots_Help_item5","games/RomanticPrincess/prefab/LMSlots_Help_item6"],autoModelDelay:1,randomSymbols:[1,2,3,4,5,6,7,8,9,10,11,12,13,301,302],randomSymbolsBySkip:[1,2,3,4,5,6,7,8,9,10,11,12,13,301,302],kuang:"kuang",speed:3e3,reelStopInter:.2,auto_stop_time:1,bounce:!0,bounceInfo:{distance:30,time:.1},normalBgm:"base_bgm",AddAntiTime:2.4,reelStateInfo:[{isScatter:!0,id:[2],mini:3,counts:[1,1,1,1,1],antiNode:"node_anti",path:"games/RomanticPrincess/",reelStopSound:"reel_stop",symbolStopSound:"sc_land1",antSound:"reel_anti",antSpeed:2e3},{inNormal:!0,id:[3,301,302],mini:3,counts:[1,1,1,1,1],antiNode:"node_anti",path:"games/RomanticPrincess/",reelStopSound:"reel_stop",symbolStopSound:"diamond_land",antSound:"reel_anti",antSpeed:2e3}],isEnergyId:function(e){return 3==e},NeedIdleIds:[],StoreItemType:{freeCnt:1,stickyWild:2,randWild:3,roamingWilds:4,removeSymbol:5,extraBonus:6,multWild:7,stickyWildAndRemoveSymbol:8,randomWildAndRemoveSymbol:9,roamingWildAndRemoveSymbol:10,extraBonusAndMultBonus:11}};t.exports=i,cc._RF.pop()},{}],RomanticPrincess_Character:[function(e,t,n){"use strict";function o(e,t,n,o,a,i,r){try{var s=e[i](r),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(o,a)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(a,i){var r=e.apply(t,n);function s(e){o(r,a,i,s,c,"next",e)}function c(e){o(r,a,i,s,c,"throw",e)}s(void 0)})}}cc._RF.push(t,"335f8E4hbBMM6lEDaZyHdGe","RomanticPrincess_Character"),cc.Class({extends:cc.Component,properties:{spineRole:sp.Skeleton,spineDiamondBonus:sp.Skeleton},onLoad:function(){this.spineDiamondBonus.node.active=!1},playDiamondAni:function(){return a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))()},start:function(){}}),cc._RF.pop()},{}],RomanticPrincess_Collect:[function(e,t,n){"use strict";function o(e,t,n,o,a,i,r){try{var s=e[i](r),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(o,a)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(a,i){var r=e.apply(t,n);function s(e){o(r,a,i,s,c,"next",e)}function c(e){o(r,a,i,s,c,"throw",e)}s(void 0)})}}cc._RF.push(t,"8de60OOMllN2pnwWRN8Rd+8","RomanticPrincess_Collect"),cc.Class({extends:cc.Component,properties:{label:cc.Label,icon:cc.Node,spineArrive:sp.Skeleton,spineLock:sp.Skeleton,traceParticle:cc.ParticleSystem,tips:cc.Node,isOpen:!1},onLoad:function(){this._initListener()},start:function(){var e=this;this.scheduleOnce(function(){e._init()})},_initListener:function(){var e=this;Global.registerEvent(cc.vv.gameData._EventId.SLOT_TOTALBET_UPDATED,function(){e.showCollect(!1)},this),this.node.on("click",function(){SlotsFacade.dm.hasFree()||SlotsFacade.bottomCmp.GetSpinBtnState()&&(SlotsFacade.dm.GetAutoModelTime()>0||(e.isOpen?e._openStore():e._openCollect()))},this)},_init:function(){this.setCnt(SlotsFacade.dm.energyData.gemCnt),this.showCollect(!0)},_openStore:function(){SlotsFacade.bottomCmp.ShowBtnsByState("moveing_1"),SlotsFacade.storeGame.open(function(){SlotsFacade.bottomCmp.ShowBtnsByState("idle")})},_openCollect:function(){var e=SlotsFacade.dm.GetBetMults(),t=SlotsFacade.dm.getDeskInfo().needBet;if(!(t>e.length)){SlotsFacade.dm.SetBetIdx(t),SlotsFacade.bottomCmp.ShowBetCoin();var n=cc.vv.gameData.GetTotalBet();Global.dispatchEvent(cc.vv.gameData._EventId.SLOT_TOTALBET_UPDATED,n)}},showCollect:function(e){var t=SlotsFacade.dm.canCollect();t?e?this.spineLock.setAnimation(0,"animation1",!0):this.isOpen||(SlotsFacade.soundMgr.playEffect("map_unlock"),this.spineLock.setAnimation(0,"animation4",!1),this.spineLock.addAnimation(0,"animation1",!0)):e?this.spineLock.setAnimation(0,"animation3",!1):this.isOpen&&(SlotsFacade.soundMgr.playEffect("map_lock"),this.spineLock.setAnimation(0,"animation2",!1),this.spineLock.addAnimation(0,"animation3",!1)),this.isOpen=t},setCnt:function(e,t){var n=this;this.label.string=Global.FormatNumToComma(e),t&&(this.spineArrive.node.active=!0,this.spineArrive.setAnimation(0,"animation",!1),this.spineArrive.setCompleteListener(function(){n.spineArrive.setCompleteListener(null),n.spineArrive.node.active=!1}))},collectEnergy:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){var o,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return SlotsFacade.soundMgr.playEffect("bonus_fly"),o=t.icon.getPosition(),a=[],e.forEach(function(e){var n=t.node.convertToNodeSpaceAR(e),i=cc.instantiate(t.traceParticle.node);i.parent=t.node,i.x=n.x,i.y=n.y,i.active=!0,i.getComponent(cc.ParticleSystem).resetSystem(),a.push(new Promise(function(e){cc.tween(i).to(.5,{x:o.x,y:o.y}).call(function(){i.removeFromParent(),e()}).start()}))}),n.next=6,Promise.all(a);case 6:t.setCnt(SlotsFacade.dm.energyData.gemCnt,!0);case 7:case"end":return n.stop()}},n)}))()},hide:function(){this.node.active=!1},show:function(){this.node.active=!0}}),cc._RF.pop()},{}],RomanticPrincess_FlowCtrl:[function(e,t,n){"use strict";function o(e,t,n,o,a,i,r){try{var s=e[i](r),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(o,a)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(a,i){var r=e.apply(t,n);function s(e){o(r,a,i,s,c,"next",e)}function c(e){o(r,a,i,s,c,"throw",e)}s(void 0)})}}cc._RF.push(t,"b51fd2bksVEFJaThHBT18Bo","RomanticPrincess_FlowCtrl"),cc.Class({extends:cc.Component,enterRoom:function(){var e=this;return a(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(cc.vv.gameData.GetFreeTime()>0)){t.next=6;break}return n=cc.vv.gameData.GetTotalFreeWin(),SlotsFacade.bottomCmp.SetWin(n),t.next=6,e.enterFreeGame(!0);case 6:SlotsFacade.slots.CanDoNextRound();case 7:case"end":return t.stop()}},t)}))()},startMove:function(){return a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:SlotsFacade.wildGame.startMove();case 1:case"end":return e.stop()}},e)}))()},onSpinMsg:function(e){return a(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,SlotsFacade.wildGame.onSpinMsg();case 2:SlotsFacade.slots._gameInfo=e,n=e.resultCards,SlotsFacade.slots.SetSlotsResult(n),SlotsFacade.slots.SetReelStateInfo(n);case 6:case"end":return t.stop()}},t)}))()},spinEnd:function(){var e=this;return a(regeneratorRuntime.mark(function t(){var n,o,a,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,SlotsFacade.wildGame.spinEnd();case 2:return t.next=4,e.collectEnergy();case 4:return t.next=6,e.enterBonusGame();case 6:return SlotsFacade.slots.ShowWinTrace(),n=cc.vv.gameData.GetGameWin(),o=n,a=0,i=0,SlotsFacade.dm.getSpinData().bonusInfo.isWin&&(a=SlotsFacade.dm.getSpinData().bonusInfo.winCoin),SlotsFacade.dm.getSpinData().jackpotInfo&&(i=SlotsFacade.dm.getSpinData().jackpotInfo.winCoin),n=n-a-i,cc.vv.gameData.GetTotalFree()>0&&cc.vv.gameData.GetTotalFree()!=cc.vv.gameData.GetFreeTime()&&(o=cc.vv.gameData.GetGameTotalFreeWin()),o-=i,t.next=18,new Promise(function(e){SlotsFacade.slots.ShowBottomWin(n,o,!0,e)});case 18:return t.next=20,e.settlementJp();case 20:return t.next=22,SlotsFacade.delayTime(.5);case 22:if(!SlotsFacade.dm.isTriggerFree()){t.next=41;break}if(!SlotsFacade.dm.isFistTriggerFree()){t.next=37;break}return SlotsFacade.soundMgr.playEffect("vo_free"),t.next=27,SlotsFacade.slots.playTriggerAni(SlotsFacade.dm.getSpinData().scatterZJLuXian.indexs);case 27:return SlotsFacade.slots.Backup(),t.next=30,SlotsFacade.popup.showWinFreeCnt(SlotsFacade.dm.triggerFreeCnt(),!0);case 30:return SlotsFacade.mainPanel.showSceneTransition(1),t.next=33,SlotsFacade.delayTime(3);case 33:return t.next=35,e.enterFreeGame();case 35:t.next=39;break;case 37:return t.next=39,SlotsFacade.popup.showWinFreeCnt(SlotsFacade.dm.triggerFreeCnt(),!1);case 39:t.next=56;break;case 41:if(!SlotsFacade.dm.isLastEndFree()){t.next=56;break}if(SlotsFacade.bottomCmp.ShowBtnsByState("moveing_1"),1!=SlotsFacade.dm.energyData.state){t.next=48;break}return t.next=46,SlotsFacade.popup.showWinStoreGold(SlotsFacade.dm.getFreeWinCoin());case 46:t.next=50;break;case 48:return t.next=50,SlotsFacade.popup.showWinFreeGold(SlotsFacade.dm.getFreeWinCoin());case 50:return SlotsFacade.mainPanel.showSceneTransition(1),t.next=53,SlotsFacade.delayTime(3);case 53:return SlotsFacade.slots.Resume(),t.next=56,e.enterNormalGame();case 56:SlotsFacade.slots.CanDoNextRound();case 57:case"end":return t.stop()}},t)}))()},enterFreeGame:function(e){return a(regeneratorRuntime.mark(function e(){var t,n,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(SlotsFacade.topCmp.SetBackLobby(!1),SlotsFacade.bottomCmp.ShowBtnsByState("moveing_1"),t=1,1==SlotsFacade.dm.energyData.state&&(t=2),SlotsFacade.mainPanel.showBg(1),SlotsFacade.soundMgr.playFreeBgm(),SlotsFacade.bottomCmp.node.getChildByName("totalBetBg").active=1==t,n=cc.vv.gameData.GetTotalFree(),o=cc.vv.gameData.GetFreeTime(),SlotsFacade.bottomCmp.ShowFreeModel(!0,n-o,n),2!=t){e.next=18;break}return SlotsFacade.collect.hide(),SlotsFacade.slots.updateAllSymbol(),e.next=16,SlotsFacade.wildGame.enterWildGame();case 16:e.next=20;break;case 18:SlotsFacade.dm.updateRandomSymbols(),SlotsFacade.collect.show();case 20:return e.next=22,SlotsFacade.delayTime(.5);case 22:case"end":return e.stop()}},e)}))()},enterNormalGame:function(){return a(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(SlotsFacade.dm.updateRandomSymbols(),SlotsFacade.collect.show(),SlotsFacade.bottomCmp.ShowFreeModel(!1),SlotsFacade.mainPanel.showBg(0),Global.SlotsSoundMgr.playNormalBgm(),SlotsFacade.bottomCmp.node.getChildByName("totalBetBg").active=!0,SlotsFacade.wildGame.exitWildGame(),!SlotsFacade.dm.isLastEndFree()){e.next=11;break}return t=cc.vv.gameData.GetGameTotalFreeWin(),e.next=11,new Promise(function(e){SlotsFacade.slots.ShowBottomWin(t,t,!0,e)});case 11:case"end":return e.stop()}},e)}))()},collectEnergy:function(){return a(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0==SlotsFacade.dm.energyData.state){e.next=2;break}return e.abrupt("return");case 2:if(SlotsFacade.collect.isOpen){e.next=4;break}return e.abrupt("return");case 4:if(t=SlotsFacade.slots.getSymbolsByServerIds(SlotsFacade.dm.getCollectSymbolIndexs()),n=[],t.forEach(function(e){n.push(e.node.convertToWorldSpaceAR(cc.v2(0,0)))}),!(n.length>0)){e.next=10;break}return e.next=10,SlotsFacade.collect.collectEnergy(n);case 10:case"end":return e.stop()}},e)}))()},enterBonusGame:function(){return a(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=SlotsFacade.dm.getSpinData().bonusInfo).isWin&&t.winCoin>0)){e.next=11;break}if(!(SlotsFacade.dm.GetTotalFree()<1)){e.next=7;break}return SlotsFacade.soundMgr.playEffect("bell"),SlotsFacade.soundMgr.playEffect(["vo_beautiful","vo_nice"][Math.floor(2*Math.random())]),e.next=7,SlotsFacade.slots.shakeReels();case 7:return e.next=9,new Promise(function(e){SlotsFacade.bonusGame.enterBonus(e)});case 9:e.next=12;break;case 11:SlotsFacade.slots.resetReelBonusAni();case 12:case"end":return e.stop()}},e)}))()},settlementJp:function(){return a(regeneratorRuntime.mark(function e(){var t,n,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=SlotsFacade.dm.getSpinData().jackpotInfo){e.next=3;break}return e.abrupt("return");case 3:return SlotsFacade.soundMgr.playEffect("bell"),SlotsFacade.soundMgr.playEffect("vo_great"),SlotsFacade.mainPanel.spine_border_effect.active=!0,SlotsFacade.slots.shakeReels(2,2),e.next=9,SlotsFacade.delayTime(1);case 9:return SlotsFacade.mainPanel.spine_border_effect.active=!1,SlotsFacade.prizePool.playWinAni(t.jackpot.id-1),e.next=13,SlotsFacade.delayTime(1.5);case 13:return e.next=15,SlotsFacade.popup.showWinJPGold(t.jackpot.id,t.jackpot.value);case 15:return n=t.winCoin,o=cc.vv.gameData.GetGameWin(),cc.vv.gameData.GetTotalFree()>0&&cc.vv.gameData.GetTotalFree()!=cc.vv.gameData.GetFreeTime()&&(o=cc.vv.gameData.GetGameTotalFreeWin()),e.next=20,new Promise(function(e){SlotsFacade.slots.ShowBottomWin(n,o,!0,e)});case 20:case"end":return e.stop()}},e)}))()}}),cc._RF.pop()},{}],RomanticPrincess_GameData:[function(e,t,n){"use strict";cc._RF.push(t,"3f8b8wzSOlJepCLxlnnzFgT","RomanticPrincess_GameData"),cc.Class({extends:e("LMSlots_GameData_Base"),properties:{energyData:null},init:function(e,t,n){this._super(e,t,n),this.energyData=this._deskInfo.storeInfo},RegisterMsg:function(){this._super(),cc.vv.NetManager.registerMsg(MsgId.SLOT_SUBGAME_DATA,this.onResp,this)},UnregisterMsg:function(){this._super(),cc.vv.NetManager.unregisterMsg(MsgId.SLOT_SUBGAME_DATA,this.onResp,!1,this)},OnRcvNetSpine:function(e){200==e.code&&(this.energyData=e.storeInfo),this._super(e)},SetSubGameData:function(e){this._subGame=e},GetSubGameData:function(){return this._subGame},getSpinData:function(){return this._gameInfo},hasFree:function(){return this.GetFreeTime()>0},isTriggerFree:function(){return this.triggerFreeCnt()>0},triggerFreeCnt:function(){var e=this._gameInfo.freeResult;return e&&e.triFreeCnt&&e.freeInfo&&e.freeInfo.freeCnt?e.freeInfo.freeCnt:0},isFistTriggerFree:function(){return this.hasFree()&&this.GetFreeTime()==this.GetTotalFree()},isLastEndFree:function(){return 0==this.GetFreeTime()&&this.GetTotalFree()>0},getFreeWinCoin:function(){return this._gameInfo.freeWinCoin},getScatterIndexs:function(){return this.triggerFreeCnt()>0?this._gameInfo.freeResult.freeInfo.scatterIdx.concat():[]},getCollectSymbolIndexs:function(){var e=this,t=this._gameInfo.resultCards;if(!t||t.length<1)return[];var n=[];return t.forEach(function(t,o){e.getGameCfg().isEnergyId(t)&&n.push(o+1)}),n},canCollect:function(){return this.GetBetIdx()>=this.getDeskInfo().needBet},reqSubGame:function(e){var t={c:MsgId.SLOT_SUBGAME_DATA,gameid:this._gameId,data:e};cc.vv.NetManager.send(t,!0)},onResp:function(e){console.log("reqSubGame-resp:",e),1==e.data.rtype?SlotsFacade.storeGame.onMsg(e):e.data.rtype},getRewardData:function(){var e=this.getSpinData().rewardIdxs;if(!e||e.length<1)return null;for(var t=this.getSpinData().bonusIdxs,n=this.getSpinData().bonusItems,o=[],a=[],i=[],r=0;r<e.length;r++){var s=e[r],c=t.indexOf(s);if(-1!=c){var l=n[c];l.coin?i.push({idx:s,item:l}):l.jackpot?a.push({idx:s,item:l}):l.wheel&&o.push({idx:s,item:l})}else console.log("#err\u6570\u636e\u51fa\u9519rewardIdxs",e,t,n)}return o.sort(function(e,t){var n=SlotsFacade.slots.transferIdx(e.idx),o=SlotsFacade.slots.transferIdx(t.idx);return n.col!=o.col?n.col-o.col:n.row-o.row}),a.sort(function(e,t){var n=SlotsFacade.slots.transferIdx(e.idx),o=SlotsFacade.slots.transferIdx(t.idx);return n.col!=o.col?n.col-o.col:n.row-o.row}),{rewardIdxs:e,honeycombData:o,jackpotData:a,goldData:i}},getReelCards:function(e){for(var t=[],n=this.getSpinData().resultCards,o=0;o<n.length;o++)o%5==e&&t.push(n[o]);return t},updateRandomSymbols:function(){var e=[];SlotsFacade.dm.energyData.freeInfo&&SlotsFacade.dm.energyData.freeInfo.removeSymbol&&(e=SlotsFacade.dm.energyData.freeInfo.removeSymbol.concat());for(var t=cc.vv.gameData.getGameCfg().randomSymbols.concat(),n=0;n<t.length;n++)e.includes(t[n])&&(t.splice(n,1),n--);this.getGameCfg().randomSymbolsBySkip=t}}),cc._RF.pop()},{LMSlots_GameData_Base:void 0}],RomanticPrincess_Logic:[function(e,t,n){"use strict";cc._RF.push(t,"6c6dc5Wi/FG2qrXIo4AfSSk","RomanticPrincess_Logic"),cc.Class({extends:e("LMSlots_Logic_Base"),properties:{},onLoad:function(){window.SlotsFacade=this,this.dm=cc.vv.gameData,this.mainPanel=cc.find("safe_node",this.node).addComponent("RomanticPrincess_MainPanel"),this.soundMgr=this.addComponent("RomanticPrincess_Sound"),this.InitCommComponent(),this.flowCtrl=this.addComponent("RomanticPrincess_FlowCtrl"),this.popup=this.mainPanel.popup_node.getComponent("RomanticPrincess_Popup"),this.wildGame=this.mainPanel.wild_game.getComponent("RomanticPrincess_WildGame"),this.collect=this.mainPanel.collect.getComponent("RomanticPrincess_Collect"),this.storeGame=this.mainPanel.store_node.getComponent("RomanticPrincess_StoreGame"),this.bonusGame=this.mainPanel.bonus_game.getComponent("RomanticPrincess_BonusGame"),this.prizePool=this.mainPanel.jpNode.getComponent("RomanticPrincess_PrizePool"),this.topCmp=cc.vv.gameData.GetTopScript(),this.bottomCmp=cc.vv.gameData.GetBottomScript(),this.slots=cc.vv.gameData.GetSlotsScript()},onDestroy:function(){window.SlotsFacade=null,this.dm=null},delayTime:function(e){var t=this;return new Promise(function(n,o){t.scheduleOnce(function(){n()},e)})},start:function(){this._super(),SlotsFacade.soundMgr.playEffect("vo_welcome")}}),cc._RF.pop()},{LMSlots_Logic_Base:void 0}],RomanticPrincess_MainPanel:[function(e,t,n){"use strict";cc._RF.push(t,"11c94U5lNFLso+kHjxjG/7b","RomanticPrincess_MainPanel"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.bg=this.node.getChildByName("bg"),this.slots=this.node.getChildByName("slots"),this.popup_node=this.node.getChildByName("popup_node"),this.wild_game=this.slots.getChildByName("wild_game"),this.transition_node=this.node.getChildByName("transition_node"),this.jpNode=this.node.getChildByName("LMSlots_PrizePool_1"),this.top_node=this.node.getChildByName("top_node"),this.collect=this.slots.getChildByName("collect"),this.spine_border_effect=this.slots.getChildByName("spine_border_effect"),this.store_node=this.node.getChildByName("store_node"),this.bonus_game=this.node.getChildByName("bonus_game"),this.showBg(0)},showBg:function(e){e||(e=0),this.bg.getComponent("ImgSwitchCmp").setIndex(e)},showSceneTransition:function(e,t){e=e||1;var n=this.transition_node.getChildByName("spine").getComponent(sp.Skeleton),o="";1==e?o="tobase_transition":2==e&&(o="tofree_transition"),SlotsFacade.soundMgr.playEffect(o),n.node.active=!0,n.setAnimation(0,"idle2",!1),n.setCompleteListener(function(){n.setCompleteListener(null),n.node.active=!1,t&&t()})}}),cc._RF.pop()},{}],RomanticPrincess_Popup:[function(e,t,n){"use strict";function o(e,t,n,o,a,i,r){try{var s=e[i](r),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(o,a)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(a,i){var r=e.apply(t,n);function s(e){o(r,a,i,s,c,"next",e)}function c(e){o(r,a,i,s,c,"throw",e)}s(void 0)})}}cc._RF.push(t,"8603aVJLK1E8LlPL3Gt/hbe","RomanticPrincess_Popup"),cc.Class({extends:cc.Component,properties:{bg:cc.Node,bg_dark:cc.Node},onLoad:function(){},showBg:function(e){this.bg.active=e},showBgDark:function(e){this.bg_dark.active=e},showWinFreeCnt:function(e,t){var n=this;return a(regeneratorRuntime.mark(function o(){var a,i,r,s,c;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(a={enter:"animation1_1",idle:"animation1_2",exit:"animation1_3"},t?SlotsFacade.soundMgr.playEffect("free_dialog_start_show"):(SlotsFacade.soundMgr.playEffect("free_dialog_start_show"),a={enter:"animation2_1",idle:"animation2_2",exit:"animation2_3"}),n.showBg(!0),(i=n.node.getChildByName("panel_win_free_cnt")).active=!0,i.scale=1,(r=i.getChildByName("label")).getComponent(cc.Label).string=e.toString(),r.active=!0,r.scale=0,r.y=t?75:36,cc.tween(r).to(.5,{scale:1}).start(),s=i.getChildByName("btn_ok"),t?(s.scale=0,s.active=!0,cc.tween(s).to(.5,{scale:1},{easing:"backOut"}).start()):s.active=!1,(c=i.getChildByName("spine").getComponent(sp.Skeleton)).setAnimation(0,a.enter,!1),a.idle&&c.addAnimation(0,a.idle,!0),!t){o.next=22;break}return o.next=20,new Promise(function(e){s.on(cc.Node.EventType.TOUCH_END,function t(){SlotsFacade.soundMgr.playEffect("click"),SlotsFacade.soundMgr.playEffect("dialog_close"),cc.tween(r).to(.8,{scale:0}).start(),cc.tween(s).to(.8,{scale:0},{easing:"backIn"}).start(),s.off(cc.Node.EventType.TOUCH_END,t),c.setAnimation(0,a.exit,!1),c.setCompleteListener(function(){c.setCompleteListener(null),n.showBg(!1),i.active=!1,e()})})});case 20:o.next=28;break;case 22:return o.next=24,SlotsFacade.delayTime(1.5);case 24:return SlotsFacade.soundMgr.playEffect("dialog_close"),cc.tween(r).to(.8,{scale:0}).start(),o.next=28,new Promise(function(e){c.setAnimation(0,a.exit,!1),c.setCompleteListener(function(){c.setCompleteListener(null),n.showBg(!1),i.active=!1,e()})});case 28:case"end":return o.stop()}},o)}))()},showWinFreeGold:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){var o,a,i,r,s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o={enter:"animation3_1",idle:"animation3_2",exit:"animation3_3"},SlotsFacade.soundMgr.playEffect("free_dialog_collect_show"),t.showBg(!0),(a=t.node.getChildByName("panel_win_free_coin")).active=!0,a.scale=1,(i=a.getChildByName("label")).getComponent("LabelRollCmp").startRoll(0,e),i.active=!0,i.scale=0,cc.tween(i).to(.5,{scale:1}).start(),(r=a.getChildByName("btn_ok")).scale=0,r.active=!0,cc.tween(r).to(.5,{scale:1},{easing:"backOut"}).start(),(s=a.getChildByName("spine").getComponent(sp.Skeleton)).setAnimation(0,o.enter,!1),s.addAnimation(0,o.idle,!0),n.next=20,SlotsFacade.delayTime(.9);case 20:return n.next=22,new Promise(function(e){r.on(cc.Node.EventType.TOUCH_END,function n(){SlotsFacade.soundMgr.playEffect("click"),SlotsFacade.soundMgr.playEffect("dialog_close"),r.off(cc.Node.EventType.TOUCH_END,n),cc.tween(i).to(.8,{scale:0}).start(),cc.tween(r).to(.8,{scale:0},{easing:"backIn"}).start(),s.setAnimation(0,o.exit,!1),s.setCompleteListener(function(){s.setCompleteListener(null),t.showBg(!1),a.active=!1,e()})})});case 22:case"end":return n.stop()}},n)}))()},showWinStoreGold:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){var o,a,i,r,s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o={enter:"animation4_1",idle:"animation4_2",exit:"animation4_3"},SlotsFacade.soundMgr.playEffect("mapfree_dialog_collect_show"),t.showBg(!0),(a=t.node.getChildByName("panel_win_map_free_coin")).active=!0,a.scale=1,(i=a.getChildByName("label")).getComponent("LabelRollCmp").startRoll(0,e),i.active=!0,i.scale=0,cc.tween(i).to(.5,{scale:1}).start(),(r=a.getChildByName("btn_ok")).scale=0,r.active=!0,cc.tween(r).to(.5,{scale:1},{easing:"backOut"}).start(),(s=a.getChildByName("spine").getComponent(sp.Skeleton)).setAnimation(0,o.enter,!1),s.addAnimation(0,o.idle,!0),n.next=20,SlotsFacade.delayTime(.9);case 20:return n.next=22,new Promise(function(e){r.on(cc.Node.EventType.TOUCH_END,function n(){SlotsFacade.soundMgr.playEffect("click"),SlotsFacade.soundMgr.playEffect("dialog_close"),r.off(cc.Node.EventType.TOUCH_END,n),cc.tween(i).to(.8,{scale:0}).start(),cc.tween(r).to(.8,{scale:0},{easing:"backIn"}).start(),s.setAnimation(0,o.exit,!1),s.setCompleteListener(function(){s.setCompleteListener(null),t.showBg(!1),a.active=!1,e()})})});case 22:case"end":return n.stop()}},n)}))()},showWinJPGold:function(e,t){var n=this;return a(regeneratorRuntime.mark(function o(){var a,i,r,s,c;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return a={1:{enter:"animation5_1",idle:"animation5_2",exit:"animation5_3",sound:"win_jp_show5"},2:{enter:"animation4_1",idle:"animation4_2",exit:"animation4_3",sound:"win_jp_show4"},3:{enter:"animation3_1",idle:"animation3_2",exit:"animation3_3",sound:"maxi_dialog_start_show"},4:{enter:"animation2_1",idle:"animation2_2",exit:"animation2_3",sound:"major_dialog_start_show"},5:{enter:"animation1_1",idle:"animation1_2",exit:"animation1_3",sound:"grand_dialog_start_show"}},SlotsFacade.soundMgr.playEffect(a[e].sound),n.showBg(!0),(i=n.node.getChildByName("panel_win_jp_coin")).active=!0,i.scale=1,(r=i.getChildByName("label")).getComponent("LabelRollCmp").startRoll(0,t),r.active=!0,r.scale=0,cc.tween(r).to(.5,{scale:1}).start(),(s=i.getChildByName("btn_ok")).scale=0,s.active=!0,cc.tween(s).to(.5,{scale:1},{easing:"backOut"}).start(),(c=i.getChildByName("spine").getComponent(sp.Skeleton)).setAnimation(0,a[e].enter,!1),c.addAnimation(0,a[e].idle,!0),o.next=20,SlotsFacade.delayTime(.9);case 20:return o.next=22,new Promise(function(t){s.on(cc.Node.EventType.TOUCH_END,function o(){SlotsFacade.soundMgr.playEffect("click"),SlotsFacade.soundMgr.playEffect("dialog_close"),s.off(cc.Node.EventType.TOUCH_END,o),cc.tween(r).to(.8,{scale:0}).start(),cc.tween(s).to(.8,{scale:0},{easing:"backIn"}).start(),c.setAnimation(0,a[e].exit,!1),c.setCompleteListener(function(){c.setCompleteListener(null),n.showBg(!1),i.active=!1,t()})})});case 22:case"end":return o.stop()}},o)}))()}}),cc._RF.pop()},{}],RomanticPrincess_PrizePool:[function(e,t,n){"use strict";cc._RF.push(t,"383c4M3iUtLWpcNbVF2FzL0","RomanticPrincess_PrizePool");var o={0:{nodeName:"prizePool_Mini",lockAni:"animation5_1",unlockAni:"animation5_2",idleAni:"animation5",winAni:"animation5",iconIndex:0,weight:0},1:{nodeName:"prizePool_Minor",lockAni:"animation4_1",unlockAni:"animation4",idleAni:"animation4",winAni:"animation4",iconIndex:1,weight:1},2:{nodeName:"prizePool_Major",lockAni:"animation3_1",unlockAni:"animation3",idleAni:"animation3",winAni:"animation3",iconIndex:2,weight:2},3:{nodeName:"prizePool_Maxi",lockAni:"animation2_1",unlockAni:"animation2",idleAni:"animation2",winAni:"animation2",iconIndex:3,weight:3},4:{nodeName:"prizePool_Grand",lockAni:"animation1_1",unlockAni:"animation1",idleAni:"animation1",winAni:"animation1",iconIndex:4,weight:4}};cc.Class({extends:e("LMSlots_PrizePool_Base"),properties:{},start:function(){var e=this;this._super(),this.scheduleOnce(function(){e.node.y>cc.winSize.height/2&&(e.node.y=cc.winSize.height/2)},0)},ShowNodeLockByNode:function(e,t,n,a,i){if(o[a+""]){var r={poolIdx:a,val:t};this.processTips(r)}},processTips:function(e){this.showJackPotTips(e.poolIdx,e.val);var t=o[e.poolIdx+""],n=t.nodeName;if(n){var a=cc.find("Canvas/safe_node").getComponentInChildren("LMSlotMachine_PrizePool");if(a){var i=cc.find(n,a.node.parent);if(i){var r=i.getChildByName("spine_lock").getComponent(sp.Skeleton),s=i.getChildByName("bg").getComponent("ImgSwitchCmp"),c=i.getChildByName("title").getComponent("ImgSwitchCmp");e.val?(i.isLock=!0,SlotsFacade.soundMgr.stopEffectByName("jp_lock"),SlotsFacade.soundMgr.playEffect("jp_lock"),r.node.active=!0,r.setAnimation(0,t.lockAni,!1),r.setCompleteListener(function(){r.setCompleteListener(null),r.node.active=!1}),this.scheduleOnce(function(){s.setIndex(1),c.setIndex(1),i.getChildByName("lbl_num").color=cc.Color.GRAY,i.getChildByName("spine_idle").active=!1},.4)):(i.isLock=!1,SlotsFacade.soundMgr.stopEffectByName("jp_unlock"),SlotsFacade.soundMgr.playEffect("jp_unlock"),r.node.active=!0,r.setAnimation(0,t.unlockAni,!1),r.setCompleteListener(function(){r.setCompleteListener(null),r.node.active=!1}),this.scheduleOnce(function(){s.setIndex(0),c.setIndex(0),i.getChildByName("lbl_num").color=cc.Color.WHITE;var e=i.getChildByName("spine_idle").getComponent(sp.Skeleton);e.node.active=!0,e.setAnimation(0,t.idleAni,!0)},.4))}}}},showJackPotTips:function(e,t){var n=o[e+""].weight;if(t){if(this._nowJpLockWeight<n)return;this._nowJpLockWeight=n}else{if(this._nowJpUnlockWeight>n)return;this._nowJpUnlockWeight=n}var a=o[e+""],i=a.nodeName,r=cc.find("Canvas/safe_node").getComponentInChildren("LMSlotMachine_PrizePool"),s=cc.find(i,r.node.parent);if(s){var c=s.parent.getChildByName("tips_to_unclok");c.stopAllActions(),c.active=!1,c.getChildByName("icon").getComponent("ImgSwitchCmp").setIndex(a.iconIndex),c.x=s.x,c.y=s.y;var l=s.parent.getChildByName("tips_uncloked");l.stopAllActions(),l.active=!1,l.getChildByName("icon").getComponent("ImgSwitchCmp").setIndex(a.iconIndex),l.x=s.x,l.y=s.y,t?(this._nowJpUnlockWeight=this._nowJpLockWeight-1,c.scale=0,c.active=!0,cc.tween(c).to(.4,{scale:1},{easing:"backOut"}).delay(2).to(.2,{scale:0}).call(function(){c.active=!1}).start()):(this._nowJpLockWeight=this._nowJpUnlockWeight+1,l.scale=0,l.active=!0,cc.tween(l).to(.4,{scale:1},{easing:"backOut"}).delay(2).to(.2,{scale:0}).call(function(){l.active=!1}).start())}},playWinAni:function(e){var t=o[e.toString()],n=cc.find("".concat(t.nodeName,"/spine_win"),this.node).getComponent(sp.Skeleton);n.node.active=!0,n.setAnimation(0,t.winAni,!1),n.setCompleteListener(function(){n.setCompleteListener(null),n.node.active=!1})},getJpGlobalPos:function(e){var t=o[e.toString()];return cc.find("".concat(t.nodeName,"/spine_win"),this.node).convertToWorldSpaceAR(cc.v2(0,0))}}),cc._RF.pop()},{LMSlots_PrizePool_Base:void 0}],RomanticPrincess_Reel:[function(e,t,n){"use strict";function o(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=a(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i,r=!0,s=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return r=e.done,e},e:function(e){s=!0,i=e},f:function(){try{r||null==o.return||o.return()}finally{if(s)throw i}}}}function a(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}cc._RF.push(t,"092baloYgJGvKYp+FsJN3wG","RomanticPrincess_Reel"),cc.Class({extends:e("LMSlots_Reel_Base"),properties:{},ShowAntiEffect:function(e,t){var n=this;if(0==e){if(this._cfg.reelStateInfo){var a,i=o(this._cfg.reelStateInfo);try{for(i.s();!(a=i.n()).done;){var r=a.value;this._stopRightNow?(cc.find("node_anti",this.node).active=!1,cc.find("dark_bg",this.node).active=!1,cc.vv.AudioManager.stopEffectByName(r.antSound),this.node.scale=1,this.processReelBonusAni()):cc.tween(this.node).to(.3,{scale:1}).call(function(){n.node.zIndex=n.GetReelIdx(),cc.find("node_anti",n.node).active=!1,cc.find("dark_bg",n.node).active=!1,n.processReelBonusAni()}).start()}}catch(e){i.e(e)}finally{i.f()}}}else cc.find("node_anti",this.node).active=!0,cc.find("node_bonus",this.node).active=!0,cc.find("dark_bg",this.node).active=!0,this.node.zIndex=1e3,cc.tween(this.node).to(.3,{scale:1.2}).start()},showBonusAni:function(e){cc.find("node_bonus",this.node).active=e},processReelBonusAni:function(){if(SlotsFacade.dm.getSpinData()&&SlotsFacade.dm.getSpinData().storeInfo&&!(SlotsFacade.dm.getSpinData().storeInfo.state>0||SlotsFacade.dm.GetTotalFree()>0)){var e,t=[3,301,302],n=!1,a=o(SlotsFacade.dm.getReelCards(this.GetReelIdx()));try{for(a.s();!(e=a.n()).done;){var i=e.value;if(t.includes(i)){n=!0;break}}}catch(e){a.e(e)}finally{a.f()}n?this.showBonusAni(!0):this.showBonusAni(!1)}}}),cc._RF.pop()},{LMSlots_Reel_Base:void 0}],RomanticPrincess_Slots:[function(e,t,n){"use strict";function o(e,t,n,o,a,i,r){try{var s=e[i](r),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(o,a)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(a,i){var r=e.apply(t,n);function s(e){o(r,a,i,s,c,"next",e)}function c(e){o(r,a,i,s,c,"throw",e)}s(void 0)})}}function i(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=r(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a,i=!0,s=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==o.return||o.return()}finally{if(s)throw a}}}}function r(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}cc._RF.push(t,"5855f3ekNpDkbffHoLse+uT","RomanticPrincess_Slots"),cc.Class({extends:e("LMSlots_Slots_Base"),properties:{mask:cc.Node},onLoad:function(){this._super(),this.mask=this.node.getChildByName("mask")},StartMove:function(){this._super(),SlotsFacade.flowCtrl.startMove(),0==SlotsFacade.dm.GetTotalFree()&&Global.SlotsSoundMgr.playNormalBgm()},onMsgSpine:function(e){SlotsFacade.flowCtrl.onSpinMsg(e)},OnSpinEnd:function(){SlotsFacade.flowCtrl.spinEnd()},ReconnectShow:function(){this.scheduleOnce(function(){SlotsFacade.flowCtrl.enterRoom()})},transferIdx:function(e){return{col:(e-=1)%this._col,row:this._row-Math.floor(e/this._col)-1}},getIdxGlobalPos:function(e){var t=this.transferIdx(e),n=this._reels[t.col],o=n.GetSymbolPosByRow(t.row);return n.node.getChildByName("mask").convertToWorldSpaceAR(o)},getSymbolsByServerIds:function(e){var t=this,n=[];return e.forEach(function(e){n.push(t.GetSymbolByIdx(e))}),n},SetSlotsResult:function(e){for(var t=e.length/this._col,n=[],o=0;o<e.length;o++){Math.floor(o/t);var a=o%this._col;if(this._cfg.symbol[e[o]]){var i={};i.sid=e[o],i.data={idx:o+1},n[a]||(n[a]=[]),n[a].unshift(i)}}var r=SlotsFacade.dm.getSpinData();if(r.bonusInfo&&r.bonusInfo.items.length>0)for(var s=0;s<r.bonusInfo.items.length;s++){var c=r.bonusInfo.items[s];if(c.coin){var l=this.transferIdx(c.idx);n[l.col][l.row].data.coin=c.coin}}for(var d=0;d<this._reels.length;d++){var u=this._reels[d],m=n[d];u.SetResult(m)}},SetReelStateInfo:function(e){var t=this;if(this._cfg.reelStateInfo){for(var n=[],o=0;o<e.length;o++){var a=e[o],r=o%this._col;n[r]||(n[r]=[]),n[r].push(a)}var s,c=i(this._cfg.reelStateInfo);try{var l=function(){var e=s.value;if(e.inNormal){if(SlotsFacade.dm.getSpinData().storeInfo.state>0)return"continue";if(SlotsFacade.dm.GetTotalFree()>0)return"continue"}var o=Global.copy(e);o.isStop=!1,o.isAnt=!1;for(var a=o.mini,i=Global.copy(o.counts),r=0,c=!0,l=0;l<n.length;l++){var d=t._reels[l],u=n[l];o.isStop=!1,o.isAnt=!1,r>=a-1&&o.counts[l]>0&&c&&(o.isAnt=!0);var m=u.reduce(function(e,t){return o.id.includes(t)?e+1:e+0},0);m>0&&(r+=1),i.shift();var f=(i.length>0?i.reduce(function(e,t){return e+t}):0)+r;m>0&&f>=a&&c&&(o.isStop=!0,o.isScatter&&(o.symbolStopSound="sc_land".concat(m))),o.continuous&&o.counts[l]>0&&0==m&&(c=!1),d.AddReelStateInfo(Global.copy(o))}};for(c.s();!(s=c.n()).done;)l()}catch(e){c.e(e)}finally{c.f()}}},ShowWinTrace:function(){for(var e=[],t=0;t<this._gameInfo.zjLuXian.length;t++)for(var n=this._gameInfo.zjLuXian[t],o=0;o<n.indexs.length;o++)e[n.indexs[o]]=1;if(this._gameInfo.scatterZJLuXian&&this._gameInfo.scatterZJLuXian.indexs)for(var a=0;a<this._gameInfo.scatterZJLuXian.indexs.length;a++){e[this._gameInfo.scatterZJLuXian.indexs[a]]=1}for(var i=this._reels,r=i.length,s=0;s<r;s++){for(var c=i[s],l=[!1,!1,!1,!1],d=0;d<4;d++){var u=(3-d)*r+(s+1);1==c._symbols[d].GetShowId()&&e[u]&&(l[d]=!0)}l[0]&&l[1]&&l[2]&&l[3]?(c._symbols[0].wildAniCount=4,c._symbols[1].wildAniCount=0,c._symbols[2].wildAniCount=0,c._symbols[3].wildAniCount=0):l[0]&&l[1]&&l[2]?(c._symbols[0].wildAniCount=3,c._symbols[1].wildAniCount=0,c._symbols[2].wildAniCount=0):l[0]&&l[1]?(c._symbols[0].wildAniCount=2,c._symbols[1].wildAniCount=0):l[1]&&l[2]&&l[3]?(c._symbols[1].wildAniCount=3,c._symbols[2].wildAniCount=0,c._symbols[3].wildAniCount=0):l[1]&&l[2]?(c._symbols[1].wildAniCount=2,c._symbols[2].wildAniCount=0):l[2]&&l[3]&&(c._symbols[2].wildAniCount=2,c._symbols[3].wildAniCount=0)}for(var m in e){var f=this.GetSymbolByIdx(Number(m));f&&(f.playWinAnimation(),f.ShowKuang())}},showMask:function(){this.mask.active=!0,this.mask.opacity=0,cc.tween(this.mask).to(.2,{opacity:140}).start()},hideMask:function(){var e=this;this.mask.active&&cc.tween(this.mask).to(.8,{opacity:0}).call(function(t){e.mask.active=!1}).start()},playTriggerAni:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return SlotsFacade.soundMgr.playEffect("bell"),e.forEach(function(e){t.GetSymbolByIdx(e).playTriggerAnimation()}),n.next=4,SlotsFacade.delayTime(1.5);case 4:case"end":return n.stop()}},n)}))()},shakeReels:function(e,t){var n=this;return a(regeneratorRuntime.mark(function o(){var a,r,s;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:SlotsFacade.soundMgr.playEffect("sym_shake"),e=e||1,t=t||2,a=i(n._reels);try{for(a.s();!(r=a.n()).done;)s=r.value,Global.shakeNode(s.node,t,e)}catch(e){a.e(e)}finally{a.f()}return o.next=7,SlotsFacade.delayTime(e);case 7:case"end":return o.stop()}},o)}))()},resetReelBonusAni:function(){var e,t=i(this._reels);try{for(t.s();!(e=t.n()).done;){e.value.showBonusAni(!1)}}catch(e){t.e(e)}finally{t.f()}},updateAllSymbol:function(){SlotsFacade.dm.updateRandomSymbols();var e,t=i(this._reels);try{for(t.s();!(e=t.n()).done;){var n,o=i(e.value._symbols);try{for(o.s();!(n=o.n()).done;){var a=n.value;a.StartMove(),a.ShowRandomSymbol()}}catch(e){o.e(e)}finally{o.f()}}}catch(e){t.e(e)}finally{t.f()}}}),cc._RF.pop()},{LMSlots_Slots_Base:void 0}],RomanticPrincess_Sound:[function(e,t,n){"use strict";cc._RF.push(t,"58592CO/QFAjaYsvG2/G8So","RomanticPrincess_Sound"),cc.Class({extends:cc.Component,properties:{_soundPath:"games/RomanticPrincess/",_isPlayBgm:!1},playEffect:function(e,t){return cc.vv.AudioManager.playEff(this._soundPath,e,!0,t)},stopEffectByName:function(e){cc.vv.AudioManager.stopEffectByName(e)},stopEffect:function(){cc.vv.AudioManager.stopAudio()},playBgm:function(e){e?(Global.SlotsSoundMgr.stopBgm(),Global.SlotsSoundMgr.playBgm(e)):Global.SlotsSoundMgr.playNormalBgm()},stopBgm:function(){Global.SlotsSoundMgr.stopBgm()},playFreeBgm:function(){this.playBgm("free_bgm")}}),cc._RF.pop()},{}],RomanticPrincess_StoreGame:[function(e,t,n){"use strict";function o(e,t,n,o,a,i,r){try{var s=e[i](r),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(o,a)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(a,i){var r=e.apply(t,n);function s(e){o(r,a,i,s,c,"next",e)}function c(e){o(r,a,i,s,c,"throw",e)}s(void 0)})}}function i(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=r(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a,i=!0,s=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==o.return||o.return()}finally{if(s)throw a}}}}function r(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}cc._RF.push(t,"d91f3vk9llAtKLQisV2b3Y8","RomanticPrincess_StoreGame"),cc.Class({extends:cc.Component,properties:{bg:cc.Node,panel:cc.Node,scrollView:cc.ScrollView,item_template:cc.Node,free_cnt_node:cc.Node,free_cnt_btn_minus:cc.Button,free_cnt_btn_plus:cc.Button,free_cnt_label_freeCnt:cc.Label,free_cnt_label_cost:cc.Label,resetBtn:cc.Button,startBtn:cc.Button,startToCostWaterDropLabel:cc.Label,closeBtn:cc.Button,totalWaterDropLabel:cc.Label,_storeListCfg:[],_storeItemList:[],_currSelectItem:null,_cbHandler:null,_data:null},onLoad:function(){var e=this;this.panel.active=!1,this.item_template.active=!1,this.closeBtn.node.on("click",function(){e.close(!0)},this),this.resetBtn.node.on("click",function(){e._reset()},this),this.startBtn.node.on("click",function(){e._startGame()},this),this.free_cnt_btn_minus.node.on("click",function(){e._onFreeCntChange(-1)},this),this.free_cnt_btn_plus.node.on("click",function(){e._onFreeCntChange(1)},this)},start:function(){this._initList()},_initList:function(){var e=SlotsFacade.dm.getGameCfg().StoreItemType;this._storeListCfg=[{mergeType:e.stickyWild,titleIndex:[0],types:[{type:e.stickyWild,selectorType:1,info:[1,2,3,4,5]}],data:{}},{mergeType:e.randWild,titleIndex:[1],types:[{type:e.randWild,selectorType:1,info:[1,2,3,4,5]}],data:{}},{mergeType:e.roamingWilds,titleIndex:[2],types:[{type:e.roamingWilds,selectorType:5,info:[[3,4,5],[2,3,4,5],[1,2,3,4,5]]}],data:{}},{mergeType:e.removeSymbol,titleIndex:[3],types:[{type:e.removeSymbol,selectorType:2,info:[[13],[12,13],[11,12,13],[10,11,12,13],[9,10,11,12,13]]}],data:{}},{mergeType:e.extraBonus,titleIndex:[4],types:[{type:e.extraBonus,selectorType:3,info:[[3],[3,301],[3,301,302]]}],data:{}},{mergeType:e.multWild,titleIndex:[5],types:[{type:e.multWild,selectorType:4,info:[2,3,4]}],data:{}},{mergeType:e.stickyWildAndRemoveSymbol,titleIndex:[6,7],types:[{type:e.stickyWild,selectorType:1,info:[1,2,3,4,5]},{type:e.removeSymbol,selectorType:2,info:[[13],[12,13],[11,12,13],[10,11,12,13],[9,10,11,12,13]]}],data:{}},{mergeType:e.randomWildAndRemoveSymbol,titleIndex:[8,7],types:[{type:e.randWild,selectorType:1,info:[1,2,3,4,5]},{type:e.removeSymbol,selectorType:2,info:[[13],[12,13],[11,12,13],[10,11,12,13],[9,10,11,12,13]]}],data:{}},{mergeType:e.roamingWildAndRemoveSymbol,titleIndex:[9,7],types:[{type:e.roamingWilds,selectorType:5,info:[[3,4,5],[2,3,4,5],[1,2,3,4,5]]},{type:e.removeSymbol,selectorType:2,info:[[13],[12,13],[11,12,13],[10,11,12,13],[9,10,11,12,13]]}],data:{}},{mergeType:e.extraBonusAndMultBonus,titleIndex:[10,11],types:[{type:e.extraBonus,selectorType:3,info:[[3],[3,301],[3,301,302]]},{type:e.multWild,selectorType:4,info:[2,3,4]}],data:{}}];for(var t=0;t<this._storeListCfg.length;t++)for(var n=this._storeListCfg[t],o=this._getStoreCfgItem(n.mergeType),a=0;a<o.info.length;a++)o.info[a]instanceof Array?o.type>=8?n.data[o.info[a].join("-")]=o.mults[a]:n.data[o.info[a].join(",")]=o.mults[a]:n.data[o.info[a].toString()]=o.mults[a];for(var i=0;i<this._storeListCfg.length;i++){var r=cc.instantiate(this.item_template);r.active=!0,r.parent=this.scrollView.content;var s=r.addComponent("RomanticPrincess_StoreItem");s.id=i,s.init(this._storeListCfg[i],this._onStoreItemChange.bind(this)),this._storeItemList.push(s)}},_getStoreCfgItem:function(e){for(var t=SlotsFacade.dm.getDeskInfo().storeConfig,n=0;n<t.items.length;n++){var o=t.items[n];if(o.type==e)return o}return null},_resetData:function(){this._data={freeCnt:3,freeCost:0,storeItemCost:0}},_onFreeCntChange:function(e){SlotsFacade.soundMgr.playEffect("click"),this._data.freeCnt+=e,this._data.freeCnt<3&&(this._data.freeCnt=3),this.free_cnt_btn_minus.interactable=this._data.freeCnt>3,this._data.freeCost=this._data.freeCnt*SlotsFacade.dm.getDeskInfo().storeConfig.freeBaseCoin,this._currSelectItem&&(this._data.storeItemCost=this._data.freeCnt*this._currSelectItem.getMultiple(),this._currSelectItem.setCost(this._data.storeItemCost)),this._updateTotalCost(),this._updateFreeCnt()},_onStoreItemChange:function(e){"open"==e.evt?(SlotsFacade.soundMgr.playEffect("click"),this._currSelectItem&&this._currSelectItem.close(),this._currSelectItem=e.target):e.evt;var t=e.target;this._data.storeItemCost=this._data.freeCnt*t.getMultiple(),t.setCost(this._data.storeItemCost),this._updateTotalCost()},_updateFreeCnt:function(){this.free_cnt_label_freeCnt.string=this._data.freeCnt.toString(),this.free_cnt_label_cost.string=Global.FormatNumToComma(this._data.freeCost)},_updateTotalCost:function(){var e=this._data.freeCost+this._data.storeItemCost;this.startToCostWaterDropLabel.string=Global.FormatNumToComma(e.toString()),SlotsFacade.dm.energyData.gemCnt>=e?this.startBtn.interactable=!0:this.startBtn.interactable=!1},_reset:function(){this.startBtn.interactable=!0,this.resetBtn.interactable=!0,this.closeBtn.interactable=!0;var e=SlotsFacade.dm.energyData;this._currSelectItem&&this._currSelectItem.close(),this._currSelectItem=null,this.totalWaterDropLabel.string=Global.FormatNumToComma(e.gemCnt),this._resetData(),this._onFreeCntChange(0);var t,n=i(this._storeItemList);try{for(n.s();!(t=n.n()).done;){t.value.close()}}catch(e){n.e(e)}finally{n.f()}this.scrollView.scrollToTop()},_startGame:function(){var e={rtype:1,choiceInfo:{freeCnt:this._data.freeCnt}};if(this._currSelectItem){var t=this._currSelectItem.storeItemCfg.mergeType,n=this._getStoreCfgItem(t).mults.indexOf(this._currSelectItem.getMultiple())+1;e.choiceInfo.type=t,e.choiceInfo.idx=n}this.startBtn.interactable=!1,this.resetBtn.interactable=!1,this.closeBtn.interactable=!1,SlotsFacade.dm.reqSubGame(e)},onMsg:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){var o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(1==e.data.rtype){n.next=2;break}return n.abrupt("return");case 2:return o=e.data.storeInfo,SlotsFacade.dm.energyData=o,SlotsFacade.dm.SetFreeTime(o.freeInfo.freeCnt),SlotsFacade.dm.SetTotalFree(o.freeInfo.freeCnt),SlotsFacade.mainPanel.showSceneTransition(1),SlotsFacade.bottomCmp.DoHideWinAction(),t.totalWaterDropLabel.string=Global.FormatNumToComma(o.gemCnt),SlotsFacade.collect.setCnt(SlotsFacade.dm.energyData.gemCnt),n.next=12,SlotsFacade.delayTime(3);case 12:return t.close(),n.next=15,SlotsFacade.flowCtrl.enterFreeGame();case 15:SlotsFacade.slots.CanDoNextRound();case 16:case"end":return n.stop()}},n)}))()},open:function(e){var t=this;SlotsFacade.soundMgr.playEffect("store_open"),this.bg.active=!0,this._cbHandler=e,this.scheduleOnce(function(){t.panel.active=!0,t._reset(),t.panel.scale=0,cc.tween(t.panel).to(.5,{scale:1},{easing:"backOut"}).start();for(var e=0;e<t._storeItemList.length;e++){var n=t._storeItemList[e];n.node.scale=0,cc.tween(n.node).delay(.1*e).to(.3,{scale:1},{easing:"backOut"}).start()}})},close:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(SlotsFacade.soundMgr.playEffect("store_close"),!e){n.next=5;break}return cc.tween(t.panel).to(.5,{scale:0},{easing:"backIn"}).start(),n.next=5,SlotsFacade.delayTime(.5);case 5:t.bg.active=!1,t.panel.active=!1,t._cbHandler&&t._cbHandler();case 8:case"end":return n.stop()}},n)}))()}}),cc._RF.pop()},{}],RomanticPrincess_StoreItem:[function(e,t,n){"use strict";function o(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=a(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i,r=!0,s=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return r=e.done,e},e:function(e){s=!0,i=e},f:function(){try{r||null==o.return||o.return()}finally{if(s)throw i}}}}function a(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}cc._RF.push(t,"580c5JK3LdBl4EEeGACdhzE","RomanticPrincess_StoreItem");var r=1,s=2,c=3,l=4,d=5;cc.Class({extends:cc.Component,properties:{state_close:cc.Node,state_open:cc.Node,costLabel:cc.Label,id:0,storeItemCfg:null,_handler:null,_activeSelector:[]},onLoad:function(){this.state_close=this.node.getChildByName("state_close"),this.state_close.active=!0,this.state_close.on("click",this.open,this),this.state_open=this.node.getChildByName("state_open"),this.state_open.active=!1,this.costLabel=cc.find("cost/label",this.state_open).getComponent(cc.Label)},onDestroy:function(){this.storeItemCfg=null,this._handler=null},start:function(){for(var e=this,t=0;t<2;t++){var n=cc.find("title/label_".concat(t),this.state_close),a=cc.find("title/label_".concat(t),this.state_open);this.storeItemCfg.titleIndex.length>t?(n.active=!0,a.active=!0,n.getComponent("ImgSwitchCmp").setIndex(this.storeItemCfg.titleIndex[t]),a.getComponent("ImgSwitchCmp").setIndex(this.storeItemCfg.titleIndex[t])):(n.active=!1,a.active=!1)}var i,r=o(this.state_open.getChildByName("selector_node").children);try{for(r.s();!(i=r.n()).done;){i.value.active=!1}}catch(e){r.e(e)}finally{r.f()}for(var s=function(t){var n=e.storeItemCfg.types[t],o=cc.find("selector_node/selector".concat(n.selectorType),e.state_open);o.active=!0,o.data={storeType:n.type,selectorType:n.selectorType,info:n.info.concat(),currSelectIndex:0},o.getChildByName("btn_minus").getComponent(cc.Button).node.on("click",function(){e._changeParam(o,-1)},e),o.getChildByName("btn_plus").getComponent(cc.Button).node.on("click",function(){e._changeParam(o,1)},e),e._activeSelector.push(o)},c=0;c<this.storeItemCfg.types.length;c++)s(c);this._reset()},_changeParam:function(e,t){var n=e.data;n.currSelectIndex+=t,n.currSelectIndex<0?n.currSelectIndex=0:n.currSelectIndex>=n.info.length&&(n.currSelectIndex=n.info.length-1),this._updateOpenState(),this._handler({evt:"change",target:this})},init:function(e,t){this.storeItemCfg=e,this._handler=t},open:function(){this.state_close.active=!1,this.state_open.active=!0,this._handler({evt:"open",target:this})},close:function(){this.state_close.active=!0,this.state_open.active=!1,this._reset()},_updateOpenState:function(){SlotsFacade.soundMgr.playEffect("click");for(var e=0;e<this._activeSelector.length;e++){var t=this._activeSelector[e],n=t.data;switch(n.selectorType){case r:t.getChildByName("label").getComponent(cc.Label).string=n.info[n.currSelectIndex];break;case s:var a,i=o(t.getChildByName("label").children);try{for(i.s();!(a=i.n()).done;){var u=a.value;u.active=n.info[n.currSelectIndex].includes(parseInt(u.name))}}catch(e){i.e(e)}finally{i.f()}break;case c:var m,f=o(t.getChildByName("label").children);try{for(f.s();!(m=f.n()).done;){var p=m.value;p.active=n.info[n.currSelectIndex].includes(parseInt(p.name))}}catch(e){f.e(e)}finally{f.f()}break;case l:case d:t.getChildByName("label").getComponent("ImgSwitchCmp").setIndex(n.currSelectIndex)}t.getChildByName("btn_minus").getComponent(cc.Button).interactable=0!=n.currSelectIndex,t.getChildByName("btn_plus").getComponent(cc.Button).interactable=n.currSelectIndex<n.info.length-1}},_reset:function(){for(var e=0;e<this._activeSelector.length;e++)this._activeSelector[e].data.currSelectIndex=0;this._updateOpenState()},getMultiple:function(){for(var e=[],t=0;t<this._activeSelector.length;t++){var n=this._activeSelector[t].data;e.push(n.info[n.currSelectIndex])}return this.storeItemCfg.data[e.join("-")]},setCost:function(e){this.costLabel.string=e.toString()}}),cc._RF.pop()},{}],RomanticPrincess_Symbol:[function(e,t,n){"use strict";cc._RF.push(t,"0ce99pWZFpAn4QbJH6SCT0/","RomanticPrincess_Symbol");cc.Class({extends:e("LMSlots_Symbol_Base"),properties:{waterDrop:cc.Node,label:cc.Label,wildAniCount:1},onLoad:function(){this.waterDrop=this.node.getChildByName("water_drop"),this.label=this.node.getChildByName("label").getComponent(cc.Label)},StartMove:function(){this._super(),this.wildAniCount=1,this.showLabel()},ShowById:function(e,t){this._super(e,t),t?this.showLabel(!0):this.showLabel(!1)},ShowRandomSymbol:function(){var e=cc.vv.gameData.getGameCfg(),t=Global.random(1,e.randomSymbolsBySkip.length),n=e.randomSymbolsBySkip[t-1],o=null;n==e.bonusId&&((o={}).coin=Global.random(1,10)*SlotsFacade.dm.GetTotalBet()),this.ShowById(n,o)},showLabel:function(e){e&&this._data&&this._data.coin?(this.label.node.active=!0,this.label.node.scaleX=1,this.label.string=Global.convertNumToShort(this._data.coin)):this.label.node.active=!1},StopMoveDeep:function(){if(SlotsFacade.dm.getSpinData()){var e=SlotsFacade.dm.getSpinData().rewardIdxs;e&&this._data&&e.includes(this._data.idx)&&(SlotsFacade.soundMgr.playEffect("bell2"),this.playStopAnimation())}},StopMoveEnd:function(){(this._data&&this._data.gemCnt&&SlotsFacade.collect.addAppearanceDrop(this._data.gemCnt,this.waterDrop.convertToWorldSpaceAR(cc.v2(0,0))),SlotsFacade.dm.getGameCfg().NeedIdleIds.includes(this._id))&&(SlotsFacade.dm.getSpinData().rewardIdxs.includes(this._data.idx)||this.playidleAnimation())},playStopAnimation:function(){var e=this._id,t=cc.vv.gameData.getGameCfg();if(t.symbol[e]&&t.symbol[e].win_node&&t.symbol[e].stop_ani&&(this._state="stop",this._showNode&&(this._showNode.active=!1),this._showNode=cc.find(t.symbol[e].win_node,this.node),this._showNode.active=!0,""!=t.symbol[e].stop_ani.name)){this.node.zIndex=t.symbol[e].stop_ani.zIndex-this._symbolIdx+10*this._reelIdx;var n=this._showNode.getComponent(sp.Skeleton);if(n){var o=t.symbol[e].stop_ani,a=t.symbol[e].idle_ani;n.setAnimation(0,o.name,!1),a&&n.addAnimation(0,a.name,!0)}}},playTriggerAnimation:function(){var e=!1,t=this._id,n=cc.vv.gameData.getGameCfg();if(n.symbol[t]&&n.symbol[t].win_node&&n.symbol[t].trigger_ani){this._state="trigger",this._showNode&&(this._showNode.active=!1);var o=this.setAnimationToTop(!0);o.active=!0;var a=cc.find(n.symbol[t].win_node,o);if(a.active=!0,""!=n.symbol[t].trigger_ani.name){o.zIndex=n.symbol[t].trigger_ani.zIndex-this._symbolIdx+10*this._reelIdx,e=!0;var i=a.getComponent(sp.Skeleton);if(i){var r=n.symbol[t].trigger_ani.name;i.setAnimation(0,r,n.symbol[t].trigger_ani.loop)}}var s=o.getChildByName("label");!s.active&&this._data.coin&&(s.active=!0,s.getComponent(cc.Label).string=Global.convertNumToShort(this._data.coin))}return e},ShowKuang:function(e){this._id==SlotsFacade.dm.getGameCfg().scatterId&&(e=!1),this._super(e)},showJpSymbolCoin:function(e,t){var n=this.GetShowId();if((301==n||302==n)&&this._showNode){this._showNode&&(this._showNode.active=!1);var o=cc.vv.gameData.getGameCfg();this._showNode=cc.find(o.symbol[n].win_node,this.node),this._showNode.active=!0,this._showNode.getComponent(sp.Skeleton).setAnimation(0,"animation2",!1);var a=this.node.getChildByName("label").getComponent(cc.Label);a.node.active=!0,a.string=Global.convertNumToShort(e),a.node.scaleX=0,t=t||1.6,cc.tween(a.node).delay(t).to(.5,{scaleX:1}).start()}},playWinAnimation:function(){1==this.GetShowId()&&1!=this.wildAniCount?this.playWildAni():this._super()},playWildAni:function(){if(!(this.wildAniCount<1)){var e=this.setAnimationToTop(!0);e.active=!0;var t=cc.find("w1",e).getComponent(sp.Skeleton);t.node.active=!0,t.setAnimation(0,"animation"+this.wildAniCount,!0),t.node.y=SlotsFacade.dm.getGameCfg().symbolSize.height/2*(this.wildAniCount-1)}}}),cc._RF.pop()},{LMSlots_Symbol_Base:void 0}],RomanticPrincess_WildGame:[function(e,t,n){"use strict";function o(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=a(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i,r=!0,s=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return r=e.done,e},e:function(e){s=!0,i=e},f:function(){try{r||null==o.return||o.return()}finally{if(s)throw i}}}}function a(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function r(e,t,n,o,a,i,r){try{var s=e[i](r),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(o,a)}function s(e){return function(){var t=this,n=arguments;return new Promise(function(o,a){var i=e.apply(t,n);function s(e){r(i,o,a,s,c,"next",e)}function c(e){r(i,o,a,s,c,"throw",e)}s(void 0)})}}cc._RF.push(t,"ab4f5UlS31H4YODkNoOpaWT","RomanticPrincess_WildGame");var c={2:"stickyWild",3:"randomWild",4:"roamingWild",5:"removeSymbol",6:"extraBonus",7:"multBonus"};cc.Class({extends:cc.Component,properties:{wild_game_title_node:cc.Node,wild_node:cc.Node,spine_appear:sp.Skeleton,spine_symbol:sp.Skeleton,_symbols:[],_stickyIdxs:[],_isEnterWild:!1},onLoad:function(){this.wild_node.active=!1,this.spine_appear.node.active=!1,this.spine_symbol.node.active=!1},showRandomWild:function(){var e=this;return s(regeneratorRuntime.mark(function t(){var n,o,a,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return SlotsFacade.slots.showMask(),t.next=3,SlotsFacade.delayTime(.2);case 3:e.wild_node.active=!0,n=SlotsFacade.dm.energyData,o=n.freeInfo.randomWild.idxs.concat(),a=regeneratorRuntime.mark(function t(n){var a,i,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(a=e.genAWildSymbol(o[n])).getComponent(sp.Skeleton).setAnimation(0,"animation3",!1),(i=cc.instantiate(e.spine_appear.node)).active=!0,i.parent=e.wild_node,i.position=a.position,(r=i.getComponent(sp.Skeleton)).setAnimation(0,"animation",!1),r.setCompleteListener(function(){r.setCompleteListener(null),i.removeFromParent(!0)}),e._symbols.push(a),SlotsFacade.soundMgr.playEffect("symbol_wild"),t.next=13,SlotsFacade.delayTime(.5);case 13:case"end":return t.stop()}},t)}),i=0;case 8:if(!(i<o.length)){t.next=13;break}return t.delegateYield(a(i),"t0",10);case 10:i++,t.next=8;break;case 13:SlotsFacade.slots.hideMask();case 14:case"end":return t.stop()}},t)}))()},_initStickyWild:function(){var e=SlotsFacade.dm.energyData;if(e.freeInfo&&e.freeInfo.stickyWild){var t=e.freeInfo.stickyWild;this.wild_node.active=!0;for(var n=0;n<t.length;n++)if(!this._stickyIdxs.includes(t[n])){var o=this.genAWildSymbol(t[n]);o.getComponent(sp.Skeleton).setAnimation(0,"animation3",!1),this._symbols.push(o),this._stickyIdxs.push(t[n])}}},_showStickyWild:function(){this.wild_node.active=!0},_addRoamingWild:function(){var e=SlotsFacade.dm.energyData;if(e.freeInfo&&e.freeInfo.roamingWild&&SlotsFacade.dm.getSpinData()){for(var t=SlotsFacade.dm.getSpinData().resultCards,n=[],o=0;o<t.length;o++)SlotsFacade.dm.getGameCfg().wildId==t[o]&&n.push(o+1);if(!(n.length<1)){this.wild_node.active=!0;for(var a=0;a<n.length;a++){var i=this.genAWildSymbol(n[a]);i.getComponent(sp.Skeleton).setAnimation(0,"animation3",!1),i.preIdx=n[a],this._symbols.push(i)}}}},_moveRoamingWild:function(){var e=this;return s(regeneratorRuntime.mark(function t(){var n,a,i,r,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e._symbols.length<1)){t.next=2;break}return t.abrupt("return");case 2:if((n=SlotsFacade.dm.energyData).freeInfo&&n.freeInfo.roamingWild){t.next=5;break}return t.abrupt("return");case 5:a=n.freeInfo.roamingWild,i=o(e._symbols),t.prev=7,s=function(){var t=r.value,n=a.preWilds.indexOf(t.preIdx);if(-1==n)return t.removeFromParent(!0),"continue";var o=a.currWilds[n],i=t.getComponent(sp.Skeleton),s=null;o>0?(s=SlotsFacade.slots.getIdxGlobalPos(o),s=e.wild_node.convertToNodeSpaceAR(s)):s=cc.v2(t.x-120,t.y);var c=!1;o<1?c=!0:a.cols.includes(SlotsFacade.slots.transferIdx(o).col+1)||(c=!0),c?(i.setAnimation(0,"animation2",!1),i.setCompleteListener(function(){i.setCompleteListener(null),i.node.removeFromParent(!0)})):i.setAnimation(0,"animation",!1),cc.tween(t).to(1.5,{x:s.x,y:s.y}).start()},i.s();case 10:if((r=i.n()).done){t.next=16;break}if("continue"!==s()){t.next=14;break}return t.abrupt("continue",14);case 14:t.next=10;break;case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(7),i.e(t.t0);case 21:return t.prev=21,i.f(),t.finish(21);case 24:return t.next=26,SlotsFacade.delayTime(3);case 26:case"end":return t.stop()}},t,null,[[7,18,21,24]])}))()},_showTitle:function(){var e=SlotsFacade.dm.energyData.freeInfo;if(e){for(var t=[],n=2;n<=7;n++){e.hasOwnProperty(c[n.toString()])&&t.push(n)}var a=SlotsFacade.dm.getGameCfg().StoreItemType;if(t.length>0){this.wild_game_title_node.active=!0,cc.find("store_types1",this.wild_game_title_node).active=1==t.length,cc.find("store_types2",this.wild_game_title_node).active=2==t.length,cc.find("bg",this.wild_game_title_node).getComponent("ImgSwitchCmp").setIndex(t.length-1),cc.find("bg/spine",this.wild_game_title_node).getComponent(sp.Skeleton).setAnimation(0,"animation".concat(t.length),!0);for(var i=2;i<=7;i++){var r=cc.find("store_types".concat(t.length,"/type").concat(i),this.wild_game_title_node);if(t.includes(i))if(r.active=!0,i==a.removeSymbol){var s,l=o(r.children);try{for(l.s();!(s=l.n()).done;){var d=s.value;"title"!=d.name&&(d.active=e.removeSymbol.includes(parseInt(d.name)))}}catch(e){l.e(e)}finally{l.f()}}else i==a.extraBonus&&r.getChildByName("title").getComponent("ImgSwitchCmp").setIndex(e.extraBonus.length-1);else r.active=!1}}else this.wild_game_title_node.active=!1}},_hideTile:function(){this.wild_game_title_node.active=!1},genAWildSymbol:function(e){var t=cc.instantiate(this.spine_symbol.node);t.parent=this.wild_node,t.active=!0;var n=SlotsFacade.slots.getIdxGlobalPos(e);return n=this.wild_node.convertToNodeSpaceAR(n),t.setPosition(n),t},enterWildGame:function(){var e=this;return s(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e._isEnterWild=!0,e._showTitle(),e._initStickyWild();case 3:case"end":return t.stop()}},t)}))()},exitWildGame:function(){var e=this;return s(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.removeWild(),e._hideTile(),e._isEnterWild=!1;case 3:case"end":return t.stop()}},t)}))()},removeWild:function(){this._symbols=[],this._stickyIdxs=[],this.wild_node.active=!1,this.wild_node.removeAllChildren()},hideWild:function(){this.wild_node.active=!1},hasStoreType:function(e){var t=SlotsFacade.dm.energyData.freeInfo;return!!t&&t.hasOwnProperty(c[e.toString()])},startMove:function(){var e=this;return s(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(1==SlotsFacade.dm.energyData.state){t.next=3;break}return t.abrupt("return",!1);case 3:if(e._isEnterWild){t.next=6;break}return console.log("\u672a\u5728wild game \u4e2d\u76f4\u63a5\u8fd4\u56de"),t.abrupt("return");case 6:n=SlotsFacade.dm.getGameCfg().StoreItemType,e.hasStoreType(n.randWild)||(e.hasStoreType(n.stickyWild)?e._showStickyWild():e.hasStoreType(n.extraBonus)||e.hasStoreType(n.roamingWilds)&&e._addRoamingWild());case 8:case"end":return t.stop()}},t)}))()},onSpinMsg:function(){var e=this;return s(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(1==SlotsFacade.dm.energyData.state){t.next=3;break}return t.abrupt("return");case 3:if(e._isEnterWild){t.next=6;break}return console.log("\u672a\u5728wild game \u4e2d\u76f4\u63a5\u8fd4\u56de"),t.abrupt("return");case 6:if(n=SlotsFacade.dm.getGameCfg().StoreItemType,!e.hasStoreType(n.randWild)){t.next=12;break}return t.next=10,e.showRandomWild();case 10:t.next=21;break;case 12:if(!e.hasStoreType(n.stickyWild)){t.next=15;break}t.next=21;break;case 15:if(!e.hasStoreType(n.extraBonus)){t.next=18;break}t.next=21;break;case 18:if(!e.hasStoreType(n.roamingWilds)){t.next=21;break}return t.next=21,e._moveRoamingWild();case 21:case"end":return t.stop()}},t)}))()},spinEnd:function(){var e=this;return s(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(1==SlotsFacade.dm.energyData.state){t.next=3;break}return t.abrupt("return");case 3:if(e._isEnterWild){t.next=6;break}return console.log("\u672a\u5728wild game \u4e2d\u76f4\u63a5\u8fd4\u56de"),t.abrupt("return");case 6:if(n=SlotsFacade.dm.getGameCfg().StoreItemType,!e.hasStoreType(n.randWild)){t.next=12;break}return t.next=10,e.removeWild();case 10:t.next=25;break;case 12:if(!e.hasStoreType(n.stickyWild)){t.next=17;break}return t.next=15,e.hideWild();case 15:t.next=25;break;case 17:if(!e.hasStoreType(n.extraBonus)){t.next=22;break}return t.next=20,e.hideWild();case 20:t.next=25;break;case 22:if(!e.hasStoreType(n.roamingWilds)){t.next=25;break}return t.next=25,e.removeWild();case 25:case"end":return t.stop()}},t)}))()}}),cc._RF.pop()},{}]},{},["RomanticPrincess_BonusGame","RomanticPrincess_Cfg","RomanticPrincess_Character","RomanticPrincess_Collect","RomanticPrincess_FlowCtrl","RomanticPrincess_GameData","RomanticPrincess_Logic","RomanticPrincess_MainPanel","RomanticPrincess_Popup","RomanticPrincess_PrizePool","RomanticPrincess_Reel","RomanticPrincess_Slots","RomanticPrincess_Sound","RomanticPrincess_StoreGame","RomanticPrincess_StoreItem","RomanticPrincess_Symbol","RomanticPrincess_WildGame"]);
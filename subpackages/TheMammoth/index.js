window.__require=function e(t,n,a){function o(r,c){if(!n[r]){if(!t[r]){var s=r.split("/");if(s=s[s.length-1],!t[s]){var m="function"==typeof __require&&__require;if(!c&&m)return m(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+r+"'")}r=s}var l=n[r]={exports:{}};t[r][0].call(l.exports,function(e){return o(t[r][1][e]||e)},l,l.exports,e,t,n,a)}return n[r].exports}for(var i="function"==typeof __require&&__require,r=0;r<a.length;r++)o(a[r]);return o}({TheMammoth_Cfg:[function(e,t,n){"use strict";var a;function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}cc._RF.push(t,"21bd31rVotO07cHLuAHvkrn","TheMammoth_Cfg");var i={symbol:(a={},o(a,1,{node:"symbol_1",win_node:"animation_1",win_ani:{name:"animation",zIndex:300}}),o(a,2,{node:"symbol_2",win_node:"animation_2",win_ani:{name:"animation2",zIndex:300},stop_ani:{name:"animation1",zIndex:100}}),o(a,3,{node:"symbol_3",win_node:"animation_3",win_ani:{name:"animation2",zIndex:300}}),o(a,4,{node:"symbol_4",win_node:"animation_4",win_ani:{name:"animation",zIndex:300}}),o(a,5,{node:"symbol_5",win_node:"animation_5",win_ani:{name:"animation",zIndex:300}}),o(a,6,{node:"symbol_6",win_node:"animation_6",win_ani:{name:"animation",zIndex:300}}),o(a,7,{node:"symbol_7",win_node:"animation_7",win_ani:{name:"animation",zIndex:300}}),o(a,8,{node:"symbol_8"}),o(a,9,{node:"symbol_9"}),o(a,10,{node:"symbol_10"}),o(a,11,{node:"symbol_11"}),o(a,12,{node:"symbol_12"}),o(a,13,{node:"symbol_13"}),o(a,14,{node:"symbol_14",win_node:"animation_14",win_ani:{name:"animation2",zIndex:300},stop_ani:{name:"animation1",zIndex:100}}),a),puzzleCfg:{atlas:"puzzle_10",bg:"theme_store_puzzle10_bg",full:"theme_store_puzzle10_full",pieces:["theme_store_puzzle_10_1","theme_store_puzzle_10_2","theme_store_puzzle_10_3","theme_store_puzzle_10_4","theme_store_puzzle_10_5","theme_store_puzzle_10_6","theme_store_puzzle_10_7","theme_store_puzzle_10_8","theme_store_puzzle_10_9","theme_store_puzzle_10_10","theme_store_puzzle_10_11","theme_store_puzzle_10_12"]},scripts:{Top:"LMSlots_Top_Base",Bottom:"LMSlots_Bottom_Base",Slots:"TheMammoth_Slots",Reels:"TheMammoth_Reel",Symbols:"TheMammoth_Symbol"},col:5,row:4,symbolPrefab:"symbol",symbolSize:{width:124,height:94},randomSymbols:[1,3,4,5,6,7,8,9,10,11,12,13],wildId:1,scatterIds:[2,14],kuang:"kuang",autoModelDelay:.8,speed:3e3,reelStopInter:.2,auto_stop_time:1,bounce:!0,helpItems:["games/TheMammoth/prefab/help_item_1","games/TheMammoth/prefab/help_item_2","games/TheMammoth/prefab/help_item_3"],commEffect:{path:"games/TheMammoth/",win1:["win1","win1end"],win2:["win2","win2end"],win3:["win3","win3end"],win4:["win4","win4end"]},bounceInfo:{distance:30,time:.1},reelStateInfo:[{id:[2,14],mini:3,counts:[1,1,1,1,1],antiNode:"",path:"games/TheMammoth/",reelStopSound:"reel_stop",symbolStopSound:"scatter",antSound:"reel_notify",antSpeed:1500}],normalBgm:"base_bgm"};t.exports=i,cc._RF.pop()},{}],TheMammoth_Logic:[function(e,t,n){"use strict";cc._RF.push(t,"cea0bLPFPVAFa9N8OVwiSEz","TheMammoth_Logic"),cc.Class({extends:e("LMSlots_Logic_Base"),properties:{},onLoad:function(){window.SlotsFacade=this,this.dm=cc.vv.gameData,this.InitCommComponent();var e=cc.find("safe_node/wheel",this.node).getComponent("TheMammoth_Wheel");cc.vv.gameData.GetSlotsScript().setWheelScripts(e),this.wheel=e,this.topCmp=cc.vv.gameData.GetTopScript(),this.bottomCmp=cc.vv.gameData.GetBottomScript(),this.slots=cc.vv.gameData.GetSlotsScript(),Global.registerEvent(cc.vv.gameData._EventId.SLOT_TOTALBET_UPDATED,this.onUpdateBet,this)},onDestroy:function(){window.SlotsFacade=null,this.dm=null},delayTime:function(e){var t=this;return new Promise(function(n,a){t.scheduleOnce(function(){n()},e)})},onUpdateBet:function(){cc.vv.gameData.GetSlotsScript().updateFreePanel(cc.vv.gameData.GetBetIdx()-1)},playPrizePoolAnimation:function(){var e=cc.find("safe_node/LMSlots_PrizePool_1/prizePool_Grand",this.node);e.opacity=255;var t=cc.find("safe_node/LMSlots_PrizePool_1/prizePool_Major",this.node);t.opacity=0;var n=cc.find("safe_node/LMSlots_PrizePool_1/prizePool_Minor",this.node);n.opacity=0,e.runAction(cc.repeatForever(cc.sequence(cc.delayTime(4),cc.fadeOut(.5),cc.delayTime(8.5),cc.fadeIn(.5)))),t.runAction(cc.repeatForever(cc.sequence(cc.delayTime(4),cc.fadeIn(.5),cc.delayTime(4),cc.fadeOut(.5),cc.delayTime(4.5)))),n.runAction(cc.repeatForever(cc.sequence(cc.delayTime(8.5),cc.fadeIn(.5),cc.delayTime(4),cc.fadeOut(.5))))},start:function(){this._super(),this.playPrizePoolAnimation()}}),cc._RF.pop()},{LMSlots_Logic_Base:void 0}],TheMammoth_Reel:[function(e,t,n){"use strict";function a(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=o(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,r=!0,c=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return r=e.done,e},e:function(e){c=!0,i=e},f:function(){try{r||null==a.return||a.return()}finally{if(c)throw i}}}}function o(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}cc._RF.push(t,"93daafj7r1GtI9wsXHePOZ0","TheMammoth_Reel"),cc.Class({extends:e("LMSlots_Reel_Base"),properties:{},OnReelSpinEnd:function(){this._super()},playReelStop:function(){for(var e=0;e<this._originResult.length;e++){var t,n=this._symbols[e],o=a(this._reelState);try{for(o.s();!(t=o.n()).done;){var i=t.value;i.isStop&&i.id.includes(n.GetShowId())&&n.playStopAnimation()}}catch(e){o.e(e)}finally{o.f()}}if(this._cfg.reelStateInfo&&this._cfg.reelStateInfo[0]){var r,c="",s="",m=!1,l=a(this._reelState);try{for(l.s();!(r=l.n()).done;){var u=r.value;u.isStop?(s=u.symbolStopSound?u.symbolStopSound+(this._reelIdx+1):"",m=!0):c=u.reelStopSound?u.reelStopSound:""}}catch(e){l.e(e)}finally{l.f()}m&&(c=s),cc.vv.AudioManager.playEff(this._cfg.reelStateInfo[0].path,c,!0)}}}),cc._RF.pop()},{LMSlots_Reel_Base:void 0}],TheMammoth_Slots:[function(e,t,n){"use strict";function a(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=o(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,r=!0,c=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return r=e.done,e},e:function(e){c=!0,i=e},f:function(){try{r||null==a.return||a.return()}finally{if(c)throw i}}}}function o(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function r(e,t,n,a,o,i,r){try{var c=e[i](r),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(a,o)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(a,o){var i=e.apply(t,n);function c(e){r(i,a,o,c,s,"next",e)}function s(e){r(i,a,o,c,s,"throw",e)}c(void 0)})}}cc._RF.push(t,"ad542MnbZhAPoKJHJ1pLs4c","TheMammoth_Slots");var s=1,m=2,l=3;cc.Class({extends:e("LMSlots_Slots_Base"),properties:{_wheel_script:null,_wheel_result:null,_curFreeTimesPanel:null},Init:function(){var e=this;this._super(),this.updateFreePanel(cc.vv.gameData.GetBetIdx()-1),cc.winSize.height/cc.winSize.width>2.1?cc.find("logo",this.node.parent).active=!0:cc.find("logo",this.node.parent).active=!1,this.node.parent.parent.getComponent("LMSlots_Puzzle").setCallback(function(){var t=c(regeneratorRuntime.mark(function t(n,a){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return cc.vv.gameData.SetTotalFree(n.freeCnt),cc.vv.gameData.SetFreeTime(n.freeCnt),e.cutScenesElephant(),t.next=5,cc.vv.gameData.awaitTime(1.5);case 5:return e.ShowGameview(!0),e.changeFreeBg(!0),t.next=9,cc.vv.gameData.awaitTime(1.5);case 9:return t.next=11,e.popFreeDialog(!0);case 11:cc.vv.AudioManager.playBgm("games/TheMammoth/","free_bgm",!0),e.CanDoNextRound();case 13:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}())},StartMove:function(){this._super(),Global.SlotsSoundMgr.playNormalBgm(),this._curFreeTimesPanel&&(cc.find("allTimes",this._curFreeTimesPanel).getComponent(cc.Label).string=cc.vv.gameData.GetTotalFree(),cc.find("curTimes",this._curFreeTimesPanel).getComponent(cc.Label).string=cc.vv.gameData.GetTotalFree()-cc.vv.gameData.GetFreeTime())},ReconnectShow:function(){var e=this;return c(regeneratorRuntime.mark(function t(){var n,a,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=cc.vv.gameData.getDeskInfo(),1!==(a=n.history.wheelGames[cc.vv.gameData.GetBetIdx()-1]).state){t.next=42;break}return t.next=5,new Promise(function(t){e._wheel_script.enterWheelGame(t,a.items)});case 5:if((o=a.items[e._wheel_result.itemId-1]).type!==m){t.next=16;break}return e.cutScenesIce(),t.next=10,cc.vv.gameData.awaitTime(1.5);case 10:e._wheel_script.reset(),e._wheel_script.node.active=!1,cc.vv.gameData.AddCoin(e._wheel_result.jackpot.value),e.ShowBottomWin(e._wheel_result.jackpot.value,e._wheel_result.jackpot.value,!0,function(){e.CanDoNextRound()}),t.next=40;break;case 16:if(o.type!==s){t.next=29;break}return e.cutScenesElephant(),e.ShowGameview(!0),e.changeFreeBg(!0),t.next=22,cc.vv.gameData.awaitTime(1.5);case 22:return e._wheel_script.reset(),e._wheel_script.node.active=!1,t.next=26,e.popFreeDialog(!0);case 26:e.CanDoNextRound(),t.next=40;break;case 29:if(o.type!==l){t.next=40;break}return e.cutScenesElephant(),e.ShowGameview(!0),e.changeFreeBg(!1,o.mult),t.next=35,cc.vv.gameData.awaitTime(1.5);case 35:return e._wheel_script.reset(),e._wheel_script.node.active=!1,t.next=39,e.popFreeDialog(!1,!1,o.mult);case 39:e.CanDoNextRound();case 40:t.next=43;break;case 42:cc.vv.gameData.GetFreeTime()>0?(1===n.addMult?e.changeFreeBg(!0):e.changeFreeBg(!1,n.addMult),e.ShowGameview(!0),e.CanDoNextRound()):e.ShowGameview(!1);case 43:case"end":return t.stop()}},t)}))()},onMsgSpine:function(e){var t=this;return c(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t._super(e),t._gameInfo.mammothGame&&(t.SetStopTime(3),t.triggerRandomGame()),cc.vv.gameData.getDeskInfo().history.wheelGames[cc.vv.gameData.GetBetIdx()-1]=t._gameInfo.wheelGame;case 3:case"end":return n.stop()}},n)}))()},CheckEnterFreeGame:function(){return 1===this._gameInfo.wheelGame.state},CheckExtraFreeGame:function(){return!!(this._gameInfo.freeResult&&this._gameInfo.freeResult.freeInfo&&this._gameInfo.freeResult.freeInfo.freeCnt>0)},CheckExitFreeGame:function(){return cc.vv.gameData.GetTotalFree()>0&&0===cc.vv.gameData.GetFreeTime()},ShowWinTrace:function(){var e=this;return c(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=c(regeneratorRuntime.mark(function t(n){var a,o,i,r,c,s,m,l,u,p,h;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(a=[],o=0;o<e._gameInfo.zjLuXian.length;o++)for(i=e._gameInfo.zjLuXian[o],r=0;r<i.indexs.length;r++)a[i.indexs[r]]=1;if(e._gameInfo.scatterZJLuXian&&e._gameInfo.scatterZJLuXian.indexs)for(c=0;c<e._gameInfo.scatterZJLuXian.indexs.length;c++)s=e._gameInfo.scatterZJLuXian.indexs[c],a[s]=1;if(!(cc.vv.gameData.GetTotalFree()>0&&cc.vv.gameData.GetTotalFree()!==cc.vv.gameData.GetFreeTime())){t.next=10;break}for(l in m=!1,a)(u=e.GetSymbolByIdx(Number(l)))&&u.GetShowId()===e._cfg.wildId&&(m=!0,u.playWildAnimation(e._gameInfo.wildMult));if(!m){t.next=10;break}return cc.vv.AudioManager.playEff("games/TheMammoth/","wild_land_2",!0),t.next=10,cc.vv.gameData.awaitTime(1.5);case 10:for(p in a)(h=e.GetSymbolByIdx(Number(p)))&&(cc.vv.gameData.GetTotalFree()>0&&cc.vv.gameData.GetTotalFree()!==cc.vv.gameData.GetFreeTime()&&h.GetShowId()===e._cfg.wildId||h.playWinAnimation(),h.ShowKuang());n();case 12:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},OnSpinEnd:function(){var e=this;return c(regeneratorRuntime.mark(function t(){var n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.ShowWinTrace();case 2:e.playAddFreeTimesAnimation(),n=cc.vv.gameData.GetGameWin(),a=cc.vv.gameData.GetGameWin(),cc.vv.gameData.GetTotalFree()>0&&cc.vv.gameData.GetTotalFree()!==cc.vv.gameData.GetFreeTime()&&(a=cc.vv.gameData.GetGameTotalFreeWin()),e.ShowBottomWin(n,a,!0,c(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.CheckEnterFreeGame()){t.next=4;break}e.triggerFreeGame(),t.next=15;break;case 4:if(!e.CheckExtraFreeGame()){t.next=8;break}e.triggerExtraFreeGame(),t.next=15;break;case 8:if(!e.CheckExitFreeGame()){t.next=12;break}e.triggerExitFreeGame(),t.next=15;break;case 12:return t.next=14,cc.vv.gameData.awaitTime(.1);case 14:e.CanDoNextRound();case 15:case"end":return t.stop()}},t)})));case 7:case"end":return t.stop()}},t)}))()},playAddFreeTimesAnimation:function(){var e=this;if(this._gameInfo.updateWheel){var t=1;3===this._gameInfo.updateWheel.mult?t=2:5===this._gameInfo.updateWheel.mult&&(t=3);var n=cc.find("free_panel/free_"+t+"/times",this.node.parent).convertToWorldSpaceAR(cc.v2(0,0));n=this.node.parent.convertToNodeSpaceAR(n),cc.vv.AudioManager.playEff("games/TheMammoth/","gem",!0);var a=cc.instantiate(cc.find("zhuanshi_01",this.node.parent));a.active=!0;for(var o=null,i=this._reels[4],r=0;r<this._cfg.row;r++){var c=i.GetSymbolByRow(r);if(14===c.GetShowId()){o=c.node.convertToWorldSpaceAR(cc.v2(0,0)),o=this.node.parent.convertToNodeSpaceAR(o);break}}a.position=o,a.parent=this.node.parent,a.getComponent(sp.Skeleton).setAnimation(0,"animation"+t,!1),a.getComponent(sp.Skeleton).setCompleteListener(function(o){(o.animation?o.animation.name:"")==="animation"+t&&(a.getComponent(sp.Skeleton).clearTracks(),a.getComponent(sp.Skeleton).setAnimation(0,"animation"+t+"_1",!1),a.runAction(cc.sequence(cc.moveTo(.5,n),cc.callFunc(function(){var t=cc.instantiate(cc.find("shuzizengjia_01",e.node.parent));t.active=!0,t.parent=e.node.parent,t.position=n,t.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),t.getComponent(sp.Skeleton).setCompleteListener(function(){t.removeFromParent()}),e.updateFreePanel(cc.vv.gameData.GetBetIdx()-1),a.removeFromParent()}))))})}},triggerFreeGame:function(){var e=this;return c(regeneratorRuntime.mark(function t(){var n,a,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(e._bottomScript.ShowBtnsByState("moveing_1"),n=0;n<e._gameInfo.resultCards.length;n++)2!==(a=e._gameInfo.resultCards[n])&&14!==a||e.GetSymbolByIdx(n+1).playWinAnimation();return cc.vv.AudioManager.playEff("games/TheMammoth/","bell",!0),t.next=5,cc.vv.gameData.awaitTime(2);case 5:return e.cutScenesIce(),t.next=8,cc.vv.gameData.awaitTime(.5);case 8:return t.next=10,new Promise(function(t){e._wheel_script.enterWheelGame(t,e._gameInfo.wheelGame.items)});case 10:if((o=e._gameInfo.wheelGame.items[e._wheel_result.itemId-1]).type!==m){t.next=21;break}return e.cutScenesIce(),t.next=15,cc.vv.gameData.awaitTime(1.5);case 15:cc.vv.gameData.AddCoin(e._wheel_result.jackpot.value),e._wheel_script.reset(),e._wheel_script.node.active=!1,e.ShowBottomWin(e._wheel_result.jackpot.value,e._wheel_result.jackpot.value,!0,function(){e.CanDoNextRound()}),t.next=49;break;case 21:if(o.type!==s){t.next=36;break}return e.cutScenesElephant(),e.Backup(),e.ShowGameview(!0),e.changeFreeBg(!0),t.next=28,cc.vv.gameData.awaitTime(1.5);case 28:return e._wheel_script.reset(),e._wheel_script.node.active=!1,t.next=32,e.popFreeDialog(!0);case 32:cc.vv.AudioManager.playBgm("games/TheMammoth/","free_bgm",!0),e.CanDoNextRound(),t.next=49;break;case 36:if(o.type!==l){t.next=49;break}return e.cutScenesElephant(),e.Backup(),e.ShowGameview(!0),e.changeFreeBg(!1,o.mult),t.next=43,cc.vv.gameData.awaitTime(1.5);case 43:return e._wheel_script.reset(),e._wheel_script.node.active=!1,t.next=47,e.popFreeDialog(!1,!1,o.mult);case 47:cc.vv.AudioManager.playBgm("games/TheMammoth/","free_bgm",!0),e.CanDoNextRound();case 49:case"end":return t.stop()}},t)}))()},triggerExtraFreeGame:function(){var e=this;return c(regeneratorRuntime.mark(function t(){var n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(e._bottomScript.ShowBtnsByState("stopped"),n=0;n<e._gameInfo.resultCards.length;n++)2!==(a=e._gameInfo.resultCards[n])&&14!==a||e.GetSymbolByIdx(n+1).playWinAnimation();return cc.vv.AudioManager.playEff("games/TheMammoth/","bell",!0),t.next=5,cc.vv.gameData.awaitTime(2);case 5:return t.next=7,e.popFreeDialog(!1,!0);case 7:e.CanDoNextRound();case 8:case"end":return t.stop()}},t)}))()},triggerExitFreeGame:function(){var e=this;return c(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._bottomScript.ShowBtnsByState("moveing_1"),t.next=3,cc.vv.gameData.awaitTime(1);case 3:return t.next=5,e.popFreeResultDialog();case 5:return e.cutScenesElephant(),e._curFreeTimesPanel=null,t.next=9,cc.vv.gameData.awaitTime(1.5);case 9:e.updateFreePanel(cc.vv.gameData.GetBetIdx()-1),e.ShowGameview(!1),e.Resume(),e.ShowBottomWin(cc.vv.gameData.GetGameTotalFreeWin(),cc.vv.gameData.GetGameTotalFreeWin(),!0,function(){Global.SlotsSoundMgr.stopBgm(),Global.SlotsSoundMgr.playNormalBgm(),e.CanDoNextRound()});case 13:case"end":return t.stop()}},t)}))()},setWheelScripts:function(e){this._wheel_script=e},setWheelResult:function(e){this._wheel_result=e},cutScenesIce:function(){cc.vv.AudioManager.playEff("games/TheMammoth/","bonus_transiton",!0);var e=cc.find("qp_02",this.node.parent);e.active=!0,e.getComponent(sp.Skeleton).setToSetupPose(),e.getComponent(sp.Skeleton).setAnimation(0,"animation",!1)},cutScenesElephant:function(){cc.vv.AudioManager.playEff("games/TheMammoth/","fg_transiton",!0);var e=cc.find("QP_01",this.node.parent);e.active=!0,e.getComponent(sp.Skeleton).setToSetupPose(),e.getComponent(sp.Skeleton).setAnimation(0,"idle3",!1)},OnReelSpinEnd:function(e){this._super(e)},SetSlotsResult:function(e){this._super(e)},ShowGameview:function(e){this._super(e),cc.find("free_panel",this.node.parent).active=!e,cc.find("LMSlots_PrizePool_1",this.node.parent).active=!e,cc.find("free_times",this.node.parent).active=e,cc.find("LMSlots_Collect_Puzzle",this.node.parent).active=!e},update:function(e){this._super(e)},shake:function(){var e,t=a(this.node.parent.children);try{for(t.s();!(e=t.n()).done;){var n=e.value;if("LMSlots_Top"!==n.name&&"LMSlots_Bottom"!==n.name&&n.active){var o=cc.shake(3,15,15);n.runAction(o)}}}catch(e){t.e(e)}finally{t.f()}},triggerRandomGame:function(){cc.vv.AudioManager.playEff("games/TheMammoth/","big_win_transiton",!0);var e=cc.find("spine_randomgame",this.node);e.active=!0,e.getComponent(sp.Skeleton).setToSetupPose(),e.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),this.shake()},updateFreePanel:function(e){var t=cc.vv.gameData.getDeskInfo().history;if(t&&t.wheelGames&&e<t.wheelGames.length){var n=t.wheelGames[e],a=cc.find("free_panel/free_1/times",this.node.parent),o=cc.find("free_panel/free_2/times",this.node.parent),i=cc.find("free_panel/free_3/times",this.node.parent);a.getComponent(cc.Label).string=n.greenItem.freeCnt,o.getComponent(cc.Label).string=n.purpleItem.freeCnt,i.getComponent(cc.Label).string=n.redItem.freeCnt}var r=cc.find("free_panel/tip/tip_1",this.node.parent),c=cc.find("free_panel/tip/tip_2",this.node.parent),s=cc.find("free_panel/tip/qiehuan_01",this.node.parent),m=s.getComponent(sp.Skeleton);e>=cc.vv.gameData.getDeskInfo().needBet?(c.active||(s.active=!0,m.setToSetupPose(),m.setAnimation(0,"animation",!1),m.setCompleteListener(function(){s.active=!1})),r.active=!1,c.active=!0):(r.active||(s.active=!0,m.setToSetupPose(),m.setAnimation(0,"animation",!1),m.setCompleteListener(function(){s.active=!1})),r.active=!0,c.active=!1)},changeFreeBg:function(e,t){cc.find("LMSlots_PrizePool_1",this.node.parent).active=!1;var n=cc.find("free_times",this.node.parent);n.active=!0,cc.find("common",n).active=!1,cc.find("mult_2",n).active=!1,cc.find("mult_3",n).active=!1,cc.find("mult_5",n).active=!1,e?(this._curFreeTimesPanel=cc.find("common",n),cc.find("common",n).active=!0,cc.find("common/allTimes",n).getComponent(cc.Label).string=cc.vv.gameData.GetTotalFree(),cc.find("common/curTimes",n).getComponent(cc.Label).string=cc.vv.gameData.GetTotalFree()-cc.vv.gameData.GetFreeTime()):(this._curFreeTimesPanel=cc.find("mult_"+t,n),cc.find("mult_"+t,n).active=!0,cc.find("mult_"+t+"/allTimes",n).getComponent(cc.Label).string=cc.vv.gameData.GetTotalFree(),cc.find("mult_"+t+"/curTimes",n).getComponent(cc.Label).string=cc.vv.gameData.GetTotalFree()-cc.vv.gameData.GetFreeTime())},popFreeDialog:function(e,t,n){var a=this;return new Promise(function(){var o=c(regeneratorRuntime.mark(function o(i){var r,s,m;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:(r=cc.find("free_dialog",a.node.parent)).active=!0,(s=cc.find("free_dialog_bg",r)).opacity=0,s.runAction(cc.fadeTo(.2,200)),m=null,e?(m=cc.find("common_enter_node",r),cc.vv.AudioManager.playEff("games/TheMammoth/","fg_start",!0)):t?(m=cc.find("extra_node",r),cc.vv.AudioManager.playEff("games/TheMammoth/","retrigger_board_land",!0)):(cc.vv.AudioManager.playEff("games/TheMammoth/","fg_start",!0),m=cc.find("mult_enter_node_"+n,r)),m.active=!0,m.scale=0,cc.find("times",m).getComponent(cc.Label).string=t?a._gameInfo.freeResult.freeInfo.freeCnt:cc.vv.gameData.GetTotalFree(),cc.tween(m).to(.5,{scale:1},{easing:"backOut"}).call(c(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!cc.find("btn_start",m)){e.next=6;break}t=function(){var e=c(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return cc.find("btn_start",m).off("click"),cc.vv.AudioManager.playEff("games/TheMammoth/","fg_select",!0),cc.tween(m).to(.5,{scale:0}).start(),s.runAction(cc.fadeOut(.2)),e.next=6,cc.vv.gameData.awaitTime(.5);case 6:i(),m.active=!1,r.active=!1;case 9:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),cc.vv.gameData.checkAutoPlay(cc.find("btn_start",m),t),cc.find("btn_start",m).on("click",c(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return cc.find("btn_start",m).stopAllActions(),e.next=3,t();case 3:case"end":return e.stop()}},e)}))),e.next=15;break;case 6:return e.next=8,cc.vv.gameData.awaitTime(2);case 8:return cc.tween(m).to(.5,{scale:0}).start(),s.runAction(cc.fadeOut(.2)),e.next=12,cc.vv.gameData.awaitTime(.5);case 12:i(),m.active=!1,r.active=!1;case 15:case"end":return e.stop()}},e)}))).start();case 11:case"end":return o.stop()}},o)}));return function(e){return o.apply(this,arguments)}}())},popFreeResultDialog:function(){var e=this;return new Promise(function(){var t=c(regeneratorRuntime.mark(function t(n){var a,o,i,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return cc.vv.AudioManager.playEff("games/TheMammoth/","fg_end",!0),(a=cc.find("free_dialog",e.node.parent)).active=!0,(o=cc.find("free_dialog_bg",a)).opacity=0,o.runAction(cc.fadeTo(.2,200)),(i=cc.find("result_node",a)).active=!0,i.scale=0,cc.find("coin",i).getComponent(cc.Label).string="",cc.tween(i).to(.5,{scale:1},{easing:"backOut"}).start(),t.next=13,cc.vv.gameData.awaitTime(.5);case 13:Global.doRoallNumEff(cc.find("coin",i),0,cc.vv.gameData.GetGameTotalFreeWin(),3,null,null,0,!0),r=function(){var e=c(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return cc.find("btn_collect",i).off("click"),cc.vv.AudioManager.playEff("games/TheMammoth/","board_collect",!0),cc.tween(i).to(.5,{scale:0}).start(),o.runAction(cc.fadeOut(.2)),e.next=6,cc.vv.gameData.awaitTime(.5);case 6:n(),i.active=!1,a.active=!1;case 9:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),cc.vv.gameData.checkAutoPlay(cc.find("btn_collect",i),r),cc.find("btn_collect",i).on("click",c(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return cc.find("btn_collect",i).stopAllActions(),e.next=3,r();case 3:case"end":return e.stop()}},e)})));case 17:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())},awaitTime:function(e){var t=this;return new Promise(function(n,a){t.scheduleOnce(function(){n()},e)})}}),cc._RF.pop()},{LMSlots_Slots_Base:void 0}],TheMammoth_Symbol:[function(e,t,n){"use strict";cc._RF.push(t,"4e94bP7EwNALIDB2XjjpZib","TheMammoth_Symbol"),cc.Class({extends:e("LMSlots_Symbol_Base"),properties:{},StartMove:function(){this._super()},ShowById:function(e,t){this._super(e,t)},playWinAnimation:function(){this._showNode&&(this._showNode.active=!1);var e=this._id,t=cc.vv.gameData.getGameCfg();if(t.symbol[e]&&t.symbol[e].win_node){this._state="win",this._showNode&&(this._showNode.active=!1);var n=this.setAnimationToTop(!0);n.active=!0;var a=cc.find(t.symbol[e].win_node,n);if(a.active=!0,t.symbol[e].win_ani&&""!==t.symbol[e].win_ani.name){n.zIndex=t.symbol[e].win_ani.zIndex-this._symbolIdx+10*this._reelIdx;var o=a.getComponent(sp.Skeleton);o&&o.setAnimation(0,t.symbol[e].win_ani.name,!0)}}else this._showNode.active=!0,this.playWinTweenAction()},playWildAnimation:function(e){this._showNode&&(this._showNode.active=!1);var t=this._id,n=cc.vv.gameData.getGameCfg();this._state="win",this._showNode&&(this._showNode.active=!1);var a=this.setAnimationToTop(!0);if(a.active=!0,cc.vv.gameData.GetTotalFree()>0&&cc.vv.gameData.GetTotalFree()!==cc.vv.gameData.GetFreeTime()&&t===n.wildId){var o=cc.find("animation_1_"+e,a);o.active=!0,a.zIndex=300-this._symbolIdx+10*this._reelIdx;var i=o.getComponent(sp.Skeleton);i&&(i.setAnimation(0,"animation1",!1),i.setCompleteListener(function(e){"animation1"===(e.animation?e.animation.name:"")&&(i.clearTracks(),i.setAnimation(0,"animation",!0))}))}},playWinTweenAction:function(){this._showNode.cleanup(),this._showNodeOrgScale=this._showNode.scale,cc.tween(this._showNode).repeatForever(cc.tween().to(.35,{opacity:0}).to(.35,{opacity:255}).delay(1)).start()}}),cc._RF.pop()},{LMSlots_Symbol_Base:void 0}],TheMammoth_Wheel:[function(e,t,n){"use strict";function a(e,t,n,a,o,i,r){try{var c=e[i](r),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(a,o)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(o,i){var r=e.apply(t,n);function c(e){a(r,o,i,c,s,"next",e)}function s(e){a(r,o,i,c,s,"throw",e)}c(void 0)})}}function i(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=r(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o,i=!0,c=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==a.return||a.return()}finally{if(c)throw o}}}}function r(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}cc._RF.push(t,"59aaff3GE5IaJoPT4yjU0jK","TheMammoth_Wheel");var s=1,m=2,l=3;cc.Class({extends:cc.Component,properties:{type_1:cc.Node,type_2:cc.Node,btn_play:cc.Node,sanjiao:cc.Node,shuihua:cc.Node,jinse:cc.Node,zise:cc.Node,jackpot_result:cc.Node,jackpot_result_bg:cc.Node,minor:cc.Node,major:cc.Node,grand:cc.Node,items_1:[cc.Node],items_2:[cc.Node],speed:{default:1,tooltip:"\u65cb\u8f6c\u901f\u5ea6"},maxSpeed:{default:20,tooltip:"\u6700\u5927\u901f\u5ea6"},count:{default:2,tooltip:"\u9700\u8981\u8f6c\u51e0\u8f6e"},minSpeed:{default:1,tooltip:"\u6700\u5c0f\u901f\u5ea6"},speedOffset:{default:.25,tooltip:"\u901f\u5ea6\u53d8\u5316\u503c"},_startMove:!1,_needStop:!1,_backMove:!1,_resultItem:null,_bottomPosY:0,_successCallback:null,_hasPressed:!1,_result:null,_wheelConfig:null,_type:1,_items:null,_itemsHeight:0},onLoad:function(){var e=this;this.btn_play.on("click",function(){if(!e._hasPressed){e.btn_play.stopAllActions(),cc.vv.AudioManager.playEff("games/TheMammoth/","fg_select",!0),e._hasPressed=!0;var t={c:MsgId.SLOT_SUBGAME_DATA};t.gameid=cc.vv.gameData.getGameId(),t.data={},t.data.rtype=1,cc.vv.NetManager.send(t,!0),e.btn_play.runAction(cc.fadeOut(.2))}}),cc.vv.NetManager.registerMsg(MsgId.SLOT_SUBGAME_DATA,this.onRcvSubgameData,this)},update:function(e){if(this._startMove){this._needStop?(this.speed-=this.speedOffset,this.speed<=this.minSpeed&&(this.speed=this.minSpeed)):(this.speed+=this.speedOffset,this.speed>=this.maxSpeed&&(this.speed=this.maxSpeed)),0===this.count&&this._resultItem.y<=3*this._resultItem.height&&(this._needStop=!0),this._needStop&&this._resultItem.y<-180&&(this._startMove=!1,this._backMove=!0);var t,n=i(this._items);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.y<=this._bottomPosY&&(a.y+=this._itemsHeight,a===this._resultItem&&(this.count--,this.count<=0&&(this.count=0))),a.y-=this.speed}}catch(e){n.e(e)}finally{n.f()}}if(this._backMove){var o,r=i(this._items);try{for(r.s();!(o=r.n()).done;){o.value.y+=this.minSpeed}}catch(e){r.e(e)}finally{r.f()}this._resultItem.y>-181&&this._resultItem.y<-179&&(this._backMove=!1,this.exitWheelGame())}},onRcvSubgameData:function(e){var t=this;if(200===e.code&&1===e.data.rtype){this._resultItem=this._items[e.data.itemId-1],this._result=e.data,cc.vv.gameData.GetSlotsScript().setWheelResult(this._result),this._startMove=!0,cc.vv.AudioManager.playEff("games/TheMammoth/","bonus_wheel_spin",!0);var n=this._wheelConfig[e.data.itemId-1];n.type!==s&&n.type!==l||(cc.vv.gameData.SetTotalFree(n.freeCnt),cc.vv.gameData.SetFreeTime(n.freeCnt)),this.shuihua.active=!0,this.shuihua.getComponent(sp.Skeleton).setAnimation(0,"animation1",!1),this.shuihua.getComponent(sp.Skeleton).setCompleteListener(function(e){"animation1"===(e.animation?e.animation.name:"")&&t.shuihua.getComponent(sp.Skeleton).setAnimation(0,"animation2",!0)})}},enterWheelGame:function(e,t){var n=this;return o(regeneratorRuntime.mark(function a(){var o,r,c,l,u,p,h,f;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:n.node.active=!0,n.reset(),n._successCallback=e,n._wheelConfig=t,cc.vv.AudioManager.playBgm("games/TheMammoth/","bonus_bgm",!0),o=cc.vv.gameData.getDeskInfo(),r=null,o.needBet>cc.vv.gameData.GetBetIdx()?(n._type=1,(r=cc.find("bg/wheel_mask/type_1",n.node)).active=!0,cc.find("bg/wheel_mask/type_2",n.node).active=!1):(n._type=2,(r=cc.find("bg/wheel_mask/type_2",n.node)).active=!0,cc.find("bg/wheel_mask/type_1",n.node).active=!1),n._items=1===n._type?n.items_1:n.items_2,n._itemsHeight=0,c=i(n._items);try{for(c.s();!(l=c.n()).done;)u=l.value,n._itemsHeight+=u.height}catch(e){c.e(e)}finally{c.f()}for(n._bottomPosY=-708,p=0;p<t.length;p++)h=t[p],f=cc.find("index_"+(p+1),r),h.type===s?cc.find("num",f).getComponent(cc.Label).string=h.freeCnt:h.type===m?cc.find("num",f).getComponent(cc.Label).string=Global.convertNumToShort(h.jackpotValue,null,0):cc.find("num",f).getComponent(cc.Label).string=h.freeCnt;cc.vv.gameData.checkAutoPlay(n.btn_play,function(){if(!n._hasPressed){cc.vv.AudioManager.playEff("games/TheMammoth/","fg_select",!0),n._hasPressed=!0;var e={c:MsgId.SLOT_SUBGAME_DATA};e.gameid=cc.vv.gameData.getGameId(),e.data={},e.data.rtype=1,cc.vv.NetManager.send(e,!0),n.btn_play.runAction(cc.fadeOut(.2))}});case 15:case"end":return a.stop()}},a)}))()},exitWheelGame:function(){var e=this;return o(regeneratorRuntime.mark(function t(){var n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return cc.vv.AudioManager.playEff("games/TheMammoth/","bonus_active",!0),e.sanjiao.active=!0,e.sanjiao.getComponent(sp.Skeleton).setToSetupPose(),e.sanjiao.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),e.shuihua.getComponent(sp.Skeleton).setAnimation(0,"animation3",!1),e.shuihua.getComponent(sp.Skeleton).setCompleteListener(function(t){"animation3"===(t.animation?t.animation.name:"")&&(e.shuihua.active=!1)}),t.next=8,e.awaitTime(1);case 8:return(n=e._wheelConfig[e._result.itemId-1]).type===s?(e.zise.active=!0,e.zise.getComponent(sp.Skeleton).setToSetupPose(),e.zise.getComponent(sp.Skeleton).setAnimation(0,"animation",!0)):n.type===m?(e.jinse.active=!0,e.jinse.getComponent(sp.Skeleton).setToSetupPose(),e.jinse.getComponent(sp.Skeleton).setAnimation(0,"animation2",!0)):(e.jinse.active=!0,e.jinse.getComponent(sp.Skeleton).setToSetupPose(),e.jinse.getComponent(sp.Skeleton).setAnimation(0,"animation1",!0)),t.next=12,e.awaitTime(2);case 12:n.type===m?(cc.vv.AudioManager.playEff("games/TheMammoth/","jp_board",!0),e.jackpot_result.active=!0,e.jackpot_result_bg.opacity=0,e.jackpot_result_bg.runAction(cc.fadeTo(.2,200)),e.minor.active=!1,e.major.active=!1,e.grand.active=!1,a=null,(a=2===e._result.jackpot.id?e.minor:3===e._result.jackpot.id?e.major:e.grand).active=!0,a.scale=0,a.runAction(cc.scaleTo(.4,1).easing(cc.easeBackOut())),Global.doRoallNumEff(a.getChildByName("num"),0,e._result.jackpot.value,3,null,null,0,!0),a.getChildByName("btn_collect").on("click",function(){e.jackpot_result_bg.runAction(cc.fadeOut(.2)),a.runAction(cc.sequence(cc.scaleTo(.4,0).easing(cc.easeBackIn()),cc.callFunc(function(){e._successCallback&&e._successCallback()})))})):e._successCallback&&e._successCallback();case 13:case"end":return t.stop()}},t)}))()},reset:function(){this._startMove=!1,this.speed=1,this._needStop=!1,this.count=2,this._hasPressed=!1,this._backMove=!1,this.zise.active=!1,this.jinse.active=!1,this.btn_play.opacity=255},onDestroy:function(){cc.vv.NetManager.unregisterMsg(MsgId.SLOT_SUBGAME_DATA,this.onRcvSubgameData,!1,this)},awaitTime:function(e){var t=this;return new Promise(function(n,a){t.scheduleOnce(function(){n()},e)})}}),cc._RF.pop()},{}]},{},["TheMammoth_Cfg","TheMammoth_Logic","TheMammoth_Reel","TheMammoth_Slots","TheMammoth_Symbol","TheMammoth_Wheel"]);
window.__require=function e(t,n,o){function i(c,s){if(!n[c]){if(!t[c]){var r=c.split("/");if(r=r[r.length-1],!t[r]){var l="function"==typeof __require&&__require;if(!s&&l)return l(r,!0);if(a)return a(r,!0);throw new Error("Cannot find module '"+c+"'")}c=r}var d=n[c]={exports:{}};t[c][0].call(d.exports,function(e){return i(t[c][1][e]||e)},d,d.exports,e,t,n,o)}return n[c].exports}for(var a="function"==typeof __require&&__require,c=0;c<o.length;c++)i(o[c]);return i}({Odysseus_ButtonSafe:[function(e,t,n){"use strict";cc._RF.push(t,"82fd6D9NO9FUo1kxqzeoPBr","Odysseus_ButtonSafe"),cc.Class({extends:cc.Component,properties:{safeTime:{default:.5,tooltip:"\u6309\u94ae\u4fdd\u62a4\u65f6\u95f4\uff0c\u6307\u5b9a\u95f4\u9694\u5185\u53ea\u80fd\u70b9\u51fb\u4e00\u6b21."}},onLoad:function(){var e=this.getComponent(cc.Button);e&&(this.clickEvents=e.clickEvents,Global.btnClickEvent(this.node,function(e){e.interactable=!1,cc.vv.gameData.GetSlotsScript().scheduleOnce(function(){e.interactable=!0},this.safeTime)},this))}}),cc._RF.pop()},{}],Odysseus_Cfg:[function(e,t,n){"use strict";var o;function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}cc._RF.push(t,"37d1bhVoy9LEahsBSC9ExaW","Odysseus_Cfg");var a={symbol:(o={},i(o,1,{node:"s1",win_node:"w1",win_ani:{name:"animation2",zIndex:300}}),i(o,2,{node:"s2",win_node:"w2",trigger_ani:{name:"animation3",zIndex:300},stop_ani:{name:"animation2",zIndex:300}}),i(o,3,{node:"s3",win_node:"w3",stop_ani:{name:"animation1",zIndex:300},win_ani:{name:"animation1",zIndex:300},trigger_ani:{name:"animation3",zIndex:300}}),i(o,101,{node:"s101",win_node:"w101",win_ani:{name:"animation1",zIndex:300}}),i(o,4,{node:"s4",win_node:"w4",win_ani:{name:"animation1",zIndex:300},trigger_ani:{name:"animation3",zIndex:300},stop_ani:{name:"animation2",zIndex:300}}),i(o,5,{node:"s5",win_node:"w5",win_ani:{name:"animation",zIndex:300}}),i(o,6,{node:"s6",win_node:"w6",win_ani:{name:"animation",zIndex:300}}),i(o,7,{node:"s7",win_node:"w7",win_ani:{name:"animation",zIndex:300}}),i(o,8,{node:"s8",win_node:"w8",win_ani:{name:"animation",zIndex:300}}),i(o,9,{node:"s9",win_node:"w9",win_ani:{name:"animation",zIndex:300}}),i(o,10,{node:"s10",win_node:"w10",win_ani:{name:"animation",zIndex:300}}),o),scripts:{Top:"LMSlots_Top_Base",Bottom:"LMSlots_Bottom_Base",Slots:"Odysseus_Slots",Reels:"Odysseus_Reel",Symbols:"Odysseus_Symbol"},col:5,row:3,symbolPrefab:"LMSlots_Symbol",symbolSize:{width:128,height:130},helpItems:["games/Odysseus/prefab/LMSlots_Help_item1","games/Odysseus/prefab/LMSlots_Help_item2","games/Odysseus/prefab/LMSlots_Help_item3","games/Odysseus/prefab/LMSlots_Help_item4","games/Odysseus/prefab/LMSlots_Help_item5","games/Odysseus/prefab/LMSlots_Help_item6","games/Odysseus/prefab/LMSlots_Help_item7"],autoModelDelay:1,randomSymbols:[4,5,6,7,8,9,10],kuang:"kuang",speed:1600,reelStopInter:.3,auto_stop_time:1.2,bounce:!0,commEffect:{path:"games/Odysseus/",win1:["win1","win1end"],win2:["win2","win2end"]},normalBgm:"base_bgm",AddAntiTime:2.4,reelStateInfo:[{id:[2],mini:3,counts:[1,1,1,1,1],antiNode:"node_anti",path:"games/Odysseus/",reelStopSound:"reel_stop",symbolStopSound:"symbol_scatter",antSound:"reel_notify",antSpeed:2e3},{id:[3],mini:3,counts:[1,1,1,1,1],antiNode:"node_anti1",path:"games/Odysseus/",reelStopSound:"reel_stop",symbolStopSound:"symbol_bonus",antSound:"reel_notify2",antSpeed:2e3}]};t.exports=a,cc._RF.pop()},{}],Odysseus_GameData:[function(e,t,n){"use strict";cc._RF.push(t,"3f94etKBdZB2pChXuacU8Cf","Odysseus_GameData"),cc.Class({extends:e("LMSlots_GameData_Base"),properties:{_slotsNode:null,isBigStoreToFreeGame:!1,isSmallStoreToFreeGame:!1},SetPopNodeScript:function(e){this._popupScp=e},GetPopNodeScript:function(e){return this._popupScp},SetSlotsNode:function(e){this._slotsNode=e},GetSlotsNode:function(e){return this._slotsNode},SetWheelMarScript:function(e){this._wheelScp=e},GetWheelMarScript:function(){return this._wheelScp},SetPickGameScript:function(e){this._pickGameScp=e},GetPickGameScript:function(){return this._pickGameScp},SetJackpotUnlock:function(e){this.JackpotUnlock=e},GetJackpotUnlock:function(){return this.JackpotUnlock},GetOpenPickGameBet:function(){var e=this._deskInfo.needBet||1;return this._deskInfo.mults[e-1]},GetPickGameState:function(){return this.PickGameState},SetPickGameState:function(e){this.PickGameState=e},GetPickGameProgress:function(){return this.PickGameProgress},SetPickGameProgress:function(e){this.PickGameProgress=e},GetWheelItems:function(){return this.WheelItems},SetWheelItems:function(e){this.WheelItems=e},IdxToBet:function(e){return this._deskInfo.mults[e]},getBonusTrail:function(){return this._gameInfo?this._gameInfo.bonusTrail:this._deskInfo.bonusTrail}}),cc._RF.pop()},{LMSlots_GameData_Base:void 0}],Odysseus_Logic:[function(e,t,n){"use strict";cc._RF.push(t,"cfe7f2caOxAfL8bgp3hJA9P","Odysseus_Logic"),cc.Class({extends:e("LMSlots_Logic_Base"),properties:{},onLoad:function(){this._super();var e=cc.find("safe_node",this.node);cc.vv.gameData.getGameCfg();cc.vv.gameData.SetSlotsNode(cc.vv.gameData.GetSlotsScript().node);var t=cc.find("node_pop_ui",e).addComponent("Odysseus_Pop");t.Init(),cc.vv.gameData.SetPopNodeScript(t);var n=cc.find("slots/wheelNode",e),o=n.addComponent("Odysseus_Wheel_mar");o.Init(),cc.vv.gameData.SetWheelMarScript(o),n.active=!1;var i=cc.find("pickGameNode",e).addComponent("Odysseus_PickGame");i.Init(),cc.vv.gameData.SetPickGameScript(i)}}),cc._RF.pop()},{LMSlots_Logic_Base:void 0}],Odysseus_PickGame:[function(e,t,n){"use strict";function o(e,t,n,o,i,a,c){try{var s=e[a](c),r=s.value}catch(e){return void n(e)}s.done?t(r):Promise.resolve(r).then(o,i)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(i,a){var c=e.apply(t,n);function s(e){o(c,i,a,s,r,"next",e)}function r(e){o(c,i,a,s,r,"throw",e)}s(void 0)})}}function a(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=c(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i,a=!0,s=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==o.return||o.return()}finally{if(s)throw i}}}}function c(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}cc._RF.push(t,"fa6e8fEO0ZGW4uShhBvM/SW","Odysseus_PickGame");var r=e("./Odysseus_Tools");cc.Class({extends:cc.Component,properties:{_wheelNode:cc.Node,_pickGameNode:cc.Node,_bagPanel:cc.Node,_pickBonus:null,_wheelItems:[],_pickItems:[],_pickState:0,_pickIndex:0,isOpen:!1,curItemCnt:0},onEnable:function(){cc.vv.NetManager.registerMsg(MsgId.SLOT_SUBGAME_DATA,this.onRecvMsgSubAction,this)},onDisable:function(){cc.vv.NetManager.unregisterMsg(MsgId.SLOT_SUBGAME_DATA,this.onRecvMsgSubAction,!1,this)},Init:function(){this._wheelItems=[];var e=cc.find("wheelGame/wheelNode",this.node);this._wheelNode=e;var t=cc.find("pickGame",this.node);this._pickGameNode=t,this._bagPanel=cc.find("panel",this._pickGameNode),cc.find("pickGame/downNode",this.node).zIndex=99,this._boosterWin=cc.find("Canvas/safe_node/pick_win"),this._boosterWin.children.forEach(function(e){e.active=!1});for(var n=cc.find("yeNode",e),o=1;o<=10;o++){var i=void 0;(i=1==o||6==o?cc.instantiate(cc.find("node1",n)):cc.instantiate(cc.find("node2",n))).active=!0,i.parent=n,i.angle=36*-(o-1),this._wheelItems.push(i)}var a=cc.find("handNode",e);Global.btnClickEvent(a,function(){this.clickHandNode()},this);cc.find("pickGame/spine_collect",this.node);var c=cc.find("pickGame/spine_collect/btn",this.node);Global.btnClickEvent(c,function(){this.clickCollectBtn()},this)},clickHandNode:function(){var e=cc.find("wheelGame/wheelNode/handNode",this.node);e.stopAllActions(),Global.SlotsSoundMgr.playEffect("pickwheel_spin");var t={c:MsgId.SLOT_SUBGAME_DATA};t.gameid=cc.vv.gameData.getGameId(),t.data={},t.data.rtype=1,cc.vv.NetManager.send(t,!0),e.active=!1},clickCollectBtn:function(){var e=this,t=cc.find("pickGame/spine_collect",this.node);cc.find("pickGame/spine_collect/btn",this.node).stopAllActions(),Global.SlotsSoundMgr.playEffect("btn_click"),r.nodeAni(t,3,function(){cc.vv.gameData.GetSlotsScript().ExitPickGame(e._pickBonus)})},updateWheelItems:function(){for(var e=this._pickBonus.wheelItems,t=0;t<e.length;t++){var n=e[t];cc.find("lab",this._wheelItems[t]).getComponent(cc.Label).string=n.cnt}},openPickGameNode:function(e){if(this.node.active=!0,this._pickBonus=e,cc.find("bg0",this.node).active=!1,cc.find("bg1",this.node).active=!1,cc.find("bg2",this.node).active=!1,cc.find("bg"+e.level,this.node).active=!0,this._pickGameNode.active=!1,cc.find("wheelGame",this.node).active=!1,0===e.state){this.updateWheelItems(),this._wheelNode.angle=0,cc.find("wheelGame",this.node).active=!0,cc.find("wheelGame",this.node).x=0,cc.find("handNode",this._wheelNode).active=!0;var t=this;cc.vv.gameData.checkAutoPlay(cc.find("handNode",this._wheelNode),function(){t.clickHandNode()}),Global.SlotsSoundMgr.stopBgm(),Global.SlotsSoundMgr.playBgm("pick_wheel_bgm")}else this._pickGameNode.active=!0,this.startPick(),Global.SlotsSoundMgr.stopBgm(),e.level>1?Global.SlotsSoundMgr.playBgm("pick2_bgm"):Global.SlotsSoundMgr.playBgm("pick_bgm")},onRecvMsgSubAction:function(e){if(200===e.code){var t=e.data;if(t.errMsg)return;1===t.rtype&&(this._pickBonus=t.pickBonus,this.startMove(t.resultId))}},startMove:function(e){var t=this,n=cc.find("wheelGame",this.node),o=36*(e-1)-1440,i=cc.find("zhuanpan2",t._wheelItems[e-1]);Global.SlotsSoundMgr.playEffect("pickwheel_roll"),cc.tween(this._wheelNode).to(9.5,{angle:o},{easing:"quadInOut"}).call(function(){i&&(i.active=!0,i.getComponent(sp.Skeleton).setAnimation(0,"animation2",!0)),Global.SlotsSoundMgr.playEffect("pickwheel_collect")}).delay(2).call(function(){cc.tween(n).to(2,{x:800}).start()}).delay(3).call(function(){i.active=!1,t.startPick()}).start()},startPick:function(){this._pickGameNode.active=!0,this._pickIndex=this._pickBonus.step?this._pickBonus.step:0,cc.find("pickGame/downNode",this.node).active=!0;var e=cc.find("downNode/lab1",this._pickGameNode),t=cc.find("downNode/lab2",this._pickGameNode);e.getComponent(cc.Label).string=this._pickIndex,t.getComponent(cc.Label).string=this._pickBonus.restCnt,this._pickState=1,this._pickItems=[],this.curItemCnt=0,this.schedule(this.pickGameCallback,1)},exitPick:function(){this._pickState=0,this._pickIndex=0,this.isOpen=!1,this.unschedule(this.pickGameCallback);var e,t=a(this._pickItems);try{for(t.s();!(e=t.n()).done;){e.value.removeFromParent()}}catch(e){t.e(e)}finally{t.f()}cc.find("pickGame/downNode",this.node).active=!1;var n,o=0,i=a(this._pickBonus.items);try{for(i.s();!(n=i.n()).done;){var c=n.value;if(c.coin)o+=c.coin;else{var s,r=a(c.booster);try{for(r.s();!(s=r.n()).done;){o+=s.value.coin*(c.mult||1)}}catch(e){r.e(e)}finally{r.f()}}}}catch(e){i.e(e)}finally{i.f()}Global.SlotsSoundMgr.stopBgm(),2==this._pickBonus.level?Global.SlotsSoundMgr.playEffect("mega_dialog_collect_show"):3==this._pickBonus.level?Global.SlotsSoundMgr.playEffect("super_dialog_collect_show"):Global.SlotsSoundMgr.playEffect("pick_dialog_collect_show");var l=["2","3","1"],d=cc.find("pickGame/spine_collect",this.node),u=d.getComponent(sp.Skeleton);cc.find("lab",d).getComponent(cc.Label).string=Global.FormatNumToComma(o),d.active=!0,u.setAnimation(0,"animation"+l[this._pickBonus.level]+"_1",!1),u.addAnimation(0,"animation"+l[this._pickBonus.level]+"_2",!0);var m=cc.find("pickGame/spine_collect/btn",this.node);cc.vv.gameData.checkAutoPlay(m,this.clickCollectBtn.bind(this))},pickGameCallback:function(){var e=this;return i(regeneratorRuntime.mark(function t(){var n,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e._pickItems.length>10)){t.next=2;break}return t.abrupt("return");case 2:n=regeneratorRuntime.mark(function t(n){var o,i,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.curItemCnt+=1,o=void 0,o=0===e._pickBonus.level?cc.find("pickGame/bagNode1",e.node):cc.find("pickGame/bagNode2",e.node),(i=cc.instantiate(o)).parent=e._bagPanel,i.y=e._bagPanel.height/2+i.height,t.t0=e._pickItems.length%3,t.next=0===t.t0?9:1===t.t0?11:2===t.t0?13:15;break;case 9:return i.x=100*Math.random()-300,t.abrupt("break",16);case 11:return i.x=100*Math.random()-50,t.abrupt("break",16);case 13:return i.x=300-100*Math.random(),t.abrupt("break",16);case 15:return t.abrupt("break",16);case 16:return i.isOpen=!1,i.active=!0,Global.btnClickEvent(i,function(){this.bagNodeClickFunc(i)},e),e._pickItems.push(i),cc.vv.gameData.isNeedAutoPlay()&&e.curItemCnt>6&&(e.curItemCnt=0,(a=e._pickItems[Global.random(0,e._pickItems.length-1)]).emit("click",a)),t.next=23,cc.vv.gameData.awaitTime(Math.random());case 23:case"end":return t.stop()}},t)}),o=0;case 4:if(!(o<Math.round(3*Math.random()))){t.next=9;break}return t.delegateYield(n(o),"t0",6);case 6:o++,t.next=4;break;case 9:case"end":return t.stop()}},t)}))()},openCoinBag:function(e,t){var n=e.getChildByName("lab");n.active=!0,n.getComponent(cc.Label).string=Global.formatNumShort(t);var o=cc.vv.gameData.GetTotalBet();n.getComponent(cc.Label).font=t>2*o?cc.vv.gameData.GetFontByName("theme234_pick1"):cc.vv.gameData.GetFontByName("theme234_pick3")},bagNodeClickFunc:function(e,t){var n=this;return i(regeneratorRuntime.mark(function o(){var i,a,c,s,r,l,d,u,m,f,p;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(cc.log("this.isOpen:",n.isOpen),!(n.isOpen||n._pickIndex>=n._pickBonus.restCnt)){o.next=3;break}return o.abrupt("return");case 3:return n.curItemCnt=0,i=n,a=cc.vv.gameData,Global.SlotsSoundMgr.playEffect("pick_open"),cc.vv.gameData.GetSlotsNode(),c=t||n._pickBonus.items[n._pickIndex],e.isOpen=!0,e.zIndex=20,n.isOpen=!0,n._pickIndex++,cc.find("pickGame/downNode/lab1",n.node).getComponent(cc.Label).string=n._pickIndex,(s={c:MsgId.SLOT_SUBGAME_DATA}).gameid=cc.vv.gameData.getGameId(),s.data={},s.data.rtype=4,s.data.step=n._pickIndex,cc.vv.NetManager.send(s,!0),n._pickIndex==n._pickBonus.restCnt&&((r={c:MsgId.SLOT_SUBGAME_DATA}).gameid=cc.vv.gameData.getGameId(),r.data={},r.data.rtype=2,cc.vv.NetManager.send(r,!0)),l=e.getChildByName("spine").getComponent(sp.Skeleton),e.getChildByName("lab"),d=e.getChildByName("qe_dz01"),u=d.getChildByName("qe_bx01"),d.active=!1,u.active=!1,m=a.GetTotalBet(),l.setAnimation(0,"animation2",!1),o.next=32,cc.vv.gameData.awaitTime(.3);case 32:if(!c.coin){o.next=42;break}Global.SlotsSoundMgr.playEffect("coin_rollpick"),n.openCoinBag(e,c.coin),f=c.coin,p=a.GetBottomScript().getCurrentWin(),a.AddCoin(f),a.GetBottomScript().ShowWin(f+p,3,p,null,.3),a.GetTopScript().ShowCoin(),o.next=44;break;case 42:if(!c.booster){o.next=44;break}return o.delegateYield(regeneratorRuntime.mark(function t(){var o,s,r,l,f,p,h,v,_,g;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(Global.SlotsSoundMgr.playEffect("pick_boost"),d.active=!0,d.getComponent(sp.Skeleton).setAnimation(0,"animation1",!1),d.getComponent(sp.Skeleton).addAnimation(0,"animation2",!1),!c.mult){t.next=10;break}return t.next=7,cc.vv.gameData.awaitTime(.5);case 7:u.active=!0,o=[2,3,5,8,10].indexOf(c.mult)+1,u.getComponent(sp.Skeleton).setAnimation(0,"animation".concat(o),!1);case 10:return t.next=12,cc.vv.gameData.awaitTime(1.5);case 12:s=n._boosterWin.getChildByName("lbl"),r=n._boosterWin.getChildByName("pick_zaq01"),l=n._boosterWin.getChildByName("shouji_1"),n._boosterWin.active=!0,f=0,p=function(t){var o=n._pickItems[Global.random(0,n._pickItems.length-1)];if(o==e||!o.active||o.y>n._bagPanel.height/2||o.y<-n._bagPanel.height/2)return h=t-=1,"continue";n._pickState=0;var a=cc.instantiate(l);cc.tween(o).call(function(){a.active=!0,a.parent=n._boosterWin,a.position=n._boosterWin.convertToNodeSpaceAR(e.convertToWorldSpaceAR(cc.v2(0,0))),a.getComponent(cc.ParticleSystem).resetSystem(),cc.tween(a).to(.5,{position:n._boosterWin.convertToNodeSpaceAR(o.convertToWorldSpaceAR(cc.v2(0,0)))}).start()}).delay(.5).call(function(){a.active=!1,n.openCoinBag(o,c.booster[t].coin)}).delay(2+.5*t).call(function(){var e=o.getChildByName("lab"),a=cc.instantiate(e);a.parent=n._boosterWin,a.position=n._boosterWin.convertToNodeSpaceAR(e.convertToWorldSpaceAR(cc.v2(0,0))),cc.tween(a).to(.5,{position:cc.v2(0,0)}).call(function(){s.active=!0,f+=c.booster[t].coin,s.getComponent(cc.Label).string=Global.formatNumShort(f),c.booster[t].coin>2*m?s.getComponent(cc.Label).font=cc.vv.gameData.GetFontByName("theme234_pick1"):s.getComponent(cc.Label).font=cc.vv.gameData.GetFontByName("theme234_pick3"),r.active=!0,r.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),a.destroy()}).start(),o.active=!1,i.initBagNode(o)}).start(),h=t},h=0;case 19:if(!(h<c.booster.length)){t.next=26;break}if("continue"!==p(h)){t.next=23;break}return t.abrupt("continue",23);case 23:h++,t.next=19;break;case 26:return t.next=28,cc.vv.gameData.awaitTime(3+.5*c.booster.length);case 28:if(!c.mult){t.next=35;break}return v=[2,3,5,8,10].indexOf(c.mult)+1,u.getComponent(sp.Skeleton).setAnimation(0,"animation1".concat(v,"_1"),!1),cc.tween(u).to(.5,{position:u.convertToNodeSpaceAR(n._boosterWin.convertToWorldSpaceAR(cc.v2(0,0)))}).start(),t.next=34,cc.vv.gameData.awaitTime(.5);case 34:s.getComponent(cc.Label).string=Global.formatNumShort(f*c.mult);case 35:return _=cc.vv.gameData.GetBottomScript().getWinLabelNor(),cc.tween(n._boosterWin).to(.5,{position:n._boosterWin.convertToNodeSpaceAR(_.convertToWorldSpaceAR(cc.v2(0,0)))}).call(function(){n._boosterWin.active=!1,n._boosterWin.children.forEach(function(e){e.active=!1,n._boosterWin.position=cc.v2(0,0)})}).start(),t.next=39,cc.vv.gameData.awaitTime(.5);case 39:g=a.GetBottomScript().getCurrentWin(),a.AddCoin(f*(c.mult||1)),a.GetBottomScript().ShowWin(f*(c.mult||1)+g,3,g,null,.3),a.GetTopScript().ShowCoin(),n._pickState=1;case 44:case"end":return t.stop()}},t)})(),"t0",44);case 44:return o.next=46,cc.vv.gameData.awaitTime(.5);case 46:i.isOpen=!1,e.active=!1,i.initBagNode(e),n._pickIndex===n._pickBonus.restCnt&&n.exitPick();case 50:case"end":return o.stop()}},o)}))()},initBagNode:function(e){var t=e.getChildByName("spine").getComponent(sp.Skeleton),n=e.getChildByName("lab"),o=e.getChildByName("qe_dz01"),i=o.getChildByName("qe_bx01");n.active=!1,o.active=!1,i.active=!1,t.setAnimation(0,"animation1",!0),e.y=this._bagPanel.height/2+e.height,e.isOpen=!1,e.active=!0,e.zIndex=3},update:function(e){if(1==this._pickState){var t,n=a(this._pickItems);try{for(n.s();!(t=n.n()).done;){var o=t.value;if(!o.isOpen&&(o.y-=200*e,o.y<-(this._bagPanel.height+o.height)/2&&(o.y=(this._bagPanel.height+o.height)/2,this.curItemCnt+=1,cc.vv.gameData.isNeedAutoPlay()&&this.curItemCnt>6))){this.curItemCnt=0;var i=this._pickItems[Global.random(0,this._pickItems.length-1)];i.emit("click",i)}}}catch(e){n.e(e)}finally{n.f()}}}}),cc._RF.pop()},{"./Odysseus_Tools":"Odysseus_Tools"}],Odysseus_Pop:[function(e,t,n){"use strict";function o(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=i(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a,c=!0,s=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==o.return||o.return()}finally{if(s)throw a}}}}function i(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}cc._RF.push(t,"054c3UbzaNIH6UtrtaDbOoG","Odysseus_Pop");var c=e("./Odysseus_Tools");cc.Class({extends:cc.Component,properties:{},Init:function(){},onEnable:function(){cc.vv.NetManager.registerMsg(MsgId.SLOT_SUBGAME_DATA,this.onRcvSubGameAction,this)},onDisable:function(){cc.vv.NetManager.unregisterMsg(MsgId.SLOT_SUBGAME_DATA,this.onRcvSubGameAction,!1,this)},onRcvSubGameAction:function(e){if(200==e.code)e.data},updateUi:function(){var e,t=o(this.node.children);try{for(t.s();!(e=t.n()).done;){var n=e.value;"pop_bg"!=n.name&&(n.active=!1)}}catch(e){t.e(e)}finally{t.f()}},openJpNode:function(e,t,n){this.updateUi(),this._jpSuccessFunc=n,this.node.active=!0;var o=cc.find("rapid",this.node);o.active=!0,o.getComponent(sp.Skeleton).setAnimation(0,"animation1_1",!1),o.getComponent(sp.Skeleton).addAnimation(0,"animation1_2",!0),cc.tween(this.node).delay(.5).call(function(){cc.find("lab1",o).active=!0,cc.find("lab2",o).active=!0,cc.find("btn",o).active=!0}).start(),cc.find("lab1",o).getComponent(cc.Label).string=Global.FormatNumToComma(e),cc.find("lab2",o).getComponent(cc.Label).string=t;var i=this,a=function(){cc.find("rapid/btn",i.node).stopAllActions();var e=cc.find("rapid",i.node);e.getComponent(sp.Skeleton).setAnimation(0,"animation1_3",!1),cc.tween(i.node).delay(.5).call(function(){cc.find("lab1",e).active=!1,cc.find("lab2",e).active=!1,cc.find("btn",e).active=!1}).start(),e.getComponent(sp.Skeleton).setCompleteListener(function(e){"animation1_3"===(e.animation?e.animation.name:"")&&(i.node.active=!1,i._jpSuccessFunc())})},c=cc.find("rapid/btn",this.node);cc.vv.gameData.checkAutoPlay(c,a),c.off("click"),c.on("click",function(){c.stopAllActions(),a()})},openBoost:function(){var e=this;this.updateUi(),this.node.active=!0;var t=cc.find("boost",this.node);t.active=!0,t.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),t.getComponent(sp.Skeleton).setCompleteListener(function(){t.active=!1,e.node.active=!1})},openWheelCollectNode:function(e){Global.SlotsSoundMgr.stopBgm(),this.updateUi(),Global.SlotsSoundMgr.playEffect("bonus_dialog_collect_show"),this.node.active=!0;var t=cc.find("wheelCollectNode",this.node);t.active=!0,t.getComponent(sp.Skeleton).setAnimation(0,"animation1",!1),t.getComponent(sp.Skeleton).addAnimation(0,"animation2",!0),cc.tween(this.node).delay(.5).call(function(){cc.find("lab1",t).active=!0,cc.find("btn",t).active=!0}).start(),cc.find("lab1",t).getComponent(cc.Label).string=Global.FormatNumToComma(e);var n=this,o=function(){var e=cc.find("wheelCollectNode",n.node);e.getComponent(sp.Skeleton).setAnimation(0,"animation1",!1),cc.tween(n.node).delay(.5).call(function(){cc.find("lab1",e).active=!1,cc.find("btn",e).active=!1}).start(),c.nodeAni(e,3,function(){n.node.active=!1,cc.vv.gameData.GetSlotsScript().ExitWheelGame()})},i=cc.find("wheelCollectNode/btn",this.node);cc.vv.gameData.checkAutoPlay(i,o),i.off("click"),i.on("click",function(){i.stopAllActions(),o()})},openWheelJpNode:function(e,t){cc.vv.gameData;this.updateUi(),this.node.active=!0;var n=["1","2","1","2","1"],o=cc.find("wheelJpNode",this.node);cc.find("jpNode3",o).active=!1,cc.find("jpNode2",o).active=!1,cc.find("jpNode1",o).active=!1;var i=cc.find(["jpNode1","jpNode1","jpNode2","jpNode2","jpNode3"][e-1],o);switch(i.active=!0,o.active=!0,console.log("---1openWheelJpNode",e,t,i),e){case 1:Global.SlotsSoundMgr.playEffect("mini_jackpot");break;case 2:Global.SlotsSoundMgr.playEffect("minor_jackpot");break;case 3:Global.SlotsSoundMgr.playEffect("major_jackpot");break;case 4:Global.SlotsSoundMgr.playEffect("mega_jackpot");break;case 5:Global.SlotsSoundMgr.playEffect("grand_jackpot")}i.getComponent(sp.Skeleton).setAnimation(0,"animation"+n[e-1]+"_1",!1),i.getComponent(sp.Skeleton).addAnimation(0,"animation"+n[e-1]+"_2",!0),cc.tween(this.node).delay(.5).call(function(){cc.find("lab1",o).active=!0,cc.find("btn",o).active=!0}).start(),cc.find("lab1",o).getComponent(cc.Label).string=Global.FormatNumToComma(t);var a=this,s=function(){Global.SlotsSoundMgr.playEffect("popup_out");var e=cc.find("wheelJpNode",a.node);cc.tween(a.node).delay(.5).call(function(){cc.find("lab1",e).active=!1,cc.find("btn",e).active=!1}).start(),c.nodeAni(e,3,function(){a.node.active=!1})},r=cc.find("wheelJpNode/btn",this.node);cc.vv.gameData.checkAutoPlay(r,s),r.off("click"),r.on("click",function(){r.stopAllActions(),s()})},openNormalNode:function(e){this.updateUi(),this.node.active=!0;var t=cc.find("normalCollectNode",this.node);t.active=!0,t.getComponent(sp.Skeleton).setAnimation(0,"animation2_1",!1),t.getComponent(sp.Skeleton).addAnimation(0,"animation2_2",!0),cc.tween(this.node).delay(.5).call(function(){cc.find("lab1",t).active=!0,cc.find("btn",t).active=!0}).start(),cc.find("lab1",t).getComponent(cc.Label).string=Global.FormatNumToComma(e);var n=this,o=function(){Global.SlotsSoundMgr.playEffect("popup_out");var e=cc.find("normalCollectNode",n.node);cc.tween(n.node).delay(.5).call(function(){cc.find("lab1",e).active=!1,cc.find("btn",e).active=!1}).start(),c.nodeAni(e,3,function(){n.node.active=!1})},i=cc.find("normalCollectNode/btn",this.node);cc.vv.gameData.checkAutoPlay(i,o),i.off("click"),i.on("click",function(){i.stopAllActions(),o()})},awaitTime:function(e){var t=this;return new Promise(function(n,o){t.scheduleOnce(function(){n()},e)})}}),cc._RF.pop()},{"./Odysseus_Tools":"Odysseus_Tools"}],Odysseus_PrizePool:[function(e,t,n){"use strict";cc._RF.push(t,"b917cFT2ZBDEIsijLW+8zYE","Odysseus_PrizePool"),cc.Class({extends:e("LMSlots_PrizePool_Base"),properties:{},ShowNodeLockByNode:function(e,t,n,o,i){console.log("---ShowNodeLockByNode",e,t,n,o,i);var a,c=e.parent;t?(Global.SlotsSoundMgr.playEffect("jp_lock"),cc.find("lock",c).active=!0,cc.find("lock",c).getComponent(sp.Skeleton).setAnimation(0,"animation"+(5-o),!1),a=function(){cc.find("bg",c).active=!1,cc.find("bgDi",c).active=!0,cc.find("num",c).active=!1,cc.find("numDi",c).active=!0,cc.find("num1",c)&&(cc.find("num1",c).active=!1,cc.find("num1Di",c).active=!0,cc.find("zi1",c).active=!1,cc.find("zi1Di",c).active=!0),cc.find("zi",c).active=!1,cc.find("ziDi",c).active=!0,cc.find("prizePool/lbl_num",c).getComponent(cc.Label).font=cc.vv.gameData.GetFontByName("theme234_jp2")}):(Global.SlotsSoundMgr.playEffect("jp_unlock"),cc.find("unlock",c).active=!0,cc.find("unlock",c).getComponent(sp.Skeleton).setAnimation(0,"animation"+(5-o),!1),a=function(){cc.find("bg",c).active=!0,cc.find("bgDi",c).active=!1,cc.find("num",c).active=!0,cc.find("numDi",c).active=!1,cc.find("num1",c)&&(cc.find("num1",c).active=!0,cc.find("num1Di",c).active=!1,cc.find("zi1",c).active=!0,cc.find("zi1Di",c).active=!1),cc.find("zi",c).active=!0,cc.find("ziDi",c).active=!1},cc.find("prizePool/lbl_num",c).getComponent(cc.Label).font=cc.vv.gameData.GetFontByName("theme234_jp")),cc.tween(c).delay(.2).call(a).start()}}),cc._RF.pop()},{LMSlots_PrizePool_Base:void 0}],Odysseus_Reel:[function(e,t,n){"use strict";cc._RF.push(t,"f7be8G50tNH4aMZpuk40AeK","Odysseus_Reel"),cc.Class({extends:e("LMSlots_Reel_Base"),properties:{},playReelStop:function(){this._super()},OnReelHeigtChange:function(e){this._super(e)},StartRecycleSymbol:function(e){var t=cc.vv.gameData.getGameCfg(),n=t.row+1;if(this._symbols.length>n){var o=-(this._symbols.length-(t.row+1));this.AddCount(o,e)}},setBeiShu:function(e){for(var t=0;t<this._symbols.length;t++){this._symbols[t].setBeiShu(e)}}}),cc._RF.pop()},{LMSlots_Reel_Base:void 0}],Odysseus_Slots:[function(e,t,n){"use strict";function o(e,t,n,o,i,a,c){try{var s=e[a](c),r=s.value}catch(e){return void n(e)}s.done?t(r):Promise.resolve(r).then(o,i)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(i,a){var c=e.apply(t,n);function s(e){o(c,i,a,s,r,"next",e)}function r(e){o(c,i,a,s,r,"throw",e)}s(void 0)})}}function a(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=c(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i,a=!0,s=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==o.return||o.return()}finally{if(s)throw i}}}}function c(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}cc._RF.push(t,"b862fIKGsBL6YmOc6CYcmp3","Odysseus_Slots");e("./Odysseus_Tools");cc.Class({extends:e("LMSlots_Slots_Base"),properties:{},onLoad:function(){var e=this;this._super(),Global.registerEvent(cc.vv.gameData._EventId.SLOT_TOTALBET_UPDATED,this.onEventTotalbetUpdated,this);var t=cc.find("reels_frame/frameUp/unLockNode",this.node);Global.btnClickEvent(t,function(){e.onBtnCollect()},this)},onEnable:function(){},StartMove:function(){this._super(),Global.SlotsSoundMgr.playNormalBgm()},onMsgSpine:function(e){this._gameInfo=e;var t=e.resultCards;this.SetSlotsResult(t),this.SetReelStateInfo(t);var n=e.multIdxs,o=e.jackpotInfo;e.pickBonus;o&&(Global.SlotsSoundMgr.playEffect("notify"),cc.find("reels_frame/qipanjili",this.node).active=!0,cc.find("reels_frame/qipanjili",this.node).getComponent(sp.Skeleton).setAnimation(0,"animation",!0));for(var i=0;i<this._reels.length;i++)this._reels[i].setBeiShu();if(n){var c,s=a(n);try{for(s.s();!(c=s.n()).done;){var r=c.value;this.GetSymbolByIdx(r.idx).setBeiShu(r.mult)}}catch(e){s.e(e)}finally{s.f()}}},OnSpinEnd:function(){this.onSpinEndAction()},onSpinEndAction:function(){var e=this;return i(regeneratorRuntime.mark(function t(){var n,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(cc.find("reels_frame/qipanjili",e.node).active=!1,cc.find("reels_frame/heidi",e.node).active=!1,e.ShowWinTrace(),n=cc.vv.gameData.GetGameWin(),o=n,cc.vv.gameData.GetTotalFree()>0&&cc.vv.gameData.GetTotalFree()!=cc.vv.gameData.GetFreeTime()&&(o=cc.vv.gameData.GetGameTotalFreeWin()),!e._gameInfo.jackpotInfo){t.next=11;break}return e.playJpAni(!0),Global.SlotsSoundMgr.playEffect("rapid_dialog_collect_show1"),t.next=11,new Promise(function(t,n){e.CheckJackpotInfo(t)});case 11:return t.next=13,new Promise(function(t,i){e.ShowBottomWin(n,o,!0,function(){t()})});case 13:if(!e._gameInfo.pickBonus){t.next=18;break}return t.next=16,e.CheckPickBonus(e._gameInfo.pickBonus,e._gameInfo.bonusTrail);case 16:t.next=24;break;case 18:if(!e._gameInfo.wheelGame){t.next=23;break}return t.next=21,e.CheckWheelGame(e._gameInfo.wheelGame);case 21:t.next=24;break;case 23:e.CanDoNextRound();case 24:case"end":return t.stop()}},t)}))()},CheckJackpotInfo:function(e){var t=this;return i(regeneratorRuntime.mark(function n(){var o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o=cc.vv.gameData,Global.SlotsSoundMgr.playEffect("symbol_bonus"),n.next=4,t.awaitTime(4);case 4:Global.SlotsSoundMgr.playEffect("bell"),o.GetPopNodeScript().openJpNode(t._gameInfo.jackpotInfo.winCoin,t._gameInfo.jackpotInfo.idxs.length,e);case 6:case"end":return n.stop()}},n)}))()},CheckPickBonus:function(e,t){var n=arguments,o=this;return i(regeneratorRuntime.mark(function i(){var a,c,s,r,l,d,u;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(a=n.length>2&&void 0!==n[2]&&n[2],o.stopAllSymbolAni(),Global.SlotsSoundMgr.playEffect("bell"),t&&o.SetPickGameProgress(t.count,!0),a){i.next=9;break}return o.playPickAni(!0),i.next=8,o.awaitTime(3);case 8:o.stopAllSymbolAni();case 9:Global.SlotsSoundMgr.stopBgm(),i.t0=e.level,i.next=1===i.t0?13:2===i.t0?15:3===i.t0?17:19;break;case 13:return Global.SlotsSoundMgr.playEffect("pick_dialog_start_show"),i.abrupt("break",20);case 15:return Global.SlotsSoundMgr.playEffect("mega_dialog_start_show"),i.abrupt("break",20);case 17:return Global.SlotsSoundMgr.playEffect("super_dialog_start_show"),i.abrupt("break",20);case 19:return i.abrupt("break",20);case 20:return c=cc.find("reels_frame/heidi",o.node),s=cc.find("reels_frame/pick_cf",o.node),r=cc.find("reels_frame/mega_cf",o.node),l=cc.find("reels_frame/super_cf",o.node),(d=[s,r,l])[e.level].active=!0,c.active=!0,d[e.level].getComponent(sp.Skeleton).setAnimation(0,"animation1",!1),d[e.level].getComponent(sp.Skeleton).addAnimation(0,"animation2",!1),d[e.level].getComponent(sp.Skeleton).addAnimation(0,"animation3",!0),i.next=32,o.awaitTime(3);case 32:return d[e.level].active=!1,c.active=!1,0===e.level?(Global.SlotsSoundMgr.playEffect("transition_bonus"),u=cc.find("Canvas/safe_node/qieping1")):(Global.SlotsSoundMgr.playEffect("transition_super"),u=cc.find("Canvas/safe_node/qieping2")),u.active=!0,u.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),u.getComponent(sp.Skeleton).setCompleteListener(function(){u.active=!1}),i.next=40,o.awaitTime(1.2);case 40:cc.vv.gameData.GetPickGameScript().openPickGameNode(e);case 41:case"end":return i.stop()}},i)}))()},ExitPickGame:function(e){var t=this;return i(regeneratorRuntime.mark(function n(){var o,i,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return 0===e.level?(Global.SlotsSoundMgr.playEffect("transition_bonus"),o=cc.find("Canvas/safe_node/qieping1")):(Global.SlotsSoundMgr.playEffect("transition_super"),o=cc.find("Canvas/safe_node/qieping2")),o.active=!0,o.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),n.next=5,t.awaitTime(1.2);case 5:return cc.find("Canvas/safe_node/pickGameNode").active=!1,(i=cc.vv.gameData.getBonusTrail()).count==i.totalCount&&t.SetPickGameProgress(0),n.next=10,t.awaitTime(1);case 10:return o.active=!1,a=cc.vv.gameData.GetBottomScript().getCurrentWin(),n.next=14,cc.vv.gameData.GetSlotsScript().ShowBottomWin(a,a,!1,null,1);case 14:t.CanDoNextRound(),Global.SlotsSoundMgr.stopBgm(),Global.SlotsSoundMgr.playNormalBgm();case 17:case"end":return n.stop()}},n)}))()},CheckWheelGame:function(e){var t=this;return i(regeneratorRuntime.mark(function n(){var o,i,a,c,s,r,l,d,u;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o=cc.vv.gameData,t.stopAllSymbolAni(),t.playWheelAni(!0),Global.SlotsSoundMgr.playEffect("symbol_bonus"),n.next=6,t.awaitTime(1);case 6:return Global.SlotsSoundMgr.playEffect("bell"),n.next=9,t.awaitTime(1.5);case 9:return t.playWheelAni(!1),Global.SlotsSoundMgr.stopBgm(),Global.SlotsSoundMgr.playEffect("bonus_dialog_start_show"),i=cc.find("reels_frame/bonus_cf",t.node),a=cc.find("reels_frame/heidi",t.node),i.active=!0,i.getComponent(sp.Skeleton).setAnimation(0,"animation1",!1),i.getComponent(sp.Skeleton).addAnimation(0,"animation2",!0),a.active=!0,n.next=20,t.awaitTime(3);case 20:return i.getComponent(sp.Skeleton).addAnimation(0,"animation3",!1),n.next=23,t.awaitTime(1);case 23:return i.active=!1,a.active=!1,Global.SlotsSoundMgr.stopBgm(),Global.SlotsSoundMgr.playBgm("bonus_bgm"),c=cc.find("reels_bg",t.node),s=cc.find("reels",t.node),r=cc.find("reels_frame",t.node),l=cc.find("top_ani",t.node),c.runAction(cc.moveTo(.8,cc.v2(0,-1050))),s.runAction(cc.moveTo(.8,cc.v2(0,-1050))),r.runAction(cc.moveTo(.8,cc.v2(0,-1050))),l.runAction(cc.moveTo(.8,cc.v2(0,-1050))),e.winCoin>0&&(d=e.winCoin,u=o.GetBottomScript().getCurrentWin(),o.AddCoin(d),o.GetBottomScript().ShowWin(d+u,3,u,null,.3),o.GetTopScript().ShowCoin()),n.next=38,t.awaitTime(.3);case 38:return cc.find("Canvas/safe_node/role").getComponent(sp.Skeleton).setAnimation(0,"skill",!1),n.next=42,t.awaitTime(.7);case 42:cc.find("wheelNode",t.node).active=!0,cc.find("LMSlots_Panel_Click",t.node).active=!1,cc.vv.gameData.GetWheelMarScript().openWheelGame(!0,e),cc.vv.gameData.showOtherSysNode(!1);case 46:case"end":return n.stop()}},n)}))()},ExitWheelGame:function(){var e=this;return i(regeneratorRuntime.mark(function t(){var n,o,i,a,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=cc.find("reels_bg",e.node),o=cc.find("reels",e.node),i=cc.find("reels_frame",e.node),a=cc.find("top_ani",e.node),n.runAction(cc.moveTo(.8,cc.v2(0,-482))),o.runAction(cc.moveTo(.8,cc.v2(0,-482))),i.runAction(cc.moveTo(.8,cc.v2(0,-482))),a.runAction(cc.moveTo(.8,cc.v2(0,-677))),cc.vv.gameData.GetWheelMarScript().openWheelGame(!1),cc.vv.gameData.showOtherSysNode(!0),t.next=12,e.awaitTime(.8);case 12:return e.playWheelAni(!0),cc.find("wheelNode",e.node).active=!1,cc.find("role",e.node.parent).active=!0,cc.find("role",e.node.parent).getComponent(sp.Skeleton).setAnimation(0,"idle",!0),cc.find("LMSlots_Panel_Click",e.node).active=!0,t.next=19,e.awaitTime(1);case 19:return c=cc.vv.gameData.GetBottomScript().getCurrentWin(),t.next=22,cc.vv.gameData.GetSlotsScript().ShowBottomWin(c,c,!1,null,1);case 22:e.CanDoNextRound(),Global.SlotsSoundMgr.stopBgm(),Global.SlotsSoundMgr.playNormalBgm();case 25:case"end":return t.stop()}},t)}))()},ReconnectShow:function(){var e=this;return i(regeneratorRuntime.mark(function t(){var n,o,i,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=cc.vv.gameData,o=n._deskInfo,e._bottomScript.ShowBtnsByState("moveing_1"),console.log("---1IsPrizePoolLock",n.IsPrizePoolLock(0)),console.log("---1IsPrizePoolLock",n.IsPrizePoolLock(1)),console.log("---1IsPrizePoolLock",n.IsPrizePoolLock(2)),console.log("---1IsPrizePoolLock",n.IsPrizePoolLock(3)),console.log("---1IsPrizePoolLock",n.IsPrizePoolLock(4)),n.SetWheelItems(o.wheelItems),n.GetWheelMarScript().updateWheelItems(o.wheelItems),e.SetPickGameProgress(o.bonusTrail.count),Global.SlotsSoundMgr.playEffect("welcome"),(i=cc.find("Canvas/safe_node/tanchuang")).active=!0,cc.find("tanchuangSpine",i).getComponent(sp.Skeleton).setAnimation(0,"animation1",!1),cc.find("tanchuangSpine",i).getComponent(sp.Skeleton).addAnimation(0,"animation2",!1),a=cc.find("tanchuangSpine",i).getComponent(sp.Skeleton).addAnimation(0,"animation3",!1),t.next=19,new Promise(function(e){cc.find("tanchuangSpine",i).getComponent(sp.Skeleton).setTrackCompleteListener(a,function(){i.active=!1,e()});var t=cc.find("btn",i);Global.btnClickEvent(t,function(){i.active=!1,e()})});case 19:if(n.SetPickGameState(!0),e.checkPickEntrance(),!o.pickBonus){t.next=26;break}return t.next=24,e.CheckPickBonus(o.pickBonus,null,!0);case 24:t.next=32;break;case 26:if(!o.wheelGame){t.next=31;break}return t.next=29,e.CheckWheelGame(o.wheelGame);case 29:t.next=32;break;case 31:e.CanDoNextRound();case 32:case"end":return t.stop()}},t)}))()},onEventTotalbetUpdated:function(e,t){cc.vv.gameData.GetWheelMarScript().updateWheelItems(),this.checkPickEntrance()},checkPickEntrance:function(){var e=this;return i(regeneratorRuntime.mark(function t(){var n,o,i,a,c,s,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=cc.vv.gameData,o=n.GetOpenPickGameBet(),i=n.GetTotalBet(),a=n.GetPickGameState(),c=cc.find("reels_frame/frameUp/unLockNode",e.node),s=cc.find("spineJiesuo",c),r=cc.find("spineSs",c),s.active=!1,r.active=!1,!(i>=o)||a){t.next=21;break}return Global.SlotsSoundMgr.playEffect("collect_unlock"),n.SetPickGameState(!0),Global.SlotsSoundMgr.playEffect("unlock"),s.active=!0,cc.find("unLockedNode",c).active=!0,s.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),t.next=18,cc.vv.gameData.awaitTime(.5);case 18:s.active=!1,t.next=22;break;case 21:i<o&&a&&(Global.SlotsSoundMgr.playEffect("collect_lock"),n.SetPickGameState(!1),Global.SlotsSoundMgr.playEffect("lock"),r.active=!0,cc.find("unLockedNode",c).active=!1,r.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),r.getComponent(sp.Skeleton).setCompleteListener(function(e){"animation"===(e.animation?e.animation.name:"")&&r.getComponent(sp.Skeleton).setAnimation(0,"animation2",!1)}));case 22:case"end":return t.stop()}},t)}))()},SetPickGameProgress:function(e,t){var n=cc.vv.gameData,o=cc.find("reels_frame/frameUp/unLockNode/unLockedNode",this.node),i=cc.find("qie",o);i.active=!0,0===e?i.active=!1:t?(Global.SlotsSoundMgr.playEffect("collect_light"),cc.tween(i).to(.5,{x:cc.find("ld"+e,o).x}).start()):i.x=cc.find("ld"+e,o).x;for(var a=1;a<=18;a++){var c=cc.find("ld"+a,o);cc.find("ad"+a,o).active=e<a,c.active=e>=a}n.SetPickGameProgress(e)},onBtnCollect:function(){var e=cc.vv.gameData;if("idle"===e.GetSlotState()){var t=e.GetPickGameState(),n=e.GetOpenPickGameBet();if(t){var o=cc.find("reels_frame/frameUp/unLockNode",this.node);cc.find("tipNode",o).active=!0,cc.find("tipNode",o).scale=0,cc.find("tipNode",o).stopAllActions(),cc.tween(cc.find("tipNode",o)).to(.2,{scale:1}).delay(2).to(.2,{scale:0}).call(function(){cc.find("tipNode",o).active=!1,cc.find("tipNode",o).scale=1}).start()}else{var i=e.BetToIdx(n);if(i)e.GetBottomScript().SetBetIdx(i),e.SetPickGameState(!0)}}},stopAllSymbolAni:function(){for(var e=0;e<this._reels.length;e++)for(var t=this._reels[e],n=0;n<t._symbols.length;n++){var o=t._symbols[n];o.ShowNormal(),o.ShowKuang(!1)}},playWheelAni:function(e){for(var t=0;t<this._reels.length;t++)for(var n=this._reels[t],o=0;o<n._symbols.length;o++){n._symbols[o].playWheelAnimation(e)}},playPickAni:function(e){for(var t=0;t<this._reels.length;t++)for(var n=this._reels[t],o=0;o<n._symbols.length;o++){n._symbols[o].playPickAnimation(e)}},playJpAni:function(e){for(var t=0;t<this._reels.length;t++)for(var n=this._reels[t],o=0;o<n._symbols.length;o++){n._symbols[o].playJackpotAnimation(e)}},awaitTime:function(e){var t=this;return new Promise(function(n,o){t.scheduleOnce(function(){n()},e)})}}),cc._RF.pop()},{"./Odysseus_Tools":"Odysseus_Tools",LMSlots_Slots_Base:void 0}],Odysseus_Symbol:[function(e,t,n){"use strict";cc._RF.push(t,"a78662cdVtLGryALEgqh3jZ","Odysseus_Symbol");e("./Odysseus_Tools");cc.Class({extends:e("LMSlots_Symbol_Base"),properties:{},StartMove:function(){this._super()},Resume:function(e){if(e){this._symbolIdx=e.symbolIdx,this._id=e.id,this._data=Global.copy(e.data),this.ShowKuang(e.isKuang),this.ShowNormal();var t=e.state;"win"==t?this.playWinAnimation():"stop"==t?this.playStopAnimation():"idle"==t?this.playidleAnimation():"trigger"==t&&this.playTriggerAnimation(!0)}},playTriggerAnimation:function(e){var t=!1,n=this._id,o=cc.vv.gameData.getGameCfg();if(e){if(o.symbol[n]&&o.symbol[n].win_node&&o.symbol[n].trigger_ani){this._state="trigger",this._showNode&&(this._showNode.active=!1);var i=this.setAnimationToTop(!0);i.active=!0;var a=cc.find(o.symbol[n].win_node,i);if(a.active=!0,""!=o.symbol[n].trigger_ani.name){i.zIndex=o.symbol[n].trigger_ani.zIndex-this._symbolIdx+10*this._reelIdx,t=!0;var c=a.getComponent(sp.Skeleton);c&&c.setAnimation(0,o.symbol[n].trigger_ani.name,!0)}}}else this.setAnimationToTop(!1);return t},setBeiShu:function(e){var t=cc.find("beiShu",this.node);e?(t.active=!0,cc.find("2x",t).active=!1,cc.find("3x",t).active=!1,cc.find("5x",t).active=!1,cc.find(e+"x",t).active=!0):t.active=!1},playWheelAnimation:function(e){if(3==this._id)return this.playTriggerAnimation(e)},playPickAnimation:function(e){if(2==this._id)return this.playTriggerAnimation(e)},playJackpotAnimation:function(e){if(4==this._id)return this.playTriggerAnimation(e)}}),cc._RF.pop()},{"./Odysseus_Tools":"Odysseus_Tools",LMSlots_Symbol_Base:void 0}],Odysseus_Tools:[function(e,t,n){"use strict";cc._RF.push(t,"3431fWPHrlK779bntn0fxJh","Odysseus_Tools"),cc.Class({extends:cc.Component,properties:{},start:function(){},statics:{changeNodeSp:function(e,t){null!=e&&(e.getComponent(cc.Sprite).spriteFrame=t)},changeNodeLab:function(e,t){null!=e&&(e.getComponent(cc.Label).string=t)},numInArr:function(e,t,n){var o=n.indexOf(e),i=n.indexOf(t);return-1!=o&&-1!=i},nodeAni:function(e,t,n){1===t?(e.scale=0,e.active=!0,cc.tween(e).to(.2,{scale:1}).start()):2===t?cc.tween(e).to(.2,{scale:0}).call(function(){e.active=!1,e.scale=1,n&&n()}).start():3===t&&cc.tween(e).to(.2,{scale:1.3}).to(.3,{scale:0}).call(function(){e.active=!1,e.scale=1,n&&n()}).start()},playSpineAni:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"animation",n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;e&&(e.active=!0,e.getComponent(sp.Skeleton).setAnimation(o,t,n))},getKNum:function(e){if(e)return 1e3*parseInt(e/1e3)},spineEndFunc:function(e,t){e&&e.getComponent(sp.Skeleton).setCompleteListener(function(){t&&t()})},localConvertWorldPoint:function(e){return e?e.convertToWorldSpace(cc.v2(0,0)):null},worldConvertLocalPoint:function(e,t){return e?e.convertToNodeSpace(t):null},convetOtherNodeSpace:function(e,t){if(!e||!t)return null;var n=this.localConvertWorldPoint(e);return this.worldConvertLocalPoint(t,n)}}}),cc._RF.pop()},{}],Odysseus_Wheel_mar:[function(e,t,n){"use strict";cc._RF.push(t,"a93a3zmlHFD1bHgbzFuL3ay","Odysseus_Wheel_mar"),cc.Class({extends:cc.Component,properties:{_wheelSrc:[],_wheelNode:[],_wheelGame:null,_wheelItems:null},Init:function(){var e=this;this._wheelNodePosArr=[{x:150,y:-260},{x:-230,y:-240},{x:0,y:-80}],this._wheel_bg=cc.find("Canvas/safe_node/wheel_bg_1"),this._wheel_bg.active=!1,this._wheelNode[0]=cc.find("Canvas/safe_node/slots/wheelNode/wheel1"),this._wheelNode[1]=cc.find("Canvas/safe_node/slots/wheelNode/wheel2"),this._wheelNode[2]=cc.find("Canvas/safe_node/slots/wheelNode/wheel3"),this._wheelSrc[0]=this._wheelNode[0].addComponent("Odysseus_Wheel"),this._wheelSrc[1]=this._wheelNode[1].addComponent("Odysseus_Wheel"),this._wheelSrc[2]=this._wheelNode[2].addComponent("Odysseus_Wheel");for(var t=0;t<this._wheelNode.length;t++){var n=this._wheelNode[t];n.x=this._wheelNodePosArr[t].x,n.y=this._wheelNodePosArr[t].y,n.opacity=0}cc.find("point",this.node).active=!1,cc.find("handNode",this.node).active=!1,Global.btnClickEvent(cc.find("handNode",this.node),function(){e.onClickHandNode()},this)},onClickHandNode:function(){var e=cc.find("handNode",this.node);e.stopAllActions(),e.active=!1,Global.SlotsSoundMgr.playEffect("wheel_spin");var t={c:MsgId.SLOT_SUBGAME_DATA};t.gameid=cc.vv.gameData.getGameId(),t.data={},t.data.rtype=3,cc.vv.NetManager.send(t,!0)},onEnable:function(){cc.vv.NetManager.registerMsg(MsgId.SLOT_SUBGAME_DATA,this.onRecvMsgSubAction,this)},onDisable:function(){cc.vv.NetManager.unregisterMsg(MsgId.SLOT_SUBGAME_DATA,this.onRecvMsgSubAction,!1,this)},onRecvMsgSubAction:function(e){if(200===e.code){var t=e.data;if(t.errMsg)return;3===t.rtype&&(this._wheelGame=t.wheelGame,this.startMove(t.resultId))}},updateWheelItems:function(e,t){e&&(this._wheelItems=e,this._wheelSrc[0].Init(1,1),this._wheelSrc[1].Init(2,1),this._wheelSrc[2].Init(3,1)),this.addCoinColor(this._wheelItems.minor),this.addCoinColor(this._wheelItems.mega),this._wheelSrc[0].updateWheelUi(this._wheelItems.mini),this._wheelSrc[1].updateWheelUi(this._wheelItems.minor),this._wheelSrc[2].updateWheelUi(this._wheelItems.mega),t&&(1==t.wheelId?this._wheelSrc[0].updateWheelUi(t.items):2==t.wheelId?(this.addCoinColor(t.items),this._wheelSrc[1].updateWheelUi(t.items)):3==t.wheelId&&(this.addCoinColor(t.items),this._wheelSrc[2].updateWheelUi(t.items)))},addCoinColor:function(e){for(var t=0;t<e.length;t++){var n=e[t];(n.mult||n.coin)&&(n.color=t%2)}},openWheelGame:function(e,t){var n=this,o=this,i=cc.vv.gameData;if(t){this._wheelGame=t,this._wheelSrc[t.wheelId-1].updateWheelUi(t.items);for(var a=t.wheelId,c=0;c<this._wheelNode.length;c++){this._wheelNode[c].active=c+1>=a}}if(this.updateWheelItems(i.GetWheelItems(),t),this._wheel_bg.active=e,e)for(var s=0;s<this._wheelNode.length;s++){var r=this._wheelNode[s];this._wheelSrc[s].setState(2),cc.tween(r).to(.8,{x:0,y:-200,opacity:255}).call(function(){Global.SlotsSoundMgr.playEffect("wheel_combine"),cc.find("point",o.node).active=!0,cc.find("handNode",o.node).active=!0,cc.vv.gameData.checkAutoPlay(cc.find("handNode",o.node),n.onClickHandNode.bind(n))}).start()}else for(var l=function(e){var t=n._wheelNode[e],i=n._wheelSrc[e];t.active=!0,cc.tween(t).to(.8,{x:n._wheelNodePosArr[e].x,y:n._wheelNodePosArr[e].y,opacity:0}).call(function(){cc.find("point",o.node).active=!1,cc.find("handNode",o.node).active=!1,i.setState(1)}).start()},d=0;d<this._wheelNode.length;d++)l(d)},startMove:function(e){var t=this._wheelGame.wheelId;this._wheelGame.newItems&&(this._wheelSrc[t-1]._itemsData=this._wheelGame.newItems,t=this._wheelGame.wheelId-1),this._wheelSrc[t-1].startMoveOne(e,this._wheelGame.items)},endMove:function(){var e=cc.vv.gameData,t=e.GetBottomScript().getCurrentWin();e.GetPopNodeScript().openWheelCollectNode(t)},endMoveOne:function(){cc.find("handNode",this.node).active=!0,cc.vv.gameData.checkAutoPlay(cc.find("handNode",this.node),this.onClickHandNode.bind(this))}}),cc._RF.pop()},{}],Odysseus_Wheel:[function(e,t,n){"use strict";function o(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=i(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a,c=!0,s=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==o.return||o.return()}finally{if(s)throw a}}}}function i(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}cc._RF.push(t,"dd316ZcsJBIvahO4m/8gwD/","Odysseus_Wheel");e("./Odysseus_Tools");cc.Class({extends:cc.Component,properties:{_yeNode:cc.Node,_speed:0,_itemAngle:90,_type:1,_state:1,_items:[],_itemsData:[]},Init:function(e,t){switch(this._yeNode=cc.find("yeNode",this.node),this._state=t,this._type=e,e){case 1:this._itemAngle=45,this._speed=.1;break;case 2:this._itemAngle=30,this._speed=.2;break;case 3:this._itemAngle=22.5,this._speed=.3}},updateWheelUi:function(e){var t,n=e;this._itemsData=e;var i=cc.vv.gameData.GetTotalBet();this.node.angle=0;var a,c=o(this._items);try{for(c.s();!(a=c.n()).done;){a.value.removeFromParent()}}catch(e){c.e(e)}finally{c.f()}switch(this._items=[],this._type){case 1:var s,r=o(n);try{for(r.s();!(s=r.n()).done;){var l=s.value;l.isEnd?t=cc.instantiate(cc.find("wheel4",this._yeNode)):l.mult||l.coin?(t=cc.instantiate(cc.find("wheel3",this._yeNode)),l.coin?cc.find("lab",t).getComponent(cc.Label).string=Global.formatNumShort(l.coin):cc.find("lab",t).getComponent(cc.Label).string=Global.formatNumShort(l.mult*i)):l.jackpot?(t=cc.instantiate(cc.find("wheel1",this._yeNode)),cc.find("1",t).active=!1,cc.find("2",t).active=!1,cc.find(l.jackpot.id.toString(),t)&&(cc.find(l.jackpot.id.toString(),t).active=!0)):l.boost&&(t=cc.instantiate(cc.find("wheel2",this._yeNode))),t.x=0,t.y=0,t.active=!0,this._yeNode.addChild(t),t.angle=-this._items.length*this._itemAngle,this._items.push(t)}}catch(e){r.e(e)}finally{r.f()}break;case 2:var d,u=o(n);try{for(u.s();!(d=u.n()).done;){var m=d.value;m.isEnd?t=cc.instantiate(cc.find("wheel5",this._yeNode)):m.mult||m.coin?(t=0===m.color?cc.instantiate(cc.find("wheel3",this._yeNode)):cc.instantiate(cc.find("wheel4",this._yeNode)),m.coin?cc.find("lab",t).getComponent(cc.Label).string=Global.formatNumShort(m.coin):cc.find("lab",t).getComponent(cc.Label).string=Global.formatNumShort(m.mult*i)):m.jackpot?(t=cc.instantiate(cc.find("wheel1",this._yeNode)),cc.find("2",t).active=!1,cc.find("3",t).active=!1,cc.find("4",t).active=!1,cc.find(m.jackpot.id.toString(),t)&&(cc.find(m.jackpot.id.toString(),t).active=!0)):m.boost&&(t=cc.instantiate(cc.find("wheel2",this._yeNode))),t.x=0,t.y=0,t.active=!0,this._yeNode.addChild(t),t.angle=-this._items.length*this._itemAngle,this._items.push(t)}}catch(e){u.e(e)}finally{u.f()}break;case 3:var f,p=o(n);try{for(p.s();!(f=p.n()).done;){var h=f.value;h.isEnd?t=cc.instantiate(cc.find("wheel4",this._yeNode)):h.mult||h.coin?(t=0===h.color?cc.instantiate(cc.find("wheel3",this._yeNode)):cc.instantiate(cc.find("wheel2",this._yeNode)),h.coin?cc.find("lab",t).getComponent(cc.Label).string=Global.formatNumShort(h.coin):cc.find("lab",t).getComponent(cc.Label).string=Global.formatNumShort(h.mult*i)):h.jackpot&&(t=cc.instantiate(cc.find("wheel1",this._yeNode)),cc.find("4",t).active=!1,cc.find("3",t).active=!1,cc.find("5",t).active=!1,cc.find(h.jackpot.id.toString(),t)&&(cc.find(h.jackpot.id.toString(),t).active=!0)),t.x=0,t.y=0,t.active=!0,this._yeNode.addChild(t),t.angle=-this._items.length*this._itemAngle,this._items.push(t)}}catch(e){p.e(e)}finally{p.f()}}},startMoveOne:function(e,t){var n=this,o=this,i=(e-1)*this._itemAngle-1440,a=cc.find("zhuanpan2",o._items[e-1]);Global.SlotsSoundMgr.playEffect("wheel_roll"),console.log("---1resultId",e,i),cc.tween(this.node).to(7.8,{angle:i},{easing:"quadInOut"}).call(function(){a&&!o._itemsData[e-1].isEnd&&(a.active=!0,a.getComponent(sp.Skeleton).setAnimation(0,"animation"+o._type,!0))}).delay(3).call(function(){n.node.angle+=1440,a&&(a.active=!1),o._itemsData=t,o.endMoveOne(e)}).start()},endMoveOne:function(e){var t=this,n=cc.vv.gameData,o=this._itemsData[e-1],i=this._items[e-1];if(o.isEnd)n.GetWheelMarScript().endMove();else if(o.coin){Global.SlotsSoundMgr.playEffect("wheel_collect2");var a=o.coin,c=n.GetBottomScript().getCurrentWin();n.AddCoin(a),n.GetBottomScript().ShowWin(a+c,3,c,null,.3),n.GetTopScript().ShowCoin(),cc.tween(this.node).delay(1).call(function(){cc.find("endNode",i)&&(cc.find("endNode",i).active=!0),n.GetWheelMarScript().endMoveOne()}).start()}else if(o.jackpot){Global.SlotsSoundMgr.playEffect("wheel_collect1");var s=o.jackpot.value,r=n.GetBottomScript().getCurrentWin();n.AddCoin(s),n.GetBottomScript().ShowWin(s+r,3,r,null,.3),n.GetTopScript().ShowCoin(),n.IsPrizePoolLock(o.jackpot.id-1)?n.GetPopNodeScript().openNormalNode(o.jackpot.value):n.GetPopNodeScript().openWheelJpNode(o.jackpot.id,o.jackpot.value),cc.tween(this.node).delay(1).call(function(){cc.find("endNode",i)&&(cc.find("endNode",i).active=!0),n.GetWheelMarScript().endMoveOne()}).start()}else o.boost&&(Global.SlotsSoundMgr.playEffect("wheel_collect1"),cc.tween(this.node).delay(2).call(function(){n.GetPopNodeScript().openBoost(),Global.SlotsSoundMgr.playEffect("boost_dialog_start_show")}).delay(4).call(function(){1==t._type?Global.SlotsSoundMgr.playEffect("wheel_fly1"):Global.SlotsSoundMgr.playEffect("wheel_fly2")}).to(1,{x:800}).call(function(){n.GetWheelMarScript().endMoveOne()}).start())},update:function(e){1===this._state&&(this.node.angle-=this._speed*this._itemAngle*e)},setState:function(e){this._state=e},awaitTime:function(e){var t=this;return new Promise(function(n,o){t.scheduleOnce(function(){n()},e)})}}),cc._RF.pop()},{"./Odysseus_Tools":"Odysseus_Tools"}]},{},["Odysseus_ButtonSafe","Odysseus_Cfg","Odysseus_GameData","Odysseus_Logic","Odysseus_PickGame","Odysseus_Pop","Odysseus_PrizePool","Odysseus_Reel","Odysseus_Slots","Odysseus_Symbol","Odysseus_Tools","Odysseus_Wheel","Odysseus_Wheel_mar"]);
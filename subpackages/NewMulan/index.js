window.__require=function e(t,n,a){function o(r,s){if(!n[r]){if(!t[r]){var c=r.split("/");if(c=c[c.length-1],!t[c]){var u="function"==typeof __require&&__require;if(!s&&u)return u(c,!0);if(i)return i(c,!0);throw new Error("Cannot find module '"+r+"'")}r=c}var l=n[r]={exports:{}};t[r][0].call(l.exports,function(e){return o(t[r][1][e]||e)},l,l.exports,e,t,n,a)}return n[r].exports}for(var i="function"==typeof __require&&__require,r=0;r<a.length;r++)o(a[r]);return o}({NewMulan_BonusGameMgr:[function(e,t,n){"use strict";function a(e,t,n,a,o,i,r){try{var s=e[i](r),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(a,o)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(o,i){var r=e.apply(t,n);function s(e){a(r,o,i,s,c,"next",e)}function c(e){a(r,o,i,s,c,"throw",e)}s(void 0)})}}cc._RF.push(t,"2df14QIBxZAyrVlZwypmiE9","NewMulan_BonusGameMgr"),cc.Class({extends:cc.Component,properties:{_bonusId:3,_greenId:301},Init:function(){this._bonusId=3,this._greenId=301,this._node_bonus=cc.find("safe_node/node_bonus",this.node),this._node_bonus.active=!1,this._topSlotsScript=cc.find("slots_top",this._node_bonus).addComponent("NewMulan_BonusSlots"),this._bottomSlotsScript=cc.find("slots",this._node_bonus).addComponent("NewMulan_BonusSlots"),this._topType=1,this._bottomType=2,this._topSlotsScript.Init(this._topType),this._bottomSlotsScript.Init(this._bottomType),this._slots_top=cc.find("slots_top",this._node_bonus),this._slots_bottom=cc.find("slots",this._node_bonus),this._node_winKuang=cc.find("node_winKuang",this._node_bonus),this._node_top=cc.find("node_top",this._node_bonus),this._flyNode=cc.find("flyNode",this._node_bonus),this._flyNode.active=!1,this._poolList=[],this._poolList.push(cc.find("LMSlots_PrizePool_1/prizePool_Major",this._node_bonus)),this._poolList.push(cc.find("LMSlots_PrizePool_1/prizePool_Minor",this._node_bonus)),this._poolList.push(cc.find("LMSlots_PrizePool_1/prizePool_Mini",this._node_bonus)),this._symbolTemplete||(this._symbolTemplete=cc.vv.gameData.GetPrefabByName("bonus_Symbol"),this._symbolTemplete&&(this._symbolTemplete.optimizationPolicy=cc.Prefab.OptimizationPolicy.MULTI_INSTANCE))},showBonusGame:function(e,t){var n=this;return o(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new Promise(function(){var a=o(regeneratorRuntime.mark(function a(o,i){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(Global.SlotsSoundMgr.playBgm("bgbgm"),cc.vv.gameData.setIsBonusGame(!0),cc.find("spr_bg_bonus/BG_BeiJIngLan",n._node_bonus).active=!1,n.setCurCnt(),n._subGameData=e,1!==n._subGameData.state){a.next=18;break}return a.next=8,cc.vv.gameData.getPopupScript().showBonusGamePickOneUI();case 8:return n._subGameData=cc.vv.gameData.getBonusGame(),a.next=11,cc.vv.gameData.getPopupScript().showBonusStartUI(n._subGameData.type);case 11:return a.next=13,cc.vv.gameData.awaitTime(.5);case 13:return cc.vv.gameData.GetBottomScript().SetWin(0),a.next=16,n.showBonusGameUI(t);case 16:a.next=31;break;case 18:if(2!==n._subGameData.state){a.next=28;break}return a.next=21,n.showBonusGameUI(t);case 21:return a.next=23,cc.vv.gameData.getPopupScript().showBonusAddSpinsUI();case 23:n._subGameData=cc.vv.gameData.getBonusGame(),n._curCnt=n._subGameData.totalSpinCnt-n._subGameData.spinCnt,n._totalCnt=n._subGameData.totalSpinCnt,a.next=31;break;case 28:if(0!==n._subGameData.state){a.next=31;break}return a.next=31,n.showBonusGameUI(t);case 31:n.reqSpine(),n._callBack=o;case 33:case"end":return a.stop()}},a)}));return function(e,t){return a.apply(this,arguments)}}()));case 1:case"end":return a.stop()}},a)}))()},endBonusGame:function(){var e=this;return o(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Global.SlotsSoundMgr.playEffect("bgend"),t.next=3,cc.vv.gameData.awaitTime(.5);case 3:return AppLog.log("###bonus\u6e38\u620f\u7ed3\u675f"),cc.find("spr_bg_bonus/BG_BeiJIngLan",e._node_bonus).active=!0,e.setCurCnt(),e.setSettleNum(),t.next=9,cc.vv.gameData.awaitTime(1);case 9:return t.next=11,e.showBonusSettlement();case 11:return t.next=13,cc.vv.gameData.getPopupScript().showGameWinUI(e._subGameData.winCoin,!0);case 13:return e._node_bonus.active=!1,e.playJackpotAnim(!1),t.next=17,cc.vv.gameData.awaitTime(1);case 17:return t.next=19,new Promise(function(t,n){var a=e._subGameData.winCoin,o=e._subGameData.winCoin;cc.vv.gameData.isFreeGame()?(o=cc.vv.gameData.getFreeWinCoin()+e._subGameData.winCoin,cc.vv.gameData.setFreeWinCoin(o),cc.vv.gameData.GetSlotsScript().ShowBottomWin(a,o,!1,function(){t()})):(cc.vv.gameData.AddCoin(e._subGameData.winCoin),cc.vv.gameData.GetSlotsScript().ShowBottomWin(a,o,!0,function(){t()}))});case 19:e._callBack&&(Global.SlotsSoundMgr.stopBgm(),cc.vv.gameData.setIsBonusGame(!1),e._callBack(),e._callBack=null,e._subGameData=null),cc.vv.gameData.isBoxGame()&&!cc.vv.gameData.isFreeGame()&&(cc.vv.gameData.getBoxScript().openStorePage(),cc.vv.gameData.setIsBoxGame(!1));case 21:case"end":return t.stop()}},t)}))()},showBonusGameUI:function(e){var t=this;return o(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise(function(){var n=o(regeneratorRuntime.mark(function n(a,o){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t._node_bonus.active=!0,t.lockJackpot(t._subGameData.jackpotValues),t.playJackpotAnim(!0),t._totalCnt=t._subGameData.totalSpinCnt,t._curCnt=t._subGameData.totalSpinCnt-t._subGameData.spinCnt,n.next=7,cc.vv.gameData.awaitTime(0);case 7:if(t._bonusType=t._subGameData.type,!e){n.next=24;break}if(t.setCurCnt(),t.setTriggerNum(),t.setSlotsLockSpr(!1),2!=t._bonusType){n.next=17;break}return n.next=15,t.playDoubleTriAnim();case 15:n.next=19;break;case 17:return n.next=19,t.playOneTriAnim();case 19:return t.setCurCnt(t._curCnt,t._totalCnt),n.next=22,cc.vv.gameData.awaitTime(1);case 22:n.next=29;break;case 24:return t.setCurCnt(t._curCnt,t._totalCnt),t.setTriggerNum(t._subGameData.baseCoin),t.setSlotsLockSpr(1==t._bonusType),n.next=29,t.showBonusSlotsUI();case 29:a();case 30:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}()));case 1:case"end":return n.stop()}},n)}))()},playDoubleTriAnim:function(){var e=this;return o(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=o(regeneratorRuntime.mark(function t(n,a){var o,i,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._bottomSlotsScript.setAllSymbolNull(),e._topSlotsScript.setAllSymbolNull(),e._node_winKuang.position=e._slots_top.position,e._node_winKuang.active=!0,o=cc.find("NG_BG_panmian",e._slots_top).getComponent(sp.Skeleton),i=cc.find("node_reelback",e._slots_top),r=cc.find("NG_BG_panmian",e._slots_bottom).getComponent(sp.Skeleton),o.node.active=!1,i.active=!1,r.setAnimation(0,"NG_panmian",!1),Global.SlotsSoundMgr.playEffect("bgaddselect"),t.next=13,cc.vv.gameData.awaitTime(1);case 13:return t.next=15,e.playStartSymbolAnim(e._subGameData.slots[1].bonusItems,!1);case 15:return t.next=17,e.collectSlotsCoin(!1,e._bottomType,0);case 17:return o.node.active=!0,r.setAnimation(0,"NG_panmian2",!1),o.setAnimation(0,"BG_panmian_intro",!1),cc.tween(e._node_winKuang).to(1,{position:cc.find("pos_settle",e._node_bonus).position}).start(),t.next=23,cc.vv.gameData.awaitTime(1);case 23:return i.active=!0,t.next=26,e.playStartSymbolAnim(e._subGameData.slots[0].bonusItems,!0);case 26:n();case 27:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},playOneTriAnim:function(){var e=this;return o(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=o(regeneratorRuntime.mark(function t(n,a){var o,i,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.setSlotsLockSpr(!1),e._bottomSlotsScript.setAllSymbolNull(),e._topSlotsScript.setAllSymbolNull(),e._subGameData.slots[1].bonusItems.forEach(function(t){e.showSymbolNormalAnim(t,!1)}),e._node_winKuang.position=e._slots_top.position,e._node_winKuang.active=!0,o=cc.find("NG_BG_panmian",e._slots_top).getComponent(sp.Skeleton),i=cc.find("node_reelback",e._slots_top),r=cc.find("NG_BG_panmian",e._slots_bottom).getComponent(sp.Skeleton),o.node.active=!1,i.active=!1,r.setAnimation(0,"NG_panmian",!1),t.next=14,cc.vv.gameData.awaitTime(.5);case 14:return o.node.active=!0,r.setAnimation(0,"NG_panmian2",!1),o.setAnimation(0,"BG_panmian_intro",!1),cc.tween(e._node_winKuang).to(1,{position:cc.find("pos_settle",e._node_bonus).position}).start(),Global.SlotsSoundMgr.playEffect("bgaddselect"),t.next=21,cc.vv.gameData.awaitTime(1);case 21:return e.setSlotsLockSpr(!0),t.next=24,e.collectSlotsCoin(!1,e._bottomType,0);case 24:return t.next=26,cc.vv.gameData.awaitTime(.5);case 26:i.active=!0,n();case 28:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},showBonusSlotsUI:function(){var e=this;return o(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=o(regeneratorRuntime.mark(function t(n,a){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._bottomSlotsScript.setAllSymbolNull(),e._topSlotsScript.setAllSymbolNull(),e._node_winKuang.position=cc.find("pos_settle",e._node_bonus).position,e._subGameData.slots[1].bonusItems.forEach(function(t){e.showSymbolNormalAnim(t,!1)}),2==e._bonusType&&e._subGameData.slots[0].bonusItems.forEach(function(t){e.showSymbolNormalAnim(t,!0)}),t.next=7,cc.vv.gameData.awaitTime(2);case 7:n();case 8:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},showSymbolNormalAnim:function(e,t){var n=(t?this._topSlotsScript:this._bottomSlotsScript).GetSymbolByIdx(e.idx);n.ShowById(e.super?this._greenId:this._bonusId,{bonus:e}),n.playBonusIdleAnim(!0)},playStartSymbolAnim:function(e,t){var n=this;return new Promise(function(){var a=o(regeneratorRuntime.mark(function a(o,i){var r,s;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e=n.sortItems(e),r=regeneratorRuntime.mark(function a(o){var i,r,s,c;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e[o].idx-1,e[o].coin,e[o].jackpot,t?(i=n._topSlotsScript.GetSymbolByIdx(e[o].idx),(r=cc.instantiate(n._flyNode)).parent=n._node_top,r.active=!0,s=n._bottomSlotsScript.GetSymbolByIdx(e[o].idx).node,r.position=n._node_top.convertToNodeSpaceAR(s.convertToWorldSpaceAR(cc.v2(0,0))),Global.SlotsSoundMgr.playEffect("chipadd"),r.getComponent(sp.Skeleton).setAnimation(0,"Coin_fly",!1),r.getComponent(sp.Skeleton).setCompleteListener(function(){r.destroy()}),cc.tween(r).delay(1.6).call(function(){i.ShowById(e[o].super?n._greenId:n._bonusId,{bonus:e[o]}),i.playBonusStopAnim()}).start()):((c=n._bottomSlotsScript.GetSymbolByIdx(e[o].idx)).ShowById(e[o].super?n._greenId:n._bonusId,{bonus:e[o]}),c.playBonusStopAnim()),a.next=6,cc.vv.gameData.awaitTime(.2);case 6:case"end":return a.stop()}},a)}),s=0;case 3:if(!(s<e.length)){a.next=8;break}return a.delegateYield(r(s),"t0",5);case 5:s++,a.next=3;break;case 8:return a.next=10,cc.vv.gameData.awaitTime(t?2:.5);case 10:o();case 11:case"end":return a.stop()}},a)}));return function(e,t){return a.apply(this,arguments)}}())},gainNewGreenGem:function(){var e=this;return new Promise(function(){var t=o(regeneratorRuntime.mark(function t(n,a){var o,i,r,s,c,u,l,p;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:o=cc.find("path_fire",e._node_bonus),i=0;case 2:if(!(i<=1)){t.next=22;break}r=e._subGameData.slots[i].bonusItems,s=0===i?e._topSlotsScript:e._bottomSlotsScript,c=0;case 6:if(!(c<r.length)){t.next=19;break}if(u=s.GetSymbolByIdx(r[c].idx),!r[c].super||u.GetData().bonus){t.next=16;break}return l=e._node_bonus.convertToNodeSpaceAR(e._node_winKuang.convertToWorldSpaceAR(cc.v2(0,0))),p=e._node_bonus.convertToNodeSpaceAR(u.node.convertToWorldSpaceAR(cc.v2(0,0))),e.playFireSpine(o,l,p),t.next=14,cc.vv.gameData.awaitTime(.5);case 14:u.ShowById(e._greenId,{bonus:r[c]}),u.playBonusIdleAnim(!0);case 16:c++,t.next=6;break;case 19:i++,t.next=2;break;case 22:n();case 23:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}())},setTriggerNum:function(e){cc.find("settle",this._node_winKuang).active=!1,cc.find("trigger",this._node_winKuang).active=!0,cc.find("trigger/lbl_win",this._node_winKuang).getComponent(cc.Label).string=e?Global.FormatNumToComma(e):""},setSettleNum:function(e){cc.find("trigger",this._node_winKuang).active=!1,cc.find("settle",this._node_winKuang).active=!0,cc.find("settle/lbl_win",this._node_winKuang).getComponent(cc.Label).string=e?Global.FormatNumToComma(e):""},getCurSettleNum:function(){var e=cc.find("settle/lbl_win",this._node_winKuang).getComponent(cc.Label).string;return Global.FormatCommaNumToNum(e)},playWinEff:function(e){var t=cc.find("BG_JinBiTiShi",this._node_winKuang);e?(t.active=!0,t.getComponent(sp.Skeleton).setAnimation(0,"BG_JinBiTiShi",!1),t.getComponent(sp.Skeleton).setCompleteListener(function(){t.active=!1})):t.active=!1},setCurCnt:function(e,t){var n=cc.find("InfoBackground1",this._node_winKuang);t?(n.active=!0,cc.find("cur",n).getComponent(cc.Label).string=e,cc.find("total",n).getComponent(cc.Label).string=t):n.active=!1},setSlotsLockSpr:function(e){cc.find("DiJieSuo",this._node_bonus).active=e},playFireSpine:function(e,t,n){Global.SlotsSoundMgr.playEffect("collectprize");var a=cc.v2(t.x,t.y).sub(cc.v2(n.x,n.y)),o=a.mag(),i=a.signAngle(cc.v2(1,0));e.position=t,e.scale=o>400?o/610:o/280,e.angle=-i*cc.macro.DEG+90,e.getComponent(sp.Skeleton).setAnimation(0,o>400?"b_fire":"s_fire",!1)},showBonusSettlement:function(){var e=this;return new Promise(function(){var t=o(regeneratorRuntime.mark(function t(n,a){var o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e._subGameData.slots,o=0,2!=e._subGameData.type){t.next=6;break}return t.next=5,e.collectSlotsCoin(!0,e._topType,o);case 5:o=e.getCurSettleNum();case 6:return t.next=8,e.collectSlotsCoin(!0,e._bottomType,o);case 8:return t.next=10,cc.vv.gameData.awaitTime(1);case 10:n();case 11:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}())},collectSlotsCoin:function(e,t,n){var a=this;return new Promise(function(){var i=o(regeneratorRuntime.mark(function o(i){var r,s,c,u,l,p,m,_,g,f;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:r=1===t?a._topSlotsScript:a._bottomSlotsScript,s=a.sortItems(a._subGameData.slots[t-1].bonusItems),c=15===s.length,u=cc.find("path_fire",a._node_bonus),(l=cc.find("path_fire_2",a._node_bonus)).active=!1,p=0;case 7:if(!(p<s.length)){o.next=51;break}if(m=s[p].idx,_=r.GetSymbolByIdx(m),g=a._node_bonus.convertToNodeSpaceAR(_.node.convertToWorldSpaceAR(cc.v2(0,0))),f=a._node_bonus.convertToNodeSpaceAR(a._node_winKuang.convertToWorldSpaceAR(cc.v2(0,0))),a.playFireSpine(u,g,f),!c){o.next=18;break}return o.next=16,cc.vv.gameData.awaitTime(.2);case 16:l.active=!0,a.playFireSpine(l,g,f);case 18:if(!e){o.next=41;break}if(_.playBonusEndAnim(),s[p].coin?n+=s[p].coin:s[p].jackpot&&(n+=s[p].jackpot.value,Global.SlotsSoundMgr.playEffect("JPcount")),!c){o.next=30;break}return o.next=24,cc.vv.gameData.awaitTime(.3);case 24:return a.setSettleNum(n),s[p].coin?n+=s[p].coin:s[p].jackpot&&(n+=s[p].jackpot.value),o.next=28,cc.vv.gameData.awaitTime(.2);case 28:o.next=32;break;case 30:return o.next=32,cc.vv.gameData.awaitTime(.5);case 32:return a.setSettleNum(n),a.playWinEff(!0),o.next=36,cc.vv.gameData.awaitTime(.5);case 36:if(!s[p].jackpot){o.next=39;break}return o.next=39,cc.vv.gameData.getPopupScript().showWinJpUI(s[p].jackpot.id,s[p].jackpot.value);case 39:o.next=48;break;case 41:return s[p].coin?n+=s[p].coin:s[p].jackpot&&(n+=s[p].jackpot.value),o.next=44,cc.vv.gameData.awaitTime(.5);case 44:return a.setTriggerNum(n),a.playWinEff(!0),o.next=48,cc.vv.gameData.awaitTime(.5);case 48:p++,o.next=7;break;case 51:i();case 52:case"end":return o.stop()}},o)}));return function(e){return i.apply(this,arguments)}}())},lockJackpot:function(e){cc.find("LMSlots_PrizePool_1",this._node_bonus).getComponent("LMSlots_PrizePool_Base").PausePool([{prizeType:0,pauseNum:e[0]},{prizeType:1,pauseNum:e[1]},{prizeType:2,pauseNum:e[2]},{prizeType:3,pauseNum:e[3]}])},playJackpotAnim:function(e){for(var t=0;t<this._poolList.length;t++)e?(this._poolList[t].opacity=0,cc.tween(this._poolList[t]).delay(4.1*t).repeatForever(cc.tween().to(.8,{opacity:255}).delay(2.5).to(.8,{opacity:0}).delay(8.2)).start()):(this._poolList[t].stopAllActions(),this._poolList[t].opacity=0)},startSpin:function(){},showSpinResult:function(){},spinEnd:function(){},reqSpine:function(){var e=this;return o(regeneratorRuntime.mark(function t(){var n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return cc.log(cc.js.formatStr("startMove:%s, %s",e._curCnt,e._totalCnt)),e._curCnt+=1,e.setCurCnt(e._curCnt,e._totalCnt),2==e._bonusType&&e._topSlotsScript.StartMove(e._subGameData.slots[0].bonusIdxs),e._bottomSlotsScript.StartMove(e._subGameData.slots[1].bonusIdxs),t.next=7,cc.vv.gameData.awaitTime(1);case 7:return n={rtype:3},t.next=10,cc.vv.gameData.reqSubGame(n);case 10:200!==(a=t.sent).code||a.spcode||(e._subGameData=a.data.bonusGame,cc.vv.gameData.setBonusGame(e._subGameData),e._bottomSlotsScript.setSpinResult(e._subGameData.slots[1].bonusIdxs,e._subGameData.slots[1].bonusItems),2==e._bonusType&&e._topSlotsScript.setSpinResult(e._subGameData.slots[0].bonusIdxs,e._subGameData.slots[0].bonusItems));case 12:case"end":return t.stop()}},t)}))()},StopMove:function(){2==this._bonusType&&this._topSlotsScript.StopMove(),this._bottomSlotsScript.StopMove()},OnSpinEnd:function(){var e=this;return o(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return cc.log("OnSpinEnd"),cc.vv.gameData.GetBottomScript().ShowBtnsByState("moveing_1"),t.next=4,e.gainNewGreenGem();case 4:return t.next=6,cc.vv.gameData.awaitTime(1);case 6:if(2!=e._subGameData.state){t.next=15;break}return t.next=9,cc.vv.gameData.getPopupScript().showBonusAddSpinsUI();case 9:e._subGameData=cc.vv.gameData.getBonusGame(),e._curCnt=e._subGameData.totalSpinCnt-e._subGameData.spinCnt,e._totalCnt=e._subGameData.totalSpinCnt,e.reqSpine(),t.next=16;break;case 15:e._subGameData.spinCnt>0?(cc.vv.gameData.awaitTime(1),e.reqSpine()):e.endBonusGame();case 16:case"end":return t.stop()}},t)}))()},GetLastStopSlotReel:function(){var e=this._topSlotsScript.GetLastStopReelIdx(),t=this._bottomSlotsScript.GetLastStopReelIdx(),n=t,a=this._bottomType;return 2==this._bonusType&&(n=t||e,a=t?this._bottomType:this._topType),{slotType:a,reelIdx:n}},getMaxReelIdx:function(e,t){return(e==this._topType?this._topSlotsScript.getLastStopReel():this._bottomSlotsScript.getLastStopReel())[t]},sortItems:function(e){return e.sort(function(e,t){return e.idx/5-t.idx/5}).sort(function(e,t){return(e.idx-1)%5-(t.idx-1)%5}),e},getBonusType:function(){return this._bonusType}}),cc._RF.pop()},{}],NewMulan_BonusReel:[function(e,t,n){"use strict";cc._RF.push(t,"e9fc8OGBwdEuafoWzFP6+7X","NewMulan_BonusReel"),cc.Class({extends:e("LMSlots_Reel_Base"),properties:{},Init:function(e,t,n){this._holderNode=cc.find("mask/holder",this.node),this._holderOrigPosY=this._holderNode.position.y,this._super(e,t,n)},initReelType:function(e){this._type=e},OnReelSpinEnd:function(){this._reelState=[];var e=cc.vv.gameData.getBonusGameMgr().GetLastStopSlotReel(),t=e.reelIdx,n=e.slotType;this._type===n&&this._reelIdx==t&&(cc.log(cc.js.formatStr("OnReelSpinEnd, %s, %s",n,t)),cc.vv.gameData.getBonusGameMgr().OnSpinEnd())},ReadyToStop:function(){this._bNotifyReadyStop||(this._bNotifyReadyStop=!0)},OnReelBounsActionBefore:function(){if(this._originResult)for(var e=0;e<this._originResult.length;e++)this._symbols[e].StopMoveBefore()},OnReelBounsActionDeep:function(){if(this._originResult)for(var e=0;e<this._originResult.length;e++)this._symbols[e].StopMoveDeep();this.playStopAnim()},playStopAnim:function(){var e=this._symbols[0];3!==e.GetShowId()&&301!==e.GetShowId()||e.GetData().bonus&&(Global.SlotsSoundMgr.playEffect("nggold"),e.playBonusStopAnim());var t=cc.vv.gameData.getBonusGameMgr().getMaxReelIdx(this._type,this._reelIdx%5);this._reelIdx==t&&Global.SlotsSoundMgr.playEffect("reelstop")},OnReelBounsActionEnd:function(){if(this._originResult)for(var e=0;e<this._originResult.length;e++)this._symbols[e].StopMoveEnd();else cc.log("\u56de\u5f39\u7ed3\u675f\uff0c\u6570\u636e\u5df2\u7ecf\u88ab\u6e05\u7a7a\u4e86");this.OnReelSpinEnd(),this.playScaleAnim()},playScaleAnim:function(){var e=this._symbols[0];3!==e.GetShowId()&&301!==e.GetShowId()||e.playBonusStopAnim()}}),cc._RF.pop()},{LMSlots_Reel_Base:void 0}],NewMulan_BonusSlots:[function(e,t,n){"use strict";cc._RF.push(t,"24775kzX5dJWrbLzzuKv5gW","NewMulan_BonusSlots"),cc.Class({extends:e("LMSlots_Slots_Base"),properties:{_canStop:!1,_slotsIndex:1},onLoad:function(){this._super()},start:function(){},Init:function(e){this._slotsIndex=e,this._topScript=cc.vv.gameData.GetTopScript(),this._bottomScript=cc.vv.gameData.GetBottomScript(),this._cfg=cc.vv.gameData.getGameCfg(),this._col=15,this._row=1,this._topAniNode=cc.find("top_ani",this.node),this.createReels(this._col,this._row)},createReels:function(e,t){for(var n=0;n<e;n++){var a=cc.find("reels/reel"+(n+1),this.node).addComponent("NewMulan_BonusReel");a.Init(n,t,this._topAniNode),a.initReelType(this._slotsIndex),this._reels.push(a)}},GetReelStopInter:function(e){var t=this._cfg.reelStopInter||.6,n=(e%5+5*(this._slotsIndex-1))*t;return 1==cc.vv.gameData.getBonusGameMgr().getBonusType()&&2==this._slotsIndex&&(n=e%5*t),n},OnSpinEnd:function(){},getReelNode:function(e){return e>=this._reels.length?null:this._reels[e].node},clearGuangyun:function(e){var t=cc.find(cc.js.formatStr("coin_top_%s/guangyun",e),this._topAniNode);t&&(t.active=!1)},StartMove:function(e){this._bStopRightnow=null,this._gameInfo=null,this._canStop=!1;var t=[],n=[];this._reels.forEach(function(a){e.includes(a.GetReelIdx()+1)||(t.push(a),n.push(a.GetReelIdx()))}),this.MoveReels(t),this.setMoveLastIdx(n),this._stopTime=this.GetStopTime()},MoveReels:function(e){for(var t=0;t<e.length;t++){e[t].StartMove()}},setMoveLastIdx:function(e){var t=e[0],n=[];e.forEach(function(e){(e%5>t%5||e%5==t%5&&e/3>t/3)&&(t=e),n[e%5]=n[e%5]?Math.max(n[e%5],e):e}),this.moveReelLastIdx=t,cc.log("StartMove\uff1athis.moveReelLastIdx:",this.moveReelLastIdx),this._reelMax=n},getLastStopReel:function(){return this._reelMax},setSpinResult:function(e,t){this._canStop=!0;for(var n=cc.vv.gameData.getGameCfg(),a=[],o=1;o<=15;o++){var i=Global.random(1,n.randomBonusSymbols.length),r=n.randomBonusSymbols[i-1];a.push(r)}this.SetSlotsResult(a,e,t)},SetSlotsResult:function(e,t,n){for(var a=e.length/this._col,o=[],i=0;i<e.length;i++){Math.floor(i/a);var r=i%this._col;if(this._cfg.symbol[e[i]]){var s={};if(s.sid=e[i],s.data={},t&&t.includes(i+1)){var c=n[t.indexOf(i+1)];c.super?s.sid=301:(s.sid=3,s.data.bonus=c)}o[r]||(o[r]=[]),o[r].unshift(s)}}for(var u=0;u<this._reels.length;u++){var l=this._reels[u],p=o[u];l.SetResult(p)}},CanStopSlot:function(){return this._canStop},getSlotsIndex:function(){return this._slotsIndex},setReelsState:function(e){cc.find("reels",this.node).active=e},getReel:function(e){return this._reels[e]},setAllSymbolNull:function(){for(var e=0;e<this._col;e++)this._reels[e].GetSymbolByRow(0).ClearState(),this._reels[e].GetSymbolByRow(0).ShowById(14),this._reels[e].GetSymbolByRow(1).ShowById(14)}}),cc._RF.pop()},{LMSlots_Slots_Base:void 0}],NewMulan_BoxGame:[function(e,t,n){"use strict";function a(e,t,n,a,o,i,r){try{var s=e[i](r),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(a,o)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(o,i){var r=e.apply(t,n);function s(e){a(r,o,i,s,c,"next",e)}function c(e){a(r,o,i,s,c,"throw",e)}s(void 0)})}}cc._RF.push(t,"1dc25nHHcVIcrNv4+v3b/dN","NewMulan_BoxGame");var i=1,r=2,s=3,c=4,u=5,l=6;cc.Class({extends:cc.Component,properties:{_itemList:[]},start:function(){},Init:function(){this._node_box=cc.find("safe_node/node_box",this.node),this._node_box.active=!1,this._btn_close=cc.find("layout/btn_close",this._node_box),Global.btnClickEvent(this._btn_close,this.onClickCloseBtn,this),this._node_items=cc.find("layout/boxKuang/node_items",this._node_box);for(var e=1;e<=9;e++){var t=cc.find("item"+e,this._node_items);t.off("click"),Global.btnClickEvent(t,this.onClickItem,this),this._itemList[e]={node:t,type:1,data:null}}this._box_tip=cc.find("layout/box_tip",this._node_box),this._box_tip.active=!1,this._spr_tip=cc.find("layout/spr_tip",this._node_box),this._spr_tip.active=!1;var n=cc.find("layout/node_flag/btn_tip",this._node_box);Global.btnClickEvent(n,this.clickHelpBtn,this);var a=cc.find("layout/btn_left",this._node_box);Global.btnClickEvent(a,this.clickLeftBtn,this);var o=cc.find("layout/btn_right",this._node_box);Global.btnClickEvent(o,this.clickRightBtn,this)},openStorePage:function(){var e=this;return new Promise(function(){var t=o(regeneratorRuntime.mark(function t(n,a){var o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return cc.vv.gameData.GetBottomScript().ShowBtnsByState("moveing_1"),Global.SlotsSoundMgr.playEffect("mapin"),e._node_box.active=!0,e._node_box.opacity=0,(o=cc.find("layout",e._node_box)).setScale(0),cc.tween(e._node_box).to(.5,{opacity:255}).start(),cc.tween(o).to(.5,{scale:1}).start(),e._flagStore=cc.vv.gameData.getFlagStore(),e._curPage=e._flagStore.unlockPage,e.showCurMoney(e._flagStore.flagCnt),e.showAllItems(),e.showPageFooter(),e.showPageWinDetail(),t.next=16,cc.vv.gameData.awaitTime(.5);case 16:e._canClickItem=!0,n();case 18:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}())},closeStorePage:function(){var e=this;return o(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=o(regeneratorRuntime.mark(function t(n,a){var o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Global.SlotsSoundMgr.playEffect("mapout"),o=cc.find("layout",e._node_box),cc.tween(e._node_box).to(.5,{opacity:0}).start(),cc.tween(o).to(.5,{scale:0}).start(),t.next=6,cc.vv.gameData.awaitTime(.5);case 6:e._node_box.active=!1,n();case 8:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},showCurMoney:function(e){cc.find("layout/node_flag/desctext",this._node_box).getComponent(cc.Label).string=Global.FormatNumToComma(e)},showAllItems:function(){for(var e=this._flagStore.unlockItems[this._curPage-1],t=this._flagStore.pageDetails[this._curPage-1].price,n=1;n<=9;n++){var a=this._itemList[n].node,o=this._itemList[n].type,p=void 0;if(this._curPage<=this._flagStore.unlockPage){var m=this.getItemData(n,e);m?m.coin>0?(o=c,p=m.coin,this.setItemState(a,c,m.coin)):m.bonusGame?(o=u,this.setItemState(a,u)):m.freeInfo&&(o=l,this.setItemState(a,l)):t<=this._flagStore.flagCnt?(o=r,p=t,this.setItemState(a,r,t)):(o=s,p=t,this.setItemState(a,s,t))}else o=i,p=t,this.setItemState(a,i,t);this._itemList[n].type=o,this._itemList[n].data=p}},getItemData:function(e,t){for(var n=0;n<t.length;n++)if(e==t[n].idx)return t[n];return null},setItemState:function(e,t,n){var a=cc.find("Map_XiangZi",e),o=cc.find("map_item_disabled",e),p=cc.find("map_pay_board",e),m=cc.find("boxOpenNum",e),_=cc.find("Map_fg_EN",e),g=cc.find("map_bonus_EN",e);a.active=t!==s,t===i?a.getComponent(sp.Skeleton).setAnimation(0,"Map_XiangZi_Suo_Loop",!0):t===r?a.getComponent(sp.Skeleton).setAnimation(0,"Map_XiangZi_Xiang_Loop1",!0):t!==c&&t!==u&&t!==l||a.getComponent(sp.Skeleton).setAnimation(0,"Map_XiangZi_Xiang_Loop2",!0),o.active=t===s,p.active=t===i||t===r||t===s,p.active&&(cc.find("collectFlag",p).getComponent(cc.Label).string=Global.FormatNumToComma(n)),m.active=t===c,m.active&&(m.getComponent(cc.Label).string=Global.formatNumShort(n,1)),_.active=t===l,g.active=t===u},setItemResult:function(e,t){var n=this;return new Promise(function(){var a=o(regeneratorRuntime.mark(function a(o,i){var r,s,p,m,_,g,f;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r=n._itemList[e].node,s=cc.find("Map_XiangZi",r),p=cc.find("map_pay_board",r),m=cc.find("boxOpenNum",r),_=cc.find("Map_fg_EN",r),g=cc.find("map_bonus_EN",r),s.getComponent(sp.Skeleton).setAnimation(0,"Map_XiangZi_Xiang_DaKai",!1),s.getComponent(sp.Skeleton).addAnimation(0,"Map_XiangZi_Xiang_Loop2",!0),p.active=!1,t.coin>0?(n._itemList[e].type=c,m.getComponent(cc.Label).string=Global.formatNumShort(t.coin,1),f=m):t.bonusGame?(n._itemList[e].type=u,f=g):t.freeInfo&&(n._itemList[e].type=l,f=_),f.active=!0,f.setScale(0),cc.tween(f).to(.5,{scale:1},{easing:"backOut"}).start(),a.next=15,cc.vv.gameData.awaitTime(.5);case 15:o();case 16:case"end":return a.stop()}},a)}));return function(e,t){return a.apply(this,arguments)}}())},onClickItem:function(e){if(this._canClickItem){var t=Number(e.node.name.substring("item".length)),n=this._itemList[t].type;n===i||n===s?this.playBoxTipAnim(e.node):this._itemList[t].type===r&&(Global.SlotsSoundMgr.playEffect("caseopen"),this._canClickItem=!1,this.onSendSeq(t))}},onSendSeq:function(e){var t=this;return o(regeneratorRuntime.mark(function n(){var a,o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a={rtype:4,pageId:t._curPage,choiceId:e},n.next=3,cc.vv.gameData.reqSubGame(a);case 3:o=n.sent,cc.log(o),200===o.code&&o.data&&4==o.data.rtype&&t.showClickResult(o.data);case 6:case"end":return n.stop()}},n)}))()},showClickResult:function(e){var t=this;return o(regeneratorRuntime.mark(function n(){var a,o,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t._flagStore=e.flagStore,cc.vv.gameData.setFlagStore(t._flagStore),t.showCurMoney(t._flagStore.flagCnt),cc.vv.gameData.GetSlotsScript().setFlagCnt(t._flagStore.flagCnt),a=e.result,o=e.choiceId,n.next=8,t.setItemResult(o,a);case 8:if(t._flagStore.pageDetails[t._curPage-1].price>t._flagStore.flagCnt){for(i=1;i<=9;i++)t._itemList[i].type===r&&(t._itemList[i].type=s,t.setItemState(t._itemList[i].node,s,t._itemList[i].data));Global.SlotsSoundMgr.playEffect("caseunlock")}if(a.coin>0&&(cc.vv.gameData.AddCoin(a.coin),cc.vv.gameData.GetBottomScript().SetWin(a.coin),cc.vv.gameData.GetTopScript().ShowCoin()),!(a.freeInfo||a.bonusGame||a.pageReward)){n.next=57;break}return n.next=13,cc.vv.gameData.awaitTime(.5);case 13:return cc.vv.gameData.setIsBoxGame(!0),n.next=16,t.closeStorePage();case 16:if(!a.freeInfo){n.next=33;break}return cc.vv.gameData.SetTotalFree(a.freeInfo.freeCnt),cc.vv.gameData.SetFreeTime(a.freeInfo.freeCnt),n.next=21,cc.vv.gameData.awaitTime(.5);case 21:return n.next=23,cc.vv.gameData.getPopupScript().showFreeGameStartUI(a.freeInfo.freeCnt,!0);case 23:return cc.vv.gameData.getPopupScript().playFreeQPAnim(),n.next=26,cc.vv.gameData.awaitTime(2);case 26:return cc.vv.gameData.GetBottomScript().SetWin(0),cc.vv.gameData.GetSlotsScript().ShowGameview(!0),n.next=30,cc.vv.gameData.awaitTime(1);case 30:cc.vv.gameData.GetBottomScript().CanDoNextRound(),n.next=37;break;case 33:if(!a.bonusGame){n.next=37;break}return cc.vv.gameData.setBonusGame(a.bonusGame),n.next=37,cc.vv.gameData.getBonusGameMgr().showBonusGame(a.bonusGame,!0);case 37:if(!a.pageReward){n.next=55;break}return cc.vv.gameData.setPageReward(a.pageReward),cc.vv.gameData.setIsSuperFree(!0),cc.vv.gameData.SetTotalFree(a.pageReward.freeCnt),cc.vv.gameData.SetFreeTime(a.pageReward.freeCnt),n.next=44,cc.vv.gameData.awaitTime(.5);case 44:return n.next=46,cc.vv.gameData.getPopupScript().showSuperFreeStartFreeUI(a.pageReward);case 46:return cc.vv.gameData.getPopupScript().playFreeQPAnim(),n.next=49,cc.vv.gameData.awaitTime(2);case 49:return cc.vv.gameData.GetBottomScript().SetWin(0),cc.vv.gameData.GetBottomScript().ShowFreeModel(!0,0,a.pageReward.freeCnt),cc.vv.gameData.getSuperFreeMgr().initShowSlotsDate(),n.next=54,cc.vv.gameData.awaitTime(2);case 54:cc.vv.gameData.GetBottomScript().CanDoNextRound();case 55:n.next=58;break;case 57:t._canClickItem=!0;case 58:case"end":return n.stop()}},n)}))()},onClickCloseBtn:function(){this.closeStorePage(),cc.vv.gameData.GetBottomScript().ShowBtnsByState("idle")},playBoxTipAnim:function(e){var t=this;this._popBoxTix||(this._box_tip.stopAllActions(),this._box_tip.active?this._box_tip.runAction(cc.sequence(cc.scaleTo(this._box_tip.scaleX/2,0,0),cc.callFunc(function(){t._box_tip.active=!1}))):(Global.SlotsSoundMgr.playEffect("tips"),this._box_tip.position=this._box_tip.parent.convertToNodeSpaceAR(e.convertToWorldSpaceAR(cc.v2(0,0))),this._box_tip.active=!0,this._box_tip.setScale(0),this._box_tip.runAction(cc.sequence(cc.callFunc(function(){t._popBoxTix=!0}),cc.scaleTo(.5,1,1),cc.delayTime(1),cc.scaleTo(.5,0,0),cc.callFunc(function(){t._box_tip.active=!1,t._popBoxTix=!1})))))},clickHelpBtn:function(){var e=this;Global.SlotsSoundMgr.playEffect("tips"),this._spr_tip.stopAllActions(),this._spr_tip.active?this._spr_tip.runAction(cc.sequence(cc.scaleTo(this._spr_tip.scaleX/2,0,0),cc.callFunc(function(){e._spr_tip.active=!1}))):(this._spr_tip.active=!0,this._spr_tip.setScale(0),this._spr_tip.runAction(cc.sequence(cc.scaleTo(.5,1,1),cc.delayTime(1),cc.scaleTo(.5,0,0),cc.callFunc(function(){e._spr_tip.active=!1}))))},clickLeftBtn:function(){var e=this;return o(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e._canClickItem){t.next=2;break}return t.abrupt("return");case 2:return e._canClickItem=!1,Global.SlotsSoundMgr.playEffect("changebutton"),e._curPage<=1?e._curPage=4:e._curPage--,e.refreshDataWithAction(20),e.showPageFooter(),e.showPageWinDetail(),t.next=10,cc.vv.gameData.awaitTime(1);case 10:e._canClickItem=!0;case 11:case"end":return t.stop()}},t)}))()},clickRightBtn:function(){var e=this;return o(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e._canClickItem){t.next=2;break}return t.abrupt("return");case 2:return e._canClickItem=!1,Global.SlotsSoundMgr.playEffect("changebutton"),e._curPage>=4?e._curPage=1:e._curPage++,e.refreshDataWithAction(20),e.showPageFooter(),e.showPageWinDetail(),t.next=10,cc.vv.gameData.awaitTime(1);case 10:e._canClickItem=!0;case 11:case"end":return t.stop()}},t)}))()},refreshDataWithAction:function(e){var t=this;return o(regeneratorRuntime.mark(function n(){var a,o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:for(0!=e&&(t._node_items.stopAllActions(),t._node_items.x=0,t._node_items.runAction(cc.sequence(cc.spawn(cc.fadeTo(.15,63),cc.moveBy(.15,e,0)),cc.spawn(cc.fadeTo(.15,255),cc.moveBy(.15,-e,0))))),t.showAllItems(),a=1;a<=9;a++)(o=t._itemList[a].node).setScale(.1),o.stopAllActions(),o.runAction(cc.scaleTo(.1*a,1,1).easing(cc.easeBackOut()));case 3:case"end":return n.stop()}},n)}))()},showPageFooter:function(){for(var e=1;e<=4;e++){cc.find(cc.js.formatStr("layout/choose_bg/point%s/choice",e),this._node_box).active=e===this._curPage}},showPageWinDetail:function(){var e=cc.find("layout/node_lock",this._node_box),t=cc.find("layout/node_unlock",this._node_box);this._curPage<=this._flagStore.unlockPage?(e.active=!1,t.active=!0,cc.find("page",t).getComponent("ImgSwitchCmp").setIndex(this._curPage-1),cc.find("pan",t).getComponent("ImgSwitchCmp").setIndex(this._curPage-1)):(e.active=!0,t.active=!1,cc.find("page",e).getComponent("ImgSwitchCmp").setIndex(this._curPage-2))}}),cc._RF.pop()},{}],NewMulan_Cfg:[function(e,t,n){"use strict";var a;function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}cc._RF.push(t,"8489erpeaVLs5p9tMcEeC71","NewMulan_Cfg");var i={symbol:(a={},o(a,1,{node:"s1",win_node:"w1",win_ani:{intro_name:"Wild_Intro",name:"Wild_Loop2",zIndex:300},isMask:!0}),o(a,2,{node:"s2",win_node:"w2",win_ani:{name:"Scatter_Loop",zIndex:300},trigger_ani:{name:"Scatter_Loop",zIndex:300},stop_ani:{name:"Scatter_Intro",zIndex:100},isMask:!0}),o(a,3,{node:"s3",win_node:"w3",trigger_ani:{name:"Chip_JinBi_Loop2",zIndex:300},stop_ani:{name:"Chip_JinBi_Intro",zIndex:300},b_stop_ani:{name:"Chip_JinBi_Intro2",zIndex:300},b_idle_ani:{name:"Chip_JinBi_Loop1",zIndex:300},b_end_ani:{name:"Chip_JinBi_End2",zIndex:300},isMask:!1}),o(a,301,{node:"s301",win_node:"w301",b_stop_ani:{name:"Chip_Green_Intro",zIndex:300},b_idle_ani:{name:"Chip_Green_Loop",zIndex:300},b_end_ani:{name:"Chip_Green_End",zIndex:300},isMask:!1}),o(a,4,{node:"s4",win_node:"H1",win_ani:{name:"H1",zIndex:300},isMask:!0}),o(a,5,{node:"s5",win_node:"H2",win_ani:{name:"H2",zIndex:300},isMask:!0}),o(a,6,{node:"s6",win_node:"H3",win_ani:{name:"H3",zIndex:300},isMask:!0}),o(a,7,{node:"s7",win_node:"H4",win_ani:{name:"H4",zIndex:300},isMask:!0}),o(a,8,{node:"s8",win_node:"H5",win_ani:{name:"H5",zIndex:300},isMask:!0}),o(a,9,{node:"s9",win_node:"L1",win_ani:{name:"clean",zIndex:300},isMask:!0}),o(a,10,{node:"s10",win_node:"L2",win_ani:{name:"clean",zIndex:300},isMask:!0}),o(a,11,{node:"s11",win_node:"L3",win_ani:{name:"clean",zIndex:300},isMask:!0}),o(a,12,{node:"s12",win_node:"L4",win_ani:{name:"clean",zIndex:300},isMask:!0}),o(a,13,{node:"s13",win_node:"L5",win_ani:{name:"clean",zIndex:300},isMask:!0}),o(a,14,{node:"s0"}),a),scripts:{Top:"LMSlots_Top_Base",Bottom:"LMSlots_Bottom_Base",Slots:"NewMulan_Slots",Reels:"NewMulan_Reels",Symbols:"NewMulan_Symbol"},col:5,row:3,bonusCol:15,bonusRow:1,symbolPrefab:"LMSlots_Symbol",symbolSize:{height:123},randomSymbols:[1,2,3,4,5,6,7,8,9,10,11,12,13],randomBonusSymbols:[1,2,4,5,6,7,8,9,10,11,12,13],kuang:"kuang",autoModelDelay:1,speed:3e3,reelStopInter:.2,bonusReelStopInter:.2,auto_stop_time:1,bounceInfo:{distance:30,time:.1},helpItems:["games/NewMulan/prefab/help_node/LMSlots_Help_item1","games/NewMulan/prefab/help_node/LMSlots_Help_item2"],commEffect:{path:"games/NewMulan/",win1:["win_a","win_end"],win2:["win_b","win_end"],win3:["win_c","win_end"],win4:["win_d","win_end"]},AddAntiTime:1.8,normalBgm:"ngbgm",reelStateInfo:[{id:[2],mini:3,counts:[1,1,1,1,1],antiNode:"node_anti",path:"games/NewMulan/",reelStopSound:"reelstop",symbolStopSound:"scatter",antSound:"reelfast",antSpeed:2e3},{id:[3],mini:1,counts:[1,1,1,1,1],antiNode:"",path:"games/NewMulan/",reelStopSound:"reelstop",symbolStopSound:"nggold",antSound:"",antSpeed:2e3}]};t.exports=i,cc._RF.pop()},{}],NewMulan_GameData:[function(e,t,n){"use strict";cc._RF.push(t,"b17e3UWsDtF14XXaKMOhSNA","NewMulan_GameData"),cc.Class({extends:e("LMSlots_GameData_Base"),properties:{},RegisterMsg:function(){this._super(),cc.vv.NetManager.registerMsg(MsgId.SLOT_SUBGAME_DATA,this.onRcvSubGameAction,this)},UnregisterMsg:function(){this._super(),cc.vv.NetManager.unregisterMsg(MsgId.SLOT_SUBGAME_DATA,this.onRcvSubGameAction,!1,this)},init:function(e,t,n){cc.log(e),this._bonusGame=e.bonusGame,this._flagStore=e.flagStore,this._pageReward=e.pageReward,this._freeWinCoin=e.freeWinCoin,this._super(e,t,n)},OnRcvNetSpine:function(e){cc.log(e),200==e.code&&(this._bonusGame=e.bonusGame,this._flagStore=e.flagStore,this._pageReward=e.pageReward,this._freeWinCoin=e.freeWinCoin),this._super(e)},setPopupScript:function(e){this._popouScp=e},getPopupScript:function(){return this._popouScp},setBoxScript:function(e){this._boxScp=e},getBoxScript:function(){return this._boxScp},setBonusGameMgr:function(e){this._bonusMgr=e},getBonusGameMgr:function(){return this._bonusMgr},setSuperFreeMgr:function(e){this._superFreeMgr=e},getSuperFreeMgr:function(){return this._superFreeMgr},getFreeWinCoin:function(){return this._freeWinCoin},setFreeWinCoin:function(e){this._freeWinCoin=e},setIsBoxGame:function(e){this._isBoxGame=e},isBoxGame:function(){return this._isBoxGame},getPageReward:function(){return this._pageReward},setPageReward:function(e){this._pageReward=e},getNeedBet:function(){return this._deskInfo.needbet},getState:function(){return this._deskInfo.state},getFlagStore:function(){return this._flagStore},setFlagStore:function(e){this._flagStore=e},getBonusGame:function(){return this._bonusGame},setBonusGame:function(e){this._bonusGame=e},isSuperFree:function(){return this._isSuperFree},setIsSuperFree:function(e){this._isSuperFree=e},setIsFreeGame:function(e){this._isFreeGame=e},isFreeGame:function(){return this._isFreeGame},setIsBonusGame:function(e){this._isBonusGame=e},isBonusGame:function(){return this._isBonusGame},reqSubGame:function(e){var t=this;return new Promise(function(n){t._subCallBack=n;var a={c:MsgId.SLOT_SUBGAME_DATA,gameid:t._gameId,data:e};cc.vv.NetManager.send(a,!0)})},onRcvSubGameAction:function(e){this._subCallBack&&(this._subCallBack(e),this._subCallBack=null)}}),cc._RF.pop()},{LMSlots_GameData_Base:void 0}],NewMulan_Logic:[function(e,t,n){"use strict";cc._RF.push(t,"5babdPcnT9IerlruAjojaex","NewMulan_Logic"),cc.Class({extends:e("LMSlots_Logic_Base"),properties:{},InitCommComponent:function(){this._super();var e=this.node.addComponent("NewMulan_Popup");cc.vv.gameData.setPopupScript(e),e.Init();var t=this.node.addComponent("NewMulan_BoxGame");cc.vv.gameData.setBoxScript(t),t.Init();var n=this.node.addComponent("NewMulan_BonusGameMgr");cc.vv.gameData.setBonusGameMgr(n),n.Init();var a=this.node.addComponent("NewMulan_SFreeMgr");cc.vv.gameData.setSuperFreeMgr(a),a.Init()}}),cc._RF.pop()},{LMSlots_Logic_Base:void 0}],NewMulan_Popup:[function(e,t,n){"use strict";function a(e,t,n,a,o,i,r){try{var s=e[i](r),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(a,o)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(o,i){var r=e.apply(t,n);function s(e){a(r,o,i,s,c,"next",e)}function c(e){a(r,o,i,s,c,"throw",e)}s(void 0)})}}cc._RF.push(t,"cbb27gEgXdMaoPtJaD8JHWH","NewMulan_Popup"),cc.Class({extends:cc.Component,properties:{},Init:function(){this._node_popup=cc.find("safe_node/node_popup",this.node),this._node_popup.active=!1,this._bg_guochang=cc.find("BG_GuoChang",this._node_popup),this._fg_guochang=cc.find("FG_GuoChang",this._node_popup),this._bg_guochang.active=!1,this._fg_guochang.active=!1,this._bonusGameStartUI=cc.find("bonusGameStartUI",this._node_popup),this._gameWinUI=cc.find("gameWinUI",this._node_popup),this._freeGameStartUI=cc.find("freeGameStartUI",this._node_popup),this._bonusGameAddSpinsUI=cc.find("bonusGameAddSpins",this._node_popup),this._bonusGamePickOneUI=cc.find("bonusGamePickOneUI",this._node_popup),this._superFreeStartUI=cc.find("superFreeStartUI",this._node_popup),this._winJpUI=cc.find("winJpUI",this._node_popup),this._bonusGameStartUI.active=!1,this._gameWinUI.active=!1,this._freeGameStartUI.active=!1,this._bonusGameAddSpinsUI.active=!1,this._bonusGamePickOneUI.active=!1,this._superFreeStartUI.active=!1,this._winJpUI.active=!1},showGameWinUI:function(e,t){var n=this;return new Promise(function(){var a=o(regeneratorRuntime.mark(function a(i,r){var s,c,u;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:n._node_popup.active=!0,cc.find("mask",n._node_popup).active=!0,t?(n._bg_guochang.active=!0,n._bg_guochang.getComponent(sp.Skeleton).setAnimation(0,"BG_GuoChang_Intro",!1),n._bg_guochang.getComponent(sp.Skeleton).addAnimation(0,"BG_GuoChang_Loop",!0)):Global.SlotsSoundMgr.playEffect("fg_bg_end"),n._gameWinUI.active=!0,n._gameWinUI.setScale(0),cc.tween(n._gameWinUI).to(.5,{scale:1},{easing:"backOut"}).start(),cc.find("total_grand/lbl",n._gameWinUI).getComponent(cc.Label).string=Global.FormatNumToComma(e),(s=cc.find("FG_btn",n._gameWinUI)).off("click"),s.getComponent(cc.Button).interactable=!0,c=n,u=function(){var e=o(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s.getComponent(cc.Button).interactable=!1,cc.tween(c._gameWinUI).to(.5,{scale:0},{easing:"backIn"}).start(),e.next=4,cc.vv.gameData.awaitTime(.3);case 4:if(!t){e.next=10;break}return c._bg_guochang.getComponent(sp.Skeleton).setAnimation(0,"BG_GuoChang_End",!1),e.next=8,cc.vv.gameData.awaitTime(.8);case 8:e.next=12;break;case 10:return e.next=12,cc.vv.gameData.awaitTime(.2);case 12:c._node_popup.active=!1,c._bg_guochang.active=!1,c._gameWinUI.active=!1,i();case 16:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),cc.vv.gameData.checkAutoPlay(s,u),s.on("click",o(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s.stopAllActions(),u();case 2:case"end":return e.stop()}},e)})));case 14:case"end":return a.stop()}},a)}));return function(e,t){return a.apply(this,arguments)}}())},showBonusStartUI:function(e){var t=this;return o(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise(function(){var n=o(regeneratorRuntime.mark(function n(a,o){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return Global.SlotsSoundMgr.playEffect("bgTransition"),t._node_popup.active=!0,cc.find("mask",t._node_popup).active=!0,t._bg_guochang.active=!0,t._bg_guochang.getComponent(sp.Skeleton).setAnimation(0,"BG_GuoChang_Intro",!1),t._bg_guochang.getComponent(sp.Skeleton).addAnimation(0,"BG_GuoChang_Loop",!0),t._bonusGameStartUI.active=!0,t._bonusGameStartUI.setScale(0),cc.tween(t._bonusGameStartUI).to(.5,{scale:1},{easing:"backOut"}).start(),cc.find("BGOne/ACTIVATED_EN",t._bonusGameStartUI).getComponent("ImgSwitchCmp").setIndex(e-1),n.next=12,cc.vv.gameData.awaitTime(2);case 12:return cc.tween(t._bonusGameStartUI).to(.5,{scale:0},{easing:"backIn"}).start(),n.next=15,cc.vv.gameData.awaitTime(.3);case 15:t._bg_guochang.getComponent(sp.Skeleton).setAnimation(0,"BG_GuoChang_End",!1),t._node_popup.active=!1,t._bg_guochang.active=!1,t._bonusGameStartUI.active=!1,a();case 20:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}()));case 1:case"end":return n.stop()}},n)}))()},showBonusAddSpinsUI:function(){var e=this;return o(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=o(regeneratorRuntime.mark(function t(n,a){var i,r,s,c,u,l,p,m;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(Global.SlotsSoundMgr.playEffect("wandshow"),e._node_popup.active=!0,cc.find("mask",e._node_popup).active=!0,e._bonusGameAddSpinsUI.active=!0,e._bonusGameAddSpinsUI.setScale(0),cc.tween(e._bonusGameAddSpinsUI).to(.5,{scale:1},{easing:"backOut"}).start(),i=cc.find("select_additional_EN",e._bonusGameAddSpinsUI),r=cc.find("youve_won_EN",e._bonusGameAddSpinsUI),i.active=!0,r.active=!1,s=!0,c=[],u=1;u<=3;u++)l=cc.find("number"+u,e._bonusGameAddSpinsUI),c.push(l);p=e,m=function(){var e=o(regeneratorRuntime.mark(function e(t,a){var o,u,l,m,_,g,f,v;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=2;break}return e.abrupt("return");case 2:return s=!1,c[0].stopAllActions(),t.getComponent(cc.Button).interactable=!1,o=cc.find("lingpai",t).getComponent(sp.Skeleton),Global.SlotsSoundMgr.playEffect("wandclick"),u={rtype:2,choiceId:a+1},e.next=10,cc.vv.gameData.reqSubGame(u);case 10:if(!(l=e.sent)||200!=l.code||2!=l.data.rtype){e.next=31;break}return m=l.data.extraSpins,_=l.data.bonusGame,cc.vv.gameData.setBonusGame(_),i.active=!1,r.active=!0,o.setSkin(cc.js.formatStr("result_bg_%s_EN",m[a])),o.setAnimation(0,"lingpai_bg_click",!1),Global.SlotsSoundMgr.playEffect("wandreverse"),e.next=22,cc.vv.gameData.awaitTime(1.3);case 22:for(g=0;g<c.length;g++)g!=a&&(f=c[g],(v=cc.find("lingpai",f).getComponent(sp.Skeleton)).setSkin(cc.js.formatStr("result_bg_%s_EN",m[g])),v.setAnimation(0,"lingpai_bg_grey",!1));return e.next=25,cc.vv.gameData.awaitTime(2);case 25:return cc.tween(p._bonusGameAddSpinsUI).to(.5,{scale:0},{easing:"backIn"}).start(),e.next=28,cc.vv.gameData.awaitTime(.5);case 28:p._bonusGameAddSpinsUI.active=!1,p._node_popup.active=!1,n();case 31:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),cc.vv.gameData.checkAutoPlay(c[0],function(){m(c[0],0)}),c.forEach(function(e,t){var n=cc.find("lingpai",e).getComponent(sp.Skeleton);n.setSkin("default"),n.setAnimation(0,"lingpai_bg_idle",!0),e.off("click"),e.getComponent(cc.Button).interactable=!0,e.on("click",o(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:m(e,t);case 1:case"end":return n.stop()}},n)})))});case 17:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},showFreeGameStartUI:function(e,t){var n=this;return o(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new Promise(function(){var a=o(regeneratorRuntime.mark(function a(i,r){var s,c,u;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return Global.SlotsSoundMgr.playEffect(t?"fgbegin":"fgretrigger"),n._node_popup.active=!0,cc.find("mask",n._node_popup).active=!0,n._freeGameStartUI.active=!0,n._freeGameStartUI.setScale(0),cc.tween(n._freeGameStartUI).to(.5,{scale:1},{easing:"backOut"}).start(),cc.find("lbl",n._freeGameStartUI).getComponent(cc.Label).string=e,cc.find("freeGame",n._freeGameStartUI).active=t,cc.find("extraFreeGame",n._freeGameStartUI).active=!t,(s=cc.find("FG_btn",n._freeGameStartUI)).active=t,a.next=13,cc.vv.gameData.awaitTime(.5);case 13:if(!t){a.next=22;break}c=n,u=function(){var e=o(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s.getComponent(cc.Button).interactable=!1,cc.tween(c._freeGameStartUI).to(.5,{scale:0},{easing:"backIn"}).start(),e.next=4,cc.vv.gameData.awaitTime(.5);case 4:c._freeGameStartUI.active=!1,c._node_popup.active=!1,i();case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),cc.vv.gameData.checkAutoPlay(s,u),s.off("click"),s.getComponent(cc.Button).interactable=!0,s.on("click",o(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s.stopAllActions(),u();case 2:case"end":return e.stop()}},e)}))),a.next=30;break;case 22:return a.next=24,cc.vv.gameData.awaitTime(2);case 24:return cc.tween(n._freeGameStartUI).to(.5,{scale:0},{easing:"backIn"}).start(),a.next=27,cc.vv.gameData.awaitTime(.5);case 27:n._freeGameStartUI.active=!1,n._node_popup.active=!1,i();case 30:case"end":return a.stop()}},a)}));return function(e,t){return a.apply(this,arguments)}}()));case 1:case"end":return a.stop()}},a)}))()},showBonusGamePickOneUI:function(){var e=this;return o(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=o(regeneratorRuntime.mark(function t(n,a){var i,r,s,c,u,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(Global.SlotsSoundMgr.playEffect("wandshow"),e._node_popup.active=!0,cc.find("mask",e._node_popup).active=!0,e._bonusGamePickOneUI.active=!0,e._bonusGamePickOneUI.setScale(0),cc.tween(e._bonusGamePickOneUI).to(.5,{scale:1},{easing:"backOut"}).start(),i=!0,r=[],s=1;s<=5;s++)c=cc.find("item"+s,e._bonusGamePickOneUI),r.push(c);u=e,l=function(){var e=o(regeneratorRuntime.mark(function e(t,a){var o,s,c,l,p,m,_,g,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=2;break}return e.abrupt("return");case 2:return i=!1,t.getComponent(cc.Button).interactable=!1,o=cc.find("lingpai",t).getComponent(sp.Skeleton),Global.SlotsSoundMgr.playEffect("wandclick"),s={rtype:1,choiceId:a+1},e.next=9,cc.vv.gameData.reqSubGame(s);case 9:if(!(c=e.sent)||200!=c.code||1!=c.data.rtype){e.next=29;break}return l=c.data.result,p=c.data.bonusTypes,m=c.data.bonusGame,cc.vv.gameData.setBonusGame(m),o.setSkin(cc.js.formatStr("result_fg_%s_EN",l.spinCnt)),o.setAnimation(0,"lingpai_fg_click",!1),Global.SlotsSoundMgr.playEffect("wandreverse"),e.next=20,cc.vv.gameData.awaitTime(1.3);case 20:for(_=0;_<r.length;_++)_!=a&&(g=r[_],(f=cc.find("lingpai",g).getComponent(sp.Skeleton)).setSkin(cc.js.formatStr("result_fg_%s_EN",p[_].spinCnt)),f.setAnimation(0,"lingpai_fg_grey",!1));return e.next=23,cc.vv.gameData.awaitTime(2);case 23:return cc.tween(u._bonusGamePickOneUI).to(.5,{scale:0},{easing:"backIn"}).start(),e.next=26,cc.vv.gameData.awaitTime(.5);case 26:u._bonusGamePickOneUI.active=!1,u._node_popup.active=!1,n();case 29:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),cc.vv.gameData.checkAutoPlay(r[0],function(){l(r[0],0)}),r.forEach(function(e,t){var n=cc.find("lingpai",e).getComponent(sp.Skeleton);n.setSkin("default"),n.setAnimation(0,"lingpai_fg_idle",!0),e.off("click"),e.getComponent(cc.Button).interactable=!0,e.on("click",o(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:l(e,t);case 1:case"end":return n.stop()}},n)})))});case 13:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},showSuperFreeStartFreeUI:function(e){var t=this;return o(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise(function(){var n=o(regeneratorRuntime.mark(function n(a,i){var r,s,c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t._node_popup.active=!0,cc.find("mask",t._node_popup).active=!0,t._superFreeStartUI.active=!0,t._superFreeStartUI.setScale(0),cc.tween(t._superFreeStartUI).to(.5,{scale:1},{easing:"backOut"}).start(),cc.find("lbl",t._superFreeStartUI).getComponent(cc.Label).string=e.freeCnt,cc.find("slots_cnt",t._superFreeStartUI).getComponent("ImgSwitchCmp").setIndex(e.slotCnt-1),cc.find("OneTable",t._superFreeStartUI).getComponent("ImgSwitchCmp").setIndex(4==e.slotCnt?1:0),(r=cc.find("FG_btn",t._superFreeStartUI)).off("click"),r.getComponent(cc.Button).interactable=!0,n.next=13,cc.vv.gameData.awaitTime(.5);case 13:s=t,c=function(){var e=o(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.getComponent(cc.Button).interactable=!1,cc.tween(s._superFreeStartUI).to(.5,{scale:0},{easing:"backIn"}).start(),e.next=4,cc.vv.gameData.awaitTime(.5);case 4:s._superFreeStartUI.active=!1,s._node_popup.active=!1,a();case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),cc.vv.gameData.checkAutoPlay(r,c),r.on("click",o(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r.stopAllActions(),c();case 2:case"end":return e.stop()}},e)})));case 17:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}()));case 1:case"end":return n.stop()}},n)}))()},showWinJpUI:function(e,t){var n=this;return o(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new Promise(function(){var a=o(regeneratorRuntime.mark(function a(i,r){var s,c,u;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n._node_popup.active=!0,cc.find("mask",n._node_popup).active=!0,n._winJpUI.active=!0,n._winJpUI.setScale(0),cc.tween(n._winJpUI).to(.5,{scale:1},{easing:"backOut"}).start(),cc.find("jpmini_EN",n._winJpUI).getComponent("ImgSwitchCmp").setIndex(e-1),cc.find("lbl",n._winJpUI).getComponent(cc.Label).string=Global.FormatNumToComma(t),(s=cc.find("FG_btn",n._winJpUI)).off("click"),s.getComponent(cc.Button).interactable=!0,a.next=12,cc.vv.gameData.awaitTime(.5);case 12:c=n,u=function(){var e=o(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s.getComponent(cc.Button).interactable=!1,cc.tween(c._winJpUI).to(.5,{scale:0},{easing:"backIn"}).start(),e.next=4,cc.vv.gameData.awaitTime(.5);case 4:c._winJpUI.active=!1,c._node_popup.active=!1,i();case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),cc.vv.gameData.checkAutoPlay(s,u),s.on("click",o(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s.stopAllActions(),u();case 2:case"end":return e.stop()}},e)})));case 16:case"end":return a.stop()}},a)}));return function(e,t){return a.apply(this,arguments)}}()));case 1:case"end":return a.stop()}},a)}))()},playFreeQPAnim:function(){var e=this;return o(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=cc.find("Canvas/safe_node/character"),Global.SlotsSoundMgr.playEffect("fgTransition"),e._node_popup.active=!0,n.active=!1,cc.find("mask",e._node_popup).active=!1,e._fg_guochang.active=!0,e._fg_guochang.getComponent(sp.Skeleton).setAnimation(0,"skill",!1),e._fg_guochang.getComponent(sp.Skeleton).setCompleteListener(function(){e._fg_guochang.getComponent(sp.Skeleton).setCompleteListener(),e._node_popup.active=!1,e._fg_guochang.active=!1}),t.next=10,cc.vv.gameData.awaitTime(2);case 10:n.active=!0;case 11:case"end":return t.stop()}},t)}))()}}),cc._RF.pop()},{}],NewMulan_Reels:[function(e,t,n){"use strict";cc._RF.push(t,"1d6e8wCTnlCSozY6fBrIArP","NewMulan_Reels"),cc.Class({extends:e("LMSlots_Reel_Base"),properties:{}}),cc._RF.pop()},{LMSlots_Reel_Base:void 0}],NewMulan_SFreeMgr:[function(e,t,n){"use strict";function a(e,t,n,a,o,i,r){try{var s=e[i](r),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(a,o)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(o,i){var r=e.apply(t,n);function s(e){a(r,o,i,s,c,"next",e)}function c(e){a(r,o,i,s,c,"throw",e)}s(void 0)})}}cc._RF.push(t,"21199hQwmNFBroAtxv3gNPI","NewMulan_SFreeMgr"),cc.Class({extends:cc.Component,properties:{_slotsNodeList:[],_slotsScpList:[]},Init:function(){this._node_superFree=cc.find("safe_node/super_free",this.node),this._slots=cc.find("slots",this._node_superFree);for(var e=1;e<=4;e++){var t=cc.find("slots_"+e,this._slots),n=t.addComponent("NewMulan_SFreeSlots");n.Init(e),this._slotsNodeList.push(t),this._slotsScpList.push(n)}this._node_superFree.active=!1},start:function(){},StartMove:function(){for(var e=0;e<this._slotsNodeList.length;e++)e<this._slotCnt&&this._slotsScpList[e].StartMove()},StopMove:function(){for(var e=0;e<this._slotsNodeList.length;e++)e<this._slotCnt&&this._slotsScpList[e].StopMove()},onMsgSpine:function(e){this._gameInfo=e;for(var t=e.freeGameSlots,n=0;n<this._slotsNodeList.length;n++)n<this._slotCnt&&this._slotsScpList[n].onMsgSpine(t[n])},OnSpinEnd:function(){var e=this;return o(regeneratorRuntime.mark(function t(){var n,a,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(n=0;n<e._slotsNodeList.length;n++)n<e._slotCnt&&e._slotsScpList[n].OnSpinEnd();return e,a=cc.vv.gameData.GetGameWin(),o=a,cc.vv.gameData.GetTotalFree()>0&&cc.vv.gameData.GetTotalFree()!=cc.vv.gameData.GetFreeTime()&&(o=cc.vv.gameData.GetGameTotalFreeWin()),t.next=7,new Promise(function(e,t){cc.vv.gameData.GetSlotsScript().ShowBottomWin(a,o,!0,function(){e()})});case 7:if(!(e._gameInfo.allFreeCnt>0&&0==e._gameInfo.freeCnt)){t.next=10;break}return e.endSuperFree(),t.abrupt("return");case 10:cc.vv.gameData.GetSlotsScript().CanDoNextRound();case 11:case"end":return t.stop()}},t)}))()},GetLastStopReelIdx:function(){return this._slotsScpList[0].GetLastStopReelIdx()},initShowSlotsDate:function(){Global.SlotsSoundMgr.playBgm("free_bgm"),this._node_superFree.active=!0,cc.vv.gameData.GetSlotsScript().setFlagState(!1);var e=cc.vv.gameData.getPageReward();this._slotCnt=e.slotCnt;for(var t=e.wildCols,n=0;n<this._slotsNodeList.length;n++)n<this._slotCnt?(this._slotsNodeList[n].active=!0,this._slotsScpList[n].iniAllSymbol(),this._slotsScpList[n].setWildCols(t)):this._slotsNodeList[n].active=!1;cc.find("node_frame/character",this._node_superFree).active=1===this._slotCnt,this.setSlotsScale()},endSuperFree:function(){var e=this;return o(regeneratorRuntime.mark(function t(){var n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,cc.vv.gameData.awaitTime(1);case 2:return cc.vv.gameData.GetBottomScript().ShowBtnsByState("moveing_1"),n=cc.vv.gameData.GetGameTotalFreeWin(),t.next=6,cc.vv.gameData.getPopupScript().showGameWinUI(n);case 6:return cc.vv.gameData.getPopupScript().playFreeQPAnim(),t.next=9,cc.vv.gameData.awaitTime(2);case 9:for(cc.vv.gameData.GetBottomScript().ShowFreeModel(!1),Global.SlotsSoundMgr.stopBgm(),e._node_superFree.active=!1,cc.vv.gameData.GetSlotsScript().setFlagState(!0),a=0;a<e._slotsNodeList.length;a++)e._slotsScpList[a].iniAllSymbol();return t.next=16,cc.vv.gameData.awaitTime(2);case 16:return cc.vv.gameData.setIsSuperFree(!1),t.next=19,new Promise(function(e){cc.vv.gameData.GetSlotsScript().ShowBottomWin(n,n,!0,function(){e()})});case 19:cc.vv.gameData.GetBottomScript().CanDoNextRound(),cc.vv.gameData.isBoxGame()&&(cc.vv.gameData.getBoxScript().openStorePage(),cc.vv.gameData.setIsBoxGame(!1));case 21:case"end":return t.stop()}},t)}))()},setSlotsScale:function(){this._slots.setScale([1,1,.7,.7][this._slotCnt-1]),this._slots.getComponent(cc.Widget).updateAlignment();for(var e=1;e<=4;e++)cc.find("node_frame/frame"+e,this._node_superFree).active=this._slotCnt==e}}),cc._RF.pop()},{}],NewMulan_SFreeReel:[function(e,t,n){"use strict";cc._RF.push(t,"ca474YRJ35NzakH20Txdxwq","NewMulan_SFreeReel"),cc.Class({extends:e("LMSlots_Reel_Base"),properties:{},start:function(){},Init:function(e,t,n){this._holderNode=cc.find("mask/holder",this.node),this._holderOrigPosY=this._holderNode.position.y,this._super(e,t,n)},setSlotType:function(e){this._slotsType=e},OnReelSpinEnd:function(){this._reelState=[];var e=cc.vv.gameData.getSuperFreeMgr().GetLastStopReelIdx();1==this._slotsType&&this._reelIdx==e&&cc.vv.gameData.getSuperFreeMgr().OnSpinEnd()},ReadyToStop:function(){this._bNotifyReadyStop||(this._bNotifyReadyStop=!0)},OnReelBounsActionBefore:function(){if(this._originResult)for(var e=0;e<this._originResult.length;e++)this._symbols[e].StopMoveBefore()},OnReelBounsActionDeep:function(){if(this.playReelStop(),this._originResult)for(var e=0;e<this._originResult.length;e++)this._symbols[e].StopMoveDeep();Global.SlotsSoundMgr.playEffect("reelstop")},OnReelBounsActionEnd:function(){if(this._originResult)for(var e=0;e<this._originResult.length;e++)this._symbols[e].StopMoveEnd();else cc.log("\u56de\u5f39\u7ed3\u675f\uff0c\u6570\u636e\u5df2\u7ecf\u88ab\u6e05\u7a7a\u4e86");this.OnReelSpinEnd()}}),cc._RF.pop()},{LMSlots_Reel_Base:void 0}],NewMulan_SFreeSlots:[function(e,t,n){"use strict";cc._RF.push(t,"73d0awCTHNN5ZP4MaoV0XFW","NewMulan_SFreeSlots"),cc.Class({extends:e("LMSlots_Slots_Base"),properties:{_wildCols:[]},start:function(){},Init:function(e){this._slotsType=e,this._topScript=cc.vv.gameData.GetTopScript(),this._bottomScript=cc.vv.gameData.GetBottomScript(),this._cfg=cc.vv.gameData.getGameCfg(),this._col=this._cfg.col,this._row=this._cfg.row,this._topAniNode=cc.find("top_ani",this.node),this.createReels(this._col,this._row,e)},createReels:function(e,t,n){for(var a=0;a<e;a++){var o=cc.find("reels/reel"+(a+1),this.node).addComponent("NewMulan_SFreeReel");o.Init(a,t,this._topAniNode),o.setSlotType(n),this._reels.push(o)}},setWildCols:function(e){this._wildCols=e;for(var t=0;t<e.length;t++)for(var n=0;n<this._row;n++)this._reels[e[t]-1].GetSymbolByRow(n).ShowById(1)},iniAllSymbol:function(){for(var e=0;e<this._reels.length;e++)for(var t=0;t<this._row;t++)this._reels[e].GetSymbolByRow(t).ClearState()},StartMove:function(){var e=this;this._bStopRightnow=null,this._gameInfo=null,this._topScript.StartMove(),cc.vv.gameData.ClearOneRoundData();var t=[],n=this;this._reels.forEach(function(a){if(e._wildCols.includes(a.GetReelIdx()+1))for(var o=0;o<n._row;o++)a.GetSymbolByRow(o).ClearState();else t.push(a)}),this.MoveReels(t),this._stopTime=this.GetStopTime()},onMsgSpine:function(e){this._gameInfo=e;var t=e.cards;this.SetSlotsResult(t)},OnSpinEnd:function(){this.ShowWinTrace()},GetReelStopInter:function(e){var t=this._cfg.reelStopInter||.6,n=cc.vv.gameData.getPageReward();return(e+this._col*(n.slotCnt-this._slotsType)*.1)*t}}),cc._RF.pop()},{LMSlots_Slots_Base:void 0}],NewMulan_Slots:[function(e,t,n){"use strict";function a(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=o(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,r=!0,s=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return r=e.done,e},e:function(e){s=!0,i=e},f:function(){try{r||null==a.return||a.return()}finally{if(s)throw i}}}}function o(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function r(e,t,n,a,o,i,r){try{var s=e[i](r),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(a,o)}function s(e){return function(){var t=this,n=arguments;return new Promise(function(a,o){var i=e.apply(t,n);function s(e){r(i,a,o,s,c,"next",e)}function c(e){r(i,a,o,s,c,"throw",e)}s(void 0)})}}cc._RF.push(t,"96510S1xHlMnIhvaqG644EX","NewMulan_Slots"),cc.Class({extends:e("LMSlots_Slots_Base"),properties:{},start:function(){},Init:function(){this._btn_entrance=cc.find("btn_entrance",this.node);var e=cc.find("btn_entrance/wenhao",this.node);cc.find("btn_entrance/spr_tip",this.node).active=!1,this._node_bonusType=cc.find("BetUp",this.node),Global.btnClickEvent(this._btn_entrance,this.onClickBoxBtn,this),Global.btnClickEvent(e,this.onClickBoxWenhaoBtn,this),Global.btnClickEvent(this._node_bonusType,this.onclickBonusType,this),this._super(),this.initLockState(),this.setFlagCnt(cc.vv.gameData.getFlagStore().flagCnt)},RegisterEvent:function(){this._super(),Global.registerEvent(cc.vv.gameData._EventId.SLOT_TOTALBET_UPDATED,this.onEventTotalbetUpdated,this)},ReconnectShow:function(){var e=this;return s(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e._topScript.SetBackLobby(!1),e._bottomScript.ShowBtnsByState("moveing_1"),e.ShowGameview(!1),cc.vv.gameData.getPageReward()?(cc.vv.gameData.setIsSuperFree(!0),cc.vv.gameData.GetBottomScript().ShowFreeModel(!0,cc.vv.gameData.GetFreeTime(),cc.vv.gameData.GetTotalFree()),cc.vv.gameData.getSuperFreeMgr().initShowSlotsDate()):cc.vv.gameData.GetTotalFree()>0&&e.ShowGameview(!0),!(n=cc.vv.gameData.getBonusGame())){t.next=8;break}return t.next=8,cc.vv.gameData.getBonusGameMgr().showBonusGame(n);case 8:if(!(cc.vv.gameData.GetTotalFree()>0&&0==cc.vv.gameData.GetFreeTime())){t.next=11;break}return t.next=11,e.endFreeGame();case 11:e._topScript.StopMove(),e._bottomScript.CanDoNextRound();case 13:case"end":return t.stop()}},t)}))()},StartMove:function(){cc.vv.gameData.isSuperFree()?cc.vv.gameData.getSuperFreeMgr().StartMove():cc.vv.gameData.isBonusGame()||(this._super(),Global.SlotsSoundMgr.playNormalBgm())},StopMove:function(){cc.vv.gameData.isSuperFree()?cc.vv.gameData.getSuperFreeMgr().StopMove():cc.vv.gameData.isBonusGame()?cc.vv.gameData.getBonusGameMgr().StopMove():this._super()},SetSlotsResult:function(e){var t,n=e.length/this._col,a=[],o=this._gameInfo.flagInfo;o&&o.idxs&&(t=o.idxs);for(var i=this._gameInfo.bonusIdxs,r=this._gameInfo.bonusItems,s=0;s<e.length;s++){Math.floor(s/n);var c=s%this._col;if(this._cfg.symbol[e[s]]){var u={};u.sid=e[s],u.data={},t&&t.includes(s+1)&&(u.data.flag=1),i&&i.includes(s+1)&&(u.data.bonus=r[i.indexOf(s+1)]),a[c]||(a[c]=[]),a[c].unshift(u)}}for(var l=0;l<this._reels.length;l++){var p=this._reels[l],m=a[l];p.SetResult(m)}},onMsgSpine:function(e){if(cc.vv.gameData.isSuperFree())cc.vv.gameData.getSuperFreeMgr().onMsgSpine(e);else{this._super(e);var t=this._gameInfo.freeResult.freeInfo&&this._gameInfo.freeResult.freeInfo.freeCnt>0,n=this._gameInfo.bonusGame,a=this._gameInfo.winCoin/cc.vv.gameData.GetTotalBet()>=40;Math.random()<.25&&(t||n||a)&&(this.SetStopTime(3),this.triggerRandomGame())}},OnSpinEnd:function(){this.onSpinEndAction()},onSpinEndAction:function(){var e=this;return s(regeneratorRuntime.mark(function t(){var n,a,o,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(n=e._gameInfo.flagInfo)&&n.totalCnt>0&&e.flyFlag(e._gameInfo.flagStore.flagCnt),e.ShowWinTrace(),a=cc.vv.gameData.GetGameWin(),o=a,cc.vv.gameData.GetTotalFree()>0&&cc.vv.gameData.GetTotalFree()!=cc.vv.gameData.GetFreeTime()&&(o=cc.vv.gameData.getFreeWinCoin()),t.next=8,new Promise(function(t,n){e.ShowBottomWin(a,o,!0,t)});case 8:if(!e._gameInfo.bonusGame){t.next=11;break}return t.next=11,e.triBonusGame();case 11:if(!((i=e._gameInfo.freeResult.freeInfo)&&i.freeCnt>0)){t.next=15;break}return t.next=15,e.triFreeGame();case 15:if(!(e._gameInfo.allFreeCnt>0&&0==e._gameInfo.freeCnt)){t.next=18;break}return t.next=18,e.endFreeGame();case 18:e.CanDoNextRound();case 19:case"end":return t.stop()}},t)}))()},triBonusGame:function(){var e=this;return new Promise(function(){var t=s(regeneratorRuntime.mark(function t(n,o){var i,r,s,c,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=e._gameInfo.bonusIdxs,r=a(i);try{for(r.s();!(s=r.n()).done;)c=s.value,(u=e.GetSymbolByIdx(c))&&u.playTriggerAnimation()}catch(e){r.e(e)}finally{r.f()}return Global.SlotsSoundMgr.playEffect("triggering"),t.next=6,cc.vv.gameData.awaitTime(1.5);case 6:return t.next=8,cc.vv.gameData.getPopupScript().showBonusStartUI(e._gameInfo.bonusGame.type);case 8:return t.next=10,cc.vv.gameData.getBonusGameMgr().showBonusGame(e._gameInfo.bonusGame,!0);case 10:n();case 11:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}())},triFreeGame:function(){var e=this;return new Promise(function(){var t=s(regeneratorRuntime.mark(function t(n,a){var o,i,r,s,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o=e._gameInfo.freeCnt===e._gameInfo.allFreeCnt,i=e._gameInfo.freeResult.freeInfo,!o){t.next=19;break}for(r=i.scatterIdx,s=0;s<r.length;s++)(c=e.GetSymbolByIdx(r[s]))&&c.playTriggerAnimation();return Global.SlotsSoundMgr.playEffect("triggering"),t.next=8,cc.vv.gameData.awaitTime(1.5);case 8:return t.next=10,cc.vv.gameData.getPopupScript().showFreeGameStartUI(i.freeCnt,o);case 10:return cc.vv.gameData.getPopupScript().playFreeQPAnim(),t.next=13,cc.vv.gameData.awaitTime(2);case 13:return e.Backup(),e.ShowGameview(!0),t.next=17,cc.vv.gameData.awaitTime(1);case 17:t.next=21;break;case 19:return t.next=21,cc.vv.gameData.getPopupScript().showFreeGameStartUI(i.freeCnt,o);case 21:n();case 22:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}())},endFreeGame:function(){var e=this;return new Promise(function(){var t=s(regeneratorRuntime.mark(function t(n,a){var o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=cc.vv.gameData.getFreeWinCoin(),Global.SlotsSoundMgr.playEffect("fgend"),t.next=4,cc.vv.gameData.getPopupScript().showGameWinUI(o);case 4:return cc.vv.gameData.getPopupScript().playFreeQPAnim(),t.next=7,cc.vv.gameData.awaitTime(2);case 7:return e.Resume(),e.ShowGameview(!1),Global.SlotsSoundMgr.stopBgm(),t.next=12,cc.vv.gameData.awaitTime(1);case 12:return t.next=14,new Promise(function(t,n){e.ShowBottomWin(o,o,!0,t)});case 14:cc.vv.gameData.isBoxGame()?(cc.vv.gameData.getBoxScript().openStorePage(),cc.vv.gameData.setIsBoxGame(!1)):n();case 15:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}())},setFlagState:function(e){this._btn_entrance.active=e},setFlagCnt:function(e){cc.find("lbl",this._btn_entrance).getComponent(cc.Label).string=Global.FormatNumToComma(e)},initLockState:function(){var e=cc.vv.gameData.GetBetIdx(),t=cc.vv.gameData.getNeedBet();cc.find("bg",this._node_bonusType).getComponent("ImgSwitchCmp").setIndex(e>=t?1:0);var n=cc.find("betup_EN",this._node_bonusType),a=cc.find("BetUp",this._node_bonusType),o=cc.find("loading_box",this._btn_entrance),i=cc.find("QiZi",this._btn_entrance),r=cc.find("Puzzle_collect_logo",this._btn_entrance);e>=t?(this._isLock=!1,n.active=!0,a.active=!1,o.active=!1,i.active=!0,i.getComponent(sp.Skeleton).setAnimation(0,"QiZi_loop",!0),r.active=!1):(this._isLock=!0,n.active=!1,a.active=!0,a.getComponent(sp.Skeleton).setAnimation(0,"BetUp_Loop_EN",!1),o.active=!0,i.active=!1,r.active=!0,r.getComponent(sp.Skeleton).setAnimation(0,"lock_idle_EN",!0))},onClickBoxWenhaoBtn:function(){var e=cc.find("btn_entrance/spr_tip",this.node);e.stopAllActions(),e.active?e.runAction(cc.sequence(cc.scaleTo(e.scaleX/2,0,0),cc.callFunc(function(){e.active=!1}))):(Global.SlotsSoundMgr.playEffect("tips"),e.active=!0,e.setScale(0),e.runAction(cc.sequence(cc.scaleTo(.5,1,1),cc.delayTime(1),cc.scaleTo(.5,0,0),cc.callFunc(function(){e.active=!1}))))},onClickBoxBtn:function(){if(cc.vv.gameData.GetBottomScript().GetSpinBtnState()&&!(cc.vv.gameData.GetAutoModelTime()>0||cc.vv.gameData.isFreeGame()||cc.vv.gameData.isBonusGame()))if(this._isLock){var e=cc.vv.gameData.GetBetMults(),t=cc.vv.gameData.getNeedBet();t>e.length||cc.vv.gameData.GetBottomScript().SetBetIdx(t)}else cc.vv.gameData.getBoxScript().openStorePage()},onclickBonusType:function(){if(cc.vv.gameData.GetBottomScript().GetSpinBtnState()&&!(cc.vv.gameData.GetAutoModelTime()>0)&&!cc.vv.gameData.isFreeGame()&&!cc.vv.gameData.isBonusGame()&&this._isLock){var e=cc.vv.gameData.getNeedBet();e>cc.vv.gameData.GetBetMults().length||cc.vv.gameData.GetBottomScript().SetBetIdx(e)}},onEventTotalbetUpdated:function(){var e=cc.vv.gameData.GetBetIdx(),t=cc.vv.gameData.getNeedBet(),n=cc.find("bg",this._node_bonusType),a=cc.find("betup_EN",this._node_bonusType),o=cc.find("BetUp",this._node_bonusType),i=cc.find("loading_box",this._btn_entrance),r=cc.find("QiZi",this._btn_entrance),s=cc.find("Puzzle_collect_logo",this._btn_entrance);if(e>=t&&this._isLock){Global.SlotsSoundMgr.playEffect("unlock"),this._isLock=!1,n.getComponent("ImgSwitchCmp").setIndex(1),a.active=!0;var c=o.getComponent(sp.Skeleton).setAnimation(0,"BetUp_Intro",!1);o.getComponent(sp.Skeleton).setTrackCompleteListener(c,function(){o.getComponent(sp.Skeleton).setTrackCompleteListener(c,null),o.active=!1}),i.active=!1,r.active=!0,r.getComponent(sp.Skeleton).setAnimation(0,"QiZi_loop",!0);var u=s.getComponent(sp.Skeleton).setAnimation(0,"unlock_EN",!1);s.getComponent(sp.Skeleton).setTrackCompleteListener(u,function(){s.getComponent(sp.Skeleton).setTrackCompleteListener(u,null),s.active=!1})}else e<t&&!this._isLock&&(Global.SlotsSoundMgr.playEffect("lock"),this._isLock=!0,n.getComponent("ImgSwitchCmp").setIndex(0),a.active=!1,o.active=!0,o.getComponent(sp.Skeleton).setAnimation(0,"BetUp_Loop_EN",!1),i.active=!0,r.active=!1,s.active=!0,s.getComponent(sp.Skeleton).setAnimation(0,"lock_EN",!1),s.getComponent(sp.Skeleton).addAnimation(0,"lock_idle_EN",!0))},flyFlag:function(e){var t=this;return s(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise(function(){var n=s(regeneratorRuntime.mark(function n(a,o){var i,r,s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=t._gameInfo.flagInfo.idxs,r=t.node.getChildByName("shoujifly"),s=t._btn_entrance.getChildByName("QiZi"),Global.SlotsSoundMgr.playEffect("collect"),i.forEach(function(e){var n=t.GetSymbolByIdx(e);n.setFlag(!1);var a=cc.instantiate(r);a.active=!0,a.position=t.node.convertToNodeSpaceAR(n.getPawWPos()),a.parent=t.node;var o=cc.find("LiZiFei",a);o.getComponent(cc.ParticleSystem).resetSystem();var i=cc.find("flag",a),c=a.convertToNodeSpaceAR(s.convertToWorldSpaceAR(cc.v2(0,0)));cc.tween(o).delay(.5).to(.5,{position:c}).start(),cc.tween(i).to(.3,{scale:.8}).to(.2,{scale:.5}).to(.5,{position:c}).call(function(){a.destroy()}).start()}),n.next=7,cc.vv.gameData.awaitTime(1);case 7:Global.SlotsSoundMgr.playEffect("collectdown"),cc.tween(s).to(.3,{scale:1.2}).to(.2,{scale:1}).start(),t.setFlagCnt(e),a();case 11:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}()));case 1:case"end":return n.stop()}},n)}))()},ShowGameview:function(e){cc.vv.gameData.setIsFreeGame(e),e&&Global.SlotsSoundMgr.playBgm("fgbgm"),this._super(e),this.setFlagState(!e)},triggerRandomGame:function(){return s(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Global.SlotsSoundMgr.playEffect("BigAward"),cc.find("Canvas/safe_node/character"),(t=cc.find("Canvas/safe_node/slots/DaJiangYuGao")).active=!0,t.getComponent(sp.Skeleton).setAnimation(0,"DaJiangYuGao",!1);case 5:case"end":return e.stop()}},e)}))()}}),cc._RF.pop()},{LMSlots_Slots_Base:void 0}],NewMulan_Symbol:[function(e,t,n){"use strict";cc._RF.push(t,"f392eNmO9ZOwr58iYYFRWx4","NewMulan_Symbol");var a=[1,1,1,1,1,1,1.5,1.5,1.5,2,2,2,2.5,2.5,2.5,3,3,3,3.5,3.5,3.5,4,4,4,4.5,4.5,4.5,5,5,5,5.5,5.5,5.5,6,6,6,7,8,9,10],o=[1,1,1,1,1,2,2,2,2,3,3,4];cc.Class({extends:e("LMSlots_Symbol_Base"),properties:{_wildMult:1},ShowRandomSymbol:function(){if(this._super(),3==this._id)if(Math.random()>.8){var e=o[Global.random(0,o.length-1)];this.setJp(e)}else{var t=cc.vv.gameData.GetTotalBet(),n=a[Global.random(0,a.length-1)];this.setNum(n*t)}},ClearState:function(){this.hideAllIcon(),this.setAnimationToTop(!1),this.ShowKuang(!1),this.stopWinTweenAction(),this.node.zIndex=50-this._symbolIdx+10*this._reelIdx},StartMove:function(){this._super(),cc.vv.gameData.isBonusGame()?this.setMaskVisible(!0):this.setMaskVisible(!1)},ShowById:function(e,t){this._super(e,t),this.hideAllIcon(),t&&(t.flag&&this.setFlag(!0),t.bonus&&(t.bonus.coin?this.setNum(t.bonus.coin):t.bonus.jackpot&&this.setJp(t.bonus.jackpot.id)),this._isResume&&(this._isResume=!1,this.setFlag(!1))),cc.vv.gameData.isBonusGame()?this.setMaskVisible(!0):this.setMaskVisible(!1)},setMaskVisible:function(e){var t=cc.vv.gameData.getGameCfg();if(t.symbol[this._id]&&t.symbol[this._id].node){var n=cc.find(t.symbol[this._id].node,this.node);e&&t.symbol[this._id].isMask?n.color=new cc.Color(100,100,100):n.color=cc.Color.WHITE}},Resume:function(e){this._isResume=!0,this._super(e)},hideAllIcon:function(){this.setFlag(!1),this.setNum(),this.setJp()},setFlag:function(e){cc.find("flag",this.node).active=e},getPawWPos:function(){return cc.find("flag",this.node).convertToWorldSpaceAR(cc.v2(0,0))},setNum:function(e){var t=cc.find("lbl",this.node);e?(t.active=!0,t.getComponent(cc.Label).string=Global.convertNumToShort(e,1e3,0)):t.active=!1},setJp:function(e){var t=cc.find("jp",this.node);t?(t.active=!0,t.getComponent("ImgSwitchCmp").setIndex(e-1)):t.active=!1},playWinAnimation:function(){this._showNode&&(this._showNode.active=!1);var e=this._id,t=cc.vv.gameData.getGameCfg();if(t.symbol[e]&&t.symbol[e].win_node){this._state="win",this._showNode&&(this._showNode.active=!1);var n=this.setAnimationToTop(!0);n.active=!0;var a=cc.find(t.symbol[e].win_node,n);if(a.active=!0,t.symbol[e].win_ani&&""!=t.symbol[e].win_ani.name){n.zIndex=t.symbol[e].win_ani.zIndex-this._symbolIdx+10*this._reelIdx;var o=a.getComponent(sp.Skeleton);o&&(t.symbol[e].win_ani.intro_name?(o.setAnimation(0,t.symbol[e].win_ani.intro_name,!1),o.addAnimation(0,t.symbol[e].win_ani.name,!1)):o.setAnimation(0,t.symbol[e].win_ani.name,!0))}}else this._showNode.active=!0,this.playWinTweenAction()},playBonusStopAnim:function(){var e=this._id,t=cc.vv.gameData.getGameCfg();if(t.symbol[e]&&t.symbol[e].win_node&&t.symbol[e].b_stop_ani&&(this._state="stop",this._showNode&&(this._showNode.active=!1),this._showNode=cc.find(t.symbol[e].win_node,this.node),this._showNode.active=!0,""!=t.symbol[e].b_stop_ani.name)){this.node.zIndex=t.symbol[e].b_stop_ani.zIndex-this._symbolIdx+10*this._reelIdx;var n=this._showNode.getComponent(sp.Skeleton);n&&(n.setAnimation(0,t.symbol[e].b_stop_ani.name,!1),t.symbol[e].b_idle_ani&&""!=t.symbol[e].b_idle_ani.name&&n.addAnimation(0,t.symbol[e].b_idle_ani.name,!0))}},playBonusIdleAnim:function(){var e=this._id,t=cc.vv.gameData.getGameCfg();if(t.symbol[e]&&t.symbol[e].win_node&&t.symbol[e].b_idle_ani&&(this._state="stop",this._showNode&&(this._showNode.active=!1),this._showNode=cc.find(t.symbol[e].win_node,this.node),this._showNode.active=!0,""!=t.symbol[e].b_idle_ani.name)){this.node.zIndex=t.symbol[e].b_idle_ani.zIndex-this._symbolIdx+10*this._reelIdx;var n=this._showNode.getComponent(sp.Skeleton);n&&n.setAnimation(0,t.symbol[e].b_idle_ani.name,!0)}},playBonusEndAnim:function(){var e=this._id,t=cc.vv.gameData.getGameCfg();if(t.symbol[e]&&t.symbol[e].win_node&&t.symbol[e].b_end_ani&&(this._state="stop",this._showNode&&(this._showNode.active=!1),this._showNode=cc.find(t.symbol[e].win_node,this.node),this._showNode.active=!0,""!=t.symbol[e].b_end_ani.name)){this.node.zIndex=t.symbol[e].b_end_ani.zIndex-this._symbolIdx+10*this._reelIdx;var n=this._showNode.getComponent(sp.Skeleton);n&&n.setAnimation(0,t.symbol[e].b_end_ani.name,!1)}}}),cc._RF.pop()},{LMSlots_Symbol_Base:void 0}]},{},["NewMulan_BonusGameMgr","NewMulan_BonusReel","NewMulan_BonusSlots","NewMulan_BoxGame","NewMulan_Cfg","NewMulan_GameData","NewMulan_Logic","NewMulan_Popup","NewMulan_Reels","NewMulan_SFreeMgr","NewMulan_SFreeReel","NewMulan_SFreeSlots","NewMulan_Slots","NewMulan_Symbol"]);
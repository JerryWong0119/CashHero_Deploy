window.__require=function e(t,n,a){function i(r,s){if(!n[r]){if(!t[r]){var c=r.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(o)return o(c,!0);throw new Error("Cannot find module '"+r+"'")}r=c}var p=n[r]={exports:{}};t[r][0].call(p.exports,function(e){return i(t[r][1][e]||e)},p,p.exports,e,t,n,a)}return n[r].exports}for(var o="function"==typeof __require&&__require,r=0;r<a.length;r++)i(a[r]);return i}({Magician_Cfg:[function(e,t,n){"use strict";var a;function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}cc._RF.push(t,"9eb0a0Gw1hOmpltbVs/qkUV","Magician_Cfg");var o={symbol:(a={},i(a,1,{node:"s1",zIndex:300,win_node:"w1",win_ani:{name:"animation1",zIndex:300}}),i(a,2,{node:"s2",zIndex:300,win_node:"w2",win_ani:{name:"animation",zIndex:300},stop_ani:{name:"animation1",zIndex:300},trigger_ani:{name:"animation",zIndex:300}}),i(a,3,{node:"s3",zIndex:100,win_node:"w3",win_ani:{name:"animation",zIndex:300}}),i(a,4,{node:"s4",zIndex:100}),i(a,5,{node:"s5",zIndex:100}),i(a,6,{node:"s6",zIndex:100}),i(a,7,{node:"s7",zIndex:100}),i(a,8,{node:"s8",zIndex:100,win_node:"w8",win_ani:{name:"animation",zIndex:300}}),i(a,9,{node:"s9",zIndex:100,win_node:"w9",win_ani:{name:"animation",zIndex:300}}),a),wildId:1,scatterId:2,scripts:{Top:"LMSlots_Top_Base",Bottom:"LMSlots_Bottom_Base",Slots:"Magician_Slots",Reels:"Magician_Reel",Symbols:"Magician_symbol"},col:20,row:3,symbolPrefab:"LMSlots_Symbol",symbolSize:{height:124},helpItems:["games/Magician/prefab/LMSlots_Help_item1","games/Magician/prefab/LMSlots_Help_item2","games/Magician/prefab/LMSlots_Help_item3","games/Magician/prefab/LMSlots_Help_item4"],randomSymbols:[1,3,4,5,6,7,8,9],kuang:"kuang",speed:3e3,reelStopInter:.2,auto_stop_time:1,autoModelDelay:1,AddAntiTime:2,bounceInfo:{distance:20,time:.1},reelStateInfo:[{id:[2],mini:3,counts:[1,1,1,1,1],antiNode:"node_anti",path:"games/Magician/",symbolStopSound:"scatter_notify",antSound:"anticipation",antSpeed:2400}],normalBgm:"base_bgm",commEffect:{path:"games/Magician/",win1:["win1","win1end"],win2:["win2","win2end"]},mapCfg:{1:{id:1,type:1,iconSpineName:"animation1"},2:{id:2,type:2,iconSpineName:"animation2"},3:{id:3,type:1,iconSpineName:"animation1"},4:{id:4,type:3,iconSpineName:"animation3",slot:{cnt:2,wilds:[1]}},5:{id:5,type:1,iconSpineName:"animation1"},6:{id:6,type:1,iconSpineName:"animation1"},7:{id:7,type:2,iconSpineName:"animation2"},8:{id:8,type:1,iconSpineName:"animation1"},9:{id:9,type:3,iconSpineName:"animation3",slot:{cnt:2,wilds:[3,5]}},10:{id:10,type:1,iconSpineName:"animation1"},11:{id:11,type:1,iconSpineName:"animation1"},12:{id:12,type:3,iconSpineName:"animation4",slot:{cnt:3,wilds:[3,4]}},13:{id:13,type:1,iconSpineName:"animation1"},14:{id:14,type:1,iconSpineName:"animation1"},15:{id:15,type:2,iconSpineName:"animation2"},16:{id:16,type:1,iconSpineName:"animation1"},17:{id:17,type:1,iconSpineName:"animation1"},18:{id:18,type:3,iconSpineName:"animation5",slot:{cnt:4,wilds:[2,5]}},19:{id:19,type:1,iconSpineName:"animation1"},20:{id:20,type:2,iconSpineName:"animation2"},21:{id:21,type:1,iconSpineName:"animation1"},22:{id:22,type:3,iconSpineName:"animation3",slot:{cnt:2,wilds:[1,3,5]}},23:{id:23,type:1,iconSpineName:"animation1"},24:{id:24,type:1,iconSpineName:"animation1"},25:{id:25,type:3,iconSpineName:"animation3",slot:{cnt:2,wilds:[1,5]}},26:{id:26,type:1,iconSpineName:"animation1"},27:{id:27,type:1,iconSpineName:"animation1"},28:{id:28,type:2,iconSpineName:"animation2"},29:{id:29,type:1,iconSpineName:"animation1"},30:{id:30,type:1,iconSpineName:"animation1"},31:{id:31,type:3,iconSpineName:"animation5",slot:{cnt:4,wilds:[2,5]}},32:{id:32,type:1,iconSpineName:"animation1"},33:{id:33,type:2,iconSpineName:"animation2"},34:{id:34,type:1,iconSpineName:"animation1"},35:{id:35,type:3,iconSpineName:"animation4",slot:{cnt:3,wilds:[1,3,5]}},36:{id:36,type:1,iconSpineName:"animation1"},37:{id:37,type:1,iconSpineName:"animation1"},38:{id:38,type:2,iconSpineName:"animation2"},39:{id:39,type:1,iconSpineName:"animation1"},40:{id:40,type:3,iconSpineName:"animation4",slot:{cnt:3,wilds:[3,4]}},41:{id:41,type:1,iconSpineName:"animation1"},42:{id:42,type:2,iconSpineName:"animation2"},43:{id:43,type:1,iconSpineName:"animation1"},44:{id:44,type:3,iconSpineName:"animation4",slot:{cnt:3,wilds:[2,4]}},45:{id:45,type:1,iconSpineName:"animation1"},46:{id:46,type:2,iconSpineName:"animation2"},47:{id:47,type:1,iconSpineName:"animation1"},48:{id:48,type:3,iconSpineName:"animation5",slot:{cnt:4,wilds:[1]}},49:{id:49,type:1,iconSpineName:"animation1"},50:{id:50,type:1,iconSpineName:"animation1"},51:{id:51,type:2,iconSpineName:"animation2"},52:{id:52,type:1,iconSpineName:"animation1"},53:{id:53,type:3,iconSpineName:"animation5",slot:{cnt:4,wilds:[2,4]}},54:{id:54,type:1,iconSpineName:"animation1"},55:{id:55,type:1,iconSpineName:"animation1"},56:{id:56,type:3,iconSpineName:"animation3",slot:{cnt:2,wilds:[1,2,3]}},57:{id:57,type:1,iconSpineName:"animation1"},58:{id:58,type:1,iconSpineName:"animation1"},59:{id:59,type:1,iconSpineName:"animation1"},60:{id:60,type:2,iconSpineName:"animation2"},61:{id:61,type:1,iconSpineName:"animation1"},62:{id:62,type:3,iconSpineName:"animation4",slot:{cnt:3,wilds:[3,4]}},63:{id:63,type:1,iconSpineName:"animation1"},64:{id:64,type:2,iconSpineName:"animation2"},65:{id:65,type:1,iconSpineName:"animation1"},66:{id:66,type:3,iconSpineName:"animation4",slot:{cnt:3,wilds:[1,2,3]}},67:{id:67,type:1,iconSpineName:"animation1"},68:{id:68,type:1,iconSpineName:"animation1"},69:{id:69,type:3,iconSpineName:"animation3",slot:{cnt:2,wilds:[2,5]}},70:{id:70,type:1,iconSpineName:"animation1"},71:{id:71,type:1,iconSpineName:"animation1"},72:{id:72,type:2,iconSpineName:"animation2"},73:{id:73,type:1,iconSpineName:"animation1"},74:{id:74,type:1,iconSpineName:"animation1"},75:{id:75,type:3,iconSpineName:"animation4",slot:{cnt:3,wilds:[3,5]}},76:{id:76,type:1,iconSpineName:"animation1"},77:{id:77,type:2,iconSpineName:"animation2"},78:{id:78,type:1,iconSpineName:"animation1"},79:{id:79,type:3,iconSpineName:"animation4",slot:{cnt:3,wilds:[2,4]}},80:{id:80,type:1,iconSpineName:"animation1"},81:{id:81,type:1,iconSpineName:"animation1"},82:{id:82,type:2,iconSpineName:"animation2"},83:{id:83,type:1,iconSpineName:"animation1"},84:{id:84,type:3,iconSpineName:"animation5",slot:{cnt:4,wilds:[1,5]}},85:{id:85,type:1,iconSpineName:"animation1"},86:{id:86,type:2,iconSpineName:"animation2"},87:{id:87,type:1,iconSpineName:"animation1"},88:{id:88,type:3,iconSpineName:"animation4",slot:{cnt:3,wilds:[1,2,3]}},89:{id:89,type:1,iconSpineName:"animation1"},90:{id:90,type:2,iconSpineName:"animation2"},91:{id:91,type:1,iconSpineName:"animation1"},92:{id:92,type:3,iconSpineName:"animation5",slot:{cnt:4,wilds:[3,4]}},93:{id:93,type:1,iconSpineName:"animation1"},94:{id:94,type:1,iconSpineName:"animation1"},95:{id:95,type:1,iconSpineName:"animation1"},96:{id:96,type:2,iconSpineName:"animation2"},97:{id:97,type:1,iconSpineName:"animation1"},98:{id:98,type:1,iconSpineName:"animation1"},99:{id:99,type:1,iconSpineName:"animation1"},100:{id:100,type:3,iconSpineName:"animation5",slot:{cnt:4,wilds:[2,3,4,5]}}}};t.exports=o,cc._RF.pop()},{}],Magician_Character:[function(e,t,n){"use strict";cc._RF.push(t,"d3bbfbSvERAQpbFvJuFFhAA","Magician_Character"),cc.Class({extends:cc.Component,properties:{_spineMale:sp.Skeleton,_isInFree:!1,normal:cc.Node},onLoad:function(){this.initSpine()},initSpine:function(e){this._spineMale=this.normal.getComponent(sp.Skeleton),this._spineMale.setAnimation(0,"idle",!0)},hideCharacter:function(){this._spineMale.node.active=!1},toFree:function(e){},toNormal:function(){},playPreAppear:function(){var e=this;this.spineCharacterAppear.node.active=!0,this.spineCharacterAppear.setAnimation(0,"animation",!1),this.spineCharacterAppear.setCompleteListener(function(){e.spineCharacterAppear.setCompleteListener(null),e.spineCharacterAppear.node.active=!1})},play:function(e){var t=this,n="skill",a="pos1",i=0;Global.random(1,100)>50?(a="pos2",n="skill_1",i=1.5):i=1,cc.log(n),this._spineMale.node.active=!0,this._spineMale.setAnimation(0,n,!1);var o=(new Date).getTime();return this._spineMale.setCompleteListener(function(){t._spineMale.setCompleteListener(null),t._spineMale.setAnimation(0,"idle",!0),cc.log((new Date).getTime()-o)}),{roleName:a,triggerTime:i}}}),cc._RF.pop()},{}],Magician_Events:[function(e,t,n){"use strict";cc._RF.push(t,"2719ccMZVlOEJY+5ESi9ebQ","Magician_Events");t.exports={OperateEvent:{bet_coin_change:"OperateEvent.bet_coin_change",start_spin:"OperateEvent.start_spin"},DataEvent:{}},cc._RF.pop()},{}],Magician_ExtraWildGame:[function(e,t,n){"use strict";function a(e,t,n,a,i,o,r){try{var s=e[o](r),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(a,i)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(i,o){var r=e.apply(t,n);function s(e){a(r,i,o,s,c,"next",e)}function c(e){a(r,i,o,s,c,"throw",e)}s(void 0)})}}cc._RF.push(t,"a107eahlgpIF5hnhCbdMxEJ","Magician_ExtraWildGame"),cc.Class({extends:cc.Component,properties:{effect_pos1:cc.Node,effect_pos2:cc.Node,apear_full:sp.Skeleton,apear1:cc.Node,apear2:cc.Node,apear_col:[sp.Skeleton],liuguanlizi:cc.Node,itemsMaskNode:cc.Node,extra_wild_pre_ani:cc.Node,extra_wild_area_ani:cc.Node,wilds_node:cc.Node,float_wild_item:cc.Node,_wildsArr:null},onLoad:function(){},start:function(){var e=this;this.scheduleOnce(function(){e.initFloatWilds()})},initFloatWilds:function(){this._wildsArr=[];for(var e=0;e<15;e++){var t=cc.instantiate(this.float_wild_item);t.parent=this.wilds_node;var n=SlotsFacade.slots.getIdxGlobalPos(e+1);n=this.wilds_node.convertToNodeSpaceAR(n),t.x=n.x,t.y=n.y,this._wildsArr.push(t)}},startExtraWildFlow:function(){var e=this;return i(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._showPreAni();case 2:return t.next=4,e._showGenWild();case 4:return t.next=6,e._exitExtraWild();case 6:case"end":return t.stop()}},t)}))()},_exitExtraWild:function(){var e=this;return i(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.itemsMaskNode.runAction(cc.fadeOut(1)),t.next=3,SlotsFacade.delayTime(.6);case 3:return e.extra_wild_area_ani.runAction(cc.fadeOut(.2)),t.next=6,SlotsFacade.delayTime(.3);case 6:case"end":return t.stop()}},t)}))()},_getRoundsArr:function(){var e=SlotsFacade.dm.getExtraWildIndexs().concat(),t=3;if(e.length>5&&Math.random()>.6)return[{type:1,indexs:e}];for(var n=[],a=[[],[],[],[],[]],i=0;i<e.length;i++)a[(e[i]-1)%5].push(e[i]);for(var o=0;o<a.length;o++)if(3==a[o].length){n.push({type:2,indexs:a[o]});for(var r=0;r<a[o].length;r++){var s=e.indexOf(a[o][r]);-1!=s&&e.splice(s,1)}}for(;t>0&&e.length>0;){if(1==t)n.push({type:3,indexs:e.concat()}),e=[];else{for(var c=Math.ceil(e.length*Math.random()),l=[],p=0;p<c;p++)l.push(e.pop());n.push({type:3,indexs:l})}if(e.length<1)break;t--}return n},_showGenWild:function(){var e=this;return i(regeneratorRuntime.mark(function t(){var n,a,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=e._getRoundsArr(),a=0;case 2:if(!(a<n.length)){t.next=19;break}i=n[a],t.t0=i.type,t.next=1===t.t0?7:2===t.t0?10:3===t.t0?13:16;break;case 7:return t.next=9,e._playAppearFullRound(i.indexs);case 9:return t.abrupt("break",16);case 10:return t.next=12,e._playColRound(i.indexs);case 12:return t.abrupt("break",16);case 13:return t.next=15,e._playARound(i.indexs);case 15:return t.abrupt("break",16);case 16:a++,t.next=2;break;case 19:case"end":return t.stop()}},t)}))()},_playAppearFullRound:function(e){var t=this;return i(regeneratorRuntime.mark(function n(){var a,i,o,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return SlotsFacade.soundMgr.playEffect("act1"),t.apear_full.node.active=!0,t.apear_full.setAnimation(0,"animation",!1),t.apear_full.setCompleteListener(function(){t.apear_full.setCompleteListener(null),t.apear_full.node.active=!1}),a=2.5,i=5,n.next=8,SlotsFacade.delayTime(a);case 8:for(o=function(n){var a=t._wildsArr[e[n]-1],i=cc.instantiate(t.apear2);i.x=a.x,i.y=a.y,i.parent=t.wilds_node,i.active=!0;var o=i.getComponent(sp.Skeleton);o.setAnimation(0,"animation",!1),o.setCompleteListener(function(){o.setCompleteListener(null),i.removeFromParent(),a.active=!0})},r=0;r<e.length;r++)o(r);return n.next=12,SlotsFacade.delayTime(i);case 12:case"end":return n.stop()}},n)}))()},_playColRound:function(e){var t=this;return i(regeneratorRuntime.mark(function n(){var a,i,o,r,s,c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:for(SlotsFacade.soundMgr.playEffect("act3"),a=(e[0]-1)%5,(i=t.apear_col[a]).node.active=!0,i.setAnimation(0,"animation",!1),i.setCompleteListener(function(){i.setCompleteListener(null),i.node.active=!1}),o=1.7,r=.15,s=function(n){t.scheduleOnce(function(){var a=t._wildsArr[e[n]-1],i=cc.instantiate(t.apear2);i.x=a.x,i.y=a.y,i.parent=t.wilds_node,i.active=!0;var o=i.getComponent(sp.Skeleton);o.setAnimation(0,"animation",!1),o.setCompleteListener(function(){o.setCompleteListener(null),i.removeFromParent(),a.active=!0})},o+n*r)},c=0;c<e.length;c++)s(c);return n.next=12,SlotsFacade.delayTime(2.8);case 12:case"end":return n.stop()}},n)}))()},_playARound:function(e){var t=this;return i(regeneratorRuntime.mark(function n(){var a,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("#\u64ad\u653e\u4e00\u8f6ewild\u52a8\u753b",e),a=SlotsFacade.character.play(e.length),n.next=4,SlotsFacade.delayTime(a.triggerTime);case 4:return i=null,"pos1"==a.roleName?(i=t.effect_pos1.getPosition(),SlotsFacade.soundMgr.playEffect("act6")):(i=t.effect_pos2.getPosition(),SlotsFacade.soundMgr.playEffect("act7")),n.next=8,t._playTrackAni(e,i);case 8:case"end":return n.stop()}},n)}))()},_playTrackAni:function(e,t){for(var n=[],a=0;a<e.length;a++){var i=cc.instantiate(this.liuguanlizi);i.parent=this.node,i.x=t.x,i.y=t.y,i.getComponent(cc.ParticleSystem).resetSystem(),i.active=!0;var o=this._wildsArr[e[a]-1],r=o.convertToWorldSpaceAR(cc.v2(0,0));r=this.node.convertToNodeSpaceAR(r),n.push(this._moveAParticle(i,r,o))}return Promise.all(n)},_moveAParticle:function(e,t,n){var a=this;return new Promise(function(n){cc.tween(e).to(.5,{x:t.x,y:t.y}).call(function(){e.removeFromParent(),n()}).start()}).then(function(){return new Promise(function(e){var i=cc.instantiate(a.apear1);i.x=t.x,i.y=t.y,i.parent=a.node,i.active=!0;var o=i.getComponent(sp.Skeleton);o.setAnimation(0,"animation",!1),o.setCompleteListener(function(){o.setCompleteListener(null),i.removeFromParent(),n.active=!0,e()})})})},_showPreAni:function(){var e=this;return new Promise(function(t,n){console.log("#\u64ad\u653eextra wild\u5165\u573a\u52a8\u753b"),e.extra_wild_pre_ani.active=!0;var a=e.extra_wild_pre_ani.getComponent(sp.Skeleton);a.setCompleteListener(function(){a.setCompleteListener(null),t()}),a.setAnimation(0,"animation",!1),e.itemsMaskNode.active=!0,e.itemsMaskNode.opacity=0,cc.tween(e.itemsMaskNode).to(1,{opacity:150}).start(),e.scheduleOnce(function(){e.extra_wild_area_ani.active=!0,e.extra_wild_area_ani.opacity=0,e.extra_wild_area_ani.runAction(cc.fadeIn(.2))},.7),SlotsFacade.soundMgr.playEffect("act2")})},hideWild:function(){this._wildsArr.forEach(function(e){e.active=!1})}}),cc._RF.pop()},{}],Magician_FlowCtrl:[function(e,t,n){"use strict";function a(e,t,n,a,i,o,r){try{var s=e[o](r),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(a,i)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(i,o){var r=e.apply(t,n);function s(e){a(r,i,o,s,c,"next",e)}function c(e){a(r,i,o,s,c,"throw",e)}s(void 0)})}}cc._RF.push(t,"a2ec9DIizZAgo52Sg/mEvIx","Magician_FlowCtrl"),cc.Class({extends:cc.Component,enterRoom:function(){var e=this;return i(regeneratorRuntime.mark(function t(){var n,a,i,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=cc.vv.gameData.GetTotalFree(),!((a=cc.vv.gameData.GetFreeTime())>0)){t.next=8;break}return SlotsFacade.bottomCmp.ShowFreeModel(!0,n-a,n),i=cc.vv.gameData.GetTotalFreeWin(),SlotsFacade.bottomCmp.SetWin(i),t.next=8,e.enterFreeGame(!0);case 8:if(!(o=SlotsFacade.dm.getDeskInfo()).select||!o.select.state){t.next=27;break}if(1!=o.select.rtype){t.next=15;break}return t.next=13,e.enterCollectMap(!0);case 13:t.next=27;break;case 15:if(2!=o.select.rtype){t.next=27;break}return t.next=18,e.enterScatterGame(!0);case 18:if(!SlotsFacade.dm.isFistTriggerFree()){t.next=27;break}if(2!=SlotsFacade.dm.energyData.openGame){t.next=25;break}return t.next=22,SlotsFacade.popup.showWinFreeCnt(SlotsFacade.dm.GetFreeTime());case 22:return SlotsFacade.mainPanel.showSceneTransition(),t.next=25,SlotsFacade.delayTime(3);case 25:return t.next=27,e.enterFreeGame();case 27:SlotsFacade.slots.CanDoNextRound();case 28:case"end":return t.stop()}},t)}))()},onMsgSpine:function(e){return i(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(1!=SlotsFacade.slots._slotsCnt){t.next=9;break}if(!SlotsFacade.dm.hasExtraWild()){t.next=4;break}return t.next=4,SlotsFacade.extraWildCmp.startExtraWildFlow();case 4:SlotsFacade.slots._gameInfo=e,SlotsFacade.slots.SetSlotsResult(e),SlotsFacade.slots.SetReelStateInfo(e.resultCards),t.next=11;break;case 9:SlotsFacade.slots._gameInfo=e,SlotsFacade.slots.SetSlotsResult(e);case 11:case"end":return t.stop()}},t)}))()},spinEnd:function(){var e=this;return i(regeneratorRuntime.mark(function t(){var n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.collectEnergy(),SlotsFacade.extraWildCmp.hideWild(),SlotsFacade.slots.ShowWinTrace(),n=cc.vv.gameData.GetGameWin(),a=n,cc.vv.gameData.GetTotalFree()>0&&cc.vv.gameData.GetTotalFree()!=cc.vv.gameData.GetFreeTime()&&(a=cc.vv.gameData.GetGameTotalFreeWin()),t.next=8,new Promise(function(e){SlotsFacade.slots.ShowBottomWin(n,a,!0,e)});case 8:return t.next=10,e.enterCollectMap();case 10:return t.next=12,e.enterScatterGame();case 12:if(!SlotsFacade.dm.isFistTriggerFree()){t.next=23;break}if(2!=SlotsFacade.dm.energyData.openGame){t.next=19;break}return t.next=16,SlotsFacade.popup.showWinFreeCnt(SlotsFacade.dm.GetFreeTime());case 16:return SlotsFacade.mainPanel.showSceneTransition(),t.next=19,SlotsFacade.delayTime(2);case 19:return t.next=21,e.enterFreeGame();case 21:t.next=36;break;case 23:if(!SlotsFacade.dm.isLastEndFree()){t.next=36;break}return Global.SlotsSoundMgr.stopBgm(),SlotsFacade.soundMgr.playEffect("fg_collect_popup"),t.next=28,SlotsFacade.popup.showWinGold(SlotsFacade.dm.getFreeWinCoin());case 28:return SlotsFacade.mainPanel.showSceneTransition(),t.next=31,SlotsFacade.delayTime(2);case 31:return e.enterNormalGame(),t.next=34,SlotsFacade.delayTime(1);case 34:return t.next=36,new Promise(function(e){SlotsFacade.slots.ShowBottomWin(a,a,!0,e)});case 36:SlotsFacade.slots.CanDoNextRound();case 37:case"end":return t.stop()}},t)}))()},collectEnergy:function(){return i(regeneratorRuntime.mark(function e(){var t,n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(SlotsFacade.dm.canCollect()){e.next=2;break}return e.abrupt("return");case 2:if(!(t=SlotsFacade.dm.energyData)||!t.currRoundValue){e.next=9;break}return n=SlotsFacade.slots.getSymbolsByServerIds(SlotsFacade.dm.getResultWildsIndex()),a=[],n.forEach(function(e){a.push(e.node.convertToWorldSpaceAR(cc.v2(0,0)))}),e.next=9,SlotsFacade.mapCollectProgress.collectEnergy(a,SlotsFacade.dm.getCollectPercent());case 9:case"end":return e.stop()}},e)}))()},enterCollectMap:function(e){var t=this;return i(regeneratorRuntime.mark(function n(){var a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(1==(a=SlotsFacade.dm.energyData).openGame||2==a.openGame&&SlotsFacade.dm.isFistTriggerFree())){n.next=9;break}if(SlotsFacade.topCmp.SetBackLobby(!1),SlotsFacade.bottomCmp.ShowBtnsByState("moveing_1"),e){n.next=7;break}return n.next=7,SlotsFacade.mapCollectProgress.playCollectEnd();case 7:return t.scheduleOnce(function(){SlotsFacade.mapCollectProgress.setProgress(0),SlotsFacade.mapCollectProgress.updateEnterBtn()},.5),n.abrupt("return",new Promise(function(e){SlotsFacade.map.enterMap(!1,function(t){e(t)})}));case 9:case"end":return n.stop()}},n)}))()},enterScatterGame:function(e){return i(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=SlotsFacade.dm.freeTurnTable)){t.next=10;break}if(SlotsFacade.topCmp.SetBackLobby(!1),SlotsFacade.bottomCmp.ShowBtnsByState("moveing_1"),e){t.next=7;break}return t.next=7,SlotsFacade.slots.playScatter(SlotsFacade.dm.getScatterIndexs());case 7:return t.next=9,new Promise(function(e){SlotsFacade.wheelGameCmp.enterWheelGame(n,function(t){!t||t.freeCnt,e(t)})});case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}},t)}))()},enterFreeGame:function(e){return i(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(SlotsFacade.topCmp.SetBackLobby(!1),SlotsFacade.bottomCmp.ShowBtnsByState("moveing_1"),SlotsFacade.mapCollectProgress.show(!1),SlotsFacade.soundMgr.playFreeBgm(),SlotsFacade.slots.changeSlots(),2!=SlotsFacade.dm.energyData.openGame){t.next=9;break}SlotsFacade.mainPanel.showBg(2),t.next=14;break;case 9:if(SlotsFacade.mainPanel.showBg(1),SlotsFacade.character.toFree(!e),e){t.next=14;break}return t.next=14,SlotsFacade.delayTime(2);case 14:case"end":return t.stop()}},t)}))()},enterNormalGame:function(){Global.SlotsSoundMgr.stopBgm(),SlotsFacade.bottomCmp.ShowFreeModel(!1),SlotsFacade.mainPanel.showBg(0),SlotsFacade.character.toNormal(!1),SlotsFacade.mapCollectProgress.show(!0),SlotsFacade.soundMgr.playBgm(),SlotsFacade.slots.clearFreeSymbols(),SlotsFacade.slots.changeSlots()}}),cc._RF.pop()},{}],Magician_GameData:[function(e,t,n){"use strict";cc._RF.push(t,"86cfelLygxC/5BgfFskF6nt","Magician_GameData"),cc.Class({extends:e("LMSlots_GameData_Base"),properties:{resultCards:[],extraWildIndexs:[],energyData:null,mapFreeGameData:null},init:function(e,t){this._super(e,t),this.energyData=this._deskInfo.colection,this.freeTurnTable=this._deskInfo.freeTurnTable},OnRcvNetSpine:function(e){200==e.code&&(this.energyData=e.mapInfo,this.bonusData=e.epicInfo,e.randomData&&e.randomData.wild_idxs?this.extraWildIndexs=e.randomData.wild_idxs:this.extraWildIndexs=null,e.energyData&&(this.energyData=e.energyData),this.freeTurnTable=e.freeTurnTable,this.mapFreeGameData=e.mapFreeGameData),this._super(e)},getSpinData:function(){return this._gameInfo},hasExtraWild:function(){return this.extraWildIndexs&&this.extraWildIndexs.length>0},getResultWildsIndex:function(){var e=this.getSpinData().resultCards;if(!e||e.length<1)return[];var t=[];return e.forEach(function(e,n){1==e&&t.push(n+1)}),t},getScatterIndexs:function(){var e=[],t=this.getSpinData().resultCards;if(!t||t.length<1)return e;for(var n=0;n<t.length;n++)2==t[n]&&e.push(n+1);return e},reqSubGame:function(e){var t={c:MsgId.SLOT_SUBGAME_DATA,gameid:this._gameId,data:{rtype:e}};cc.vv.NetManager.send(t,!0)},canCollect:function(){return this.GetBetIdx()>=this.energyData.needBet},getCollectPercent:function(){var e=0,t=this.energyData;return t&&(e=t.currValue/t.fullValue,e=Math.max(0,e),e=Math.min(1,e)),e},hasFree:function(){return this.GetFreeTime()>0},isLastEndFree:function(){return 0==this.GetFreeTime()&&this.GetTotalFree()>0},isFistTriggerFree:function(){return this.hasFree()&&this.GetFreeTime()==this.GetTotalFree()},getFreeWinCoin:function(){return this._gameInfo.freeWinCoin},addFreeCnt:function(e){this._deskInfo.restFreeCount+=e,this._deskInfo.allFreeCount+=e},hasMultipleSlot:function(){return this.mapFreeGameData&&this.mapFreeGameData.length>0},isFirstTriggerMultipleSlot:function(){return this.hasMultipleSlot()&&this.isFistTriggerFree()},isEndMultipleSlot:function(){return this.hasMultipleSlot()&&!this.hasFree()},getExtraWildIndexs:function(){return this.hasExtraWild()?this.extraWildIndexs:[]},getSlotsCnt:function(){return 2==this.energyData.openGame?this.getGameCfg().mapCfg[this.energyData.map_idx.toString()].slot.cnt:1}}),cc._RF.pop()},{LMSlots_GameData_Base:void 0}],Magician_Logic:[function(e,t,n){"use strict";cc._RF.push(t,"84405ysxHxEuJrbJKIZ6+5Y","Magician_Logic"),cc.Class({extends:e("LMSlots_Logic_Base"),properties:{},onLoad:function(){this.InitCommComponent(),window.SlotsFacade=this,this.dm=cc.vv.gameData,this.mainPanel=cc.find("safe_node",this.node).addComponent("Magician_MainPanel"),this.flowCtrl=this.addComponent("Magician_FlowCtrl"),this.soundMgr=this.mainPanel.addComponent("Magician_Sound"),this.extraWildCmp=this.mainPanel.extra_wild_game_node.getComponent("Magician_ExtraWildGame"),this.wheelGameCmp=this.mainPanel.wheel_game_node.addComponent("Magician_WheelGame"),this.map=this.mainPanel.map_game_node.addComponent("Magician_Map"),this.mapCollectProgress=this.mainPanel.collect_progress.getComponent("Magician_MapCollectProgress"),this.popup=this.mainPanel.popup.getComponent("Magician_Popup"),this.character=this.mainPanel.character_node.getComponent("Magician_Character"),this.prizePool=cc.find("safe_node/LMSlots_PrizePool_1",this.node),this.topCmp=cc.vv.gameData.GetTopScript(),this.bottomCmp=cc.vv.gameData.GetBottomScript(),this.slots=cc.vv.gameData.GetSlotsScript()},onDestroy:function(){window.SlotsFacade=null,this.dm=null},delayTime:function(e){var t=this;return new Promise(function(n,a){t.scheduleOnce(function(){n()},e)})}}),cc._RF.pop()},{LMSlots_Logic_Base:void 0}],Magician_MainPanel:[function(e,t,n){"use strict";cc._RF.push(t,"c2f30bQIdtJ37yJt2jp5K1X","Magician_MainPanel"),cc.Class({extends:cc.Component,properties:{bg:cc.Node,character_node:cc.Node,slots:cc.Node,collect_progress:cc.Node,extra_wild_game_node:cc.Node,map_game_node:cc.Node,wheel_game_node:cc.Node,popup:cc.Node,operate_node:cc.Node,transition_node:cc.Node},onLoad:function(){this.bg=this.node.getChildByName("bg"),this.logo_spine=cc.find("logo_spine",this.node),this.slots=this.node.getChildByName("slots"),this.character_node=this.slots.getChildByName("character_node"),this.collect_progress=this.slots.getChildByName("collect_progress"),this.extra_wild_game_node=this.slots.getChildByName("extra_wild_game_node"),this.map_game_node=this.node.getChildByName("map_game_node"),this.wheel_game_node=this.node.getChildByName("wheel_game_node"),this.popup=this.node.getChildByName("popup"),this.operate_node=this.node.getChildByName("operate_node"),this.transition_node=this.node.getChildByName("transition_node"),this.wheel_transition_ani=this.node.getChildByName("wheel_transition_ani"),this.jpNode=this.node.getChildByName("LMSlots_PrizePool_1"),this.spineSceneTransition=this.transition_node.getChildByName("screen_transition").getComponent(sp.Skeleton)},showBg:function(e){e=e||0,this.bg.getComponent("ImgSwitchCmp").setIndex(e),this.character_node.active=2!=e,this.jpNode.active=2!=e,this.collect_progress.active=0==e},showSceneTransition:function(e){var t=this;Global.SlotsSoundMgr.stopBgm(),SlotsFacade.soundMgr.playEffect("fg_trigger_popup"),this.spineSceneTransition.node.active=!0,this.spineSceneTransition.setAnimation(0,"animation5",!1),this.spineSceneTransition.setCompleteListener(function(){t.spineSceneTransition.setCompleteListener(null),t.spineSceneTransition.node.active=!1,e&&e()})}}),cc._RF.pop()},{}],Magician_MapCollectProgress:[function(e,t,n){"use strict";function a(e,t,n,a,i,o,r){try{var s=e[o](r),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(a,i)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(i,o){var r=e.apply(t,n);function s(e){a(r,i,o,s,c,"next",e)}function c(e){a(r,i,o,s,c,"throw",e)}s(void 0)})}}cc._RF.push(t,"96d8b2+dJlNkpG6aH0OYQiE","Magician_MapCollectProgress"),cc.Class({extends:cc.Component,properties:{percent:0,_isCollectState:!1,btn_enter:cc.Node,progressBar:cc.Node,spine_rabbit:sp.Skeleton,spine_tips:sp.Skeleton,spine_collect_end:sp.Skeleton,collect_track_particle:cc.Node,rule_tips:cc.Node,isOpen:!1,canTouch:!0},onLoad:function(){this._initListener(),this.updateEnterBtn()},start:function(){this.setProgress(SlotsFacade.dm.getCollectPercent()),this.showCollect(!0)},_initListener:function(){var e=this;Global.registerEvent(cc.vv.gameData._EventId.SLOT_TOTALBET_UPDATED,function(){e.showCollect(!1)},this),this.btn_enter.on(cc.Node.EventType.TOUCH_END,this._onEnterHandler.bind(this),this),this.progressBar.on(cc.Node.EventType.TOUCH_END,function(){e.isOpen?e._showCollectTips():e._openCollect()},this)},_showCollectTips:function(){var e=this.rule_tips;e.active||(e.active=!0,e.opacity=0,cc.tween(e).to(1,{opacity:255}).delay(3).to(1,{opacity:0}).call(function(){e.active=!1}).start())},_onEnterHandler:function(){SlotsFacade.dm.hasFree()||SlotsFacade.bottomCmp.GetSpinBtnState()&&(SlotsFacade.bottomCmp.ShowBtnsByState("moveing_1"),SlotsFacade.map.enterMap(!0,function(){SlotsFacade.bottomCmp.ShowBtnsByState("idle")}))},_openCollect:function(){if(!this.isOpen&&!SlotsFacade.dm.hasFree()&&SlotsFacade.bottomCmp.GetSpinBtnState()){var e=SlotsFacade.dm.GetBetMults(),t=SlotsFacade.dm.energyData.needBet;if(!(t>e.length)){SlotsFacade.dm.SetBetIdx(t),cc.vv.gameData._serverRawMult=t,cc.vv.UserManager.setEnterSelectBet(null),SlotsFacade.bottomCmp.ShowBetCoin();var n=cc.vv.gameData.GetTotalBet();Global.dispatchEvent(cc.vv.gameData._EventId.SLOT_TOTALBET_UPDATED,n)}}},collectEnergy:function(e,t){var n=this;return i(regeneratorRuntime.mark(function a(){var i,o,r,s;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return i=cc.find("safe_node",SlotsFacade.node),o=n.spine_rabbit.node.convertToWorldSpaceAR(cc.v2(0,0)),r=i.convertToNodeSpaceAR(o),s=[],e.forEach(function(e){var t=i.convertToNodeSpaceAR(e),a=cc.instantiate(n.collect_track_particle);a.parent=i,a.x=t.x,a.y=t.y,a.active=!0,a.getComponent(cc.ParticleSystem).resetSystem(),s.push(new Promise(function(e){cc.tween(a).to(.5,{x:r.x,y:r.y}).call(function(){a.removeFromParent(),e()}).start()})),SlotsFacade.soundMgr.playEffect("collect")}),a.next=7,Promise.all(s);case 7:n.setProgress(t,!0),n.spine_rabbit.setAnimation(0,"animation2",!1);case 9:case"end":return a.stop()}},a)}))()},showCollect:function(e){var t=SlotsFacade.dm.canCollect();t?this.isOpen||(e?this.spine_tips.node.active=!1:(this.spine_tips.node.active=!0,this.spine_tips.setAnimation(0,"animation2",!1),SlotsFacade.soundMgr.playEffect("unlock"))):(this.spine_tips.node.active=!0,e?this.spine_tips.setAnimation(0,"animation1",!1):this.isOpen&&(this.spine_tips.setAnimation(0,"animation1",!1),SlotsFacade.soundMgr.playEffect("lock"))),this.isOpen=t},playCollectEnd:function(){var e=this;return i(regeneratorRuntime.mark(function t(){var n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(SlotsFacade.soundMgr.playEffect("full"),(n=e.progressBar.getChildByName("bar").getChildByName("spine").getComponent(sp.Skeleton)).node.active=!0,n.setAnimation(0,"animation2",!1),n.setCompleteListener(function(){n.setCompleteListener(null),n.node.active=!1}),!(a=SlotsFacade.dm.getGameCfg().mapCfg[SlotsFacade.dm.energyData.map_idx])){t.next=9;break}return t.next=9,new Promise(function(t){e.spine_collect_end.node.active=!0,e.spine_collect_end.setAnimation(0,"animation"+a.type,!1),e.spine_collect_end.setCompleteListener(function(){e.spine_collect_end.setCompleteListener(null),e.spine_collect_end.node.active=!1,t()})});case 9:case"end":return t.stop()}},t)}))()},setProgress:function(e,t){var n=this.progressBar.width,a=this.progressBar.getChildByName("bar"),i=e*n-n;t?cc.tween(a).to(.5,{x:i}).call(function(){var e=a.getChildByName("spine").getComponent(sp.Skeleton);e.node.active=!0,e.setAnimation(0,"animation1",!1),e.setCompleteListener(function(){e.setCompleteListener(null),e.node.active=!1})}).start():a.x=i},show:function(e){this.node.active=e},updateEnterBtn:function(){var e=SlotsFacade.dm.energyData.map_idx+1,t=SlotsFacade.dm.getGameCfg().mapCfg[e];if(t){var n=this.btn_enter.getComponent("ImgSwitchCmp");3==t.type?n.setIndex(t.slot.cnt):n.setIndex(t.type-1)}}}),cc._RF.pop()},{}],Magician_MapWheel:[function(e,t,n){"use strict";function a(e,t,n,a,i,o,r){try{var s=e[o](r),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(a,i)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(i,o){var r=e.apply(t,n);function s(e){a(r,i,o,s,c,"next",e)}function c(e){a(r,i,o,s,c,"throw",e)}s(void 0)})}}cc._RF.push(t,"2c7c7KE5DFBibKF/G4FcS4S","Magician_MapWheel"),cc.Class({extends:cc.Component,properties:{machine:{default:null,visible:!1},roundCount:10,_canSpin:!1,_wheel_type:0,_callBack:null,_data:null,wheel:cc.Node,bg:cc.Node,board:cc.Node,btn_spin:cc.Node,spine_btn_spin:sp.Skeleton,spine_fire:sp.Skeleton,spine_win:sp.Skeleton,spine_wheel_bg:sp.Skeleton,label_start_prize:cc.Label},_getRotation:function(e){var t=360*-this.roundCount;return t+=[0,-300,-240,-180,-120,-60][e]},onLoad:function(){this._initListener()},onDestroy:function(){cc.vv.NetManager.unregisterMsg(MsgId.SLOT_SUBGAME_DATA,this._onSubGameData,!1,this)},_initListener:function(){this.btn_spin.on(cc.Node.EventType.TOUCH_END,this._onStartWheelHandler,this),cc.vv.NetManager.registerMsg(MsgId.SLOT_SUBGAME_DATA,this._onSubGameData,this)},_onSubGameData:function(e){e&&e.data&&1==e.data.rtype&&(this._data=e.data,this._startWheel())},_onStartWheelHandler:function(){this._canSpin&&(this.btn_spin.stopAllActions(),this._canSpin=!1,SlotsFacade.soundMgr.playEffect("spin"),SlotsFacade.dm.reqSubGame(1))},_reset:function(){this.board.angle=0,this.bg.active=!1,this.wheel.active=!1,this.wheel.y=this.wheel.height/2,this.spine_btn_spin.node.active=!1,this.spine_wheel_bg.node.active=!1,this.spine_win.node.active=!1,this.spine_fire.active=!1,this.label_start_prize.string=""},_startWheel:function(){var e=this;return i(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.spine_btn_spin.node.active=!1,e.btn_spin.getComponent("ImgSwitchCmp").setIndex(e._wheel_type+2),e.spine_fire.node.active=!0,e.spine_wheel_bg.node.active=!0,SlotsFacade.soundMgr.playEffect("wheel_roll"),t.next=7,new Promise(function(t){cc.tween(e.board).to(4,{angle:e._getRotation(e._data.idx-1)},{easing:"quartInOut"}).call(function(){e._data.coin?SlotsFacade.soundMgr.playEffect("map_button"):SlotsFacade.soundMgr.playEffect("pass1"),t()}).start()});case 7:return e.spine_fire.node.active=!1,e.spine_wheel_bg.node.active=!1,e.spine_win.node.active=!0,e.spine_win.setAnimation(0,"animation"+(e._wheel_type+1),!0),t.next=13,SlotsFacade.delayTime(2);case 13:e._completeWheel();case 14:case"end":return t.stop()}},t)}))()},_completeWheel:function(){var e=this;return i(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e._data.coin){t.next=4;break}return SlotsFacade.soundMgr.playEffect("jp_collect_popup"),t.next=4,SlotsFacade.popup.showWinGold(e._data.coin,1);case 4:return t.next=6,e.close();case 6:e._callBack&&e._callBack(e._data);case 7:case"end":return t.stop()}},t)}))()},_freshView:function(){this.btn_spin.getComponent("ImgSwitchCmp").setIndex(this._wheel_type),this.wheel.getChildByName("bar_left").getComponent("ImgSwitchCmp").setIndex(this._wheel_type),this.wheel.getChildByName("bar_right").getComponent("ImgSwitchCmp").setIndex(this._wheel_type),this.board.getComponent("ImgSwitchCmp").setIndex(this._wheel_type),this.wheel.getChildByName("arrow").getComponent("ImgSwitchCmp").setIndex(this._wheel_type)},open:function(e,t){this._callBack=e,this.node.active=!0,this._reset(),this._wheel_type=t.wheel_type,this._canSpin=!0,this._freshView();var n=t.startPrice;t.startPrice||(n=0,console.log("#error#startPrice is illegal")),this.label_start_prize.string=Global.FormatNumToComma(Math.floor(n)),this.bg.active=!0,this.bg.opacity=1,this.bg.runAction(cc.fadeTo(1,200)),this.wheel.active=!0,cc.tween(this.wheel).to(.5,{y:0},{easing:"backOut"}).start(),this.spine_btn_spin.node.active=!0,this.spine_btn_spin.setAnimation(0,"animation",!0),this.btn_spin.getComponent("ImgSwitchCmp").setIndex(this._wheel_type),cc.vv.gameData.checkAutoPlay(this.btn_spin,this._onStartWheelHandler.bind(this))},close:function(){var e=this;return i(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){cc.tween(e.bg).to(.5,{opacity:0}).call(function(){e.bg.active=!1}).start(),cc.tween(e.wheel).to(.5,{y:e.wheel.height/2},{easing:"backIn"}).call(function(){e.wheel.active=!1,e.node.active=!1,t()}).start()}));case 1:case"end":return t.stop()}},t)}))()}}),cc._RF.pop()},{}],Magician_Map:[function(e,t,n){"use strict";function a(e,t,n,a,i,o,r){try{var s=e[o](r),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(a,i)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(i,o){var r=e.apply(t,n);function s(e){a(r,i,o,s,c,"next",e)}function c(e){a(r,i,o,s,c,"throw",e)}s(void 0)})}}cc._RF.push(t,"0a7fanWkfFA7b/4FnRa8t5P","Magician_Map");cc.Class({extends:cc.Component,properties:{machine:{default:null,visible:!1},callBack:null,_mapWheel:null,map_game_node:null,bg:null,btn_close:null,scrollView:null,map_flag:null},onLoad:function(){this._bindView(),this._initListener(),this._reset()},_bindView:function(){this.map_game_node=this.node,this._mapWheel=this.map_game_node.getChildByName("map_wheel_node").getComponent("Magician_MapWheel"),this.bg=this.map_game_node.getChildByName("bg"),this.btn_close=this.map_game_node.getChildByName("btn_close").getComponent(cc.Button),this.scrollView=this.map_game_node.getChildByName("scrollview").getComponent(cc.ScrollView),this.map_flag=this.scrollView.content.getChildByName("map_flag");for(var e=SlotsFacade.dm.getGameCfg().mapCfg,t=1;t<=100;t++){var n=this.scrollView.content.getChildByName(t.toString());n.id=t;var a=n.getChildByName("icon"),i=e[t.toString()];3!=i.type&&a.getComponent("ImgSwitchCmp").setIndex(i.type-1),n.getChildByName("label_step").getComponent(cc.Label).string=t.toString()}},_initListener:function(){this.btn_close.node.on("click",this._onBtnCloseHandler.bind(this),this)},_onBtnCloseHandler:function(){var e=this;return i(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:SlotsFacade.soundMgr.playEffect("map_button"),e.btn_close.interactable=!1,cc.tween(e.btn_close.node).to(.3,{scale:0},{easing:"backIn"}).call(function(){e.exitMap()}).start();case 3:case"end":return t.stop()}},t)}))()},exitMap:function(e){var t=this,n=this.scrollView.node;cc.tween(n).to(.3,{y:n.height},{easing:"cubicOut"}).call(function(){t._reset(),t.callBack&&(t.callBack(e),t.callBack=null)}).start()},enterMap:function(e,t){var n=this;return i(regeneratorRuntime.mark(function a(){var i,o,r,s,c;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n.callBack=t,n.map_game_node.active=!0,a.next=4,new Promise(function(e){n.bg.active=!0,n.bg.opacity=0,cc.tween(n.bg).to(.5,{opacity:100}).call(function(){e()}).start()});case 4:return i=SlotsFacade.dm.energyData,o=i.map_idx,!e&&i.openGame>0&&(o-=1),n._freshMap(o),o>0?(r=n.scrollView.content.getChildByName(o.toString()),n.scrollView.scrollToOffset(cc.v2(0,Math.abs(r.y)-2*n.scrollView.node.height/3))):n.scrollView.scrollToBottom(),a.next=11,n._scrollViewShow();case 11:if(!e){a.next=15;break}n._showCloseBtn(),a.next=30;break;case 15:return a.next=17,n._moveMapFlag(i.map_idx);case 17:if(s=SlotsFacade.dm.getGameCfg().mapCfg,3==(c=s[i.map_idx.toString()]).type){a.next=29;break}return a.next=22,new Promise(function(e){n._mapWheel.open(function(t){e(t)},{wheel_type:c.type-1,startPrice:SlotsFacade.dm.energyData.startPrize})});case 22:if(!a.sent.extraFreeCnt){a.next=26;break}return a.next=26,n._addHouseFreeCnt(i.map_idx);case 26:n.exitMap(),a.next=30;break;case 29:n.exitMap({freeCnt:5+(i.extraFreeCnt||0)});case 30:case"end":return a.stop()}},a)}))()},_addHouseFreeCnt:function(e){var t=this;return i(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise(function(n){var a=t._findNextHouse(e);if(a){var i=SlotsFacade.dm.energyData.extraFreeCnt+1||0;SlotsFacade.dm.energyData.extraFreeCnt=i,a.getChildByName("label_free_count").getComponent("ImgSwitchCmp").setIndex(i);var o=a.getChildByName("spine_free_count_change").getComponent(sp.Skeleton);o.setAnimation(0,"animation",!1),o.setCompleteListener(function(){o.setCompleteListener(null),n()})}else n()}));case 1:case"end":return n.stop()}},n)}))()},_findNextHouse:function(e){for(var t=SlotsFacade.dm.getGameCfg().mapCfg,n=e;n<=100;n++){if(3==t[n.toString()].type)return this.scrollView.content.getChildByName(n.toString())}return null},_moveMapFlag:function(e){var t=this;return i(regeneratorRuntime.mark(function n(){var a,i,o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a=SlotsFacade.dm.getGameCfg().mapCfg,i=a[e.toString()],o=t.scrollView.content.getChildByName(e.toString()),n.next=5,new Promise(function(e){var n=o.getChildByName("pos");cc.tween(t.map_flag).to(1,{x:o.x+n.x,y:o.y+n.y}).call(function(){e()}).start()});case 5:return n.next=7,new Promise(function(e){var t="";t=3==i.type?"animation"+(i.slot.cnt-1):"animation"+i.type;var n=null;3!=i.type?((n=o.getChildByName("icon")).active=!1,SlotsFacade.soundMgr.playEffect("pass3")):SlotsFacade.soundMgr.playEffect("pass2");var a=o.getChildByName("spine").getComponent(sp.Skeleton);a.setAnimation(0,t,!1),a.setCompleteListener(function(){a.setCompleteListener(null),n&&(n.active=!0),e()})});case 7:case"end":return n.stop()}},n)}))()},_freshMap:function(e){for(var t=1;t<=e;t++)this._markItemCmp(t);if(e>0){var n=this.scrollView.content.getChildByName(e.toString()),a=n.getChildByName("pos");this.map_flag.x=n.x+a.x,this.map_flag.y=n.y+a.y;var i=this._findNextHouse(e),o=SlotsFacade.dm.energyData.extraFreeCnt||0;i.getChildByName("label_free_count").getComponent("ImgSwitchCmp").setIndex(o)}},_markItemCmp:function(e){var t=SlotsFacade.dm.getGameCfg().mapCfg[e.toString()],n=this.scrollView.content.getChildByName(e.toString()),a=(new cc.Color).fromHEX("#898989");if(n.getChildByName("icon").color=a,n.getChildByName("label_step").color=a,3!=t.type){var i=n.getChildByName("spine").getComponent(sp.Skeleton);i.node.color=a,i.node.active=!0,1==t.type?i.setAnimation(0,"animation1_2",!0):i.setAnimation(0,"animation2_2",!0)}else n.getChildByName("label_free_count").active=!1},_scrollViewShow:function(){var e=this;return new Promise(function(t){var n=e.scrollView.node;n.active=!0,cc.tween(n).to(.5,{y:0},{easing:"backOut"}).call(function(){t()}).start()})},_showCloseBtn:function(){var e=this;return new Promise(function(t){e.btn_close.node.active=!0,e.btn_close.node.scale=0,e.btn_close.interactable=!0,cc.tween(e.btn_close.node).to(.3,{scale:1},{easing:"backOut"}).call(function(){t()}).start()})},_reset:function(){this.bg.active=!1,this.scrollView.node.active=!1,this.scrollView.node.y=this.scrollView.node.height/2,this.btn_close.node.active=!1,this.map_game_node.active=!1},_delayTime:function(e){var t=this;return new Promise(function(n,a){t.scheduleOnce(function(){n()},e)})}});cc._RF.pop()},{}],Magician_Popup:[function(e,t,n){"use strict";function a(e,t,n,a,i,o,r){try{var s=e[o](r),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(a,i)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(i,o){var r=e.apply(t,n);function s(e){a(r,i,o,s,c,"next",e)}function c(e){a(r,i,o,s,c,"throw",e)}s(void 0)})}}cc._RF.push(t,"bd50aOi37FJ/7PmmPPe+wZS","Magician_Popup"),cc.Class({extends:cc.Component,properties:{bg:cc.Node},onLoad:function(){},_showPopup:function(e,t){var n=this;return i(regeneratorRuntime.mark(function a(){var i,o,r,s,c;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n.bg.active=!0,(i=n.node.getChildByName(e.popupName)).active=!0,o=null,e.startAniName&&((o=i.getChildByName("spine").getComponent(sp.Skeleton)).node.active=!0,o.setAnimation(0,e.startAniName,!1),o.setCompleteListener(function(){o.setCompleteListener(null),o.setAnimation(0,e.idelAniName,!0)})),(r=i.getChildByName("label_win").getComponent("LabelRollCmp")).node.active=!0,r.node.scale=0,cc.tween(r.node).delay(.1).to(.5,{scale:1},{easing:"backOut"}).start(),e.labelNeedRoll?r.startRoll(0,e.labelValue):r.value=e.labelValue,(s=i.getChildByName("btn_ok")).scale=0,s.active=!0,s.getComponent(cc.Button).interactable=!0,cc.tween(s).delay(.1).to(.5,{scale:1},{easing:"backOut"}).start(),a.next=17,cc.vv.gameData.awaitTime(.6);case 17:c=function a(){Global.SlotsSoundMgr.playEffect("common_click"),s.stopAllActions(),s.getComponent(cc.Button).interactable=!1,s.off(cc.Node.EventType.TOUCH_END,a),n.bg.active=!1;var c=[];c.push(new Promise(function(t){o.setAnimation(0,e.endAniName,!1),o.setCompleteListener(function(){o.setCompleteListener(null),t()})})),c.push(new Promise(function(e){cc.tween(s).to(.5,{scale:0},{easing:"backIn"}).call(function(){s.active=!1,e()}).start()})),c.push(new Promise(function(e){cc.tween(r.node).to(.5,{scale:0},{easing:"backIn"}).call(function(){r.node.active=!1,e()}).start()})),Promise.all(c).then(function(e){i.active=!1,t&&t()})},cc.vv.gameData.checkAutoPlay(s,c),s.on(cc.Node.EventType.TOUCH_END,c);case 20:case"end":return a.stop()}},a)}))()},showWinGold:function(e,t){var n=this;return i(regeneratorRuntime.mark(function a(){var i;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:i={popupName:"win_gold_dialog",startAniName:"animation1",idelAniName:"animation1_1",endAniName:"animation1_2",labelValue:e,labelNeedRoll:!0},a.t0=t,a.next=1===a.t0?4:2===a.t0?6:8;break;case 4:return i={popupName:"win_gold_dialog_type1",startAniName:"animation1",idelAniName:"animation2",endAniName:"animation3",labelValue:e,labelNeedRoll:!0},a.abrupt("break",10);case 6:return i={popupName:"win_gold_dialog_type2",startAniName:"animation1",idelAniName:"animation1_1",endAniName:"animation1_2",labelValue:e,labelNeedRoll:!0},a.abrupt("break",10);case 8:return i={popupName:"win_gold_dialog_type3",startAniName:"animation1",idelAniName:"animation1_1",endAniName:"animation1_2",labelValue:e,labelNeedRoll:!0},a.abrupt("break",10);case 10:return a.next=12,new Promise(function(e,t){n._showPopup(i,e)});case 12:case"end":return a.stop()}},a)}))()},showWinJackportGold:function(e){var t=this;return i(regeneratorRuntime.mark(function n(){var a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a={popupName:"win_gold_dialog_type3",startAniName:"animation1_1",idelAniName:"animation1_3",endAniName:"animation1_4",labelValue:e,labelNeedRoll:!0},n.next=3,new Promise(function(e,n){t._showPopup(a,e)});case 3:case"end":return n.stop()}},n)}))()},showWinFreeCnt:function(e){var t=this;return i(regeneratorRuntime.mark(function n(){var a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a={popupName:"win_free_cnt_dialog",startAniName:"animation2",idelAniName:"animation2_1",endAniName:"animation2_2",labelValue:e,labelNeedRoll:!1},n.next=3,new Promise(function(e,n){t._showPopup(a,e)});case 3:case"end":return n.stop()}},n)}))()}}),cc._RF.pop()},{}],Magician_Reel:[function(e,t,n){"use strict";cc._RF.push(t,"06cc8KY6i5PspQSFJO1wF4y","Magician_Reel"),cc.Class({extends:e("LMSlots_Reel_Base"),properties:{wildMask:cc.Node},onLoad:function(){this._super(),this.wildMask=this.node.getChildByName("wild_mask")},showWildMask:function(e){this.wildMask&&(this.wildMask.active=e)}}),cc._RF.pop()},{LMSlots_Reel_Base:void 0}],Magician_Slots:[function(e,t,n){"use strict";function a(e,t,n,a,i,o,r){try{var s=e[o](r),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(a,i)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(i,o){var r=e.apply(t,n);function s(e){a(r,i,o,s,c,"next",e)}function c(e){a(r,i,o,s,c,"throw",e)}s(void 0)})}}function o(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=r(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,o=!0,s=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==a.return||a.return()}finally{if(s)throw i}}}}function r(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}cc._RF.push(t,"c8d904XJNJH2LtZcDrdDYkV","Magician_Slots"),cc.Class({extends:e("LMSlots_Slots_Base"),properties:{MaxSlotsCnt:4,_slotsCnt:1,_unitSlotColCnt:5,_nowJpLockWeight:0,_nowJpUnlockWeight:0},Init:function(){this._super(),this.changeSlots()},StartMove:function(){this._bStopRightnow=null,this._gameInfo=null,this._topScript.StartMove(),cc.vv.gameData.ClearOneRoundData(),this.MoveReels(this.getCurReels()),this._stopTime=this.GetStopTime(),0==SlotsFacade.dm.GetTotalFree()&&Global.SlotsSoundMgr.playNormalBgm(),SlotsFacade.extraWildCmp.hideWild()},onMsgSpine:function(e){SlotsFacade.flowCtrl.onMsgSpine(e)},GetSymbolByIdx:function(e){var t=this._unitSlotColCnt*this._slotsCnt,n=(e-1)%t,a=this._row-Math.floor((e-1)/t)-1;return this._reels[n].GetSymbolByRow(a)},SetSlotsResult:function(e){var t=e.resultCards;if(e.mapFreeGameData&&e.mapFreeGameData.length>0){t=[];for(var n=0;n<this._row;n++){var a,i=o(e.mapFreeGameData);try{for(i.s();!(a=i.n()).done;)for(var r=a.value,s=0;s<this._unitSlotColCnt;s++)t.push(r.cards[n*this._unitSlotColCnt+s])}catch(e){i.e(e)}finally{i.f()}}}var c=[],l=this.getCurrReelCnt(),p=SlotsFacade.dm.getSpinData().bonusCoinIdxs||[];p=p.concat();var d=SlotsFacade.dm.getSpinData().bonusCoins||[];d=d.concat();for(var m=0;m<t.length;m++){Math.floor(m/l);var u=m%l;if(this._cfg.symbol[t[m]]){var h={};h.sid=t[m],p.length&&p[0]==m+1&&(h.data=d[0],p.shift(),d.shift()),c[u]||(c[u]=[]),c[u].unshift(h)}}for(var _=0;_<5*this._slotsCnt;_++){var g=this._reels[_],f=c[_];g.SetResult(f)}},SetReelStateInfo:function(e){for(var t=this,n=[],a=0;a<e.length;a++){var i=e[a],r=a%this._unitSlotColCnt;n[r]||(n[r]=[]),n[r].push(i)}var s,c=o(this._cfg.reelStateInfo);try{var l=function(){var e=s.value,a=Global.copy(e);a.isStop=!1,a.isAnt=!1;for(var i=a.mini,o=Global.copy(a.counts),r=0,c=0;c<n.length;c++){var l=t._reels[c],p=n[c];a.isStop=!1,a.isAnt=!1,r>=i-1&&a.counts[c]>0&&(a.isAnt=!0);var d=p.reduce(function(e,t){return a.id.includes(t)?e+1:e+0},0);r+=d,o.shift();var m=(o.length>0?o.reduce(function(e,t){return e+t}):0)+r;d>0&&m>=i&&(a.isStop=!0),l.AddReelStateInfo(Global.copy(a))}};for(c.s();!(s=c.n()).done;)l()}catch(e){c.e(e)}finally{c.f()}},hasScatter:function(e){for(var t=cc.vv.gameData.getGameCfg().scatterId,n=this._reels[e]._symbols,a=0;a<3;a++)if(n[a].GetShowId()==t)return!0;return!1},OnSpinEnd:function(){SlotsFacade.flowCtrl.spinEnd()},ReconnectShow:function(){this.scheduleOnce(function(){SlotsFacade.flowCtrl.enterRoom()})},playScatter:function(e){var t=this;return i(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return SlotsFacade.soundMgr.playEffect("bell"),e.forEach(function(e){var n=t.GetSymbolByIdx(e);n.setAnimationToTop(!1),n.playTriggerAnimation()}),n.next=4,SlotsFacade.delayTime(1.5);case 4:case"end":return n.stop()}},n)}))()},getSymbolsByServerIds:function(e){var t=this,n=[];return e.forEach(function(e){n.push(t.GetSymbolByIdx(e))}),n},getCurReels:function(){return this._reels.slice(0,this.getCurrReelCnt())},getCurrReelCnt:function(){return this._slotsCnt*this._unitSlotColCnt},showSlots:function(){for(var e=1;e<=this.MaxSlotsCnt;e++)cc.find("reels_bg"+e,this.node).active=e<=this._slotsCnt;for(var t=this.getCurrReelCnt(),n=0;n<this._col;n++)this._reels[n].node.active=n<t;this._slotsCnt<=2?this.node.scale=1:3==this._slotsCnt?this.node.scale=.8:4==this._slotsCnt&&(this.node.scale=.65)},showSlotsWildMask:function(){if(this._slotsCnt>1)for(var e=SlotsFacade.dm.getGameCfg().mapCfg[SlotsFacade.dm.energyData.map_idx+""].slot.wilds,t=0;t<this._reels.length;t++){var n=t%5+1;this._reels[t].showWildMask(e.includes(n))}else for(var a=0;a<this._unitSlotColCnt;a++)this._reels[a].showWildMask(!1)},changeSlots:function(){this._slotsCnt=SlotsFacade.dm.getSlotsCnt(),SlotsFacade.mainPanel.logo_spine.active=4!=this._slotsCnt&&1!=this._slotsCnt,this.showSlotsWildMask(),this.showSlots()},ShowWinTrace:function(){var e=[],t=SlotsFacade.dm.getSpinData().mapFreeGameData;if(t&&t.length>0)for(var n in t)for(var a=t[n].traceResult,i=0;i<a.length;i++)for(var o=a[i],r=0;r<o.indexs.length;r++){var s=o.indexs[r],c=(s-1)%5;e[5*Math.floor((s-1)/5)*this._slotsCnt+5*n+c+1]=1}else for(var l=SlotsFacade.dm.getSpinData(),p=0;p<l.zjLuXian.length;p++)for(var d=l.zjLuXian[p],m=0;m<d.indexs.length;m++)e[d.indexs[m]]=1;for(var u=this.getCurReels(),h=u.length,_=0;_<h;_++){for(var g=u[_],f=[!1,!1,!1],S=0;S<3;S++){var v=(2-S)*h+(_+1);1==g._symbols[S].GetShowId()&&e[v]&&(f[S]=!0)}f[0]&&f[1]&&f[2]?(g._symbols[0].wildAniCount=3,g._symbols[1].wildAniCount=0,g._symbols[2].wildAniCount=0):f[0]&&f[1]?(g._symbols[0].wildAniCount=2,g._symbols[1].wildAniCount=0):f[1]&&f[2]&&(g._symbols[1].wildAniCount=2,g._symbols[2].wildAniCount=0)}for(var y in e){var w=this.GetSymbolByIdx(Number(y));w&&(w.playWinAnimation(),w.ShowKuang())}},clearFreeSymbols:function(){for(var e=5;e<this._reels.length;e++)for(var t=this._reels[e]._symbols,n=0;n<t.length;n++)t[n].StartMove()},getIdxGlobalPos:function(e){var t=(e-1)%5,n=this._row-Math.floor((e-1)/5)-1,a=this._reels[t],i=a.GetSymbolPosByRow(n);return a.node.getChildByName("mask").convertToWorldSpaceAR(i)}}),cc._RF.pop()},{LMSlots_Slots_Base:void 0}],Magician_Sound:[function(e,t,n){"use strict";cc._RF.push(t,"111d0Mm/cdKdo9797vCatVo","Magician_Sound"),cc.Class({extends:cc.Component,properties:{_soundPath:"games/Magician/",_isPlayBgm:!1},playEffect:function(e,t){return cc.vv.AudioManager.playEff(this._soundPath,e,!0,t)},stopEffectByName:function(e){cc.vv.AudioManager.stopEffectByName(e)},stopEffect:function(){cc.vv.AudioManager.stopAudio()},playBgm:function(e){e?(Global.SlotsSoundMgr.stopBgm(),Global.SlotsSoundMgr.playBgm(e)):Global.SlotsSoundMgr.playNormalBgm()},playFreeBgm:function(){this.playBgm("fgbgm")},playWheelBgm:function(){this.playBgm("mapBG_Wheelbgm")}}),cc._RF.pop()},{}],Magician_WheelGame:[function(e,t,n){"use strict";function a(e,t,n,a,i,o,r){try{var s=e[o](r),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(a,i)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(i,o){var r=e.apply(t,n);function s(e){a(r,i,o,s,c,"next",e)}function c(e){a(r,i,o,s,c,"throw",e)}s(void 0)})}}cc._RF.push(t,"040eeApYKlHSpfahLNgCQJV","Magician_WheelGame"),cc.Class({extends:cc.Component,properties:{machine:null,roundCount:20,canSpin:!1,wheel_game_node:null,bg:null,wheel:null,transition_ani:sp.Skeleton,btn_start_wheel:null,btn_start_spine:null,light_ani:null,fire_ani:null,flash_ani:null,board:null,callBack:null,resultData:null},_getRotation:function(e){var t=360*-this.roundCount;return t+=[0,360/21*5-360,360/21*6-360,-240,360/21*8-360,360/21*9-360,-180,360/21*12-360,360/21*13-360,-120,360/21*15-360,360/21*16-360][e]},onLoad:function(){this._bindView(),this._initListener()},onDestroy:function(){cc.vv.NetManager.unregisterMsg(MsgId.SLOT_SUBGAME_DATA,this._onSubGameData,!1,this)},_bindView:function(){this.wheel_game_node=this.node,this.bg=this.wheel_game_node.getChildByName("bg"),this.transition_ani=SlotsFacade.mainPanel.wheel_transition_ani.getComponent(sp.Skeleton),this.wheel=this.wheel_game_node.getChildByName("wheel"),this.btn_start_wheel=this.wheel.getChildByName("btn_start_wheel"),this.btn_start_spine=this.btn_start_wheel.getChildByName("btn_start_spine"),this.light_ani=this.wheel.getChildByName("light_ani"),this.fire_ani=this.wheel.getChildByName("fire_ani"),this.flash_ani=this.wheel.getChildByName("flash_ani"),this.board=this.wheel.getChildByName("board")},_initListener:function(){this.btn_start_wheel.on("click",this._onStartWheelHandler.bind(this),this),cc.vv.NetManager.registerMsg(MsgId.SLOT_SUBGAME_DATA,this._onSubGameData,this)},_onSubGameData:function(e){e&&e.data&&2==e.data.rtype&&(this.resultData=e,e.data.freeCnt>0&&SlotsFacade.dm.addFreeCnt(e.data.freeCnt),this._startWheel(e.data))},_onStartWheelHandler:function(){var e=this;return i(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.canSpin){t.next=2;break}return t.abrupt("return");case 2:e.btn_start_wheel.stopAllActions(),SlotsFacade.soundMgr.playEffect("spin"),SlotsFacade.dm.reqSubGame(2);case 5:case"end":return t.stop()}},t)}))()},_startWheel:function(e){var t=this;return i(regeneratorRuntime.mark(function n(){var a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.btn_start_spine.getComponent(sp.Skeleton).setAnimation(0,"animation2",!1),t.canSpin=!1,t.transition_ani.setAnimation(0,"animation4",!1),t.flash_ani.active=!0,t.flash_ani.getComponent(sp.Skeleton).setAnimation(0,"animation",!0),SlotsFacade.soundMgr.playEffect("wheel_act"),cc.tween(t.board).to(8,{angle:t._getRotation(e.idx-1)},{easing:"quartInOut"}).call(function(){t._completeWheel(e)}).start(),n.next=10,SlotsFacade.delayTime(2);case 10:t.fire_ani.active=!0,t.fire_ani.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),(a=t.board.getChildByName("max_box_mask")).opacity=255,cc.tween(a).delay(.5).to(.5,{opacity:0}).start();case 16:case"end":return n.stop()}},n)}))()},_completeWheel:function(e){var t=this;return i(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.flash_ani.active=!1,1==e.idx?t.wheel.getChildByName("win3").active=!0:7==e.idx?t.wheel.getChildByName("win1").active=!0:t.wheel.getChildByName("win2").active=!0,n.next=4,SlotsFacade.delayTime(2);case 4:if(!e.winCoin){n.next=8;break}return SlotsFacade.soundMgr.playEffect("wheel_popup"),n.next=8,SlotsFacade.popup.showWinGold(e.winCoin,3);case 8:t.exitWheelGame(e);case 9:case"end":return n.stop()}},n)}))()},_reset:function(){this.resultData={},this.btn_start_spine.getComponent(sp.Skeleton).setAnimation(0,"animation1",!0),this.board.angle=0;var e=this.board.getChildByName("max_box_mask");e.active=!0,e.opacity=255,this.wheel.getChildByName("win1").active=!1,this.wheel.getChildByName("win2").active=!1,this.wheel.getChildByName("win3").active=!1,this.fire_ani.active=!1,this.flash_ani.active=!1},_bindData:function(e){for(var t=0;t<12;t++){var n=t+1,a=e[t.toString()];if(1==n){var i=this.board.getChildByName("item1_fg");i.active=1==a.type;var o=this.board.getChildByName("item1_coin");o.active=1!=a.type,1==a.type?i.getChildByName("label").getComponent(cc.Label).string=a.el:o.getChildByName("label").getComponent(cc.Label).string=Global.convertNumToShort(a.el)}else if(7==n){this.board.getChildByName("label_7").getComponent(cc.Label).string=Global.convertNumToShort(a.el)}else{this.board.getChildByName("label_"+n).getComponent(cc.Label).string=a.el}}},exitWheelGame:function(){var e=this,t=this.resultData.data;SlotsFacade.mainPanel.showSceneTransition(),cc.tween(this.wheel_game_node).delay(2).call(function(){e.wheel.active=!1,e.bg.active=!1,e.transition_ani.node.active=!1,e.callBack&&e.callBack(t)}).start()},enterWheelGame:function(e,t){var n=this;this.callBack=t,this._reset(),this._bindData(e),this.transition_ani.node.active=!0;var a=this.transition_ani;Global.SlotsSoundMgr.stopBgm(),SlotsFacade.soundMgr.playEffect("fg_trigger_popup"),new Promise(function(e){a.setAnimation(0,"animation1",!1),a.setCompleteListener(function(){a.setCompleteListener(null),e()})}).then(function(e){return n.bg.active=!0,n.wheel.active=!0,new Promise(function(e){SlotsFacade.soundMgr.playWheelBgm(),a.setAnimation(0,"animation2",!1),a.setCompleteListener(function(){a.setCompleteListener(null),e()})})}).then(function(e){n.canSpin=!0,cc.vv.gameData.checkAutoPlay(n.btn_start_wheel,n._onStartWheelHandler.bind(n))})}}),cc._RF.pop()},{}],Magician_symbol:[function(e,t,n){"use strict";cc._RF.push(t,"caf16y51SBIZoUSYrwUnnNg","Magician_symbol"),cc.Class({extends:e("LMSlots_Symbol_Base"),properties:{wildAniCount:1},StartMove:function(){this._super(),this.wildAniCount=1},playWinAnimation:function(){1==this.GetShowId()&&1!=this.wildAniCount?this.playWildAni():this._super()},playWildAni:function(){if(!(this.wildAniCount<1)){var e=this.setAnimationToTop(!0);e.active=!0;var t=cc.find("w1",e).getComponent(sp.Skeleton);t.node.active=!0,t.setAnimation(0,"animation1_"+this.wildAniCount,!1),t.addAnimation(0,"animation"+this.wildAniCount,!0)}}}),cc._RF.pop()},{LMSlots_Symbol_Base:void 0}]},{},["Magician_Cfg","Magician_Character","Magician_Events","Magician_ExtraWildGame","Magician_FlowCtrl","Magician_GameData","Magician_Logic","Magician_MainPanel","Magician_Map","Magician_MapCollectProgress","Magician_MapWheel","Magician_Popup","Magician_Reel","Magician_Slots","Magician_Sound","Magician_WheelGame","Magician_symbol"]);
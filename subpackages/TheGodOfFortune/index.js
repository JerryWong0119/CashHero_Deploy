window.__require=function e(t,n,o){function i(s,r){if(!n[s]){if(!t[s]){var c=s.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!r&&l)return l(c,!0);if(a)return a(c,!0);throw new Error("Cannot find module '"+s+"'")}s=c}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){return i(t[s][1][e]||e)},u,u.exports,e,t,n,o)}return n[s].exports}for(var a="function"==typeof __require&&__require,s=0;s<o.length;s++)i(o[s]);return i}({TheGodOfFortune_BonusGame:[function(e,t,n){"use strict";function o(e,t,n,o,i,a,s){try{var r=e[a](s),c=r.value}catch(e){return void n(e)}r.done?t(c):Promise.resolve(c).then(o,i)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(i,a){var s=e.apply(t,n);function r(e){o(s,i,a,r,c,"next",e)}function c(e){o(s,i,a,r,c,"throw",e)}r(void 0)})}}cc._RF.push(t,"2cd00omnZtLVpaiZAY9SpIQ","TheGodOfFortune_BonusGame"),cc.Class({extends:cc.Component,properties:{_slotsUI:null,_col:20,_row:1,_reels:[],_cfg:null,_stopTime:null,_exitLast:null,_exitCallBack:null,_bStopRightnow:null,_restNum:0,_curNum:0,_emptyId:18,_greenId:4,_wildId:2},Init:function(){this._slotsUI=cc.find("safe_node/slots/respin_slots",this.node),this._topAnimationNode=cc.find("top_ani",this._slotsUI),this._top_ani=cc.find("top_ani",this._slotsUI),this._particle_sj=cc.find("particle_sj",this._slotsUI),this._particle_sj.active=!1,this._node_spine=cc.find("safe_node/slots/node_respin",this.node),this._node_spine.active=!1,this._spine_jsk=cc.find("spine_jishukuang",this._node_spine),this._node_allNum=cc.find("node_allNum",this._spine_jsk),this._spine_winner=cc.find("spine_winner",this._spine_jsk),this._node_allNum.active=!1,this._spine_winner.active=!1,this._node_times=cc.find("node_times",this._node_spine),this._bonusBg=cc.find("safe_node/spr_bg_respin",this.node),this.createReels(this._col),this.initAllHolderState(!1)},awaitTime:function(e){var t=this;return new Promise(function(n,o){t.scheduleOnce(function(){n()},e)})},createReels:function(e){for(var t=0;t<e;t++){var n=cc.find("reels/reel"+(t+1),this._slotsUI).addComponent("TheGodOfFortune_BonusReel");n.Init(t,1,this._top_ani),this._reels.push(n)}},initAllBg:function(e){for(var t=0;t<this._col;t++)this._reels[t].showBonusBg(e)},initAllWildKuang:function(e){for(var t=0;t<this._col;t++)this._reels[t].showBonusWildKuang(e)},setWildKuangByIdx:function(e,t){this._reels[this.getColByIdx(e)].showBonusWildKuang(t)},initAllHolderState:function(e){for(var t=0;t<this._col;t++)this._reels[t].showBonusHolder(e)},setHolderStateByIdx:function(e,t){this._reels[this.getColByIdx(e)].showBonusHolder(t)},getHolderByIdx:function(e){return this._reels[this.getColByIdx(e)].getBonusHolder()},initAllBonusSymbol:function(){for(var e=0;e<this._col;e++)this._reels[e].showBonusHolder(!1),this._reels[e].GetSymbolByRow(0).ShowById(this._emptyId)},playLastGame:function(e){var t=this;return i(regeneratorRuntime.mark(function n(){var o,i,a,s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:for(cc.vv.gameData.setIsEndOfRound(!0),o=cc.vv.gameData.getNormalWildIdxs(),i=0;i<o.length;i++)t._reels[t.getColByIdx(o[i])].showBonusBg(!0),t.GetSymbolByIdx(o[i]).playBonusRedKuangAnim(!0);return n.next=5,t.awaitTime(2);case 5:return t.StartMove(),n.next=8,t.awaitTime(.5);case 8:a=cc.vv.gameData.getLastGame(),s=t.creatReelData(a.info),t.SetSlotsResult(s),cc.vv.gameData.GetBottomScript().ShowBtnsByState("moveing_2"),t._exitLast=e;case 13:case"end":return n.stop()}},n)}))()},enterBonusGame:function(e,t,n){var o=this;return i(regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(Global.SlotsSoundMgr.stopBgm(),Global.SlotsSoundMgr.playBgm("ngbgm"),cc.vv.gameData.setIsBonusGame(!0),cc.vv.gameData.GetCollectScript().setBtnCollectState(!1),o._exitCallBack=t,o._bonusBg.active=!0,o._slotsUI.active=!0,o.initData(e),o.initPool(!0),!n){i.next=17;break}return cc.vv.gameData.GetBottomScript().ShowBtnsByState("moveing_1"),i.next=13,o.awaitTime(1);case 13:return i.next=15,cc.vv.gameData.GetPopupScript().showStartBonus();case 15:i.next=18;break;case 17:cc.vv.gameData.setIsEndOfRound(!1);case 18:return i.next=20,o.awaitTime(2);case 20:o.sendNextRound();case 21:case"end":return i.stop()}},i)}))()},exitBonusGame:function(){cc.vv.gameData.setIsEndOfRound(!1),cc.vv.gameData.setIsBonusGame(!1),cc.vv.gameData.GetCollectScript().setBtnCollectState(!0),this._bonusBg.active=!1,this._node_spine.active=!1,this._spine_winner.active=!1,this.initAllWildKuang(!1),this.initAllBg(!1),this.initAllHolderState(!1),this.initAllBonusSymbol(),this.initPool(!1)},initData:function(e){this._node_spine.active=!0;var t=e.info,n={};for(var o in t)"coin"===t[o].type||"pool"===t[o].type?n[o]=t[o]:t[o].type;this.initAllWildKuang(!1);var i=this.creatReelData(n);this.SetSlotsResult(i);for(var a=0,s=0;s<20;s++){var r=this.GetSymbolByIdx(s+1);if(r.ShowById(i[s].sid,i[s].data),r.node.parent.active=!0,this._reels[this.getColByIdx(s+1)].showBonusBg(!0),18!==i[s].sid)this.ShowSymbolTopAni(0,this.getColByIdx(s+1)).showBonusWildKuang(!0),a+=1}this._restNum=e.num?e.num:3,this._curNum=this._restNum,this.updateSpinsNum(!1),this.updateAllPrizeNum(a)},initPool:function(e){var t=cc.find("Canvas/safe_node/LMSlots_PrizePool_1").getComponent("LMSlots_PrizePool_Base");if(e){var n=cc.vv.gameData.getBonusPoolList();t.PausePool([{prizeType:0,pauseNum:n[0]},{prizeType:1,pauseNum:n[1]},{prizeType:2,pauseNum:n[2]},{prizeType:3,pauseNum:n[3]}])}else t.ResumePausePool()},playGreenTriAnim:function(){var e=cc.vv.gameData.getLastGame().info,t=[];for(var n in e)if("coin"===e[n].type||"pool"===e[n].type){var o=Number(n.substring("idx_".length));t.push(this.getColByIdx(o))}for(var i=0;i<t.length;i++)this._reels[t[i]].ShowAntiEffect(!0)},hideAllGreenAnim:function(){for(var e=0;e<this._col;e++)this._reels[e].ShowAntiEffect(!1)},updateSpinsNum:function(e){if(this._restNum>this._curNum){Global.SlotsSoundMgr.playEffect("num2");var t=this._node_times.getChildByName("spine_bomb");t.active=!0,t.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),t.getComponent(sp.Skeleton).setCompleteListener(function(){t.active=!1})}this._curNum=this._restNum;var n="theme185_respin_wenben1";n=e?"theme185_respin_wenben5":"theme185_respin_wenben"+(4-this._restNum),this._node_times.active=!0,this._node_times.getChildByName("spr").getComponent(cc.Sprite).spriteFrame=cc.vv.gameData.GetAtlasByName("base").getSpriteFrame(n)},updateAllPrizeNum:function(e){if(e>0){var t=this._node_allNum.getChildByName("lbl_nums").getComponent(cc.Label);if(e>Number(t.string)){Global.SlotsSoundMgr.playEffect("num1");var n=this._node_allNum.getChildByName("spine_bomb");n.active=!0,n.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),n.getComponent(sp.Skeleton).setCompleteListener(function(){n.active=!1})}this._node_allNum.active=!0,t.string=e}else this._node_allNum.active=!1},StartMove:function(){if(this._bStopRightnow=!1,cc.vv.gameData.isEndOfRound())for(var e=cc.vv.gameData.getNormalWildIdxs(),t=0;t<e.length;t++)this.setHolderStateByIdx(e[t],!0);else this._restNum-=1,this.updateSpinsNum(!1);this.MoveReels(this._reels),this._stopTime=this.GetStopTime()},onMsgSpine:function(e){this._coinBonusInfo=e.coinBonus,this._totalTime=this._coinBonusInfo.total;var t=this._coinBonusInfo.info,n=this.creatReelData(t);this.SetSlotsResult(n),this._restNum=this._coinBonusInfo.num,cc.vv.gameData.GetBottomScript().ShowBtnsByState("moveing_2")},MoveReels:function(e){this.moveReelLastIdx=-1;for(var t=0;t<e.length;t++){var n=e[t];n.StartMove();var o=n.GetReelIdx();if(cc.vv.gameData.isEndOfRound())cc.vv.gameData.getNormalWildIdxs().includes(this.getIdxByCol(o))&&o>this.moveReelLastIdx&&(this.moveReelLastIdx=o);else o>this.moveReelLastIdx&&(this.moveReelLastIdx=o)}},StopMove:function(){this._bStopRightnow=!0,cc.vv.gameData.GetBottomScript().ShowBtnsByState("moveing_1"),this._stopTime=-1;for(var e=0;e<this._reels.length;e++){var t=this._reels[e];t.StopMove(0),t.StopMoveRightNow()}},creatReelData:function(e){for(var t=[],n=0;n<20;n++){var o={};o.sid=this._emptyId,o.data={},t.push(o)}for(var i in e){var a=Number(i.substring("idx_".length));t[a-1].sid=this.convertTypeToId(e[i].type),t[a-1].data=e[i]}return t},convertTypeToId:function(e){var t=this._emptyId;return"coin"===e||"pool"===e?t=this._greenId:"wild"===e&&(t=this._wildId),t},SetSlotsResult:function(e){e.length,this._col;for(var t=[],n=0;n<e.length;n++){var o=this.getColByIdx(n+1),i={};i.sid=e[n].sid,i.data=e[n].data,t[o]||(t[o]=[]),t[o].unshift(i)}for(var a=0;a<this._reels.length;a++){var s=this._reels[a],r=t[a];s.SetResult(r)}},sendNextRound:function(){cc.vv.gameData.GetBottomScript().SendSpinReq()},OnReelBounsActionBefore:function(e){if(cc.vv.gameData.isEndOfRound()){var t=cc.vv.gameData.getNormalWildIdxs();if(!t.includes(this.getIdxByCol(e)))return;for(var n=0,o=!0,i=0;i<=e;i++)if(t.includes(this.getIdxByCol(i))&&this._reels[i].GetSymbolByRow(0).GetShowId()===this._greenId){n+=1;for(var a=e+1;a<this._col;a++)if(t.indexOf(this.getIdxByCol(a))){o=!1;break}}if(n>=5&&!o)for(var s=0,r=e+1;r<this._col;r++)if(t.includes(this.getIdxByCol(r))){0===s&&this._reels[r].playAntiAnimation(),s+=1;var c=cc.vv.gameData.getGameCfg().AddAntiTime||1;this._reels[r].AddDelayTime(c)}}},OnReelBounsActionDeep:function(e){},OnReelBounsActionEnd:function(e){for(var t=0;t<this._row;t++){if(this.getSymbolTopAni(t,e));else{var n=this._reels[e].GetSymbolByRow(t);if(n.GetShowId()===this._wildId&&cc.vv.gameData.isEndOfRound()&&(Global.SlotsSoundMgr.playEffect("symbol_wild"),n.playStopAnimation(),this.showKuangLast(e)),4===n.GetShowId())if(cc.vv.gameData.isEndOfRound())Global.SlotsSoundMgr.playEffect("symbol_bonus2"),n.playStopAnimation(),this.showKuangLast(e);else if(this.showStopAni(t,e),!this._bStopRightnow){var o=this._node_allNum.getChildByName("lbl_nums").getComponent(cc.Label),i=Number(o.string)+1;this.updateAllPrizeNum(i)}}}},showKuangLast:function(e){var t=this;return i(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t._reels[e].showBonusWildKuang(!1),n.next=3,t.awaitTime(.5);case 3:t._reels[e].showBonusWildKuang(!0);case 4:case"end":return n.stop()}},n)}))()},showStopAni:function(e,t){var n=this;return i(regeneratorRuntime.mark(function o(){var i;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return(i=n.ShowSymbolTopAni(e,t)).playStopAnimation(),o.next=4,n.awaitTime(.5);case 4:i.showBonusWildKuang(!0);case 5:case"end":return o.stop()}},o)}))()},OnSpinEnd:function(){var e=this;return i(regeneratorRuntime.mark(function t(){var n,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!cc.vv.gameData.isEndOfRound()){t.next=7;break}return t.next=3,e.awaitTime(1);case 3:cc.vv.gameData.setIsBonusGame(!1),e._exitLast&&e._exitLast(),t.next=38;break;case 7:if(e.updateAllPrizeNum(e._coinBonusInfo.total),!(e._restNum>0)){t.next=15;break}return e.updateSpinsNum(!1),t.next=12,e.awaitTime(1);case 12:e.sendNextRound(),t.next=38;break;case 15:return e.updateSpinsNum(!0),Global.SlotsSoundMgr.playEffect("respin_end"),t.next=19,e.awaitTime(1);case 19:return t.next=21,e.playSJAnim();case 21:return n=cc.vv.gameData.GetBottomScript().getCurrentWin(),o=n,t.next=25,cc.vv.gameData.GetPopupScript().showEndBonus(o);case 25:return t.next=27,new Promise(function(e,t){cc.vv.gameData.GetSlotsScript().ShowBottomWin(n,o,!0,e)});case 27:return cc.vv.gameData.GetPopupScript().playQP1Anim(),t.next=30,e.awaitTime(1.5);case 30:return cc.vv.gameData.GetTotalFree()<=0&&cc.vv.gameData.GetSlotsScript().setRandomCards(),e.exitBonusGame(),e.hideAllTopAni(),t.next=35,e.awaitTime(2);case 35:Global.SlotsSoundMgr.stopBgm(),cc.vv.gameData.GetSlotsScript().playGameBgm(),e._exitCallBack&&e._exitCallBack();case 38:case"end":return t.stop()}},t)}))()},hideAllTopAni:function(){for(var e=0;e<this._col;e++)for(var t=0;t<this._row;t++){var n=this.getSymbolTopAni(t,e);n&&n.node.destroy()}},playSJAnim:function(){var e=this;return i(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=i(regeneratorRuntime.mark(function t(n,o){var i,a,s,r,c,l,u,m,_,p;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._node_allNum.active=!1,e._node_times.active=!1,e._spine_winner.active=!0,e._spine_winner.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),Global.SlotsSoundMgr.playEffect("frame_change"),(i=e._spine_winner.getChildByName("lbl_result")).getComponent(cc.Label).string="",t.next=9,e.awaitTime(1);case 9:a=0,s=cc.vv.gameData.GetBottomScript().getCurrentWin(),r=0;case 12:if(!(r<e._col)){t.next=39;break}c=e._row-1;case 14:if(!(c>=0)){t.next=36;break}if(!((l=e._reels[r].GetSymbolByRow(c)).getPrize()>0)){t.next=33;break}return l.playCollectAnim(),u=e._slotsUI.convertToNodeSpaceAR(l.node.convertToWorldSpaceAR(cc.v2(0,0))),m=e._slotsUI.convertToNodeSpaceAR(i.convertToWorldSpaceAR(cc.v2(0,0))),_=.3,e.flyParticle(u,m,_),t.next=24,e.awaitTime(_);case 24:return p=l.getPrize(),Global.doRoallNumEff(i,a,a+p,.3,null,null,0,!0),a+=p,cc.vv.gameData.GetBottomScript().SetWin(s+p),s+=p,e._spine_winner.getChildByName("spine_win_zi").active=!0,e._spine_winner.getChildByName("spine_win_zi").getComponent(sp.Skeleton).setAnimation(0,"animation",!1),t.next=33,e.awaitTime(.2);case 33:c--,t.next=14;break;case 36:r++,t.next=12;break;case 39:n();case 40:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},flyParticle:function(e,t,n){Global.SlotsSoundMgr.playEffect("fly1");var o=cc.instantiate(this._particle_sj);o.active=!0,o.getComponent(cc.ParticleSystem).resetSystem(),o.parent=this._slotsUI,o.position=e,o.runAction(cc.sequence(cc.moveTo(n,t),cc.destroySelf()))},ShowSymbolTopAni:function(e,t){var n=cc.vv.gameData.getGameCfg().scripts.Symbols,o=cc.find(cc.js.formatStr("top_symbol_%s_%s",e,t),this._topAnimationNode);if(o)return o.active=!0,o.getComponent(n);var i=this._reels[t].GetSymbolByRow(e);if(i){var a=i.node.convertToWorldSpaceAR(cc.v2(0)),s=cc.instantiate(i.node);return s.parent=this._topAnimationNode,s.name=cc.js.formatStr("top_symbol_%s_%s",e,t),s.position=this._topAnimationNode.convertToNodeSpaceAR(a),s.getComponent(n)}},getSymbolTopAni:function(e,t){var n=cc.vv.gameData.getGameCfg().scripts.Symbols,o=cc.find(cc.js.formatStr("top_symbol_%s_%s",e,t),this._topAnimationNode);return o?(o.active=!0,o.getComponent(n)):null},GetStopTime:function(){return cc.vv.gameData.getGameCfg().auto_stop_time||3},SetStopTime:function(e){this._stopTime=e},GetReelStopInter:function(e){var t=cc.vv.gameData.getGameCfg().bonusReelStopInter||.1,n=0;if(cc.vv.gameData.isEndOfRound()){var o=cc.vv.gameData.getNormalWildIdxs();if(o.includes(this.getIdxByCol(e))){for(var i=0,a=0;a<=e;a++)o.includes(this.getIdxByCol(a))&&(i+=1);n=i*t}else n=0}else n=Math.floor(e/4)*t;return n},getColByIdx:function(e){return[1,5,9,13,17,2,6,10,14,18,3,7,11,15,19,4,8,12,16,20][e-1]-1},getIdxByCol:function(e){return[1,6,11,16,2,7,12,17,3,8,13,18,4,9,14,19,5,10,15,20][e]},GetSymbolByIdx:function(e){var t=this.getColByIdx(e);return this._reels[t].GetSymbolByRow(0)},GetLastStopReelIdx:function(){return this.moveReelLastIdx},update:function(e){if(this._stopTime>0&&(this._stopTime=this._stopTime-e,this._stopTime<=0))for(var t=0;t<this._reels.length;t++){var n=this._reels[t],o=this.GetReelStopInter(t);n.StopMove(o)}}}),cc._RF.pop()},{}],TheGodOfFortune_BonusReel:[function(e,t,n){"use strict";cc._RF.push(t,"b108aPOVKNI36P8GcJYg+DM","TheGodOfFortune_BonusReel"),cc.Class({extends:cc.Component,properties:{_reelIdx:null,_nCount:0,_symbols:[],_symbolTemplete:null,_holderNode:null,_bMoving:!1,_bStoping:!1,_holderOrigPosY:null,_curY:0,_stopTime:0,_result:null,_originResult:null,totalAddHeight:0,deltaHeight:0,curAddHeight:0,_reelState:[],_topAniNode:null,_backup:!1,_cfg:null},showBonusHolder:function(e){var t=cc.find("mask/holder",this.node);t&&(t.active=e)},getBonusHolder:function(){return cc.find("mask/holder",this.node)},showBonusBg:function(e){var t=cc.find("mask/bg",this.node);t&&(t.active=e)},showBonusWildKuang:function(e){var t=cc.find("mask/kuang_wild",this.node);t&&(t.active=e,e&&t.getComponent(sp.Skeleton).setAnimation(0,"animation1",!0))},start:function(){},Init:function(e,t,n){this._reelIdx=e,this._nCount=t,this._symbols=[],this._topAniNode=n,this._cfg=cc.vv.gameData.getGameCfg(),this._holderNode=cc.find("mask/holder",this.node),this._holderOrigPosY=this._holderNode.position.y,this.LoadSymbols(),this.ShowAntiEffect(!1)},GetReelIdx:function(){return this._reelIdx},LoadSymbols:function(){this._symbolTemplete||(this._symbolTemplete=cc.vv.gameData.GetPrefabByName("bonus_Symbol"));for(var e=0;e<this._nCount+1;e++){var t=cc.vv.gameData.getGameCfg(),n=cc.instantiate(this._symbolTemplete);n.parent=this._holderNode;var o=n.addComponent(t.scripts.Symbols),i=this._symbols.length;o.setType("bonus_2"),o.Init(i,this._topAniNode),o.SetSymbolReelIdx(this._reelIdx),o.ShowById(t.emptyId[0]),this._symbols.push(o)}this.ReLayOut()},ReLayOut:function(){for(var e=0;e<this._symbols.length;e++){var t=this._symbols[e];t.node.position=this.GetSymbolPosByRow(e),t.SetSymbolIdx(e)}},GetSymbolByRow:function(e){return this._symbols[e]},GetSymbolPosByRow:function(e){return cc.v2(0,(e+.5)*this._cfg.symbolSize.height)},StartMove:function(){this._result=null,this._stopRightNow=null,this._bNotifyReadyStop=null,this._originResult=null,this._addSpeed=0,this._curY=0,this._bMoving=!0,this._bStoping=!1,this._offsetY=0;for(var e=0;e<this._symbols.length;e++){this._symbols[e].StartMove()}this._speed=this._cfg.speed,this._offset=this._cfg.symbolSize.height},StopMove:function(e){this._bMoving&&(this._bStoping=!0,this._stopTime=e)},updataSymbol:function(){var e=this._symbols.shift(),t=null;this._stopTime<=0&&this._bStoping&&this._result&&(this.ReadyToStop(),(t=this._result.shift())||(this._bMoving=!1)),t?e.ShowById(t.sid,t.data):e.ShowRandomSymbol(),this._symbols.push(e),this.ReLayOut(),this._curY=0,this._holderNode.y=this._holderOrigPosY,this._bMoving||this.OnReelBounsAction()},StopMoveRightNow:function(){if(this._stopRightNow=!0,this._bMoving&&this._originResult){this._result=Global.copy(this._originResult);for(var e=0;e<this._symbols.length;e++)this.updataSymbol()}},AddDelayTime:function(e){this._bMoving?(this._stopTime+=e,this._result=Global.copy(this._originResult)):cc.log(this._reelIdx+"\u5217\u5df2\u7ecf\u505c\u6b62\u4e86\u8fd8\u52a0\u901f\uff01\uff01\uff01")},SetSpeed:function(e){this._speed=e},OnReelSpinEnd:function(){this._reelState=[];var e=cc.vv.gameData.GetBonusScript(),t=e.GetLastStopReelIdx();this._reelIdx==t&&e.OnSpinEnd()},ReadyToStop:function(){},OnReelBounsActionBefore:function(){if(cc.vv.gameData.GetBonusScript().OnReelBounsActionBefore(this._reelIdx),this._originResult)for(var e=0;e<this._originResult.length;e++)this._symbols[e].StopMoveBefore()},OnReelBounsActionDeep:function(){if(this.ShowAntiEffect(!1),cc.vv.gameData.GetBonusScript().OnReelBounsActionDeep(this._reelIdx),this._originResult)for(var e=0;e<this._originResult.length;e++)this._symbols[e].StopMoveDeep()},OnReelBounsActionEnd:function(){if(cc.vv.gameData.GetBonusScript().OnReelBounsActionEnd(this._reelIdx),this._originResult)for(var e=0;e<this._originResult.length;e++)this._symbols[e].StopMoveEnd();else cc.log("\u56de\u5f39\u7ed3\u675f\uff0c\u6570\u636e\u5df2\u7ecf\u88ab\u6e05\u7a7a\u4e86");this.OnReelSpinEnd()},OnReelBounsAction:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this._cfg.bounceInfo?this._cfg.bounceInfo.distance:30,n=this._cfg.bounceInfo?this._cfg.bounceInfo.time:.3,o=e?0:t/this._speed;cc.tween(this._holderNode).call(this.OnReelBounsActionBefore.bind(this)).to(o,{position:cc.v2(this._holderNode.x,this._holderOrigPosY-t)}).call(this.OnReelBounsActionDeep.bind(this)).to(n,{position:cc.v2(this._holderNode.x,this._holderOrigPosY)}).call(this.OnReelBounsActionEnd.bind(this)).start()},SetResult:function(e){this._originResult=Global.copy(e),this._result=e},AddReelStateInfo:function(e){this._reelState.push(e)},playAntiAnimation:function(){this.ShowAntiEffect(!0),Global.SlotsSoundMgr.playEffect("anticipation2")},ShowAntiEffect:function(e,t){if(0==e){var n=cc.find("node_anti",this.node);n&&n.active&&(n.active=!1,this._stopRightNow&&Global.SlotsSoundMgr.stopEffectByName("anticipation2"))}else{var o=cc.find("node_anti",this.node);o?o.active=e:cc.log("\u672a\u627e\u5230\u52a0\u901f\u8282\u70b9\uff1amask/node_anti")}},UpdatePosition:function(e){this._stopTime=this._stopTime-e,this._curY+=e*this._speed,this._curY>this._offset?this.updataSymbol():this._holderNode.y=this._holderOrigPosY-this._curY},update:function(e){this._bMoving&&this.UpdatePosition(e)}}),cc._RF.pop()},{}],TheGodOfFortune_Cfg:[function(e,t,n){"use strict";var o;function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}cc._RF.push(t,"ca4a1kmeTBBY7WrDXZKQzOB","TheGodOfFortune_Cfg");var a={symbol:(o={},i(o,1,{node:"s1",win_node:"w1",stop_ani:{name:"animation1",zIndex:100}}),i(o,2,{node:"s2",win_node:"w201",win_ani:{name:"animation",zIndex:300},stop_ani:{name:"animation1",zIndex:100}}),i(o,202,{node:"s202",win_node:"w202",win_ani:{name:"animation",zIndex:300}}),i(o,3,{node:"s3",win_node:"w3",trigger_ani:{name:"animation",zIndex:400},stop_ani:{name:"animation1",zIndex:100}}),i(o,4,{node:"s4",win_node:"w4",win_ani:{name:"animation",zIndex:300},stop_ani:{name:"animation1",zIndex:100}}),i(o,401,{node:"s401",win_node:"w4",win_ani:{name:"animation",zIndex:300},collect_ani:{name:"animation2",zIndex:100},stop_ani:{name:"animation1",zIndex:100}}),i(o,402,{node:"s4",win_node:"w4",win_ani:{name:"animation",zIndex:300},collect_ani:{name:"animation2",zIndex:100},stop_ani:{name:"animation1",zIndex:100}}),i(o,5,{node:"s5",win_node:"w5",win_ani:{name:"animation",zIndex:300}}),i(o,601,{node:"s601",win_node:"w601",win_ani:{name:"animation",zIndex:300}}),i(o,602,{node:"s602",win_node:"w602",win_ani:{name:"animation",zIndex:300}}),i(o,603,{node:"s603",win_node:"w603",win_ani:{name:"animation",zIndex:300}}),i(o,604,{node:"s604",win_node:"w604",win_ani:{name:"animation",zIndex:300}}),i(o,7,{node:"s7",win_node:"w7",win_ani:{name:"animation",zIndex:300}}),i(o,8,{node:"s8",win_node:"w8",win_ani:{name:"animation",zIndex:300}}),i(o,9,{node:"s9",win_node:"w9",win_ani:{name:"animation",zIndex:300}}),i(o,10,{node:"s10",win_node:"w10",win_ani:{name:"animation",zIndex:300}}),i(o,11,{node:"s11",win_node:"w11",win_ani:{name:"animation",zIndex:300}}),i(o,12,{node:"s12",win_node:"w12",win_ani:{name:"animation",zIndex:300}}),i(o,13,{node:"s13"}),i(o,14,{node:"s14"}),i(o,15,{node:"s15"}),i(o,16,{node:"s16"}),i(o,17,{node:"s17"}),i(o,18,{node:"s18",win_node:"",win_ani:{name:"",zIndex:300}}),o),scripts:{Top:"LMSlots_Top_Base",Bottom:"LMSlots_Bottom_Base",Slots:"TheGodOfFortune_Slots",Reels:"TheGodOfFortune_Reel",Symbols:"TheGodOfFortune_Symbol"},col:5,row:4,symbolPrefab:"LMSlots_Symbol",bonusSymPre:"bonus_Symbol",symbolSize:{height:80},randomSymbols:[7,8,9,10,11,12,13,14,15,16,17],bonusRandom1:[2,4,18],bonusRandom2:[4,18],emptyId:[18],wildId:[2],greenId:[4],bonusCoinMultList:[.5,1,2,2.5,3,4,6,8,10],triFreeWildKuang:[3,8,13,18],superFreeWildKuang:[[0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0],[0,0,0,0,0,0,1,0,1,0,0,1,0,1,0,0,0,0,0,0],[0,0,1,0,0,0,1,1,1,0,0,0,1,0,0,0,0,1,0,0],[0,1,0,1,0,0,0,1,0,0,0,0,1,0,0,0,1,0,1,0],[0,0,1,0,1,0,1,0,1,0,0,1,0,1,0,0,0,1,0,1],[0,1,0,1,0,0,1,0,1,0,0,1,0,1,0,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1,1,0,1,0,1,0,1,0,1,0],[1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0],[0,1,1,1,0,1,0,1,0,1,0,1,1,1,0,1,0,1,0,1]],kuang:"kuang",speed:3e3,reelStopInter:.2,bonusReelStopInter:.2,auto_stop_time:1,autoModelDelay:.5,bounceInfo:{distance:20,time:.1},helpItems:["games/TheGodOfFortune/prefab/help_node/page1","games/TheGodOfFortune/prefab/help_node/page2","games/TheGodOfFortune/prefab/help_node/page3","games/TheGodOfFortune/prefab/help_node/page4","games/TheGodOfFortune/prefab/help_node/page5"],reelStateInfo:[{id:[3],mini:3,counts:[1,1,1,1,1],antiNode:"node_anti",path:"games/TheGodOfFortune/",reelStopSound:"reel_stop",symbolStopSound:"symbol_scatter",antSound:"anticipation1",antSpeed:2300}],normalBgm:"ngbgm1",commEffect:{path:"games/TheGodOfFortune/",win1:["win1","win1end"],win2:["win2","win2end"]}};t.exports=a,cc._RF.pop()},{}],TheGodOfFortune_Collect:[function(e,t,n){"use strict";function o(e,t,n,o,i,a,s){try{var r=e[a](s),c=r.value}catch(e){return void n(e)}r.done?t(c):Promise.resolve(c).then(o,i)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(i,a){var s=e.apply(t,n);function r(e){o(s,i,a,r,c,"next",e)}function c(e){o(s,i,a,r,c,"throw",e)}r(void 0)})}}cc._RF.push(t,"7a887LYHNhJQpQog05ECted","TheGodOfFortune_Collect"),cc.Class({extends:cc.Component,properties:{_boxes:[],_listofIngots:[],_curMapId:0,_islock:!1,_isMultLast:1,_multIdx:0,_nextIngot:0,_isLeftOrRight:0},start:function(){},Init:function(){this._btn_collect=cc.find("safe_node/slots/btn_collect",this.node),this._btn_collect.on("click",this.onClickCollectBtn.bind(this)),this.totalbetUpdated(),this._node_store=cc.find("safe_node/node_store",this.node),this._node_store.active=!1,this._store_bg=cc.find("store_bg",this._node_store),this._store_layout=cc.find("layout",this._node_store),cc.find("btn_close",this._store_layout).on("click",this.onClickCloseBtn.bind(this)),cc.find("btn_left",this._store_layout).on("click",this.onClickLeftBtn.bind(this)),cc.find("btn_right",this._store_layout).on("click",this.onClickRightBtn.bind(this));for(var e=1;e<=9;e++){var t=cc.find("node_box/item"+e,this._store_layout);t.on("click",this.onClickBoxBtn.bind(this)),this._boxes[e]={node:t,state:"locking",spine_red:t.getChildByName("spine_red"),spine_blue:t.getChildByName("spine_blue"),moneybg:t.getChildByName("money_bg"),lblcoin:cc.find("lbl_wincoin",t).getComponent(cc.Label),sprWin:cc.find("spr_win",t).getComponent(cc.Sprite),lblprice:cc.find("money_bg/lbl_money",t).getComponent(cc.Label),spine_suo:t.getChildByName("spine_suo")}}this._boxMask=cc.find("node_box/mask",this._store_layout),this._boxMask.active=!1,this._spr_suo=cc.find("node_box/spr_suo",this._store_layout),this._spr_suo.active=!1,this._particle_mult=cc.find("particle_mult",this._store_layout),this._particle_mult.active=!1,this._listofIngots=cc.vv.gameData.getListofIngots(),this.refreshIngotNum(),this._btn_tip=cc.find("btn_tip",this._store_layout),this._btn_tip.on("click",this.onClickTipBtn.bind(this)),this._spr_tip=cc.find("spr_tip",this._store_layout),this._spr_tip.active=!1,this._spine_qz=cc.find("store_qz",this._store_layout),this._spine_qz.active=!1,cc.vv.NetManager.registerMsg(MsgId.SLOT_SUBGAME_DATA,this.onRecvMsgSubAction,this)},onDestroy:function(){cc.vv.NetManager.unregisterMsg(MsgId.SLOT_SUBGAME_DATA,this.onRecvMsgSubAction,!1,this)},onRecvMsgSubAction:function(e){var t=this;return i(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(200!==e.code){n.next=18;break}if(2!==e.data.rtype){n.next=6;break}t._nextIngot=e.data.ingot,t.showBuyBox(e.data),n.next=18;break;case 6:if(3!==e.data.rtype){n.next=18;break}if(t._pageInfo=e.data,t._boxInfo=e.data.info?e.data.info:[],t._nextIngot=e.data.ingot,0!==t._isLeftOrRight){n.next=14;break}t.showStore(),n.next=17;break;case 14:return t.refreshDataWithAction(20*t._isLeftOrRight),n.next=17,t.awaitTime(.15);case 17:t.refreshData();case 18:case"end":return n.stop()}},n)}))()},setBtnCollectState:function(e){this._btn_collect.active=e},totalbetUpdated:function(){var e=cc.vv.gameData.GetBetIdx()<cc.vv.gameData.getUnlockIdx();e!=this._islock&&(this._islock=e,e?(this._btn_collect.getChildByName("spine_lock").getComponent(sp.Skeleton).setAnimation(0,"animation1",!1),Global.SlotsSoundMgr.playEffect("store_lock")):(this._btn_collect.getChildByName("spine_lock").getComponent(sp.Skeleton).setAnimation(0,"animation3",!1),Global.SlotsSoundMgr.playEffect("store_unlock")))},showStore:function(){cc.vv.gameData.GetBottomScript().ShowBtnsByState("moveing_1"),Global.SlotsSoundMgr.playEffect("dialog_store_show"),this._node_store.active=!0,this._store_layout.setScale(.1),cc.tween(this._store_layout).to(.7,{scale:1}).start(),this._store_bg.opacity=0,cc.tween(this._store_bg).to(.7,{opacity:255}).start()},hideStore:function(){var e=this;return i(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return cc.vv.gameData.GetBottomScript().ShowBtnsByState("idle"),cc.tween(e._store_layout).to(.7,{scale:.1}).start(),cc.tween(e._store_bg).to(.7,{opacity:0}).start(),t.next=5,e.awaitTime(.7);case 5:e._node_store.active=!1;case 6:case"end":return t.stop()}},t)}))()},refreshData:function(){cc.vv.gameData;var e=cc.vv.gameData.GetAtlasByName("shop"),t=cc.vv.gameData.GetAtlasByName("base"),n=cc.vv.gameData.getMapId();cc.find("jz_bg/spr_bg",this._store_layout).getComponent(cc.Sprite).spriteFrame=e.getSpriteFrame("theme185_store_juan_0"+this._curMapId),cc.find("jz_bg/node_lock",this._store_layout).active=this._curMapId>n,cc.find("jz_bg/node_unlock",this._store_layout).active=this._curMapId<=n,cc.find("character_bg/spr_reel",this._store_layout).getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("theme185_store_reel_"+this._curMapId),cc.find("box_bg",this._store_layout).getComponent(cc.Sprite).spriteFrame=e.getSpriteFrame("theme185_store_yuan_0"+this._curMapId);for(var o=1;o<=9;o++)cc.find("choose_bg/choose"+o+"/choosed",this._store_layout).active=o==this._curMapId;for(var i=1;i<=9;i++){var a=this._boxes[i],s=this._listofIngots[this._curMapId-1];if(this._boxInfo.length<=0)a.lblcoin.node.active="",a.sprWin.node.active=!1,a.moneybg.active=!0,a.lblprice.string=s,this.setBoxAnim(a,"blue","locking"),this.setBoxLockAnim(a,"locking");else{var r=this._boxInfo[i-1];if(r.lock)a.lblcoin.node.active=!1,a.sprWin.node.active=!1,a.lblprice.string=s,this._pageInfo.ingot>0?(a.moneybg.active=!0,cc.vv.gameData.getIngot()<s?(this.setBoxAnim(a,"blue","locking"),this.setBoxLockAnim(a,"playlock")):(this.setBoxAnim(a,"blue","waiting"),this.setBoxLockAnim(a,"null"))):(a.moneybg.active=!1,this.setBoxAnim(a,"red","waiting"),this.setBoxLockAnim(a,"null"));else{a.lblcoin.node.active="coin"===r.type,a.sprWin.node.active="coin"!==r.type,a.moneybg.active=!1,"coin"===r.type?a.lblcoin.string=Global.convertNumToShort(r.num,1e3,0,null,1e3):"free"===r.type?a.sprWin.spriteFrame=e.getSpriteFrame("theme185_store_bao_free"):"mult"===r.type&&(a.sprWin.spriteFrame=e.getSpriteFrame("theme185_store_bao_"+r.num+"x"));var c=r.red?"red":"blue";this.setBoxAnim(a,c,"hasopen"),this.setBoxLockAnim(a,"null")}}}this.refreshIngotNum()},refreshDataWithAction:function(e){var t=this;return i(regeneratorRuntime.mark(function n(){var o,i,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return(o=cc.find("node_box",t._store_layout)).stopAllActions(),o.x=0,o.runAction(cc.sequence(cc.spawn(cc.fadeTo(.15,63),cc.moveBy(.15,e,0)),cc.spawn(cc.fadeTo(.15,255),cc.moveBy(.15,-e,0)))),n.next=6,t.awaitTime(.15);case 6:for(i=1;i<=9;i++)(a=t._boxes[i].node).setScale(.1),a.stopAllActions(),a.runAction(cc.scaleTo(.1*i,1,1).easing(cc.easeBackOut()));case 7:case"end":return n.stop()}},n)}))()},showBuyBox:function(e){var t=this;return i(regeneratorRuntime.mark(function n(){var o,i,a,s,r,c,l,u,m,_,p;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o=e.idx,i=e.type,e.ingot,a=e.num,s=e.superFree,(r=t._boxes[o]).moneybg.active=!1,c=cc.vv.gameData.GetAtlasByName("shop"),Global.SlotsSoundMgr.playEffect(t._isMultLast>1?"chest2":"chest1"),t.setBoxAnim(r,t._isMultLast>1?"red":"blue","opening"),n.next=12,t.awaitTime(.8);case 12:if(r.state="hasopen",l=.6,"coin"!==i){n.next=31;break}return r.lblcoin.node.active=!0,r.lblcoin.string=Global.convertNumToShort(a/t._isMultLast,1e3,0,null,1e3),n.next=19,t.playShowPrizeAnim(r.lblcoin.node,l);case 19:if(!(t._isMultLast>1)){n.next=26;break}return n.next=22,t.awaitTime(.2);case 22:return n.next=24,t.playMultParAni(o);case 24:r.lblcoin.string=Global.convertNumToShort(a,1e3,0,null,1e3),t.recoverBlue(o);case 26:cc.vv.gameData.AddCoin(a),t.showBottomWin(a,0),t._isMultLast=1,n.next=59;break;case 31:if("free"!==i){n.next=51;break}return r.sprWin.node.active=!0,r.sprWin.spriteFrame=c.getSpriteFrame("theme185_store_bao_free"),n.next=36,t.playShowPrizeAnim(r.sprWin.node,l);case 36:if(!(t._isMultLast>1)){n.next=42;break}return n.next=39,t.awaitTime(.2);case 39:return n.next=41,t.playMultParAni(o);case 41:t.recoverBlue(o);case 42:return cc.vv.gameData.setFreeType(cc.vv.gameData.getFreeTypeList().click),cc.vv.gameData.setFreeMult(t._isMultLast),t.hideStore(),n.next=47,t.awaitTime(.8);case 47:cc.vv.gameData.GetSlotsScript().CheckEnterFreeGame(),t._isMultLast=1,n.next=59;break;case 51:if("mult"!==i){n.next=59;break}return r.sprWin.node.active=!0,r.sprWin.spriteFrame=c.getSpriteFrame("theme185_store_bao_"+a+"x"),n.next=56,t.playShowPrizeAnim(r.sprWin.node,l);case 56:for(t._isMultLast=a,t._multIdx=o,u=1;u<=9;u++)"locking"!==(m=t._boxes[u]).state&&"waiting"!==m.state||t.setBoxAnim(m,"red","waiting");case 59:if(cc.vv.gameData.getIngot()<t._nextIngot)for(_=1;_<=9;_++)"locking"!==(p=t._boxes[_]).state&&"waiting"!==p.state||(t.setBoxAnim(p,"blue","locking"),t.setBoxLockAnim(p,"playlock"));if(t._boxMask.active=!1,!s){n.next=74;break}return n.next=64,t.awaitTime(1);case 64:return Global.SlotsSoundMgr.playEffect("super_trigger"),t._spine_qz.active=!0,t._spine_qz.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),t._spine_qz.getComponent(sp.Skeleton).setCompleteListener(function(){t._spine_qz.active=!1}),n.next=70,t.awaitTime(1);case 70:cc.vv.gameData.setFreeType(cc.vv.gameData.getFreeTypeList().super),cc.vv.gameData.setFreeMult(),cc.vv.gameData.GetSlotsScript().CheckEnterFreeGame(),t.hideStore();case 74:case"end":return n.stop()}},n)}))()},playShowPrizeAnim:function(e,t){return new Promise(function(n,o){e?(e.setScale(0),e.runAction(cc.sequence(cc.scaleTo(t,1).easing(cc.easeBackOut()),cc.callFunc(function(){n()})))):n()})},playMultParAni:function(e){var t=this;return new Promise(function(n,o){var i=t._store_layout.convertToNodeSpaceAR(t._boxes[t._multIdx].node.convertToWorldSpaceAR(cc.v2(0,0))),a=t._store_layout.convertToNodeSpaceAR(t._boxes[e].node.convertToWorldSpaceAR(cc.v2(0,0)));t._particle_mult.active=!0,t._particle_mult.getComponent(cc.ParticleSystem).resetSystem(),t._particle_mult.position=i,Global.SlotsSoundMgr.playEffect("fly3"),cc.tween(t._particle_mult).to(.3,{position:a}).call(function(){t._particle_mult.active=!1,n()}).start()})},recoverBlue:function(e){for(var t=1;t<=9;t++){var n=this._boxes[t];t!==e&&this.setBoxAnim(n,"blue",n.state)}},showBottomWin:function(e,t,n){return new Promise(function(o,i){cc.vv.gameData.GetTopScript().ShowCoin(),cc.vv.gameData.GetBottomScript().ShowWin(e,null,t,function(){o()},n)})},refreshIngotNum:function(){var e=Global.FormatNumToComma(cc.vv.gameData.getIngot());cc.find("lbl_money",this._btn_collect).getComponent(cc.Label).string=e,cc.find("layout/money_bg/lbl_money",this._node_store).getComponent(cc.Label).string=e},onClickCollectBtn:function(){if(cc.vv.gameData.GetBottomScript().GetSpinBtnState()&&!cc.vv.gameData.isFreeGame()&&!(cc.vv.gameData.GetAutoModelTime()>0)&&cc.vv.gameData.GetBottomScript().GetSpinBtnState())if(this._islock){var e=cc.vv.gameData.getUnlockIdx();e>cc.vv.gameData.GetBetMults().length||cc.vv.gameData.GetBottomScript().SetBetIdx(e)}else{this._curMapId=cc.vv.gameData.getMapId();var t={c:MsgId.SLOT_SUBGAME_DATA};t.gameid=cc.vv.gameData.getGameId(),t.data={rtype:3,mapId:this._curMapId},cc.vv.NetManager.send(t,!0),this._isLeftOrRight=0}},onClickCloseBtn:function(){Global.SlotsSoundMgr.playEffect("btn_click"),this.hideStore()},onClickLeftBtn:function(){Global.SlotsSoundMgr.playEffect("page"),this._curMapId=this._curMapId>1?this._curMapId-1:9;var e={c:MsgId.SLOT_SUBGAME_DATA};e.gameid=cc.vv.gameData.getGameId(),e.data={rtype:3,mapId:this._curMapId},cc.vv.NetManager.send(e,!0),this._isLeftOrRight=1},onClickRightBtn:function(){Global.SlotsSoundMgr.playEffect("page"),this._curMapId=this._curMapId<9?this._curMapId+1:1;var e={c:MsgId.SLOT_SUBGAME_DATA};e.gameid=cc.vv.gameData.getGameId(),e.data={rtype:3,mapId:this._curMapId},cc.vv.NetManager.send(e,!0),this._isLeftOrRight=-1},onClickBoxBtn:function(e){for(var t=1;t<=9;t++)if(e.node==this._boxes[t].node){var n=cc.vv.gameData.getIngot()-this._nextIngot;if(n<0)return this.playSprSuoAnim(e.node),void this._boxes[t].spine_suo.getComponent(sp.Skeleton).setAnimation(0,"animation2",!1);if("waiting"===this._boxes[t].state){this._boxMask.active=!0;var o={c:MsgId.SLOT_SUBGAME_DATA};o.gameid=cc.vv.gameData.getGameId(),o.data={rtype:2,mapId:cc.vv.gameData.getMapId(),idx:t},cc.vv.NetManager.send(o,!0),cc.vv.gameData.setIngot(n),this.refreshIngotNum()}}},setBoxAnim:function(e,t,n){e.spine_red.active="red"===t,e.spine_blue.active="blue"===t;var o="red"===t?e.spine_red.getComponent(sp.Skeleton):e.spine_blue.getComponent(sp.Skeleton);"locking"===n?(o.setAnimation(0,"animation1",!0),this.setBoxMask(o.node,!0)):"waiting"===n?(o.setAnimation(0,"animation2",!0),this.setBoxMask(o.node,!1)):"opening"===n?(o.setAnimation(0,"animation3",!1),o.addAnimation(0,"animation4",!0),this.setBoxMask(o.node,!1)):"hasopen"===n&&(o.setAnimation(0,"animation4",!0),this.setBoxMask(o.node,!1)),e.state=n},setBoxMask:function(e,t){e.color=t?new cc.Color(100,100,100):cc.Color.WHITE},setBoxLockAnim:function(e,t){if("null"===t)e.spine_suo.active=!1;else{e.spine_suo.active=!0;var n=e.spine_suo.getComponent(sp.Skeleton);"locking"===t?n.setAnimation(0,"animation1",!0):"playlock"===t&&(n.setAnimation(0,"animation3",!1),n.addAnimation(0,"animation1",!0))}},exitClickFree:function(){this.showStore()},exitSuperFree:function(){var e=this;return i(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.showStore(),t.next=3,e.awaitTime(1.7);case 3:10===e._curMapId?(cc.vv.gameData.GetPopupScript().showUnlockAllMap(),cc.vv.gameData.setMapId(1)):(cc.vv.gameData.GetPopupScript().showUnlockMap(),cc.vv.gameData.setMapId(e._curMapId+1));case 4:case"end":return t.stop()}},t)}))()},onClickTipBtn:function(){var e=this;Global.SlotsSoundMgr.playEffect("btn_click"),this._spr_tip.stopAllActions(),this._spr_tip.active?this._spr_tip.runAction(cc.sequence(cc.scaleTo(this._spr_tip.scaleX/2,0,0),cc.callFunc(function(){e._spr_tip.active=!1}))):(this._spr_tip.active=!0,this._spr_tip.setScale(0),this._spr_tip.runAction(cc.sequence(cc.scaleTo(.5,1,1),cc.callFunc(function(){e._spr_tip.active=!0}),cc.delayTime(1),cc.scaleTo(.5,0,0),cc.callFunc(function(){e._spr_tip.active=!1}))))},playSprSuoAnim:function(e){var t=this;Global.SlotsSoundMgr.playEffect("tip"),this._spr_suo.stopAllActions(),this._spr_suo.active?this._spr_suo.runAction(cc.sequence(cc.scaleTo(this._spr_suo.scaleX/2,0,0),cc.callFunc(function(){t._spr_suo.active=!1}))):(this._spr_suo.position=e.position,this._spr_suo.active=!0,this._spr_suo.setScale(0),this._spr_suo.runAction(cc.sequence(cc.scaleTo(.5,1,1),cc.callFunc(function(){t._spr_suo.active=!0}),cc.delayTime(1),cc.scaleTo(.5,0,0),cc.callFunc(function(){t._spr_suo.active=!1}))))},awaitTime:function(e){var t=this;return new Promise(function(n,o){t.scheduleOnce(function(){n()},e)})}}),cc._RF.pop()},{}],TheGodOfFortune_GameData:[function(e,t,n){"use strict";cc._RF.push(t,"f18aa3o47lMPL4LdFIslGYk","TheGodOfFortune_GameData"),cc.Class({extends:e("LMSlots_GameData_Base"),properties:{_poolList:[],_freeType:0},init:function(e,t,n){this._super(e,t,n),this._collect=this._deskInfo.collect,this._deskInfo.coinBonus&&(this._poolList=this._deskInfo.coinBonus.poolList),this._deskInfo.freeGameData&&(this._freeType=this._deskInfo.freeGameData.freeType),this._allWealthGod=this._deskInfo.history.wealthGod,this._freeTypeList={none:0,normal:1,click:2,super:3}},OnRcvNetSpine:function(e){200==e.code&&(this._deskInfo.user.coin=e.coin,this._gameInfo=e,this._deskInfo.restFreeCount=e.freeCnt,this._deskInfo.allFreeCount=e.allFreeCnt,this._deskInfo.coinBonus=e.coinBonus,this._deskInfo.coinBonus?this.GetBonusScript().onMsgSpine(e):this.GetSlotsScript().onMsgSpine(e))},SetCollectScript:function(e){this._collectScp=e},GetCollectScript:function(){return this._collectScp},SetPopupScript:function(e){this._popupScp=e},GetPopupScript:function(){return this._popupScp},SetReSpinScript:function(e){this._reSpinScp=e},GetReSpinScript:function(){return this._reSpinScp},SetBonusScript:function(e){this._bonusScp=e},GetBonusScript:function(){return this._bonusScp},getFreeTypeList:function(){return this._freeTypeList},setFreeType:function(e){this._freeType=e},getFreeType:function(){return this._freeType},setFreeMult:function(e){this._freeMult=e},getFreeMult:function(){return this._freeMult},getFreeGameData:function(){return this._deskInfo.freeGameData},getAllwealthGod:function(){return this._allWealthGod},setWealthGodByIdx:function(e,t){this._allWealthGod[e]=t},getListofIngots:function(){return this._collect.listofIngots},getIngot:function(){return this._collect.num},setIngot:function(e){this._collect.num=e},getUnlockIdx:function(){return this._collect.min},getMapId:function(){return this._collect.mapId},setMapId:function(e){this._collect.mapId=e},getSelectInfo:function(){return this._deskInfo.select},getNormalNum:function(){return this._gameInfo.wealthGod.num},getFreeNum:function(){return this._gameInfo.freeCnt},getNormalWildIdxs:function(){return this._gameInfo.wealthGod.idxs},getLastGame:function(){return this._gameInfo.wealthGod.last},setIsEndOfRound:function(e){this._isEndOfRound=e},isEndOfRound:function(){return this._isEndOfRound},setIsBonusGame:function(e){this._isBonusGame=e},isBonusGame:function(){return this._isBonusGame},getCoinBonus:function(){return this._deskInfo.coinBonus},getBonusPool:function(){return this._bonusPool},setBonusPool:function(e){this._bonusPool=e},setBonusPoolList:function(e){this._poolList=e},getBonusPoolList:function(){return this._poolList},isFreeGame:function(){return this._isFreeGame},setIsFreeGame:function(e){this._isFreeGame=e}}),cc._RF.pop()},{LMSlots_GameData_Base:void 0}],TheGodOfFortune_Logic:[function(e,t,n){"use strict";cc._RF.push(t,"b81b6mOKrlD0bcpIgcSzqUP","TheGodOfFortune_Logic"),cc.Class({extends:e("LMSlots_Logic_Base"),properties:{},InitCommComponent:function(){this._super();var e=this.node.addComponent("TheGodOfFortune_Collect");e.Init(),cc.vv.gameData.SetCollectScript(e);var t=this.node.addComponent("TheGodOfFortune_Popup");t.Init(),cc.vv.gameData.SetPopupScript(t);var n=this.node.addComponent("TheGodOfFortune_BonusGame");n.Init(),cc.vv.gameData.SetBonusScript(n)}}),cc._RF.pop()},{LMSlots_Logic_Base:void 0}],TheGodOfFortune_Popup:[function(e,t,n){"use strict";function o(e,t,n,o,i,a,s){try{var r=e[a](s),c=r.value}catch(e){return void n(e)}r.done?t(c):Promise.resolve(c).then(o,i)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(i,a){var s=e.apply(t,n);function r(e){o(s,i,a,r,c,"next",e)}function c(e){o(s,i,a,r,c,"throw",e)}r(void 0)})}}cc._RF.push(t,"7a776n8p3FGdrM/X0eVN3pj","TheGodOfFortune_Popup"),cc.Class({extends:cc.Component,properties:{},start:function(){},onEnable:function(){cc.vv.NetManager.registerMsg(MsgId.SLOT_SUBGAME_DATA,this.onRcvSubGameAction,this)},onDisable:function(){cc.vv.NetManager.unregisterMsg(MsgId.SLOT_SUBGAME_DATA,this.onRcvSubGameAction,!1,this)},Init:function(){this._node_popup=cc.find("safe_node/node_popup",this.node),this._node_popup.active=!1,this._node_free_start=cc.find("node_free_start",this._node_popup),this._node_free_start.active=!1,this._node_free_end=cc.find("node_free_end",this._node_popup),this._node_free_end.active=!1,this._node_bonus_start=cc.find("Canvas/safe_node/slots/node_bonus_start"),this._node_bonus_start.active=!1,this._node_respin_end=cc.find("node_respin_end",this._node_popup),this._node_respin_end.active=!1,this._node_store_unclock=cc.find("node_store_unclock",this._node_popup),this._node_store_unclock.active=!1,this._node_store_unclockAll=cc.find("node_store_unclockAll",this._node_popup),this._node_store_unclockAll.active=!1,this._node_qp=cc.find("safe_node/node_qp",this.node),this._node_qp.active=!1,this._spine_qp1=cc.find("qieping1",this._node_qp),this._spine_qp1.active=!1},awaitTime:function(e){var t=this;return new Promise(function(n,o){t.scheduleOnce(function(){n()},e)})},showStartFree:function(){var e=this;return i(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=i(regeneratorRuntime.mark(function t(n,o){var i,a,s,r,c,l,u,m,_,p;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Global.SlotsSoundMgr.stopBgm(),i=cc.vv.gameData.getFreeType(),a=cc.vv.gameData.getFreeMult(),s=i===cc.vv.gameData.getFreeTypeList().super?"dialog_sfg_start":"dialog_fg_start",Global.SlotsSoundMgr.playEffect(s),e._node_popup.active=!0,e._node_free_start.active=!0,r=e._node_free_start.getChildByName("node_normal"),c=e._node_free_start.getChildByName("node_super"),r.active=i!==cc.vv.gameData.getFreeTypeList().super,c.active=i===cc.vv.gameData.getFreeTypeList().super,l=r.active?r:c,u=l.getChildByName("spine").getComponent(sp.Skeleton),i===cc.vv.gameData.getFreeTypeList().normal?(u.setAnimation(0,"animation1",!1),u.addAnimation(0,"animation1_1",!0)):i===cc.vv.gameData.getFreeTypeList().click?(u.setAnimation(0,"animation"+a,!1),u.addAnimation(0,"animation"+a+"_1",!0)):i===cc.vv.gameData.getFreeTypeList().super&&(u.setAnimation(0,"animation1",!1),u.addAnimation(0,"animation1_1",!0),l.getChildByName("spr_reel").getComponent(cc.Sprite).spriteFrame=cc.vv.gameData.GetAtlasByName("base").getSpriteFrame("theme185_store_reel_"+cc.vv.gameData.getMapId())),(m=l.getChildByName("btn_start")).setScale(0),m.runAction(cc.scaleTo(.7,1).easing(cc.easeBackOut())),t.next=19,e.awaitTime(.7);case 19:_=e,p=function(){m.getComponent(cc.Button).interactable=!1,Global.SlotsSoundMgr.playEffect("btn_click"),Global.SlotsSoundMgr.playEffect("popup_out"),_._node_free_start.runAction(cc.sequence(cc.scaleTo(.4,.3).easing(cc.easeBackIn()),cc.callFunc(function(){_._node_popup.active=!1,_._node_free_start.active=!1,_._node_free_start.setScale(1),n()})))},cc.vv.gameData.checkAutoPlay(m,p),m.getComponent(cc.Button).interactable=!0,m.off("click"),m.on("click",function(){m.stopAllActions(),p()});case 25:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},showEndFree:function(e){var t=this;return i(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise(function(){var n=i(regeneratorRuntime.mark(function n(o,i){var a,s,r,c,l,u,m,_;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return Global.SlotsSoundMgr.stopBgm(),a=cc.vv.gameData.getFreeType(),s=a===cc.vv.gameData.getFreeTypeList().super?"dialog_sfg_collect":"dialog_fg_collect",Global.SlotsSoundMgr.playEffect(s),t._node_popup.active=!0,t._node_free_end.active=!0,r=t._node_free_end.getChildByName("spine_normal"),c=t._node_free_end.getChildByName("spine_super"),r.active=a!==cc.vv.gameData.getFreeTypeList().super,c.active=a===cc.vv.gameData.getFreeTypeList().super,a!==cc.vv.gameData.getFreeTypeList().super?(r.getComponent(sp.Skeleton).setAnimation(0,"animation4",!1),r.getComponent(sp.Skeleton).addAnimation(0,"animation4_1",!0)):(c.getComponent(sp.Skeleton).setAnimation(0,"animation2",!1),r.getComponent(sp.Skeleton).addAnimation(0,"animation2_1",!0)),(l=t._node_free_end.getChildByName("btn_collect")).setScale(0),l.runAction(cc.scaleTo(.7,1).easing(cc.easeBackOut())),u=t._node_free_end.getChildByName("lbl_wincoin"),Global.doRoallNumEff(u,0,e,2,null,null,0,!0),n.next=18,t.awaitTime(.7);case 18:m=t,_=function(){l.getComponent(cc.Button).interactable=!1,Global.SlotsSoundMgr.playEffect("btn_click"),u.stopAllActions();var t=0;Global.FormatCommaNumToNum(u.getComponent(cc.Label).string)<e&&(u.getComponent(cc.Label).string=Global.FormatNumToComma(e),t=.2),m._node_free_end.runAction(cc.sequence(cc.delayTime(t),cc.scaleTo(.4,.3).easing(cc.easeBackIn()),cc.callFunc(function(){m._node_popup.active=!1,m._node_free_end.active=!1,m._node_free_end.setScale(1),o()})))},cc.vv.gameData.checkAutoPlay(l,_),l.getComponent(cc.Button).interactable=!0,l.off("click"),l.on("click",function(){l.stopAllActions(),_()});case 24:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}()));case 1:case"end":return n.stop()}},n)}))()},playBonusTransition:function(){var e=this;return i(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=i(regeneratorRuntime.mark(function t(n,o){var i,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:Global.SlotsSoundMgr.stopBgm(),Global.SlotsSoundMgr.playEffect("dialog_respin_start"),e._node_popup.active=!0,(i=cc.find("spine_respin_ks",e._node_popup)).active=!0,a=e,i.getComponent(sp.Skeleton).setAnimation(0,"skill03",!1),i.getComponent(sp.Skeleton).setCompleteListener(function(){a._node_popup.active=!1,i.active=!1,n()});case 8:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},showStartBonus:function(){var e=this;return i(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=i(regeneratorRuntime.mark(function t(n,o){var i,a,s,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._node_bonus_start.active=!0,(i=e._node_bonus_start.getChildByName("spine")).getComponent(sp.Skeleton).setAnimation(0,"animation2",!1),i.getComponent(sp.Skeleton).addAnimation(0,"animation1",!0),a=e._node_bonus_start.getChildByName("btn_start"),t.next=7,e.awaitTime(.5);case 7:s=e,e._bonusStartCallBack=n,r=function(){a.getComponent(cc.Button).interactable=!1,Global.SlotsSoundMgr.playEffect("press");var e={c:MsgId.SLOT_SUBGAME_DATA};e.gameid=cc.vv.gameData.getGameId(),e.data={rtype:1},cc.vv.NetManager.send(e,!0);var t=i.getComponent(sp.Skeleton).setAnimation(0,"animation3",!1);i.getComponent(sp.Skeleton).setTrackCompleteListener(t,function(){s._node_bonus_start.active=!1})},cc.vv.gameData.checkAutoPlay(a,r),a.getComponent(cc.Button).interactable=!0,a.off("click"),a.on("click",function(){a.stopAllActions(),r()});case 14:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},showEndBonus:function(e){var t=this;return i(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise(function(){var n=i(regeneratorRuntime.mark(function n(o,a){var s,r,c,l;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return Global.SlotsSoundMgr.stopBgm(),cc.vv.gameData.getFreeType(),Global.SlotsSoundMgr.playEffect("dialog_fg_collect"),t._node_popup.active=!0,t._node_respin_end.active=!0,t._node_respin_end.children.forEach(function(e,t){e.scale=0,cc.tween(e).delay(.1*t).to(.5,{scale:1},{easing:"backOut"}).start()}),s=cc.find("btn_collect",t._node_respin_end),r=cc.find("dialog_k/lbl_wincoin",t._node_respin_end),Global.doRoallNumEff(r,0,e,2,null,null,0,!0),n.next=11,t.awaitTime(.7);case 11:c=t,l=function(){var t=i(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s.getComponent(cc.Button).interactable=!1,Global.SlotsSoundMgr.playEffect("btn_click"),r.stopAllActions(),0,Global.FormatCommaNumToNum(r.getComponent(cc.Label).string)<e&&(r.getComponent(cc.Label).string=Global.FormatNumToComma(e),.2),c._node_respin_end.children.forEach(function(e,t){cc.tween(e).delay(.1*t).to(.5,{scale:0},{easing:"backIn"}).start()}),t.next=8,c.awaitTime(.1*c._node_respin_end.childrenCount+.5);case 8:c._node_popup.active=!1,c._node_respin_end.active=!1,o();case 11:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),cc.vv.gameData.checkAutoPlay(s,l),s.getComponent(cc.Button).interactable=!0,s.off("click"),s.on("click",function(){s.stopAllActions(),l()});case 17:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}()));case 1:case"end":return n.stop()}},n)}))()},showUnlockAllMap:function(){var e=this;return i(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=i(regeneratorRuntime.mark(function t(n,o){var a,s,r,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Global.SlotsSoundMgr.playEffect("dialog_store_unlock"),e._node_popup.active=!0,e._node_store_unclockAll.active=!0,e._node_store_unclockAll.setScale(1),(a=e._node_store_unclockAll.getChildByName("spine")).getComponent(sp.Skeleton).setAnimation(0,"animation1",!1),a.getComponent(sp.Skeleton).addAnimation(0,"animation1_1",!0),s=e._node_store_unclockAll.getChildByName("btn_collect"),t.next=10,e.awaitTime(.5);case 10:r=e,e._bonusStartCallBack=n,c=function(){s.getComponent(cc.Button).interactable=!1,Global.SlotsSoundMgr.playEffect("btn_click"),Global.SlotsSoundMgr.playEffect("popup_out"),cc.tween(r._node_store_unclockAll).to(.5,{scale:0},{easing:"backIn"}).call(function(){r._node_store_unclockAll.active=!1,r._node_popup.active=!1,cc.vv.gameData.GetCollectScript().onClickRightBtn(),n()}).start()},cc.vv.gameData.checkAutoPlay(s,c),s.getComponent(cc.Button).interactable=!0,s.off("click"),s.on("click",i(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s.stopAllActions(),c();case 2:case"end":return e.stop()}},e)})));case 17:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},showUnlockMap:function(){var e=this;return i(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=i(regeneratorRuntime.mark(function t(n,o){var a,s,r,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Global.SlotsSoundMgr.playEffect("dialog_store_unlock"),e._node_popup.active=!0,e._node_store_unclock.active=!0,e._node_store_unclock.setScale(1),(a=e._node_store_unclock.getChildByName("spine")).getComponent(sp.Skeleton).setAnimation(0,"animation2",!1),a.getComponent(sp.Skeleton).addAnimation(0,"animation2_1",!0),s=e._node_store_unclock.getChildByName("btn_ok"),t.next=10,e.awaitTime(.5);case 10:r=e,e._bonusStartCallBack=n,c=function(){s.getComponent(cc.Button).interactable=!1,Global.SlotsSoundMgr.playEffect("popup_out"),cc.tween(r._node_store_unclock).to(.5,{scale:0},{easing:"backIn"}).call(function(){r._node_store_unclock.active=!1,r._node_popup.active=!1,cc.vv.gameData.GetCollectScript().onClickRightBtn(),n()}).start()},cc.vv.gameData.checkAutoPlay(s,c),s.getComponent(cc.Button).interactable=!0,s.off("click"),s.on("click",i(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Global.SlotsSoundMgr.playEffect("btn_click"),s.stopAllActions(),c();case 3:case"end":return e.stop()}},e)})));case 17:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},playQP1Anim:function(){var e=this;Global.SlotsSoundMgr.playEffect("transition2"),this._node_qp.active=!0,this._spine_qp1.active=!0,this._spine_qp1.getComponent(sp.Skeleton).setAnimation(0,"skill02",!1),this._spine_qp1.getComponent(sp.Skeleton).setCompleteListener(function(){e._spine_qp1.active=!1,e._node_qp.active=!1})},playQP2Anim:function(){var e=this;Global.SlotsSoundMgr.playEffect("fgtransition"),this._node_qp.active=!0,this._spine_qp1.active=!0,this._spine_qp1.getComponent(sp.Skeleton).setAnimation(0,"skill01",!1),this._spine_qp1.getComponent(sp.Skeleton).setCompleteListener(function(){e._spine_qp1.active=!1,e._node_qp.active=!1})},onRcvSubGameAction:function(e){200===e.code&&(1===e.data.rtype&&this._bonusStartCallBack&&this._bonusStartCallBack())}}),cc._RF.pop()},{}],TheGodOfFortune_Reel:[function(e,t,n){"use strict";cc._RF.push(t,"af3962YxgxB+YQcEjgkQ3UH","TheGodOfFortune_Reel"),cc.Class({extends:e("LMSlots_Reel_Base"),properties:{}}),cc._RF.pop()},{LMSlots_Reel_Base:void 0}],TheGodOfFortune_Slots:[function(e,t,n){"use strict";function o(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=i(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a,s=!0,r=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return s=e.done,e},e:function(e){r=!0,a=e},f:function(){try{s||null==o.return||o.return()}finally{if(r)throw a}}}}function i(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function s(e,t,n,o,i,a,s){try{var r=e[a](s),c=r.value}catch(e){return void n(e)}r.done?t(c):Promise.resolve(c).then(o,i)}function r(e){return function(){var t=this,n=arguments;return new Promise(function(o,i){var a=e.apply(t,n);function r(e){s(a,o,i,r,c,"next",e)}function c(e){s(a,o,i,r,c,"throw",e)}r(void 0)})}}cc._RF.push(t,"97da2bNl/ZEhYGR3FD1m/f6","TheGodOfFortune_Slots"),cc.Class({extends:e("LMSlots_Slots_Base"),properties:{_curTimes:0,_superWildList:[]},Init:function(e,t){this._game_times=cc.find("node_game_times",this.node),this._node_mult=cc.find("node_mult",this.node),this._node_mult.active=!1,this._node_super_wild=cc.find("node_super_wild",this.node),this._node_super_wild.active=!1;for(var n=0;n<this._node_super_wild.childrenCount;n++){var o=this._node_super_wild.getChildByName("item"+(n+1));o.active=!1,this._superWildList.push(o)}this._super(e,t)},RegisterEvent:function(){this._super(),Global.registerEvent(cc.vv.gameData._EventId.SLOT_TOTALBET_UPDATED,this.onEventTotalbetUpdated,this)},ReconnectShow:function(){var e=this;return r(regeneratorRuntime.mark(function t(){var n,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=[],cc.vv.gameData.GetTotalFree()>0?(e.ShowGameview(!0),e._free_times=10-cc.vv.gameData.GetFreeTime(),e._curTimes=e._free_times,e.updateTimes(e._curTimes),cc.vv.gameData.GetFreeTime()>0&&(cc.vv.gameData.getFreeType()===cc.vv.gameData.getFreeTypeList().super&&(e.showSuperWildNode(!0),cc.vv.gameData.GetCollectScript().setBtnCollectState(!1)),n=cc.vv.gameData.getFreeGameData().wealthGod.idxs,e.showBonusWildKuang(n))):(e.ShowGameview(!1),e.showCurBetState()),!((o=cc.vv.gameData.getSelectInfo())&&o.state&&o.rtype)){t.next=7;break}if(1!==o.rtype){t.next=7;break}return t.next=7,new Promise(function(){var t=r(regeneratorRuntime.mark(function t(n,o){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e._curTimes=0,e.updateTimes(),cc.vv.gameData.GetBonusScript().enterBonusGame(cc.vv.gameData.getCoinBonus(),n,!0);case 3:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}());case 7:if(!(cc.vv.gameData.getCoinBonus()&&cc.vv.gameData.getCoinBonus().num>0)){t.next=10;break}return t.next=10,new Promise(function(){var t=r(regeneratorRuntime.mark(function t(n,o){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e._curTimes=0,e.updateTimes(),cc.vv.gameData.GetBonusScript().enterBonusGame(cc.vv.gameData.getCoinBonus(),n,!1);case 3:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}());case 10:if(!(cc.vv.gameData.GetTotalFree()>0&&0==cc.vv.gameData.GetFreeTime())){t.next=13;break}return t.next=13,e.CheckExitFreeGame();case 13:e._topScript.StopMove(),e._bottomScript.CanDoNextRound();case 15:case"end":return t.stop()}},t)}))()},onEventTotalbetUpdated:function(){cc.vv.gameData.GetCollectScript().totalbetUpdated(),this.showCurBetState()},StartMove:function(){cc.vv.gameData.isBonusGame()?cc.vv.gameData.GetBonusScript().StartMove():(cc.vv.gameData.isEndOfRound()&&cc.vv.gameData.GetBonusScript().exitBonusGame(),this._super(),this._curTimes+=1,this.updateTimes(this._curTimes),cc.vv.gameData.getFreeType()===cc.vv.gameData.getFreeTypeList().super?this.showSuperWildNode(!0):this.showSuperWildNode(!1),Global.SlotsSoundMgr.playNormalBgm())},StopMove:function(){cc.vv.gameData.isEndOfRound()||cc.vv.gameData.isBonusGame()?cc.vv.gameData.GetBonusScript().StopMove():this._super()},onMsgSpine:function(e){this._gameInfo=e;var t=e.resultCards;t=this.changeLionId(t),t=this.changeWildSuper(t),this.SetSlotsResult(t),this.SetReelStateInfo(t)},SetSlotsResult:function(e){for(var t=e.length/this._col,n=[],o=0;o<e.length;o++){Math.floor(o/t);var i=o%this._col;if(this._cfg.symbol[e[o]]){var a={};a.sid=e[o];var s=this.getIngotNum(o+1);s>0&&(a.data={type:"ingot",num:s}),n[i]||(n[i]=[]),n[i].unshift(a)}}for(var r=0;r<this._reels.length;r++){var c=this._reels[r],l=n[r];c.SetResult(l)}},OnReelBounsActionDeep:function(e){for(var t=0;t<this._row;t++)1===this._reels[e].GetSymbolByRow(t).GetShowId()&&(this._reels[e].GetSymbolByRow(t).playStopAnimation(),Global.SlotsSoundMgr.playEffect("symbol_bonus1"))},OnSpinEnd:function(){this.showSuperWildNode(!1),this.onSpinEndAction()},onSpinEndAction:function(){var e=this;return r(regeneratorRuntime.mark(function t(){var n,o,i,a,s,r,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==e._gameInfo.allFreeCnt&&e._gameInfo.allFreeCnt!==e._gameInfo.freeCnt||(n=cc.vv.gameData.GetBetIdx(),cc.vv.gameData.setWealthGodByIdx(n-1,e._gameInfo.wealthGod)),e._gameInfo.collect&&e._gameInfo.collect.info&&e.playIngotFlyAnim(e._gameInfo.collect),o=cc.vv.gameData.getNormalWildIdxs(),e.showBonusWildKuang(o),0!==cc.vv.gameData.getNormalNum()){t.next=7;break}return t.next=7,e.playLastGame();case 7:return e.ShowWinTrace(),i=cc.vv.gameData.GetGameWin(),a=i,cc.vv.gameData.GetTotalFree()>0&&cc.vv.gameData.GetTotalFree()!=cc.vv.gameData.GetFreeTime()&&(a=cc.vv.gameData.GetGameTotalFreeWin()),t.next=13,new Promise(function(t,n){e.ShowBottomWin(i,a,!0,t)});case 13:if(!((s=e._gameInfo.freeResult.freeInfo)&&s.freeCnt>0)){t.next=19;break}return cc.vv.gameData.setFreeType(cc.vv.gameData.getFreeTypeList().normal),cc.vv.gameData.setFreeMult(),t.next=19,e.CheckEnterFreeGame();case 19:if(r=!1,!((c=cc.vv.gameData.getLastGame())&&c.info&&c.isTriBonus)){t.next=26;break}return r=!0,c.poolList&&cc.vv.gameData.setBonusPoolList(c.poolList),t.next=26,e.CheckEnterBonusGame();case 26:if(!(e._gameInfo.allFreeCnt>0&&0==e._gameInfo.freeCnt)){t.next=32;break}if(!r){t.next=30;break}return t.next=30,e.awaitTime(2.5);case 30:return t.next=32,e.CheckExitFreeGame();case 32:e.CanDoNextRound();case 33:case"end":return t.stop()}},t)}))()},setRandomCards:function(){for(var e=0;e<this._col;e++)for(var t=0;t<this._row;t++){var n=this._reels[e].GetSymbolByRow(t);n.setAnimationToTop(!1),n.ShowKuang(!1),n.stopWinTweenAction(),n.node.zIndex=50-this._symbolIdx+10*this._reelIdx,n.ShowRandomSymbol()}},changeLionId:function(e){for(var t=0;t<this._col;t++){for(var n=[0,0,0,0],o=0,i=0;i<this._row;i++){6===this.GetResutByRowCol(e,i,t)&&(n[i]=1,o+=1)}if(o>0){if(n[0]>0)for(var a=0;a<o;a++)n[a]=o-a;else for(var s=3;s>=4-o;s--)n[s]=5-o+(3-s);for(var r=0;r<this._row;r++){var c=this.ChangeRowColToIdx(e,r,t);1===n[r]?e[c]=601:2===n[r]?e[c]=602:3===n[r]?e[c]=603:4===n[r]&&(e[c]=604)}}}return e},ShowWinTrace:function(){for(var e=[],t=0;t<this._gameInfo.zjLuXian.length;t++)for(var n=this._gameInfo.zjLuXian[t],o=0;o<n.indexs.length;o++)e[n.indexs[o]]=1;if(this._gameInfo.scatterZJLuXian&&this._gameInfo.scatterZJLuXian.indexs)for(var i=0;i<this._gameInfo.scatterZJLuXian.indexs.length;i++){e[this._gameInfo.scatterZJLuXian.indexs[i]]=1}for(var a in e){var s=this.GetSymbolByIdx(Number(a));if(s){var r=s.GetShowId();if(cc.vv.gameData.GetBonusScript().getHolderByIdx(Number(a)).active)cc.vv.gameData.GetBonusScript().GetSymbolByIdx(Number(a)).playBonusWinAnim();else if(601===r||602===r||603===r){var c=(Number(a)-1)%this._col,l=this._row-Math.floor((Number(a)-1)/this._col)-1,u=r+l>604?r+l-604:0;this._reels[c].GetSymbolByRow(u).playWinAnimation()}else s.playWinAnimation();s.ShowKuang()}}},changeWildSuper:function(e){if(cc.vv.gameData.getFreeType()===cc.vv.gameData.getFreeTypeList().super)for(var t=0;t<e.length;t++)2===e[t]&&(e[t]=202);return e},getIngotNum:function(e){var t=0;if(this._gameInfo.collect&&this._gameInfo.collect.info){var n=this._gameInfo.collect.info;for(var o in n){if(e===Number(o.substring("idx_".length))){t=n[o];break}}}return t},playIngotFlyAnim:function(e){var t=this;return new Promise(function(){var n=r(regeneratorRuntime.mark(function n(o,i){var a,s,r,c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:for(s in a=e.info)r=Number(s.substring("idx_".length)),(c=t.GetSymbolByIdx(r))&&(t.showIngotFly(a[s],c.getIngotWPos()),c.showIngot(0));return n.next=4,t.awaitTime(.7);case 4:cc.vv.gameData.setIngot(e.num),cc.vv.gameData.GetCollectScript().refreshIngotNum(),o();case 7:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}())},showIngotFly:function(e,t){if(this._ingot||(this._ingot=cc.instantiate(this.node.getChildByName("ingot"))),!this._ingotEndPos){var n=cc.find("btn_collect/spr_bg2",this.node);this._ingotEndPos=this.node.convertToNodeSpaceAR(n.convertToWorldSpaceAR(cc.v2(0,0)))}var o=cc.instantiate(this._ingot);o.active=!0;var i="animation"+e+"_1";o.getComponent(sp.Skeleton).setAnimation(0,i,!1);var a=this.node.convertToNodeSpaceAR(t);o.position=a,o.parent=this.node,o.runAction(cc.sequence(cc.moveTo(.7,this._ingotEndPos),cc.destroySelf())),Global.SlotsSoundMgr.playEffect("store_collect")},updateTimes:function(e){e>=0?(this._game_times.active=!0,Number(this._game_times.getChildByName("lbl_new").getComponent(cc.Label).string)<e&&(Global.SlotsSoundMgr.playEffect("num_change"),this._game_times.getChildByName("baolizi").active=!0,this._game_times.getChildByName("baolizi").getComponent(sp.Skeleton).setAnimation(0,"animation",!1)),this._game_times.getChildByName("lbl_new").getComponent(cc.Label).string=e):this._game_times.active=!1},CheckEnterFreeGame:function(){var e=this;return r(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=r(regeneratorRuntime.mark(function t(n,i){var a,s,r,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(cc.vv.gameData.getFreeType()!==cc.vv.gameData.getFreeTypeList().normal){t.next=8;break}if(!(e._gameInfo.freeResult&&e._gameInfo.freeResult.freeInfo&&e._gameInfo.freeResult.freeInfo.freeCnt>0)){t.next=8;break}a=o(e._gameInfo.freeResult.freeInfo.idxs);try{for(a.s();!(s=a.n()).done;)r=s.value,(c=e.GetSymbolByIdx(r))&&c.playTriggerAnimation()}catch(e){a.e(e)}finally{a.f()}return Global.SlotsSoundMgr.playEffect("bell"),t.next=7,e.awaitTime(1.5);case 7:e.Backup();case 8:return t.next=10,cc.vv.gameData.GetPopupScript().showStartFree();case 10:return cc.vv.gameData.GetPopupScript().playQP2Anim(),t.next=13,e.awaitTime(1.8);case 13:return cc.vv.gameData.GetBonusScript().initAllWildKuang(!1),cc.vv.gameData.getFreeType()===cc.vv.gameData.getFreeTypeList().super?(e.showSuperWildNode(!0),cc.vv.gameData.GetCollectScript().setBtnCollectState(!1)):e.refreshWildKuang(!0),e.ShowGameview(!0),e._curTimes=0,e.updateTimes(e._curTimes),t.next=20,e.awaitTime(2);case 20:return cc.vv.gameData.getFreeType()!==cc.vv.gameData.getFreeTypeList().normal&&e.CanDoNextRound(),e.playGameBgm(),t.next=24,e.awaitTime(1);case 24:n();case 25:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},CheckExitFreeGame:function(){var e=this;return r(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=r(regeneratorRuntime.mark(function t(n,o){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,cc.vv.gameData.GetPopupScript().showEndFree(cc.vv.gameData.GetGameTotalFreeWin());case 2:return cc.vv.gameData.GetPopupScript().playQP2Anim(),t.next=5,e.awaitTime(1.8);case 5:return cc.vv.gameData.GetBonusScript().exitBonusGame(),cc.vv.gameData.getFreeType()===cc.vv.gameData.getFreeTypeList().normal?e.Resume():e.setRandomCards(),e.ShowGameview(!1),cc.vv.gameData.GetCollectScript().setBtnCollectState(!0),e.refreshWildKuang(!1),t.next=12,e.awaitTime(2);case 12:Global.SlotsSoundMgr.stopBgm(),e.playGameBgm(),n(),cc.vv.gameData.getFreeType()===cc.vv.gameData.getFreeTypeList().click?cc.vv.gameData.GetCollectScript().exitClickFree():cc.vv.gameData.getFreeType()===cc.vv.gameData.getFreeTypeList().super&&cc.vv.gameData.GetCollectScript().exitSuperFree(),cc.vv.gameData.setFreeType(cc.vv.gameData.getFreeTypeList().none);case 17:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},CheckEnterBonusGame:function(){var e=this;return r(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=r(regeneratorRuntime.mark(function t(n,o){var i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Global.SlotsSoundMgr.playEffect("respin_trigger"),cc.vv.gameData.GetBonusScript().playGreenTriAnim(),t.next=4,e.awaitTime(1);case 4:return t.next=6,cc.vv.gameData.GetPopupScript().playBonusTransition();case 6:return cc.vv.gameData.GetPopupScript().playQP1Anim(),t.next=9,e.awaitTime(1.5);case 9:return e.initAllSymbol(),cc.vv.gameData.GetBonusScript().exitBonusGame(),i=cc.vv.gameData.getLastGame(),cc.vv.gameData.GetBonusScript().hideAllGreenAnim(!1),t.next=15,cc.vv.gameData.GetBonusScript().enterBonusGame(i,n,!0);case 15:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},initAllSymbol:function(){for(var e=0;e<this._col;e++)for(var t=0;t<this._row;t++){var n=this._reels[e].GetSymbolByRow(t);n.setAnimationToTop(!1),n.ShowKuang(!1)}},showBonusWildKuang:function(e){cc.vv.gameData.GetBonusScript().initAllWildKuang(!1);for(var t=0;t<e.length;t++)cc.vv.gameData.GetBonusScript().setWildKuangByIdx(e[t],!0)},refreshWildKuang:function(e){if(e){this._curTimes=0;var t=this._cfg.triFreeWildKuang;this.updateTimes(this._curTimes),this.showBonusWildKuang(t)}else this.showCurBetState()},showCurBetState:function(){if(!cc.vv.gameData.isFreeGame()){var e=[],t=cc.vv.gameData.GetBetIdx(),n=cc.vv.gameData.getAllwealthGod();n[t-1]?(this._curTimes=10-n[t-1].num,this._curTimes=10===this._curTimes?0:this._curTimes,e=n[t-1].idxs):(this._curTimes=0,e=[]),this.updateTimes(this._curTimes),this.showBonusWildKuang(e)}},playLastGame:function(){var e=this;return r(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=r(regeneratorRuntime.mark(function t(n,o){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e._curTimes=0,e.updateTimes(),Global.SlotsSoundMgr.playEffect("kuanglizi"),cc.vv.gameData.GetBonusScript().playLastGame(n);case 4:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},setFreeMultTitle:function(){var e=cc.vv.gameData.getFreeMult();this._node_mult.active=2===e||3===e,this._node_mult.active&&(this._node_mult.getChildByName("spr_mult2").active=2===e,this._node_mult.getChildByName("spr_mult3").active=3===e)},showSuperWildNode:function(e){if(this._node_super_wild.active=e,e)for(var t=cc.vv.gameData.getMapId(),n=this._cfg.superFreeWildKuang[t-1],o=0;o<n.length;o++)this._superWildList[o].active=n[o];else for(var i=0;i<this._superWildList.length;i++)this._superWildList[i].active=!1},ShowGameview:function(e){if(e){var t=cc.vv.gameData.GetTotalFree(),n=cc.vv.gameData.GetFreeTime();t||(t=10,cc.vv.gameData.SetTotalFree(t)),n||(n=10,cc.vv.gameData.SetFreeTime(n)),this._bottomScript.ShowFreeModel(!0,t-n,t);var o=cc.vv.gameData.GetTotalFreeWin();this._bottomScript.SetWin(o),this.setFreeMultTitle()}else this._bottomScript.ShowFreeModel(!1),this._node_mult.active=!1;cc.vv.gameData.setIsFreeGame(e);var i=cc.find("Canvas/safe_node/spr_bg_normal"),a=cc.find("Canvas/safe_node/spr_bg_free");a&&(i&&(i.active=!e),a.active=e)},playGameBgm:function(){cc.vv.gameData.isFreeGame()?cc.vv.gameData.getFreeType()===cc.vv.gameData.getFreeTypeList().super?Global.SlotsSoundMgr.playBgm("fgbgm"):Global.SlotsSoundMgr.playBgm("fgbm"):Global.SlotsSoundMgr.playNormalBgm()},awaitTime:function(e){var t=this;return new Promise(function(n,o){t.scheduleOnce(function(){n()},e)})}}),cc._RF.pop()},{LMSlots_Slots_Base:void 0}],TheGodOfFortune_Symbol:[function(e,t,n){"use strict";cc._RF.push(t,"c1a18cPzExAd7RMJTaUM4Va","TheGodOfFortune_Symbol"),cc.Class({extends:e("LMSlots_Symbol_Base"),properties:{_ingot:null,_bonusIndex:0,_type:""},ingot:function(){return this._ingot||(this._ingot=this.node.getChildByName("ingot")),this._ingot},start:function(){},StartMove:function(){this._super(),this.hideOther()},hideOther:function(){this.showIngot(),this.setNum(),this.setPool(),this.setPrize(),this.showBonusWildKuang(!1)},ShowById:function(e,t){this._super(e,t),this.hideOther(),t&&("ingot"===t.type&&t.num?this.showIngot(t.num):"coin"===t.type&&t.num?this.setNum(t.num):"pool"===t.type&&t.num?this.setPool(t.num):t.type)},showIngot:function(e){this.ingot()&&(e>0?(this.ingot().active=!0,this.ingot().getChildByName("spr").getComponent(cc.Sprite).spriteFrame=cc.vv.gameData.GetAtlasByName("symbol").getSpriteFrame("theme185_s_jiao"+e)):this.ingot().active=!1)},getIngotWPos:function(){return this.ingot().convertToWorldSpaceAR(cc.v2(0,0))},setType:function(e){this._type=e},ShowRandomSymbol:function(){var e=cc.vv.gameData.getGameCfg(),t=[],n=null,o=(t="bonus_1"===this._type?Global.copy(e.bonusRandom1):"bonus_2"===this._type?Global.copy(e.bonusRandom2):Global.copy(e.randomSymbols))[Global.random(1,t.length)-1];if(4===o&&("bonus_1"===this._type||"bonus_2"===this._type)){var i=Global.random(1,e.bonusCoinMultList.length);n={type:"coin",num:e.bonusCoinMultList[i-1]*cc.vv.gameData.GetTotalBet()}}this.ShowById(o,n)},setBonusIndex:function(e){this._bonusIndex=e},getBonusIndex:function(){return this._bonusIndex},playBonusRedKuangAnim:function(e){var t=this;if(e){var n=this.setBonusAnimationToTop(!0),o=cc.find("kuang_red",n);o.active=!0,n.zIndex=1e3;var i=o.getComponent(sp.Skeleton);i&&(i.setAnimation(0,"animation",!1),i.setCompleteListener(function(){t.setBonusAnimationToTop(!1)}))}else cc.find("kuang_red",this.node).active=!1},setBonusAnimationToTop:function(e){if(this._topAniNode){if(e){var t=cc.find(cc.js.formatStr("symbol_ani_%s_%s",this._bonusIndex,this._reelIdx),this._topAniNode);t||(t=cc.instantiate(this.node));var n=this.node.convertToWorldSpaceAR(cc.v2(0));return t.parent=this._topAniNode,t.name=cc.js.formatStr("symbol_ani_%s_%s",this._bonusIndex,this._reelIdx),t.position=this._topAniNode.convertToNodeSpaceAR(n),this.node.active=!1,t}var o=cc.find(cc.js.formatStr("symbol_ani_%s_%s",this._bonusIndex,this._reelIdx),this._topAniNode);o&&o.removeFromParent(),this.node.active=!0,this._showNode&&(this._showNode.active=!0)}return this.node},setPrize:function(e){this._prize=e},getPrize:function(){return this._prize},setNum:function(e){var t=cc.find("lbl_coin",this.node);t&&(e?(t.active=!0,t.getComponent(cc.Label).string=Global.formatNumShort(e),this.setPrize(e)):t.active=!1)},setPool:function(e){var t=cc.find("spr_pool",this.node);if(t)if(e){t.active=!0,t.getComponent(cc.Sprite).spriteFrame=cc.vv.gameData.GetAtlasByName("symbol").getSpriteFrame("theme185_s_j"+(4-e));var n=cc.vv.gameData.getBonusPoolList();this.setPrize(n[e])}else t.active=!1},showBonusWildKuang:function(e){var t=cc.find("kuang_wild",this.node);t&&(e?(t.active=!0,t.getComponent(sp.Skeleton).setAnimation(0,"animation1",!0)):t.active=!1)},playCollectAnim:function(){var e=this._id,t=cc.vv.gameData.getGameCfg();if(t.symbol[e]&&t.symbol[e].win_node&&t.symbol[e].collect_ani&&(this._showNode&&(this._showNode.active=!1),this._showNode=cc.find(t.symbol[e].win_node,this.node),this._showNode.active=!0,""!=t.symbol[e].collect_ani.name)){this.node.zIndex=t.symbol[e].collect_ani.zIndex-this._symbolIdx+10*this._reelIdx;var n=this._showNode.getComponent(sp.Skeleton);n&&n.setAnimation(0,t.symbol[e].collect_ani.name,!1)}},playWinAnimation:function(){var e=this._id;601===e||602===e||603===e||604===e?this.playLionWinAnim():this._super()},playLionWinAnim:function(){var e=cc.vv.gameData.getGameCfg();if(e.symbol[this._id]&&e.symbol[this._id].win_node&&e.symbol[this._id].win_ani&&(this._state="win",this._showNode&&(this._showNode.active=!1),this._showNode=cc.find(e.symbol[this._id].win_node,this.node),this._showNode.active=!0,""!=e.symbol[this._id].win_ani.name)){this._showNode.zIndex=e.symbol[this._id].win_ani.zIndex-this._symbolIdx+10*this._reelIdx;var t=this._showNode.getComponent(sp.Skeleton);t&&t.setAnimation(0,e.symbol[this._id].win_ani.name,!0)}},playBonusWinAnim:function(){var e=cc.vv.gameData.getGameCfg();if(e.symbol[this._id]&&e.symbol[this._id].win_node&&e.symbol[this._id].win_ani&&(this._showNode&&(this._showNode.active=!1),this._showNode=cc.find(e.symbol[this._id].win_node,this.node),this._showNode.active=!0,""!=e.symbol[this._id].win_ani.name)){var t=this._showNode.getComponent(sp.Skeleton);t&&t.setAnimation(0,e.symbol[this._id].win_ani.name,!0)}},GetKuangShowParent:function(){return cc.find("Canvas/safe_node/slots/top_kuang")},playTriggerAnimation:function(){var e=!1,t=this._id,n=cc.vv.gameData.getGameCfg();if(n.symbol[t]&&n.symbol[t].win_node&&n.symbol[t].trigger_ani){this._state="trigger",this._showNode&&(this._showNode.active=!1);var o=this.setAnimationToTop(!0);o.active=!0;var i=cc.find(n.symbol[t].win_node,o);if(i.active=!0,""!=n.symbol[t].trigger_ani.name){o.zIndex=n.symbol[t].trigger_ani.zIndex-this._symbolIdx+10*this._reelIdx,e=!0;var a=i.getComponent(sp.Skeleton);a&&a.setAnimation(0,n.symbol[t].trigger_ani.name,!0)}}return e}}),cc._RF.pop()},{LMSlots_Symbol_Base:void 0}]},{},["TheGodOfFortune_BonusGame","TheGodOfFortune_BonusReel","TheGodOfFortune_Cfg","TheGodOfFortune_Collect","TheGodOfFortune_GameData","TheGodOfFortune_Logic","TheGodOfFortune_Popup","TheGodOfFortune_Reel","TheGodOfFortune_Slots","TheGodOfFortune_Symbol"]);
window.__require=function e(t,n,a){function o(r,c){if(!n[r]){if(!t[r]){var s=r.split("/");if(s=s[s.length-1],!t[s]){var u="function"==typeof __require&&__require;if(!c&&u)return u(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+r+"'")}r=s}var l=n[r]={exports:{}};t[r][0].call(l.exports,function(e){return o(t[r][1][e]||e)},l,l.exports,e,t,n,a)}return n[r].exports}for(var i="function"==typeof __require&&__require,r=0;r<a.length;r++)o(a[r]);return o}({WestCowboy_BonusGameMgr:[function(e,t,n){"use strict";function a(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=o(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,r=!0,c=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return r=e.done,e},e:function(e){c=!0,i=e},f:function(){try{r||null==a.return||a.return()}finally{if(c)throw i}}}}function o(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function r(e,t,n,a,o,i,r){try{var c=e[i](r),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(a,o)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(a,o){var i=e.apply(t,n);function c(e){r(i,a,o,c,s,"next",e)}function s(e){r(i,a,o,c,s,"throw",e)}c(void 0)})}}cc._RF.push(t,"34606SzNSZGLoJJMJA2e6pl","WestCowboy_BonusGameMgr"),cc.Class({extends:cc.Component,properties:{_bonusId:3,_canTouchAddSpin:!1},Init:function(){this._bonusId=3,this._mainNode=cc.find("mainnode",this.node),this._mainNode.active=!1,this._topSlotsScript=cc.find("slots_top",this._mainNode).addComponent("WestCowboy_BonusSlots"),this._bottomSlotsScript=cc.find("slots",this._mainNode).addComponent("WestCowboy_BonusSlots"),this._topType=1,this._bottomType=2,this._topSlotsScript.Init(this._topType),this._bottomSlotsScript.Init(this._bottomType),this._slots_top=cc.find("slots_top",this._mainNode),this._slots_bottom=cc.find("slots",this._mainNode),this._symbolTemplete||(this._symbolTemplete=cc.vv.gameData.GetPrefabByName("symbol"),this._symbolTemplete&&(this._symbolTemplete.optimizationPolicy=cc.Prefab.OptimizationPolicy.MULTI_INSTANCE))},getWinCoin:function(){return this._winCoin},showBonusGame:function(e){var t=this;return c(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise(function(){var n=c(regeneratorRuntime.mark(function n(a,o){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(Global.SlotsSoundMgr.stopBgm(),Global.SlotsSoundMgr.playBgm("music_ChilliFiesta_respinBgSound"),cc.vv.gameData.setIsBonusGame(!0),t._subGameData=e,1!==t._subGameData.state){n.next=13;break}return n.next=7,t.showBonusGameUI();case 7:return n.next=9,t.addSpins();case 9:t._curCnt=t._subGameData.totalSpinCnt-t._subGameData.spinCnt,t._totalCnt=t._subGameData.totalSpinCnt,n.next=16;break;case 13:if(0!==t._subGameData.state){n.next=16;break}return n.next=16,t.showBonusGameUI();case 16:t.reqSpine(),t._callBack=a;case 18:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}()));case 1:case"end":return n.stop()}},n)}))()},endBonusGame:function(){var e=this;return c(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return AppLog.log("###bonus\u6e38\u620f\u7ed3\u675f"),(n=cc.find("result_node",e._mainNode)).active=!0,cc.vv.AudioManager.playEff("games/WestCowboy/","music_ChilliFiesta_respinOver",!0),cc.find("winCoin",n).getComponent(cc.Label).string="0",t.next=8,e.collectSlotsCoin();case 8:return t.next=10,cc.vv.gameData.awaitTime(2);case 10:return t.next=12,e.popResultDialog();case 12:e._callBack&&(Global.SlotsSoundMgr.stopBgm(),cc.vv.gameData.setIsBonusGame(!1),e._winCoin=e._subGameData.winCoin,e._callBack(),e._callBack=null,e._subGameData=null);case 13:case"end":return t.stop()}},t)}))()},popResultDialog:function(){var e=this;return c(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=c(regeneratorRuntime.mark(function t(n){var a,o,i,r,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:cc.vv.AudioManager.playEff("games/WestCowboy/","music_ChilliFiesta_freespinOver",!0),(a=cc.find("free_dialog",e.node.parent)).active=!0,(o=cc.find("bonus_result_node",a)).active=!0,(i=cc.find("bg",o)).scale=0,cc.tween(i).to(.5,{scale:1},{easing:"backOut"}).start(),cc.find("coin",i).getComponent(cc.Label).string=Global.formatMoney(e._subGameData.winCoin),(r=cc.find("btn_collect",i)).off("click"),s=function(){var e=c(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r.off("click"),cc.vv.AudioManager.playEff("games/WestCowboy/","music_ChilliFiesta_collect",!0),cc.tween(i).to(.5,{scale:0},{easing:"backIn"}).call(function(){o.active=!1,a.active=!1,n()}).start();case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),cc.vv.gameData.checkAutoPlay(r,s),r.on("click",c(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.stopAllActions(),e.next=3,s();case 3:case"end":return e.stop()}},e)})));case 15:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},showBonusGameUI:function(){var e=this;return c(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=c(regeneratorRuntime.mark(function t(n,a){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._mainNode.active=!0,cc.find("result_node",e._mainNode).active=!1,e._totalCnt=e._subGameData.totalSpinCnt,e._curCnt=e._subGameData.totalSpinCnt-e._subGameData.spinCnt,cc.find("spin/curTimes",e._mainNode).getComponent(cc.Label).string=e._curCnt,cc.find("spin/allTimes",e._mainNode).getComponent(cc.Label).string=e._totalCnt,t.next=9,e.showBonusSlotsUI();case 9:n();case 10:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},showBonusSlotsUI:function(){var e=this;return c(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=c(regeneratorRuntime.mark(function t(n,a){var o,i,r,c,s,u,l,m;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e._bottomSlotsScript.initAllSymbol(),e._topSlotsScript.initAllSymbol(),0!==e._curCnt){t.next=6;break}return t.delegateYield(regeneratorRuntime.mark(function t(){var a,o,i,r,c,s,u,l,m,p;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(cc.find("repeater_feature_prize/coin",e._mainNode).getComponent(cc.Label).string="",a=e._subGameData.slots[0].bonusIdxs,o=e._subGameData.slots[0].bonusItems,i=0;i<a.length;i++)r=e._bottomSlotsScript.GetSymbolByIdx(a[i]),c=o[i],r.ShowById(cc.vv.gameData.getGameCfg().bonusId,c),r.playBonusStopAnimation();return t.next=6,cc.vv.gameData.awaitTime(2);case 6:s=0,u=regeneratorRuntime.mark(function t(n){var i,r,c,u,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=e._bottomSlotsScript.GetSymbolByIdx(a[n]),(r=o[n]).coin?s+=r.coin:r.jackpot&&(s+=r.jackpot.value),c=i.node.convertToWorldSpaceAR(cc.v2(0,0)),c=e.node.parent.convertToNodeSpaceAR(c),u=cc.find("repeater_feature_prize/coin",e._mainNode).convertToWorldSpaceAR(cc.v2(0,0)),u=e.node.parent.convertToNodeSpaceAR(u),cc.vv.AudioManager.playEff("games/WestCowboy/","music_ChilliFiesta_respinBonusCollect",!0),(l=cc.instantiate(cc.find("fly_particle",e.node.parent))).parent=e.node.parent,l.position=c,l.active=!0,cc.tween(l).to(.5,{position:u}).call(function(){cc.find("repeater_feature_prize/coin",e._mainNode).getComponent(cc.Label).string=Global.formatMoney(s),cc.vv.AudioManager.playEff("games/WestCowboy/","music_ChilliFiesta_bonusCollectBuling",!0);var t=cc.instantiate(cc.find("repeater_feature_prize_particle",e.node.parent));t.parent=e.node.parent,t.position=u,t.active=!0,cc.tween(t).delay(.5).removeSelf().start(),l.removeFromParent()}).start(),t.next=15,cc.vv.gameData.awaitTime(.5);case 15:case"end":return t.stop()}},t)}),l=0;case 9:if(!(l<a.length)){t.next=14;break}return t.delegateYield(u(l),"t0",11);case 11:l++,t.next=9;break;case 14:m=regeneratorRuntime.mark(function t(n){var i,r,c,s,u,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=e._bottomSlotsScript.GetSymbolByIdx(a[n]),r=o[n],c=i.node.convertToWorldSpaceAR(cc.v2(0,0)),c=e.node.parent.convertToNodeSpaceAR(c),s=e._topSlotsScript.GetSymbolByIdx(a[n]),u=s.node.convertToWorldSpaceAR(cc.v2(0,0)),u=e.node.parent.convertToNodeSpaceAR(u),cc.vv.AudioManager.playEff("games/WestCowboy/","music_ChilliFiesta_respinBonusUpFly",!0),(l=cc.instantiate(cc.find("lajiao_sprite",e.node.parent))).parent=e.node.parent,l.position=c,l.active=!0,cc.tween(l).parallel(cc.tween().to(.25,{scale:2}).to(.25,{scale:1}),cc.tween().to(.5,{position:u})).call(function(){cc.vv.AudioManager.playEff("games/WestCowboy/","music_ChilliFiesta_respinBonusUpBuling",!0);var t=cc.instantiate(cc.find("effect_ljlr_baopo",e.node.parent));t.parent=e.node.parent,t.position=u,t.active=!0,cc.tween(t).delay(.5).removeSelf().start(),s.ShowById(cc.vv.gameData.getGameCfg().bonusId,r),s.playBonusGenerateAnimation()}).removeSelf().start(),t.next=15,cc.vv.gameData.awaitTime(.5);case 15:case"end":return t.stop()}},t)}),p=0;case 16:if(!(p<a.length)){t.next=21;break}return t.delegateYield(m(p),"t1",18);case 18:p++,t.next=16;break;case 21:n();case 22:case"end":return t.stop()}},t)})(),"t0",4);case 4:t.next=14;break;case 6:for(o=e._subGameData.slots[0].bonusIdxs,i=e._subGameData.slots[0].bonusItems,r=0;r<15;r++)c=e._bottomSlotsScript.GetSymbolByIdx(r+1),-1!==o.indexOf(r+1)?(s=i[o.indexOf(r+1)],c.ShowById(cc.vv.gameData.getGameCfg().bonusId,s),c.playBonusStopAnimation()):c.ShowRandomSymbol();for(o=e._subGameData.slots[1].bonusIdxs,i=e._subGameData.slots[1].bonusItems,u=0;u<15;u++)l=e._topSlotsScript.GetSymbolByIdx(u+1),-1!==o.indexOf(u+1)?(m=i[o.indexOf(u+1)],l.ShowById(cc.vv.gameData.getGameCfg().bonusId,m),l.playBonusStopAnimation()):l.ShowRandomSymbol();cc.find("repeater_feature_prize/coin",e._mainNode).getComponent(cc.Label).string=Global.formatMoney(e._subGameData.baseCoin),n();case 14:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},collectSlotsCoin:function(){var e=this;return c(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=c(regeneratorRuntime.mark(function t(n){var a,o,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=0,o=regeneratorRuntime.mark(function t(n){var o,i,r,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e._subGameData.slots[n],o=0===n?e._topSlotsScript:e._bottomSlotsScript,i=cc.find("result_node/winCoin",e._mainNode).convertToWorldSpaceAR(cc.v2(0,0)),i=e.node.parent.convertToNodeSpaceAR(i),r=regeneratorRuntime.mark(function t(n){var r,c,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if((r=o.GetSymbolByIdx(n+1)).GetShowId()===cc.vv.gameData.getGameCfg().bonusId){t.next=3;break}return t.abrupt("return","continue");case 3:return c=r.node.convertToWorldSpaceAR(cc.v2(0,0)),c=e.node.parent.convertToNodeSpaceAR(c),cc.vv.AudioManager.playEff("games/WestCowboy/","music_ChilliFiesta_respinBonusCollect",!0),(s=cc.instantiate(cc.find("fly_particle",e.node.parent))).parent=e.node.parent,s.position=c,s.active=!0,cc.tween(s).to(.5,{position:i}).call(function(){r.GetData().baseCoin?a+=r.GetData().baseCoin:r.GetData().jackpot?a+=r.GetData().jackpot.value:a+=r.GetData().coin,cc.find("result_node/winCoin",e._mainNode).getComponent(cc.Label).string=Global.formatMoney(a),cc.vv.AudioManager.playEff("games/WestCowboy/","music_ChilliFiesta_bonusCollectBuling",!0);var t=cc.instantiate(cc.find("repeater_feature_prize_particle",e.node.parent));t.parent=e.node.parent,t.position=i,t.active=!0,cc.tween(t).delay(.5).removeSelf().start(),s.removeFromParent()}).start(),t.next=13,cc.vv.gameData.awaitTime(.5);case 13:case"end":return t.stop()}},t)}),c=0;case 6:if(!(c<15)){t.next=14;break}return t.delegateYield(r(c),"t0",8);case 8:if("continue"!==t.t0){t.next=11;break}return t.abrupt("continue",11);case 11:c++,t.next=6;break;case 14:case"end":return t.stop()}},t)}),i=0;case 3:if(!(i<e._subGameData.slots.length)){t.next=8;break}return t.delegateYield(o(i),"t0",5);case 5:i++,t.next=3;break;case 8:n();case 9:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},lockJackpot:function(e){cc.find("LMSlots_PrizePool2",this._mainNode).getComponent("LMSlots_PrizePool_Base").PausePool([{prizeType:0,pauseNum:e[0]},{prizeType:1,pauseNum:e[1]},{prizeType:2,pauseNum:e[2]},{prizeType:3,pauseNum:e[3]},{prizeType:4,pauseNum:e[4]}])},startSpin:function(){},showSpinResult:function(){},getSubGameData:function(){return this._subGameData},spinEnd:function(){},reqSpine:function(){var e=this;return c(regeneratorRuntime.mark(function t(){var n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return cc.log(cc.js.formatStr("startMove:%s, %s",e._curCnt,e._totalCnt)),e._curCnt+=1,cc.find("spin/curTimes",e._mainNode).getComponent(cc.Label).string=e._curCnt,cc.find("spin/allTimes",e._mainNode).getComponent(cc.Label).string=e._totalCnt,e._topSlotsScript.StartMove(e._subGameData.slots[0].bonusIdxs),e._bottomSlotsScript.StartMove(e._subGameData.slots[1].bonusIdxs),t.next=8,cc.vv.gameData.awaitTime(1);case 8:return n={rtype:3},t.next=11,cc.vv.gameData.reqSubGame(n);case 11:200!==(a=t.sent).code||a.spcode||(e._subGameData=a.data.bonusGame,e._bottomSlotsScript.setSpinResult(e._subGameData.slots[1].bonusIdxs,e._subGameData.slots[1].bonusItems),e._topSlotsScript.setSpinResult(e._subGameData.slots[0].bonusIdxs,e._subGameData.slots[0].bonusItems));case 13:case"end":return t.stop()}},t)}))()},StopMove:function(){this._topSlotsScript.StopMove(),this._bottomSlotsScript.StopMove()},OnSpinEnd:function(){var e=this;return c(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return cc.log("OnSpinEnd"),cc.vv.gameData.GetBottomScript().ShowBtnsByState("moveing_1"),t.next=4,e.triggerGetGoldLajiao();case 4:if(1!==e._subGameData.state){t.next=12;break}return t.next=7,e.addSpins();case 7:e._curCnt=e._subGameData.totalSpinCnt-e._subGameData.spinCnt,e._totalCnt=e._subGameData.totalSpinCnt,e.reqSpine(),t.next=19;break;case 12:if(!(e._subGameData.spinCnt>0)){t.next=18;break}return t.next=15,cc.vv.gameData.awaitTime(1);case 15:e.reqSpine(),t.next=19;break;case 18:e.endBonusGame();case 19:case"end":return t.stop()}},t)}))()},addSpins:function(){var e=this;return c(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=c(regeneratorRuntime.mark(function t(n){var a,o,i,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(cc.vv.AudioManager.playEff("games/WestCowboy/","music_ChilliFiesta_respinChoose",!0),(a=cc.find("add_spin_node",e._mainNode)).active=!0,(o=cc.find("mainnode",a)).scale=0,o.active=!0,cc.tween(o).to(.5,{scale:1},{easing:"backOut"}).call(function(){e._canTouchAddSpin=!0,e.playAnimationOnce(cc.find("kuang_animation",o),"saoguang5"),e.playAnimationOnce(cc.find("headtext2/idle",o),"saoguang6");for(var t=1;t<4;t++)e.playAnimationOnce(cc.find("number"+t+"/idle",o),"saoguang3")}).start(),i=function(t){var i=cc.find("number"+t,o);cc.find("num",i).active=!1,cc.find("wenhao",i).active=!0,cc.find("spin",i).active=!1,cc.find("disable",i).active=!1,i.off(cc.Node.EventType.TOUCH_END),i.on(cc.Node.EventType.TOUCH_END,c(regeneratorRuntime.mark(function i(){var r,c,s,u,l,m,p;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(e._canTouchAddSpin){i.next=2;break}return i.abrupt("return");case 2:return o.stopAllActions(),e._canTouchAddSpin=!1,cc.vv.AudioManager.playEff("games/WestCowboy/","music_ChilliFiesta_respinChooseClick",!0),r={rtype:2,choiceId:t},i.next=8,cc.vv.gameData.reqSubGame(r);case 8:if(200!==(c=i.sent).code||2!==c.data.rtype){i.next=25;break}return e._subGameData=c.data.bonusGame,s=cc.find("number"+c.data.choiceId,o),u=cc.vv.gameData.GetAtlasByName("ChilliFiesta2"),cc.find("num",s).active=!0,cc.find("num",s).getComponent(cc.Sprite).spriteFrame=u.getSpriteFrame("ChilliFiesta-Common-ChiliFiesta_respin_"+c.data.extraSpins[c.data.choiceId-1]),cc.find("spin",s).active=!0,cc.find("spin",s).getComponent(cc.Sprite).spriteFrame=u.getSpriteFrame(c.data.extraSpins[c.data.choiceId-1]>1?"ChilliFiesta-Common-ChiliFiesta_respin_spins":"ChilliFiesta-Common-ChiliFiesta_respin_spin"),cc.find("wenhao",s).active=!1,e.playAnimationOnce(cc.find("select",s),"saoguang7"),i.next=21,cc.vv.gameData.awaitTime(.5);case 21:for(l=1;l<4;l++)l!==c.data.choiceId&&(m=cc.find("number"+l,o),cc.find("disable",m).active=!1,p=cc.vv.gameData.GetAtlasByName("ChilliFiesta2"),cc.find("num",m).active=!0,cc.find("num",m).getComponent(cc.Sprite).spriteFrame=p.getSpriteFrame("ChilliFiesta-Common-ChiliFiesta_respin_"+c.data.extraSpins[l-1]+c.data.extraSpins[l-1]),cc.find("spin",m).active=!0,cc.find("spin",m).getComponent(cc.Sprite).spriteFrame=p.getSpriteFrame(c.data.extraSpins[l-1]>1?"ChilliFiesta-Common-ChiliFiesta_respin_spinsUn2":"ChilliFiesta-Common-ChiliFiesta_respin_spinUn2"),cc.find("wenhao",m).active=!1,e.playAnimationOnce(cc.find("select",m),"saoguang7"));return i.next=24,cc.vv.gameData.awaitTime(1);case 24:cc.tween(o).to(.5,{scale:0},{easing:"backIn"}).call(function(){a.active=!1,n()}).start();case 25:case"end":return i.stop()}},i)})))},r=1;r<4;r++)i(r);return t.next=11,cc.vv.gameData.awaitTime(.5);case 11:cc.vv.gameData.isNeedAutoPlay()&&cc.tween(o).delay(cc.vv.gameData.getManualAutoPlayTime()).call(c(regeneratorRuntime.mark(function t(){var i,r,c,s,u,l,m;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e._canTouchAddSpin){t.next=2;break}return t.abrupt("return");case 2:return e._canTouchAddSpin=!1,cc.vv.AudioManager.playEff("games/WestCowboy/","music_ChilliFiesta_respinChooseClick",!0),i={rtype:2,choiceId:1},t.next=7,cc.vv.gameData.reqSubGame(i);case 7:if(200!==(r=t.sent).code||2!==r.data.rtype){t.next=24;break}return e._subGameData=r.data.bonusGame,c=cc.find("number"+r.data.choiceId,o),s=cc.vv.gameData.GetAtlasByName("ChilliFiesta2"),cc.find("num",c).active=!0,cc.find("num",c).getComponent(cc.Sprite).spriteFrame=s.getSpriteFrame("ChilliFiesta-Common-ChiliFiesta_respin_"+r.data.extraSpins[r.data.choiceId-1]),cc.find("spin",c).active=!0,cc.find("spin",c).getComponent(cc.Sprite).spriteFrame=s.getSpriteFrame(r.data.extraSpins[r.data.choiceId-1]>1?"ChilliFiesta-Common-ChiliFiesta_respin_spins":"ChilliFiesta-Common-ChiliFiesta_respin_spin"),cc.find("wenhao",c).active=!1,e.playAnimationOnce(cc.find("select",c),"saoguang7"),t.next=20,cc.vv.gameData.awaitTime(.5);case 20:for(u=1;u<4;u++)u!==r.data.choiceId&&(l=cc.find("number"+u,o),cc.find("disable",l).active=!1,m=cc.vv.gameData.GetAtlasByName("ChilliFiesta2"),cc.find("num",l).active=!0,cc.find("num",l).getComponent(cc.Sprite).spriteFrame=m.getSpriteFrame("ChilliFiesta-Common-ChiliFiesta_respin_"+r.data.extraSpins[u-1]+r.data.extraSpins[u-1]),cc.find("spin",l).active=!0,cc.find("spin",l).getComponent(cc.Sprite).spriteFrame=m.getSpriteFrame(r.data.extraSpins[u-1]>1?"ChilliFiesta-Common-ChiliFiesta_respin_spinsUn2":"ChilliFiesta-Common-ChiliFiesta_respin_spinUn2"),cc.find("wenhao",l).active=!1,e.playAnimationOnce(cc.find("select",l),"saoguang7"));return t.next=23,cc.vv.gameData.awaitTime(1);case 23:cc.tween(o).to(.5,{scale:0},{easing:"backIn"}).call(function(){a.active=!1,n()}).start();case 24:case"end":return t.stop()}},t)}))).start();case 12:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},playAnimationOnce:function(e,t,n){e.active=!0,t?e.getComponent(cc.Animation).play(t):e.getComponent(cc.Animation).play(),e.getComponent(cc.Animation).on("stop",function(){e.getComponent(cc.Animation).off("stop"),e.active=!1,n&&n()})},triggerGetGoldLajiao:function(){var e=this;return c(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=c(regeneratorRuntime.mark(function t(n){var o,i,r,c,s,u,l,m;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:o=e._subGameData.slots[0],i=a(o.bonusItems),t.prev=2,i.s();case 4:if((r=i.n()).done){t.next=10;break}if(!(c=r.value).baseCoin){t.next=8;break}return t.delegateYield(regeneratorRuntime.mark(function t(){var n,a,i,r,s,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.bonusIdxs[o.bonusItems.indexOf(c)],a=e._topSlotsScript.GetSymbolByIdx(n),(i=cc.find("repeater_feature_prize/trigger",e._mainNode)).active=!0,i.getComponent(cc.Animation).play("freespinsj"),i.getComponent(cc.Animation).on("stop",function(){i.getComponent(cc.Animation).off("stop"),i.active=!1}),r=cc.find("repeater_feature_prize/coin",e._mainNode).convertToWorldSpaceAR(cc.v2(0,0)),r=e.node.parent.convertToNodeSpaceAR(r),s=a.node.convertToWorldSpaceAR(cc.v2(0,0)),s=e.node.parent.convertToNodeSpaceAR(s),cc.vv.AudioManager.playEff("games/WestCowboy/","music_ChilliFiesta_respinBonusCollect",!0),(u=cc.instantiate(cc.find("fly_particle",e.node.parent))).parent=e.node.parent,u.position=r,u.active=!0,cc.tween(u).to(.5,{position:s}).call(function(){a.playBonusCoinAnimation(),u.removeFromParent()}).start(),t.next=18,cc.vv.gameData.awaitTime(.5);case 18:case"end":return t.stop()}},t)})(),"t0",8);case 8:t.next=4;break;case 10:t.next=15;break;case 12:t.prev=12,t.t1=t.catch(2),i.e(t.t1);case 15:return t.prev=15,i.f(),t.finish(15);case 18:s=e._subGameData.slots[0],u=a(s.bonusItems),t.prev=20,u.s();case 22:if((l=u.n()).done){t.next=28;break}if(!(m=l.value).baseCoin){t.next=26;break}return t.delegateYield(regeneratorRuntime.mark(function t(){var n,a,o,i,r,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.bonusIdxs[s.bonusItems.indexOf(m)],a=e._bottomSlotsScript.GetSymbolByIdx(n),(o=cc.find("repeater_feature_prize/trigger",e._mainNode)).active=!0,o.getComponent(cc.Animation).play("freespinsj"),o.getComponent(cc.Animation).on("stop",function(){o.getComponent(cc.Animation).off("stop"),o.active=!1}),i=cc.find("repeater_feature_prize/coin",e._mainNode).convertToWorldSpaceAR(cc.v2(0,0)),i=e.node.parent.convertToNodeSpaceAR(i),r=a.node.convertToWorldSpaceAR(cc.v2(0,0)),r=e.node.parent.convertToNodeSpaceAR(r),cc.vv.AudioManager.playEff("games/WestCowboy/","music_ChilliFiesta_respinBonusCollect",!0),(c=cc.instantiate(cc.find("fly_particle",e.node.parent))).parent=e.node.parent,c.position=i,c.active=!0,cc.tween(c).to(.5,{position:r}).call(function(){cc.vv.AudioManager.playEff("games/WestCowboy/","music_ChilliFiesta_bonus_buling",!0),a.playBonusCoinAnimation(),c.removeFromParent()}).start(),t.next=18,cc.vv.gameData.awaitTime(.5);case 18:case"end":return t.stop()}},t)})(),"t2",26);case 26:t.next=22;break;case 28:t.next=33;break;case 30:t.prev=30,t.t3=t.catch(20),u.e(t.t3);case 33:return t.prev=33,u.f(),t.finish(33);case 36:n();case 37:case"end":return t.stop()}},t,null,[[2,12,15,18],[20,30,33,36]])}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},GetLastStopSlotReel:function(){var e=this._topSlotsScript.GetLastStopReelIdx(),t=this._bottomSlotsScript.GetLastStopReelIdx(),n=t||e;return{slotType:t?this._bottomType:this._topType,reelIdx:n}},getMaxReelIdx:function(e,t){return(e===this._topType?this._topSlotsScript.getLastStopReel():this._bottomSlotsScript.getLastStopReel())[t]}}),cc._RF.pop()},{}],WestCowboy_BonusReel:[function(e,t,n){"use strict";cc._RF.push(t,"61185Xdr9dAVbIZl1os1Kgd","WestCowboy_BonusReel"),cc.Class({extends:e("LMSlots_Reel_Base"),properties:{},Init:function(e,t,n){this._holderNode=cc.find("mask/holder",this.node),this._holderOrigPosY=this._holderNode.position.y,this._super(e,t,n)},LoadSymbols:function(){this._symbolTemplete||(this._symbolTemplete=cc.vv.gameData.GetPrefabByName("bonus_symbol"),this._symbolTemplete&&(this._symbolTemplete.optimizationPolicy=cc.Prefab.OptimizationPolicy.MULTI_INSTANCE));for(var e=0;e<this._nCount+1;e++)this.CreateOneSymbol();this.ReLayOut()},initReelType:function(e){this._type=e,this._symbols.forEach(function(t){t.initSymbolType(e)})},OnReelSpinEnd:function(){this._reelState=[];var e=cc.vv.gameData.getBonusGameMgr().GetLastStopSlotReel(),t=e.reelIdx,n=e.slotType;this._type===n&&this._reelIdx===t&&(cc.log(cc.js.formatStr("OnReelSpinEnd, %s, %s",n,t)),cc.vv.gameData.getBonusGameMgr().OnSpinEnd())},ReadyToStop:function(){this._bNotifyReadyStop||(this._bNotifyReadyStop=!0)},OnReelBounsActionBefore:function(){if(this._originResult)for(var e=0;e<this._originResult.length;e++)this._symbols[e].StopMoveBefore()},OnReelBounsActionDeep:function(){if(this._originResult)for(var e=0;e<this._originResult.length;e++)this._symbols[e].StopMoveDeep();this.playStopAnim()},playStopAnim:function(){var e=this._symbols[0];e.GetShowId()===cc.vv.gameData.getGameCfg().bonusId&&(e.GetData().baseCoin?cc.vv.AudioManager.playEff("games/WestCowboy/","music_ChilliFiesta_GoldBonusBuling",!0):cc.vv.AudioManager.playEff("games/WestCowboy/","music_ChilliFiesta_baseBonusBuling",!0),e.playBonusStopAnimation());var t=cc.vv.gameData.getBonusGameMgr().getMaxReelIdx(this._type,this._reelIdx%5);this._reelIdx===t&&Global.SlotsSoundMgr.playEffect("music_ChilliFiesta_reelStop")},OnReelBounsActionEnd:function(){if(this._originResult)for(var e=0;e<this._originResult.length;e++)this._symbols[e].StopMoveEnd();else cc.log("\u56de\u5f39\u7ed3\u675f\uff0c\u6570\u636e\u5df2\u7ecf\u88ab\u6e05\u7a7a\u4e86");this.OnReelSpinEnd()}}),cc._RF.pop()},{LMSlots_Reel_Base:void 0}],WestCowboy_BonusSlots:[function(e,t,n){"use strict";cc._RF.push(t,"3d46e07dklP0L9XirqTfXL3","WestCowboy_BonusSlots"),cc.Class({extends:e("LMSlots_Slots_Base"),properties:{_slotsIndex:1},onLoad:function(){this._super()},start:function(){},Init:function(e){this._slotsIndex=e,this._topScript=cc.vv.gameData.GetTopScript(),this._bottomScript=cc.vv.gameData.GetBottomScript(),this._cfg=cc.vv.gameData.getGameCfg(),this._col=15,this._row=1,this._topAniNode=cc.find("top_ani",this.node),this.createReels(this._col,this._row)},createReels:function(e,t){for(var n=0;n<e;n++){var a=cc.find("reels/reel"+(n+1),this.node).addComponent("WestCowboy_BonusReel");a.Init(n,t,this._topAniNode),a.initReelType(this._slotsIndex),this._reels.push(a)}},GetReelStopInter:function(e){var t=this._cfg.reelStopInter||.6;return(e%5+5*(this._slotsIndex-1))*t},OnSpinEnd:function(){},getReelNode:function(e){return e>=this._reels.length?null:this._reels[e].node},StartMove:function(e){this._bStopRightnow=null,this._gameInfo=null;var t=[],n=[];this._reels.forEach(function(a){e.includes(a.GetReelIdx()+1)||(t.push(a),n.push(a.GetReelIdx()))}),this.MoveReels(t),this.setMoveLastIdx(n),this._stopTime=this.GetStopTime()},MoveReels:function(e){for(var t=0;t<e.length;t++){e[t].StartMove()}},setMoveLastIdx:function(e){cc.log(e);var t=null,n=[];e.forEach(function(e){(e%5>t%5||e%5==t%5&&e/3>t/3)&&(t=e),n[e%5]=n[e%5]?Math.max(n[e%5],e):e}),cc.log(n),this.moveReelLastIdx=t,cc.log("StartMove\uff1athis.moveReelLastIdx:",this.moveReelLastIdx),this._reelMax=n},getLastStopReel:function(){return this._reelMax},setSpinResult:function(e,t){for(var n=cc.vv.gameData.getGameCfg(),a=[],o=1;o<=15;o++){var i=Global.random(1,n.bonusRandomSymbols.length),r=n.bonusRandomSymbols[i-1];a.push(r)}this.SetSlotsResult(a,e,t)},SetSlotsResult:function(e,t,n){for(var a=e.length/this._col,o=[],i=0;i<e.length;i++){Math.floor(i/a);var r=i%this._col;if(this._cfg.symbol[e[i]]){var c={};c.sid=e[i],c.data={},t&&t.includes(i+1)&&(c.sid=3,c.data=n[t.indexOf(i+1)]),o[r]||(o[r]=[]),o[r].unshift(c)}}for(var s=0;s<this._reels.length;s++){var u=this._reels[s],l=o[s];u.SetResult(l)}},CanStopSlot:function(){return null!=cc.vv.gameData.getBonusGameMgr().getSubGameData()},getSlotsIndex:function(){return this._slotsIndex},getReel:function(e){return this._reels[e]},initAllSymbol:function(){for(var e=0;e<this._col;e++)this._reels[e].GetSymbolByRow(0).ShowById(14)}}),cc._RF.pop()},{LMSlots_Slots_Base:void 0}],WestCowboy_Cfg:[function(e,t,n){"use strict";var a;function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}cc._RF.push(t,"edcf1/8eTJH2KZGSAtvhtj3","WestCowboy_Cfg");var i={symbol:(a={},o(a,1,{node:"symbol_1",win_node:"animation_1",win_ani:{name:"actionframe",zIndex:300}}),o(a,2,{node:"symbol_2",win_node:"animation_2",stop_ani:{name:"buling",zIndex:100},win_ani:{name:"actionframe",zIndex:400}}),o(a,3,{node:"symbol_3"}),o(a,4,{node:"symbol_4",win_node:"animation_4",win_ani:{name:"actionframe",zIndex:300}}),o(a,5,{node:"symbol_5",win_node:"animation_5",win_ani:{name:"actionframe",zIndex:300}}),o(a,6,{node:"symbol_6",win_node:"animation_6",win_ani:{name:"actionframe",zIndex:300}}),o(a,7,{node:"symbol_7",win_node:"animation_7",win_ani:{name:"actionframe",zIndex:300}}),o(a,8,{node:"symbol_8",win_node:"animation_8",win_ani:{name:"actionframe",zIndex:300}}),o(a,9,{node:"symbol_9"}),o(a,10,{node:"symbol_10"}),o(a,11,{node:"symbol_11"}),o(a,12,{node:"symbol_12"}),o(a,13,{node:"symbol_13"}),o(a,14,{node:"symbol_14"}),a),autoModelDelay:1,scripts:{Top:"LMSlots_Top_Base",Bottom:"LMSlots_Bottom_Base",Slots:"WestCowboy_Slots",Reels:"WestCowboy_Reel",Symbols:"WestCowboy_Symbol"},col:5,row:3,symbolPrefab:"symbol",symbolSize:{width:132,height:117},randomSymbols:[1,4,5,6,7,8,9,10,11,12,13],bonusRandomSymbols:[1,4,5,6,7,8,9,10,11,12,13],wildId:1,scatterId:2,bonusId:3,kuang:"kuang",speed:3e3,reelStopInter:.2,auto_stop_time:1,bounceInfo:{distance:30,time:.1},AddAntiTime:1.5,reelStateInfo:[{id:[2],mini:3,counts:[1,1,1,1,1],antiNode:"node_anti",path:"games/WestCowboy/",reelStopSound:"music_ChilliFiesta_reelStop",symbolStopSound:"music_ChilliFiesta_scatterBuling",antSound:"MrCashSounds_longRun",antSpeed:2e3}],helpItems:["games/WestCowboy/prefab/help_item_1","games/WestCowboy/prefab/help_item_2","games/WestCowboy/prefab/help_item_3","games/WestCowboy/prefab/help_item_4","games/WestCowboy/prefab/help_item_5","games/WestCowboy/prefab/help_item_6","games/WestCowboy/prefab/help_item_7"],commEffect:{path:"games/WestCowboy/",win1:["music_ChilliFiesta_last_win_1",""],win2:["music_ChilliFiesta_last_win_2",""],win3:["music_ChilliFiesta_last_win_3",""],win4:["music_ChilliFiesta_last_win_4",""]},normalBgm:"music_ChilliFiesta_baseBgSound"};t.exports=i,cc._RF.pop()},{}],WestCowboy_GameData:[function(e,t,n){"use strict";cc._RF.push(t,"199cc/VY3JPPqByB8RCXxV1","WestCowboy_GameData"),cc.Class({extends:e("LMSlots_GameData_Base"),properties:{},RegisterMsg:function(){this._super(),cc.vv.NetManager.registerMsg(MsgId.SLOT_SUBGAME_DATA,this.onRcvSubGameAction,this)},UnregisterMsg:function(){this._super(),cc.vv.NetManager.unregisterMsg(MsgId.SLOT_SUBGAME_DATA,this.onRcvSubGameAction,!1,this)},isNormalFreeOver:function(){return this._gameInfo.allFreeCnt>0&&0===this._gameInfo.freeCnt},setIsBonusGame:function(e){this._isBonusGame=e},isBonusGame:function(){return this._isBonusGame},reqSubGame:function(e){var t=this;return new Promise(function(n){var a={c:MsgId.SLOT_SUBGAME_DATA,gameid:t._gameId,data:e};cc.vv.NetManager.send(a,!0),t._subCallBack=n})},onRcvSubGameAction:function(e){this._subCallBack&&(this._subCallBack(e),this._subCallBack=null)},setBonusGameMgr:function(e){this._bonusMgr=e},getBonusGameMgr:function(){return this._bonusMgr}}),cc._RF.pop()},{LMSlots_GameData_Base:void 0}],WestCowboy_Logic:[function(e,t,n){"use strict";cc._RF.push(t,"0deacHMsKdKNqGv2ID0zjS4","WestCowboy_Logic"),cc.Class({extends:e("LMSlots_Logic_Base"),properties:{},onLoad:function(){this._super()},InitCommComponent:function(){this._super();var e=cc.find("safe_node/bonusgame",this.node).addComponent("WestCowboy_BonusGameMgr");cc.vv.gameData.setBonusGameMgr(e),e.Init(),cc.vv.AudioManager.playEff("games/WestCowboy/","music_ChilliFiesta_enter",!0)}}),cc._RF.pop()},{LMSlots_Logic_Base:void 0}],WestCowboy_Reel:[function(e,t,n){"use strict";cc._RF.push(t,"c416cw5wRtApq2Z/v01hglY","WestCowboy_Reel"),cc.Class({extends:e("LMSlots_Reel_Base"),properties:{},StartMove:function(){this._super()},OnReelSpinEnd:function(){this._super()},playReelStop:function(){this._super();var e=!1;if(this._originResult)for(var t=0;t<this._originResult.length;t++){var n=this._symbols[t];n.GetShowId()===this._cfg.bonusId&&(e=!0,n.playBonusStopAnimation())}e&&cc.vv.AudioManager.playEff("games/WestCowboy/","music_ChilliFiesta_baseBonusBuling",!0)}}),cc._RF.pop()},{LMSlots_Reel_Base:void 0}],WestCowboy_Slots:[function(e,t,n){"use strict";function a(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=o(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,r=!0,c=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return r=e.done,e},e:function(e){c=!0,i=e},f:function(){try{r||null==a.return||a.return()}finally{if(c)throw i}}}}function o(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function r(e,t,n,a,o,i,r){try{var c=e[i](r),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(a,o)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(a,o){var i=e.apply(t,n);function c(e){r(i,a,o,c,s,"next",e)}function s(e){r(i,a,o,c,s,"throw",e)}c(void 0)})}}cc._RF.push(t,"3fa5fh5451Be7H88MNVuTUx","WestCowboy_Slots"),cc.Class({extends:e("LMSlots_Slots_Base"),properties:{_enterFreeCallback:null},Init:function(){this._super()},StartMove:function(){cc.vv.gameData.isBonusGame()||(this._super(),Global.SlotsSoundMgr.playNormalBgm(),cc.find("rate_tips/rate",this.node).getComponent(cc.Label).string="",cc.find("free_tips/allTimes",this.node).getComponent(cc.Label).string=cc.vv.gameData.GetTotalFree(),cc.find("free_tips/curTimes",this.node).getComponent(cc.Label).string=cc.vv.gameData.GetTotalFree()-cc.vv.gameData.GetFreeTime())},ReconnectShow:function(){var e=this;return c(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=cc.vv.gameData.getDeskInfo()).extraFreeInfo){t.next=21;break}if(e._bottomScript.ShowBtnsByState("moveing_1"),0!==n.extraFreeInfo.state){t.next=9;break}return t.next=6,e.popFreeDialog(n.extraFreeInfo);case 6:return e.cutSceneChili(),t.next=9,cc.vv.gameData.awaitTime(1);case 9:return 1===n.extraFreeInfo.state&&(cc.find("free_tips/allTimes",e.node).getComponent(cc.Label).string=cc.vv.gameData.GetTotalFree(),cc.find("free_tips/curTimes",e.node).getComponent(cc.Label).string=cc.vv.gameData.GetTotalFree()-cc.vv.gameData.GetFreeTime()),cc.find("rate_tips/rate",e.node).getComponent(cc.Label).string="",cc.find("free_dialog/common_enter_node",e.node.parent).active=!1,cc.find("free_dialog",e.node.parent).active=!1,e.ShowGameview(!0),t.next=16,cc.vv.gameData.awaitTime(2);case 16:Global.SlotsSoundMgr.stopBgm(),Global.SlotsSoundMgr.playBgm("music_ChilliFiesta_freeSpinBgSound"),e.CanDoNextRound(),t.next=35;break;case 21:if(!n.bonusGame){t.next=34;break}return e._bottomScript.ShowBtnsByState("moveing_1"),t.next=25,cc.vv.gameData.getBonusGameMgr().showBonusGame(n.bonusGame);case 25:return e.cutSceneChili(),t.next=28,cc.vv.gameData.awaitTime(1);case 28:return cc.vv.gameData.getBonusGameMgr()._mainNode.active=!1,t.next=31,cc.vv.gameData.awaitTime(1);case 31:e.ShowBottomWin(cc.vv.gameData.getBonusGameMgr().getWinCoin(),cc.vv.gameData.getBonusGameMgr().getWinCoin(),!0,function(){e.CanDoNextRound()}),t.next=35;break;case 34:e.CanDoNextRound();case 35:case"end":return t.stop()}},t)}))()},StopMove:function(){cc.vv.gameData.isBonusGame()?cc.vv.gameData.getBonusGameMgr().StopMove():this._super()},onMsgSpine:function(e){var t=this;return c(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t._super(e);case 1:case"end":return n.stop()}},n)}))()},SetSlotsResult:function(e){for(var t=e.length/this._col,n=[],a=0;a<e.length;a++){Math.floor(a/t);var o=a%this._col;if(this._cfg.symbol[e[a]]){var i={};if(i.sid=e[a],e[a]===this._cfg.bonusId){var r=this._gameInfo.bonusIdxs.indexOf(a+1);-1!==r&&r<this._gameInfo.bonusItems.length&&(i.data=this._gameInfo.bonusItems[r])}n[o]||(n[o]=[]),n[o].unshift(i)}}for(var c=0;c<this._reels.length;c++){var s=this._reels[c],u=n[c];s.SetResult(u)}},CheckEnterFreeGame:function(){return this._gameInfo.extraFreeInfo&&0===this._gameInfo.extraFreeInfo.state},CheckExitFreeGame:function(){return cc.vv.gameData.GetTotalFree()>0&&0===cc.vv.gameData.GetFreeTime()},ShowWinTrace:function(){this._super()},cutSceneChili:function(){cc.vv.AudioManager.playEff("games/WestCowboy/","music_ChilliFiesta_respinChangeScene",!0);var e=cc.find("ChilliFiesta_guochang",this.node.parent);e.active=!0;var t=e.getComponent(sp.Skeleton);t.setAnimation(0,"skill",!1),t.setCompleteListener(function(){t.setCompleteListener(null),e.active=!1})},OnSpinEnd:function(){var e=this;return c(regeneratorRuntime.mark(function t(){var n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(cc.vv.gameData.GetTotalFree()>0&&cc.vv.gameData.GetTotalFree()!==cc.vv.gameData.GetFreeTime())){t.next=3;break}return t.next=3,e.showFreeRate();case 3:e.ShowWinTrace(),n=cc.vv.gameData.GetGameWin(),a=cc.vv.gameData.GetGameWin(),cc.vv.gameData.GetTotalFree()>0&&cc.vv.gameData.GetTotalFree()!==cc.vv.gameData.GetFreeTime()&&(a=cc.vv.gameData.GetGameTotalFreeWin()),e.ShowBottomWin(n,a,!0,c(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e._gameInfo.bonusGame?e.triggerBonusGame():e.CheckEnterFreeGame()?e.triggerFreeGame():e.CheckExtraFreeGame()?e.triggerExtraFreeGame():e.CheckExitFreeGame()?e.triggerExitFreeGame():e.CanDoNextRound();case 1:case"end":return t.stop()}},t)})));case 8:case"end":return t.stop()}},t)}))()},CheckExtraFreeGame:function(){return!!(this._gameInfo.freeResult&&this._gameInfo.freeResult.freeInfo&&this._gameInfo.freeResult.freeInfo.freeCnt>0)},triggerBonusGame:function(){var e=this;return c(regeneratorRuntime.mark(function t(){var n,a,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(cc.vv.AudioManager.playEff("games/WestCowboy/","music_ChilliFiesta_respinTrigger",!0),(n=cc.find("ChilliFiesta_logo",e.node.parent)).getComponent(sp.Skeleton).setAnimation(0,"skill",!1),n.getComponent(sp.Skeleton).addAnimation(0,"idle",!0),a=0;a<e._gameInfo.bonusIdxs.length;a++)(o=e.GetSymbolByIdx(e._gameInfo.bonusIdxs[a]))&&o.playBonusTriggerAnimation();return t.next=7,cc.vv.gameData.awaitTime(4);case 7:return e.cutSceneChili(),t.next=10,cc.vv.gameData.awaitTime(1);case 10:return t.next=12,cc.vv.gameData.getBonusGameMgr().showBonusGame(e._gameInfo.bonusGame);case 12:return e.cutSceneChili(),t.next=15,cc.vv.gameData.awaitTime(1);case 15:return cc.vv.gameData.getBonusGameMgr()._mainNode.active=!1,t.next=18,cc.vv.gameData.awaitTime(1);case 18:e.ShowBottomWin(cc.vv.gameData.getBonusGameMgr().getWinCoin(),cc.vv.gameData.getBonusGameMgr().getWinCoin(),!0,function(){e.CanDoNextRound()});case 19:case"end":return t.stop()}},t)}))()},triggerExtraFreeGame:function(){var e=this;return c(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(e._bottomScript.ShowBtnsByState("moveing_1"),cc.vv.AudioManager.playEff("games/WestCowboy/","music_ChilliFiesta_scatterTrigger",!0),n=0;n<e._gameInfo.resultCards.length;n++)e._gameInfo.resultCards[n]===e._cfg.scatterId&&e.GetSymbolByIdx(n+1).playWinAnimation();return t.next=5,cc.vv.gameData.awaitTime(2);case 5:return t.next=7,e.popExtraFreeDialog();case 7:return t.next=9,cc.vv.gameData.awaitTime(1);case 9:e.CanDoNextRound();case 10:case"end":return t.stop()}},t)}))()},popExtraFreeDialog:function(){var e=this;return c(regeneratorRuntime.mark(function t(){var n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return cc.vv.AudioManager.playEff("games/WestCowboy/","music_ChilliFiesta_freespinmore",!0),(n=cc.find("free_dialog",e.node.parent)).active=!0,(a=cc.find("extra_node",n)).active=!0,cc.find("bg/times",a).getComponent(cc.Label).string=e._gameInfo.freeResult.freeInfo.freeCnt,t.next=8,cc.vv.gameData.awaitTime(2);case 8:a.active=!1,n.active=!1;case 10:case"end":return t.stop()}},t)}))()},showFreeRate:function(){var e=this;return c(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){if(e._gameInfo.extraFreeInfo&&e._gameInfo.extraFreeInfo.currMult){cc.find("rate_tips/rate",e.node).getComponent(cc.Label).string="X"+e._gameInfo.extraFreeInfo.currMult,cc.vv.AudioManager.playEff("games/WestCowboy/","music_ChilliFiesta_wildFire",!0);var n=cc.find("rate_tips/baodian",e.node);n.active=!0,n.getComponent(cc.Animation).play("firebaodian"),n.getComponent(cc.Animation).on("stop",function(){t(),n.active=!1})}else t()}));case 1:case"end":return t.stop()}},t)}))()},ShowGameview:function(e){this._super(e);for(var t=0;t<5;t++){cc.find("reels_bg/reel_bg"+(t+1)+"/free",this.node).active=e}cc.find("free_tips",this.node).active=e,cc.find("rate_tips",this.node).active=e},triggerFreeGame:function(){var e=this;return c(regeneratorRuntime.mark(function t(){var n,a,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(e._bottomScript.ShowBtnsByState("moveing_1"),cc.vv.AudioManager.playEff("games/WestCowboy/","music_ChilliFiesta_scatterTrigger",!0),(n=cc.find("ChilliFiesta_logo",e.node.parent)).getComponent(sp.Skeleton).setAnimation(0,"skill",!1),n.getComponent(sp.Skeleton).addAnimation(0,"idle",!0),a=0;a<e._gameInfo.resultCards.length;a++)e._gameInfo.resultCards[a]===e._cfg.scatterId&&(o=e.GetSymbolByIdx(a+1))&&o.playWinAnimation();return t.next=8,cc.vv.gameData.awaitTime(2);case 8:return t.next=10,e.popFreeDialog(e._gameInfo.extraFreeInfo);case 10:return e.cutSceneChili(),t.next=13,cc.vv.gameData.awaitTime(1);case 13:return cc.find("free_dialog/common_enter_node",e.node.parent).active=!1,cc.find("free_dialog",e.node.parent).active=!1,e.ShowGameview(!0),t.next=18,cc.vv.gameData.awaitTime(2);case 18:Global.SlotsSoundMgr.stopBgm(),Global.SlotsSoundMgr.playBgm("music_ChilliFiesta_freeSpinBgSound"),e.CanDoNextRound();case 21:case"end":return t.stop()}},t)}))()},triggerExitFreeGame:function(){var e=this;return c(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._bottomScript.ShowBtnsByState("moveing_1"),t.next=3,cc.vv.gameData.awaitTime(1);case 3:return t.next=5,e.popFreeResultDialog();case 5:return e.cutSceneChili(),t.next=8,cc.vv.gameData.awaitTime(1);case 8:return e.ShowGameview(!1),t.next=11,cc.vv.gameData.awaitTime(1);case 11:e.ShowBottomWin(cc.vv.gameData.GetGameTotalFreeWin(),cc.vv.gameData.GetGameTotalFreeWin(),!0,function(){Global.SlotsSoundMgr.stopBgm(),Global.SlotsSoundMgr.playNormalBgm(),e.CanDoNextRound()});case 12:case"end":return t.stop()}},t)}))()},popFreeDialog:function(e){var t=this;return new Promise(function(){var n=c(regeneratorRuntime.mark(function n(o){var i,r,s,u,l;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:for(t._enterFreeCallback=o,cc.vv.AudioManager.playEff("games/WestCowboy/","music_ChilliFiesta_freespin_choose",!0),(i=cc.find("free_dialog",t.node.parent)).active=!0,(r=cc.find("common_enter_node",i)).active=!0,(s=cc.find("logo",r)).scale=0,cc.tween(s).to(.5,{scale:1},{easing:"backOut"}).start(),u=function(n){var o=cc.find("node_"+(n+1),r);o.scale=0,o.color=cc.Color.WHITE;var i,s=a(o.children);try{for(s.s();!(i=s.n()).done;){i.value.color=cc.Color.WHITE}}catch(e){s.e(e)}finally{s.f()}cc.find("times",o).getComponent(cc.Label).string=e.options[n].freeCnt;for(var u=0;u<3;u++)cc.find("rate_"+(u+1),o).getComponent(cc.Label).string="X"+e.options[n].mults[u];cc.tween(o).delay(.5+.5*n).to(.5,{scale:1},{easing:"backOut"}).delay(1-.5*n).repeatForever(cc.tween().to(1,{scale:1.1}).to(1,{scale:1})).start(),o.on(cc.Node.EventType.TOUCH_END,c(regeneratorRuntime.mark(function e(){var i,c,s,u,l,m;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o.off(cc.Node.EventType.TOUCH_END),r.stopAllActions(),cc.vv.AudioManager.playEff("games/WestCowboy/","music_ChilliFiesta_freespin_chooseTimes",!0),i={rtype:1,choiceId:n+1},e.next=6,cc.vv.gameData.reqSubGame(i);case 6:if(200!==(c=e.sent).code||1!==c.data.rtype){e.next=19;break}for(s=0;s<3;s++)if((u=cc.find("free_dialog/common_enter_node/node_"+(s+1),t.node.parent)).scale=1,u.stopAllActions(),s===c.data.choiceId-1)u.scale=1.2;else{u.color=cc.Color.GRAY,l=a(u.children);try{for(l.s();!(m=l.n()).done;)m.value.color=cc.Color.GRAY}catch(e){l.e(e)}finally{l.f()}}return cc.vv.gameData.SetTotalFree(c.data.extraFreeInfo.choiceInfo.freeCnt),cc.vv.gameData.SetFreeTime(c.data.extraFreeInfo.choiceInfo.freeCnt),cc.find("free_tips",t.node).active=!0,cc.find("free_tips/curTimes",t.node).getComponent(cc.Label).string="0",cc.find("free_tips/allTimes",t.node).getComponent(cc.Label).string=c.data.extraFreeInfo.choiceInfo.freeCnt,cc.find("rate_tips",t.node).active=!0,cc.find("rate_tips/rate",t.node).getComponent(cc.Label).string="",e.next=18,cc.vv.gameData.awaitTime(1);case 18:t._enterFreeCallback&&(t._enterFreeCallback(),t._enterFreeCallback=null);case 19:case"end":return e.stop()}},e)})))},l=0;l<3;l++)u(l);return n.next=13,cc.vv.gameData.awaitTime(2);case 13:cc.vv.gameData.isNeedAutoPlay()&&cc.tween(r).delay(cc.vv.gameData.getManualAutoPlayTime()).call(c(regeneratorRuntime.mark(function e(){var n,o,i,r,c,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return cc.vv.AudioManager.playEff("games/WestCowboy/","music_ChilliFiesta_freespin_chooseTimes",!0),n={rtype:1,choiceId:1},e.next=4,cc.vv.gameData.reqSubGame(n);case 4:if(200!==(o=e.sent).code||1!==o.data.rtype){e.next=17;break}for(i=0;i<3;i++)if((r=cc.find("free_dialog/common_enter_node/node_"+(i+1),t.node.parent)).scale=1,r.stopAllActions(),i===o.data.choiceId-1)r.scale=1.2;else{r.color=cc.Color.GRAY,c=a(r.children);try{for(c.s();!(s=c.n()).done;)s.value.color=cc.Color.GRAY}catch(e){c.e(e)}finally{c.f()}}return cc.vv.gameData.SetTotalFree(o.data.extraFreeInfo.choiceInfo.freeCnt),cc.vv.gameData.SetFreeTime(o.data.extraFreeInfo.choiceInfo.freeCnt),cc.find("free_tips",t.node).active=!0,cc.find("free_tips/curTimes",t.node).getComponent(cc.Label).string="0",cc.find("free_tips/allTimes",t.node).getComponent(cc.Label).string=o.data.extraFreeInfo.choiceInfo.freeCnt,cc.find("rate_tips",t.node).active=!0,cc.find("rate_tips/rate",t.node).getComponent(cc.Label).string="",e.next=16,cc.vv.gameData.awaitTime(1);case 16:t._enterFreeCallback&&(t._enterFreeCallback(),t._enterFreeCallback=null);case 17:case"end":return e.stop()}},e)}))).start();case 14:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}())},popFreeResultDialog:function(){var e=this;return new Promise(function(){var t=c(regeneratorRuntime.mark(function t(n){var a,o,i,r,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:cc.vv.AudioManager.playEff("games/WestCowboy/","music_ChilliFiesta_freespinOver",!0),(a=cc.find("free_dialog",e.node.parent)).active=!0,(o=cc.find("result_node",a)).active=!0,(i=cc.find("bg",o)).scale=0,cc.tween(i).to(.5,{scale:1},{easing:"backOut"}).start(),cc.find("coin",i).getComponent(cc.Label).string=Global.formatMoney(cc.vv.gameData.GetGameTotalFreeWin()),cc.find("times",i).getComponent(cc.Label).string=cc.vv.gameData.GetTotalFree(),r=cc.find("btn_collect",i),cc.vv.AudioManager.playEff("games/WestCowboy/","music_ChilliFiesta_collect",!0),r.off("click"),s=function(){var e=c(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r.off("click"),cc.tween(i).to(.5,{scale:0},{easing:"backIn"}).call(function(){o.active=!1,a.active=!1,n()}).start();case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),cc.vv.gameData.checkAutoPlay(r,s),r.on("click",c(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.stopAllActions(),e.next=3,s();case 3:case"end":return e.stop()}},e)})));case 18:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())}}),cc._RF.pop()},{LMSlots_Slots_Base:void 0}],WestCowboy_Symbol:[function(e,t,n){"use strict";cc._RF.push(t,"20931h4UOFAm6B7xz47Wubb","WestCowboy_Symbol"),cc.Class({extends:e("LMSlots_Symbol_Base"),properties:{},Init:function(e,t){this._super(e,t)},initSymbolType:function(e){this._bonusType=e},StartMove:function(){this._super();var e=cc.find("symbol_3/lajiao",this.node);e&&(e.angle=0,e.stopAllActions())},ShowRandomSymbol:function(){this._super(),this.showCoin()},ShowById:function(e,t){this._super(e,t),this.showCoin()},playBonusStopAnimation:function(){this._id===cc.vv.gameData.getGameCfg().bonusId&&this._showNode&&cc.tween(this._showNode).repeatForever(cc.tween().to(.5,{scale:1.1}).to(.5,{scale:1})).start()},playBonusTriggerAnimation:function(){if(this._id===cc.vv.gameData.getGameCfg().bonusId&&this._showNode){this._showNode.scale=1,this._showNode.stopAllActions(),this._showNode.getComponent(cc.Animation).play("bonus_red_chufa");var e=cc.find("lajiao",this._showNode);e&&cc.tween(e).repeatForever(cc.tween().by(3,{angle:-720},{easing:"backInOut"})).start()}},playBonusGenerateAnimation:function(){if(this._id===cc.vv.gameData.getGameCfg().bonusId&&this._showNode){var e=cc.find("coin",this.node),t=cc.find("jackpot",this.node),n=e;e&&t&&this._data&&(this._data.coin>0?n=e:this._data.jackpot&&(n=t)),n.scale=0,cc.tween(n).to(.5,{scale:1},{easing:"backOut"}).start(),cc.tween(this._showNode).delay(.5).repeatForever(cc.tween().to(.5,{scale:1.1}).to(.5,{scale:1})).start()}},showCoin:function(){var e=cc.find("coin",this.node),t=cc.find("jackpot",this.node);if(e&&t&&this._id===cc.vv.gameData.getGameCfg().bonusId)if(this._data){if(this._data.coin>0)e.active=!0,e.getComponent(cc.Label).string=Global.formatNumShort(this._data.coin,0);else if(this._data.jackpot){t.active=!0;var n=cc.vv.gameData.GetAtlasByName("ChilliFiesta2");t.getComponent(cc.Sprite).spriteFrame=n.getSpriteFrame("ChilliFiesta-Common-ChiliFiesta_tanban_"+["mini","minor","major","grand"][this._data.jackpot.id-1])}else if(this._data.baseCoin){e.active=!1,t.active=!1;var a=cc.vv.gameData.GetAtlasByName("ChilliFiesta3");cc.find("lajiao",this._showNode).getComponent(cc.Sprite).spriteFrame=a.getSpriteFrame("Symbol-ChilliFiesta_lajiao_gold")}}else{e.active=!0;var o=[.25,.5,.75,1,2,5,10],i=cc.vv.gameData.GetTotalBet()*o[Math.floor(Math.random()*o.length)];e.getComponent(cc.Label).string=Global.formatNumShort(i,0)}else e.active=!1,t.active=!1},playBonusCoinAnimation:function(e){if(this._id===cc.vv.gameData.getGameCfg().bonusId&&this._showNode){var t=cc.find("coin",this.node);t.active=!0,t.getComponent(cc.Label).string=Global.formatNumShort(e,0),t.scale=0,cc.tween(t).to(.5,{scale:1},{easing:"backOut"}).start()}}}),cc._RF.pop()},{LMSlots_Symbol_Base:void 0}]},{},["WestCowboy_BonusGameMgr","WestCowboy_BonusReel","WestCowboy_BonusSlots","WestCowboy_Cfg","WestCowboy_GameData","WestCowboy_Logic","WestCowboy_Reel","WestCowboy_Slots","WestCowboy_Symbol"]);
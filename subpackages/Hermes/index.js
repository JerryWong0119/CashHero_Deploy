window.__require=function e(t,n,a){function o(c,r){if(!n[c]){if(!t[c]){var s=c.split("/");if(s=s[s.length-1],!t[s]){var l="function"==typeof __require&&__require;if(!r&&l)return l(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+c+"'")}c=s}var f=n[c]={exports:{}};t[c][0].call(f.exports,function(e){return o(t[c][1][e]||e)},f,f.exports,e,t,n,a)}return n[c].exports}for(var i="function"==typeof __require&&__require,c=0;c<a.length;c++)o(a[c]);return o}({Hermes_BonusReel:[function(e,t,n){"use strict";function a(e,t,n,a,o,i,c){try{var r=e[i](c),s=r.value}catch(e){return void n(e)}r.done?t(s):Promise.resolve(s).then(a,o)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(o,i){var c=e.apply(t,n);function r(e){a(c,o,i,r,s,"next",e)}function s(e){a(c,o,i,r,s,"throw",e)}r(void 0)})}}function i(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=c(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o,i=!0,r=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return i=e.done,e},e:function(e){r=!0,o=e},f:function(){try{i||null==a.return||a.return()}finally{if(r)throw o}}}}function c(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}cc._RF.push(t,"c4ab2eJBkxAFahfof1T57z3","Hermes_BonusReel"),cc.Class({extends:cc.Component,properties:{_reelIdx:null,_coin:0,_count:0,_symbols:[],_col:5,_row:8,_items:null,_idxs:null,_restCnt:null,_yellowKuang:null},Init:function(e){this._reelIdx=e,this._count=[4,4,6,6,8][e],this._coin=0},GetReelIdx:function(){return this._reelIdx},SetBonusReel:function(e,t,n,a,o){this._idxs=e,this._items=t,this._restCnt=n,this._fullCnt=a;var c=cc.vv.gameData,r=cc.find("mask/holder",this.node);c.GetFreeGameTimes()&&1==c.GetFreeGameTimes().status||this.showSmallWing();for(var s=0;s<this._count;s++){var l=cc.find("bonus_Symbol"+s,r);l.check=!1,l.active=!1}var f,u=0,m=!1,d=i(e);try{for(d.s();!(f=d.n()).done;){var v=f.value,h=(this._col,this._row-Math.floor((v-1)/this._col)-1),p=cc.find("bonus_Symbol"+h,r);p.check||o||(m=!0),p.active=!0,p.check=!0;var g,_=i(p.children);try{for(_.s();!(g=_.n()).done;){var S=g.value;S.check=!1,S.active=!1}}catch(e){_.e(e)}finally{_.f()}var b=t[u];u++,b.coin?(cc.find("s3/lab",p).getComponent(cc.Label).string=Global.formatNumShort(b.coin,0),cc.find("s3",p).active=!0):1==b.jackpotId?cc.find("s301",p).active=!0:2==b.jackpotId?cc.find("s302",p).active=!0:3==b.jackpotId?cc.find("s303",p).active=!0:4==b.jackpotId&&(cc.find("s304",p).active=!0)}}catch(e){d.e(e)}finally{d.f()}m&&Global.SlotsSoundMgr.playEffect("bonus_notify"),this.showKuang()},showKuang:function(){var e=this._idxs,t=this;if(this._fullCnt-1===e.length){if(!cc.find("mask/spine_blue",this.node).active){var n=["animation4_","animation4_","animation6_","animation6_","animation8_"],a=cc.find("mask/spine_blue",this.node).getComponent(sp.Skeleton);return cc.find("mask/spine_blue",this.node).active=!0,a.setAnimation(0,n[this._reelIdx]+1,!1),void a.setCompleteListener(function(e){a.setAnimation(0,n[t._reelIdx]+2,!1)})}}else cc.find("mask/spine_blue",this.node).active=!1;var o,c=[],r=i(e);try{for(r.s();!(o=r.n()).done;){var s=o.value,l=(this._col,this._row-Math.floor((s-1)/this._col)-1);c.push(l)}}catch(e){r.e(e)}finally{r.f()}c.sort()},StartMove:function(){var e=this._idxs;if(this._restCnt>=0&&e&&this._fullCnt-1===e.length){var t,n=[{index:0,check:!1,y:46.5},{index:1,check:!1,y:139.5},{index:2,check:!1,y:232.5},{index:3,check:!1,y:325.5},{index:4,check:!1,y:418.5},{index:5,check:!1,y:511.5},{index:6,check:!1,y:604.5},{index:7,check:!1,y:697.5}],a={},o=i(e);try{for(o.s();!(t=o.n()).done;){var c=t.value;this._col;n[this._row-Math.floor((c-1)/this._col)-1].check=!0}}catch(e){o.e(e)}finally{o.f()}for(var r=0,s=n;r<s.length;r++){var l=s[r];if(0==l.check){a=l;break}}cc.find("mask/spine_one_blue",this.node).active=!0,cc.find("mask/spine_one_blue",this.node).getComponent(sp.Skeleton).setAnimation(0,"animation",!0),cc.find("mask/spine_one_blue",this.node).y=a.y}else cc.find("mask/spine_one_blue",this.node).active=!1,cc.find("mask/spine_blue",this.node).active=!1},OnSpinEnd:function(){cc.find("mask/spine_one_blue",this.node).active=!1,this._restCnt<=0&&(cc.find("mask/spine_blue",this.node).active=!1)},collectWing:function(e){var t=this;return o(regeneratorRuntime.mark(function n(){var a,o,i,c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(a=t,o=cc.vv.gameData.GetSlotsNode(),i=cc.find("mask/holder",t.node),c="reels_frame/lint_bottom/down/coin"+(t._reelIdx+1)+"/lab",t._coin=0,cc.find(c,o).getComponent(cc.Label).string=t._coin,!(e.length>0)){n.next=10;break}return n.delegateYield(regeneratorRuntime.mark(function n(){var c,r,s,l,f,u;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return c=["animation4_","animation4_","animation6_","animation6_","animation8_"],r=cc.find("mask/spine_purple",t.node).getComponent(sp.Skeleton),cc.find("mask/spine_purple",t.node).active=!0,cc.find("mask/spine_blue",t.node).active=!1,cc.find("mask/spine_one_blue",t.node).active=!1,r.setAnimation(0,c[t._reelIdx]+1,!1),r.setCompleteListener(function(e){r.setAnimation(0,c[a._reelIdx]+2,!1)}),Global.SlotsSoundMgr.playEffect("appear"),n.next=10,t.awaitTime(2);case 10:for(u in s=[],l=0,f=function(n){var a=e[n],c=(a.idx-1)%t._col,r=t._row-Math.floor((a.idx-1)/t._col)-1,f=cc.find("bonus_Symbol"+r,i);f.active=!0,s.push(f.y);var u="reels_frame/lint_bottom/down/coin"+(c+1),m="reels_frame/lint_bottom/down/item"+(c+1),d=cc.find(u,o),v=cc.find(m,o),h=cc.find("lab",d);d.active=!0;var p=n;cc.tween(f).by(.2,{y:10}).delay(1*p+l).call(function(){Global.SlotsSoundMgr.playEffect("jubaopen")}).to(.6,{y:-76}).call(function(){f.y=s[p],a.item.jackpotValue&&(t._coin+=a.item.jackpotValue),a.item.coin&&(t._coin+=a.item.coin),h.getComponent(cc.Label).string=Global.formatNumShort(t._coin,0),cc.find("spineShan",v).active=!0,cc.find("spineShan",v).getComponent(sp.Skeleton).setAnimation(0,"animation",!1),f.active=!1,a.item.jackpotId&&cc.vv.gameData.GetSlotsScript().showJpDialog(a.item.jackpotId),p==e.length-1&&cc.tween(o).delay(.8).call(function(){cc.find("spineShan",v).active=!1,cc.find("mask/spine_purple",t.node).active=!1}).start()}).start(),a.item.jackpotValue&&(l+=4)},e)f(u);return n.next=16,t.awaitTime(1.2*e.length+2+l);case 16:case"end":return n.stop()}},n)})(),"t0",8);case 8:n.next=11;break;case 10:cc.find("mask/spine_purple",t.node).active=!1;case 11:case"end":return n.stop()}},n)}))()},showSmallWing:function(e){var t=cc.vv.gameData.GetSlotsNode(),n=cc.find("mask/holder",this.node),a=cc.find("reels_frame/lint_bottom/down/item"+(this._reelIdx+1),t),o=cc.find("mask/upBg",a);if(this._restCnt<=0){cc.tween(o).to(.2,{y:45}).start();var c,r=i(n.children);try{for(r.s();!(c=r.n()).done;){c.value.active=!1}}catch(e){r.e(e)}finally{r.f()}}else cc.tween(o).to(.2,{y:0}).start();if(1===e&&(this._restCnt-=1),this._idxs.length>0)for(var s=[cc.find("wing1",o),cc.find("wing2",o),cc.find("wing3",o)],l=0;l<3;l++)s[l].active=l<this._restCnt},hideSuspendWing:function(){for(var e=0;e<this._count;e++)cc.find("mask/holder/bonus_Symbol"+e,this.node).active=!1},hideAllKuang:function(){cc.find("mask/spine_purple",this.node).active=!1,cc.find("mask/spine_blue",this.node).active=!1,cc.find("mask/spine_one_blue",this.node).active=!1},awaitTime:function(e){var t=this;return new Promise(function(n,a){t.scheduleOnce(function(){n()},e)})}}),cc._RF.pop()},{}],Hermes_ButtonSafe:[function(e,t,n){"use strict";cc._RF.push(t,"de248MFvuhBSZFqTNV8WpNh","Hermes_ButtonSafe"),cc.Class({extends:cc.Component,properties:{safeTime:{default:.5,tooltip:"\u6309\u94ae\u4fdd\u62a4\u65f6\u95f4\uff0c\u6307\u5b9a\u95f4\u9694\u5185\u53ea\u80fd\u70b9\u51fb\u4e00\u6b21."}},onLoad:function(){var e=this.getComponent(cc.Button);e&&(this.clickEvents=e.clickEvents,Global.btnClickEvent(this.node,function(e){e.interactable=!1,cc.vv.gameData.GetSlotsScript().scheduleOnce(function(){e.interactable=!0},this.safeTime)},this))}}),cc._RF.pop()},{}],Hermes_Cfg:[function(e,t,n){"use strict";var a;function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}cc._RF.push(t,"77758KqbQ1Ly7WWklfrYxhA","Hermes_Cfg");var i={symbol:(a={},o(a,1,{node:"s1",win_node:"w1",win_ani:{name:"animation",zIndex:100},isMask:!0}),o(a,2,{node:"s2",win_node:"w2",stop_ani:{name:"animation1",zIndex:100},trigger_ani:{name:"animation2",zIndex:100},isMask:!0}),o(a,3,{node:"s3",win_node:"w3",isMask:!1}),o(a,301,{node:"s301",win_node:"w2",win_ani:{name:"animation1",zIndex:100},isMask:!0}),o(a,302,{node:"s302",win_node:"w2",win_ani:{name:"animation2",zIndex:100},isMask:!0}),o(a,303,{node:"s303",win_node:"w2",win_ani:{name:"animation3",zIndex:100},isMask:!0}),o(a,304,{node:"s304",win_node:"w2",win_ani:{name:"animation4",zIndex:100},isMask:!0}),o(a,4,{node:"s4",win_node:"w4",win_ani:{name:"animation",zIndex:100},isMask:!0}),o(a,5,{node:"s5",win_node:"w5",win_ani:{name:"animation",zIndex:100},isMask:!0}),o(a,6,{node:"s6",win_node:"w6",win_ani:{name:"animation",zIndex:100},isMask:!0}),o(a,7,{node:"s7",win_node:"w7",win_ani:{name:"animation",zIndex:100},isMask:!0}),o(a,8,{node:"s8",win_node:"w8",win_ani:{name:"animation",zIndex:100},isMask:!0}),o(a,9,{node:"s9",win_node:"w9",win_ani:{name:"animation",zIndex:100},isMask:!0}),o(a,10,{node:"s10",win_node:"w10",win_ani:{name:"animation",zIndex:100},isMask:!0}),o(a,20,{node:"s20",win_node:"w10",isMask:!0}),a),scripts:{Top:"LMSlots_Top_Base",Bottom:"LMSlots_Bottom_Base",Slots:"Hermes_Slots",Reels:"Hermes_Reel",Symbols:"Hermes_Symbol"},col:5,row:8,symbolPrefab:"LMSlots_Symbol",symbolSize:{height:93},randomSymbols:[7,8,9,10,4,5,6],kuang:"kuang",autoModelDelay:.5,speed:3e3,reelStopInter:.2,bonusReelStopInter:.2,auto_stop_time:1,bounceInfo:{distance:30,time:.1},helpItems:["games/Hermes/prefab/help_node/page1","games/Hermes/prefab/help_node/page2","games/Hermes/prefab/help_node/page3","games/Hermes/prefab/help_node/page4","games/Hermes/prefab/help_node/page5"],reelStateInfo:[{id:[2],mini:3,counts:[1,1,1,1,1],antiNode:"spine_yellow_scatter",path:"games/Hermes/",reelStopSound:"reel_stop",symbolStopSound:"scatter_notify",antSound:"anticipation",antSpeed:2e3}],normalBgm:"base_bgm",commEffect:{path:"games/Hermes/",win1:["win1","win1end"],win2:["win2","win2end"]}};t.exports=i,cc._RF.pop()},{}],Hermes_FreeGame:[function(e,t,n){"use strict";cc._RF.push(t,"c1b4eiS8M1LK7oZSoiv7PHy","Hermes_FreeGame"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){}}),cc._RF.pop()},{}],Hermes_GameData:[function(e,t,n){"use strict";cc._RF.push(t,"b8609NtQ2dDZb40ERhO8gQu","Hermes_GameData"),cc.Class({extends:e("LMSlots_GameData_Base"),properties:{_poolList:[],_freeType:0,_storeEntranceStatus:!1,_goldIngotInfos:[]},init:function(e,t,n){this._super(e,t,n),this._collect=this._deskInfo.collect,this._deskInfo.coinBonus&&(this._poolList=this._deskInfo.coinBonus.poolList),this._deskInfo.freeGameData&&(this._freeType=this._deskInfo.freeGameData.freeType),this._deskInfo.goldIngotInfoInFree&&(this.goldIngotInfoInFree=this._deskInfo.goldIngotInfoInFree),this.SetJadeStore(this._deskInfo.jadeStore),this.SetGoldIngotInfos(this._deskInfo.goldIngotInfos)},onLoad:function(){},OnRcvNetSpine:function(e){200==e.code&&(this._deskInfo.user.coin=e.coin,this._gameInfo=e,this._deskInfo.restFreeCount=e.freeCnt,this._deskInfo.allFreeCount=e.allFreeCnt,this._deskInfo.coinBonus=e.coinBonus,this._needBet=this._deskInfo.needBet,this.SetJadeStore(this._deskInfo.jadeStore),e.goldIngotInfoInFree&&(this.goldIngotInfoInFree=e.goldIngotInfoInFree)),this._super(e)},SetSlotsNode:function(e){this._slotsNode=e},GetSlotsNode:function(e){return this._slotsNode},SetStoreScript:function(e){this._collectScp=e},GetStoreScript:function(){return this._collectScp},SetPopScript:function(e){this._popupScp=e},GetPopScript:function(){return this._popupScp},SetWheelScript:function(e){this._wheelScp=e},GetWheelScript:function(){return this._wheelScp},SetGoldIngotInfoInFree:function(e){this.goldIngotInfoInFree=e},GetGoldIngotInfoInFree:function(){return this.goldIngotInfoInFree},SetGoldIngotInfos:function(e){this._goldIngotInfos=e},GetGoldIngotInfos:function(){return this._goldIngotInfos},SetGoldIngotInfo:function(e,t){this._goldIngotInfos[t]=JSON.parse(JSON.stringify(e))},GetOpenStoreBet:function(){var e=this._deskInfo.needBet||1;return this._deskInfo.mults[e-1]},GetJadeStore:function(){return this._jadeStore},SetJadeStore:function(e){this._jadeStore=e},SetStoreEntranceStatus:function(e){this._storeEntranceStatus=e},GetStoreEntranceStatus:function(){return this._storeEntranceStatus},SetFreeGameTimes:function(e){this._freeGameTimes=e},GetFreeGameTimes:function(){return this._freeGameTimes}}),cc._RF.pop()},{LMSlots_GameData_Base:void 0}],Hermes_Logic:[function(e,t,n){"use strict";cc._RF.push(t,"716ffklhZRDdIZdhQXpncxX","Hermes_Logic"),cc.Class({extends:e("LMSlots_Logic_Base"),properties:{},InitCommComponent:function(){this._super(),cc.vv.gameData.SetSlotsNode(cc.vv.gameData.GetSlotsScript().node);var e=cc.find("safe_node/node_store",this.node).addComponent("Hermes_Store");e.Init(),cc.vv.gameData.SetStoreScript(e);var t=cc.find("safe_node/freeGame/zhuanPanNode",this.node).addComponent("Hermes_Wheel");t.Init(),cc.vv.gameData.SetWheelScript(t)}}),cc._RF.pop()},{LMSlots_Logic_Base:void 0}],Hermes_Pop:[function(e,t,n){"use strict";cc._RF.push(t,"8c725FUpWBIDL7K1Wou4aK3","Hermes_Pop"),cc._RF.pop()},{}],Hermes_Reel:[function(e,t,n){"use strict";cc._RF.push(t,"b21b0+lJn5D67XVbUSHlwzZ","Hermes_Reel"),cc.Class({extends:e("LMSlots_Reel_Base"),properties:{}}),cc._RF.pop()},{LMSlots_Reel_Base:void 0}],Hermes_Slots:[function(e,t,n){"use strict";function a(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=o(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,c=!0,r=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return c=e.done,e},e:function(e){r=!0,i=e},f:function(){try{c||null==a.return||a.return()}finally{if(r)throw i}}}}function o(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function c(e,t,n,a,o,i,c){try{var r=e[i](c),s=r.value}catch(e){return void n(e)}r.done?t(s):Promise.resolve(s).then(a,o)}function r(e){return function(){var t=this,n=arguments;return new Promise(function(a,o){var i=e.apply(t,n);function r(e){c(i,a,o,r,s,"next",e)}function s(e){c(i,a,o,r,s,"throw",e)}r(void 0)})}}cc._RF.push(t,"16824ZBOWtDLZY3XFDGds9s","Hermes_Slots");e("./Hermes_BonusReel");cc.Class({extends:e("LMSlots_Slots_Base"),properties:{_curTimes:0,_bonusReels:[],_superWildList:[],_reelGoldIngotInfos:[]},onLoad:function(){this._super(),this._entranceBtn=cc.find("btn_collect",this.node),Global.btnClickEvent(this._entranceBtn,function(){Global.SlotsSoundMgr.playEffect("btn_click"),this.onBtnStore()},this);for(var e=1;e<=5;e++){var t=cc.find("super_wild_reel/reel"+e,this.node);this._bonusReels[e-1]=t.addComponent("Hermes_BonusReel"),this._bonusReels[e-1].Init(e-1)}},RegisterEvent:function(){this._super(),Global.registerEvent(cc.vv.gameData._EventId.SLOT_TOTALBET_UPDATED,this.onEventTotalbetUpdated,this)},ReconnectShow:function(){var e=this;return r(regeneratorRuntime.mark(function t(){var n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=cc.vv.gameData,a=n._deskInfo,n.SetJadeStore(a.jadeStore),e.refreshIngotUi(n._jadeStore.jadeCnt),cc.vv.gameData.GetTotalFree()>0?(2==a.jadeStore.state?cc.vv.gameData.SetFreeGameTimes({status:!0,times:cc.vv.gameData.GetFreeTime(),type:"pageReward",page:a.jadeStore.unlockPage}):cc.vv.gameData.SetFreeGameTimes({status:!0,times:cc.vv.gameData.GetFreeTime(),type:"normal"}),e.enterFreeGame()):(cc.vv.gameData.SetFreeGameTimes({status:!1}),e.ShowGameview(!1)),e.checkStoreEntrance(!0),e.CanDoNextRound();case 7:case"end":return t.stop()}},t)}))()},onEventTotalbetUpdated:function(){this.checkStoreEntrance(),this.changeWing()},StartMove:function(){var e=cc.vv.gameData;this._super(),this._entranceBtn.getComponent(cc.Button).interactable=!1,Global.SlotsSoundMgr.playNormalBgm(),e.GetFreeGameTimes().status||this.reduceSmallWing(),this.hideAllSmallCoin();for(var t=1;t<=5;t++)this._bonusReels[t-1].StartMove()},onMsgSpine:function(e){this._gameInfo=e,this.sortCollectWing();var t=e.resultCards;this.SetSlotsResult(t),this.SetReelStateInfo(t)},SetSlotsResult:function(e){var t=this._gameInfo.jadeInfo,n=this._gameInfo.currGoldIngotInfo,o=this._gameInfo.goldIngotInfo;cc.vv.gameData.GetFreeGameTimes().status&&(o=this._gameInfo.goldIngotInfoInFree);for(var i=e.length/this._col,c=[],r=0;r<e.length;r++){Math.floor(r/i);var s=r%this._col;if(this._cfg.symbol[e[r]]){var l={};if(l.sid=e[r],l.data={},t){var f=t.idxs.indexOf(r+1);f>=0&&(l.data.num=t.cnts[f],l.data.type=1)}if(n){var u=n.idxs.indexOf(r+1);u>=0&&(l.data.item=n.items[u],l.data.type=2)}var m,d=a(o);try{for(d.s();!(m=d.n()).done;){var v=m.value,h=v.idxs.indexOf(r+1);h>=0&&(l.data.item=v.items[h],l.data.type=2)}}catch(e){d.e(e)}finally{d.f()}c[s]||(c[s]=[]),c[s].unshift(l)}}for(var p=0;p<this._reels.length;p++){var g=this._reels[p],_=c[p];g.SetResult(_)}},ShowSymbolTopAni:function(e,t){if(this._topAniNode){var n=cc.vv.gameData.getGameCfg().scripts.Symbols,a=cc.find(cc.js.formatStr("top_symbol_%s_%s",e,t),this._topAniNode);if(a)return a.active=!0,a.getComponent(n);var o=this._reels[t].GetSymbolByRow(e);if(o){var i=o.node.convertToWorldSpaceAR(cc.v2(0)),c=cc.instantiate(o.node);return c.parent=this._topAniNode,c.name=cc.js.formatStr("top_symbol_%s_%s",e,t),c.position=this._topAniNode.convertToNodeSpaceAR(i),cc.find("ingot",c).removeFromParent(),c.getComponent(n)}}},OnSpinEnd:function(){this.onSpinEndAction();for(var e=1;e<=5;e++)this._bonusReels[e-1].OnSpinEnd()},onSpinEndAction:function(){var e=this;return r(regeneratorRuntime.mark(function t(){var n,a,o,i,c,r,s,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(n=cc.vv.gameData).SetJadeStore(e._gameInfo.jadeStore),e.collectJade(),a=cc.vv.gameData.GetBetIdx(),n.SetGoldIngotInfo(e._gameInfo.goldIngotInfo,a-1),t.next=7,e.showWing();case 7:return e.ShowWinTrace(),o=cc.vv.gameData.GetGameWin(),i=o,cc.vv.gameData.GetTotalFree()>0&&cc.vv.gameData.GetTotalFree()!=cc.vv.gameData.GetFreeTime()&&(i=cc.vv.gameData.GetGameTotalFreeWin()),t.next=13,new Promise(function(t,n){var a=!0;e._gameInfo.bonusGame&&(a=!1),e.ShowBottomWin(o,i,a,function(){t()})});case 13:if(c=e._gameInfo.freeCnt,r=e._gameInfo.allFreeCnt,!c||!r||r!=c){t.next=26;break}return Global.SlotsSoundMgr.playEffect("bell"),e._gameInfo.freeResult.freeInfo.scatterIdx.forEach(function(t){var n=e.GetSymbolByIdx(t);n&&n.playTriggerAnimation()}),t.next=21,cc.vv.gameData.awaitTime(1.5);case 21:return cc.vv.gameData.SetFreeGameTimes({status:!0,times:e._gameInfo.freeCnt,type:"normal"}),t.next=24,e.CheckEnterFreeGame(e._gameInfo.allFreeCnt);case 24:t.next=33;break;case 26:if(!r||0!=c){t.next=31;break}return t.next=29,e.CheckExitFreeGame(e._gameInfo.freeWinCoin);case 29:t.next=33;break;case 31:cc.vv.gameData.GetFreeGameTimes().status||e.showAllMask(!1),e.CanDoNextRound();case 33:s=cc.vv.gameData.GetFreeTime(),l=cc.vv.gameData.GetAutoModelTime(),0==s&&l<=0&&(e._entranceBtn.getComponent(cc.Button).interactable=!0);case 36:case"end":return t.stop()}},t)}))()},refreshIngotUi:function(e){cc.find("lab",this._entranceBtn).getComponent(cc.Label).string=Global.FormatNumToComma(e),cc.find("Canvas/safe_node/node_store/layout/money_bg/lbl_money").getComponent(cc.Label).string=Global.FormatNumToComma(e)},CheckEnterFreeGame:function(e){var t=this;return r(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise(function(){var n=r(regeneratorRuntime.mark(function n(a){var o,i,c,s,l,f,u;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(Global.SlotsSoundMgr.stopBgm(),o=t,"pageReward"!==(i=cc.vv.gameData).GetFreeGameTimes().type){n.next=7;break}return n.next=6,t.CheckEnterPageRewardFreeGame(t._gameInfo.allFreeCnt);case 6:return n.abrupt("return");case 7:return c=cc.find("Canvas/safe_node/freeGameBeginAniNode"),s=cc.find("freeGameSpine",c).getComponent(sp.Skeleton),(l=cc.find("freeGameSpine/startBtn",c)).scale=0,c.active=!0,f=1,"super"===i.GetFreeGameTimes().type?f=5:10==e?f=1:15==e?f=2:20==e&&(f=3),Global.SlotsSoundMgr.playEffect("free_dialog_start_show"),s.setAnimation(0,"animation"+f+"_1",!1),s.addAnimation(0,"animation"+f+"_2",!0),n.next=19,cc.vv.gameData.awaitTime(.5);case 19:return cc.tween(l).to(.5,{scale:1},{easing:"backOut"}).start(),n.next=22,cc.vv.gameData.awaitTime(.5);case 22:u=function(){var e=r(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Global.SlotsSoundMgr.playEffect("btn_click"),l.off("click"),s.setAnimation(0,"animation"+f+"_3",!1),cc.tween(l).to(.5,{scale:0},{easing:"backIn"}).start(),e.next=6,cc.vv.gameData.awaitTime(.8);case 6:return c.active=!1,o.playCutScreenAnim(),Global.SlotsSoundMgr.playEffect("fgtransition"),e.next=11,cc.vv.gameData.awaitTime(1.5);case 11:return o.enterFreeGame(),e.next=14,cc.vv.gameData.awaitTime(2);case 14:o.CanDoNextRound(),a();case 16:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),cc.vv.gameData.checkAutoPlay(l,u),l.off("click"),Global.btnClickEvent(l,function(){l.stopAllActions(),u()},t);case 26:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()));case 1:case"end":return n.stop()}},n)}))()},CheckEnterPageRewardFreeGame:function(e){var t=this;return r(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=r(regeneratorRuntime.mark(function e(n){var a,o,i,c,s,l,f,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t,o=cc.vv.gameData,i=cc.find("Canvas/safe_node/pageFreeGameAniNode"),c=cc.find("freeGameSpine",i).getComponent(sp.Skeleton),s=cc.find("freeGameSpine/startBtn",i),l=cc.find("freeGameSpine/collectBtn",i),cc.find("freeGameSpine/labNode",i).active=!1,s.active=!0,l.active=!1,s.scale=0,i.active=!0,f=o.GetFreeGameTimes().page,Global.SlotsSoundMgr.playEffect("superfree_dialog_start_show"),c.setAnimation(0,"animation"+f+"_1",!1),c.addAnimation(0,"animation"+f+"_2",!0),e.next=17,cc.vv.gameData.awaitTime(.5);case 17:return cc.tween(s).to(.5,{scale:1},{easing:"backOut"}).start(),e.next=20,cc.vv.gameData.awaitTime(.5);case 20:u=function(){var e=r(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Global.SlotsSoundMgr.playEffect("btn_click"),s.off("click"),c.setAnimation(0,"animation"+f+"_3",!1),cc.tween(s).to(.5,{scale:0},{easing:"backIn"}).start(),e.next=6,cc.vv.gameData.awaitTime(.8);case 6:return i.active=!1,a.playCutScreenAnim(),Global.SlotsSoundMgr.playEffect("fgtransition"),e.next=11,cc.vv.gameData.awaitTime(1.5);case 11:return a.enterFreeGame(),e.next=14,cc.vv.gameData.awaitTime(2);case 14:a.CanDoNextRound(),n();case 16:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),s.off("click"),cc.vv.gameData.checkAutoPlay(s,u),Global.btnClickEvent(s,function(){s.stopAllActions(),u()},t);case 24:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)}))()},enterFreeGame:function(){Global.SlotsSoundMgr.playBgm("free_bgm");var e=cc.find("Canvas/safe_node"),t=cc.vv.gameData;if(this.ShowGameview(!0),cc.find("spin_hero",e).active=!1,cc.find("slots/btn_collect",e).active=!1,cc.find("LMSlots_PrizePool_1",e).active=!1,cc.find("freeGame",e).active=!0,"pageReward"===t.GetFreeGameTimes().type){cc.find("freeGame/pageReward",e).active=!0;var n,o=a(cc.find("freeGame/pageReward",e).children);try{for(o.s();!(n=o.n()).done;){n.value.active=!1}}catch(e){o.e(e)}finally{o.f()}cc.find("freeGame/pageReward/"+t.GetFreeGameTimes().page,e).active=!0}else this.showAllMask(!0),cc.find("freeGame/pageReward",e).active=!1},CheckExitFreeGame:function(e){var t=this;return r(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise(function(){var n=r(regeneratorRuntime.mark(function n(a){var o,i,c,s,l,f;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(Global.SlotsSoundMgr.stopBgm(),o=t,"pageReward"!==cc.vv.gameData.GetFreeGameTimes().type){n.next=7;break}return n.next=6,t.CheckExitPageRewardFreeGame(t._gameInfo.freeWinCoin);case 6:return n.abrupt("return");case 7:return i=cc.find("Canvas/safe_node/freeGameEndAniNode"),c=cc.find("freeGameSpine",i).getComponent(sp.Skeleton),s=cc.find("freeGameSpine/collectBtn",i),l=cc.find("freeGameSpine/labNode",i),s.scale=0,l.scale=0,i.active=!0,Global.doRoallNumEff(cc.find("lab",l),0,e,2,null,null,0,!0),Global.SlotsSoundMgr.playEffect("free_dialog_collect_show"),c.setAnimation(0,"animation4_1",!1),c.addAnimation(0,"animation4_2",!0),n.next=20,cc.vv.gameData.awaitTime(.5);case 20:return cc.tween(s).to(.5,{scale:1},{easing:"backOut"}).call(function(){}).start(),l.active=!0,cc.tween(l).to(.5,{scale:1},{easing:"backOut"}).call(function(){}).start(),n.next=25,cc.vv.gameData.awaitTime(.5);case 25:f=function(){var e=r(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Global.SlotsSoundMgr.playEffect("btn_click"),s.off("click"),c.setAnimation(0,"animation4_3",!1),cc.tween(s).to(.5,{scale:0},{easing:"backIn"}).start(),cc.tween(l).to(.5,{scale:0},{easing:"backIn"}).start(),e.next=7,cc.vv.gameData.awaitTime(.8);case 7:return i.active=!1,o.playCutScreenAnim(!0),Global.SlotsSoundMgr.playEffect("act2"),e.next=12,cc.vv.gameData.awaitTime(2);case 12:o.exitFreeGame(),a();case 14:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),cc.vv.gameData.checkAutoPlay(s,f),s.off("click"),Global.btnClickEvent(s,function(){s.stopAllActions(),f()},t);case 29:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()));case 1:case"end":return n.stop()}},n)}))()},CheckExitPageRewardFreeGame:function(e){var t=this;return r(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise(function(){var n=r(regeneratorRuntime.mark(function n(a){var o,i,c,s,l,f,u;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o=t,i=cc.find("Canvas/safe_node/pageFreeGameAniNode"),c=cc.find("freeGameSpine",i).getComponent(sp.Skeleton),s=cc.find("freeGameSpine/startBtn",i),l=cc.find("freeGameSpine/collectBtn",i),f=cc.find("freeGameSpine/labNode",i),s.active=!1,l.active=!0,l.scale=0,f.scale=0,i.active=!0,Global.doRoallNumEff(lab,0,e,2,null,null,0,!0),Global.SlotsSoundMgr.playEffect("free_dialog_collect_show"),c.setAnimation(0,"animation5_1",!1),c.addAnimation(0,"animation5_2",!0),n.next=17,cc.vv.gameData.awaitTime(.5);case 17:return cc.tween(l).to(.5,{scale:1},{easing:"backOut"}).start(),f.active=!0,cc.tween(f).to(.5,{scale:1},{easing:"backOut"}).start(),n.next=22,cc.vv.gameData.awaitTime(.5);case 22:u=function(){var e=r(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Global.SlotsSoundMgr.playEffect("btn_click"),l.off("click"),c.setAnimation(0,"animation5_3",!1),cc.tween(l).to(.5,{scale:0},{easing:"backIn"}).start(),cc.tween(f).to(.5,{scale:0},{easing:"backIn"}).start(),e.next=7,cc.vv.gameData.awaitTime(.8);case 7:return i.active=!1,o.playCutScreenAnim(!0),Global.SlotsSoundMgr.playEffect("act2"),e.next=12,cc.vv.gameData.awaitTime(2);case 12:o.exitFreeGame(),a();case 14:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),cc.vv.gameData.checkAutoPlay(l,u),l.off("click"),Global.btnClickEvent(l,function(){l.stopAllActions(),u()},t);case 26:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()));case 1:case"end":return n.stop()}},n)}))()},exitFreeGame:function(){var e=this;return r(regeneratorRuntime.mark(function t(){var n,a,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Global.SlotsSoundMgr.stopBgm(),n=cc.vv.gameData,a=cc.find("Canvas/safe_node"),cc.find("slots/btn_collect",a).active=!0,cc.find("LMSlots_PrizePool_1",a).active=!0,cc.find("freeGame",a).active=!1,e.ShowGameview(!1),e.showAllMask(!1),t.next=10,e.awaitTime(2);case 10:return o=n.GetGameTotalFreeWin(),t.next=13,n.GetSlotsScript().ShowBottomWin(o,o,!0,null,1);case 13:return n.SetFreeGameTimes({status:!1}),Global.SlotsSoundMgr.playNormalBgm(!0),t.next=17,e.awaitTime(1);case 17:e.CanDoNextRound();case 18:case"end":return t.stop()}},t)}))()},playCutScreenAnim:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=cc.find("Canvas/safe_node/cutScreen"),n=cc.find("Canvas/safe_node/spin_hero");t.active=!0,n.active=!1;var a=t.getChildByName("spine").getComponent(sp.Skeleton);a.setAnimation(0,"skill",!1),a.setCompleteListener(function(a){t.active=!1,e&&(n.active=!0)})},ShowGameview:function(e){if(e){var t=cc.vv.gameData.GetTotalFree(),n=cc.vv.gameData.GetFreeTime();t||(t=10,cc.vv.gameData.SetTotalFree(t)),n||(n=10,cc.vv.gameData.SetFreeTime(n)),this._bottomScript.ShowFreeModel(!0,t-n,t);var a=cc.vv.gameData.GetTotalFreeWin();this._bottomScript.SetWin(a),this.hideAllSmallWing();for(var o=0;o<this._reels.length;o++)for(var i=0;i<this._reels[o]._symbols.length;i++)this._reels[o]._symbols[i].ShowRandomSymbol();this.changeWing()}else this.changeWing(),this._bottomScript.ShowFreeModel(!1),this.hideAllSmallCoin();var c=cc.find("Canvas/safe_node/spr_bg_normal"),r=cc.find("Canvas/safe_node/spr_bg_free");r&&(c&&(c.active=!e),r.active=e)},checkStoreEntrance:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=cc.vv.gameData.GetOpenStoreBet(),n=cc.vv.gameData.GetTotalBet(),a=cc.vv.gameData.GetStoreEntranceStatus(),o=cc.find("sd",this._entranceBtn).getComponent(sp.Skeleton);e?n>=t?(o.setAnimation(0,"animation1_1",!0),cc.vv.gameData.SetStoreEntranceStatus(!0)):(o.setAnimation(0,"animation1_4",!1),cc.vv.gameData.SetStoreEntranceStatus(!1)):n>=t&&0==a?(Global.SlotsSoundMgr.playEffect("unlock"),cc.vv.gameData.SetStoreEntranceStatus(!0),o.setAnimation(0,"animation1_2",!1),o.setCompleteListener(function(e){"animation1_2"===(e.animation?e.animation.name:"")&&o.setAnimation(0,"animation1_1",!0)})):n<t&&a&&(Global.SlotsSoundMgr.playEffect("lock"),cc.vv.gameData.SetStoreEntranceStatus(!1),o.setAnimation(0,"animation1_3",!1),o.setCompleteListener(function(e){"animation1_3"===(e.animation?e.animation.name:"")&&o.setAnimation(0,"animation1_4",!1)}))},onBtnStore:function(){var e=cc.vv.gameData,t=cc.vv.gameData.GetStoreEntranceStatus(),n=cc.vv.gameData.GetOpenStoreBet();if(Global.SlotsSoundMgr.playEffect("dialog_store_show"),t)this._bottomScript.ShowBtnsByState("moveing_1"),e.GetStoreScript().openStore(!0);else{var a=cc.vv.gameData.BetToIdx(n);if(a)cc.vv.gameData.GetBottomScript().SetBetIdx(a),cc.vv.gameData.SetStoreEntranceStatus(!0)}},collectJade:function(){var e=this;return r(regeneratorRuntime.mark(function t(){var n,o,i,c,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=cc.vv.gameData,o=n.GetJadeStore(),e._gameInfo.jadeInfo&&e._gameInfo.jadeInfo.idxs.length>0){i=a(e._gameInfo.jadeInfo.idxs);try{for(i.s();!(c=i.n()).done;)r=c.value,e.GetSymbolByIdx(r).collectJade()}catch(e){i.e(e)}finally{i.f()}}cc.tween(e.node).delay(.7).call(function(){e.refreshIngotUi(o.jadeCnt),e._gameInfo&&e._gameInfo.jadeInfo&&e._gameInfo.jadeInfo.idxs.length>0&&Global.SlotsSoundMgr.playEffect("jade_collect")}).start();case 4:case"end":return t.stop()}},t)}))()},sortCollectWing:function(){var e=this._gameInfo.goldIngotsResult;if(this._reelGoldIngotInfos=[[],[],[],[],[]],e){for(var t in e.items){var n=e.idxs[t],o=(n-1)%this._col,i=(this._row,Math.floor((n-1)/this._col),{item:e.items[t],idx:e.idxs[t]});this._reelGoldIngotInfos[o].push(i)}var c,r=a(this._reelGoldIngotInfos);try{for(r.s();!(c=r.n()).done;){c.value.sort(function(e,t){return t.idx-e.idx})}}catch(e){r.e(e)}finally{r.f()}console.log("---1reelGoldIngotInfos",this._reelGoldIngotInfos)}},showWing:function(){var e=this;return r(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e,n=0;case 2:if(!(n<5)){t.next=8;break}return t.next=5,e._bonusReels[n].collectWing(e._reelGoldIngotInfos[n]);case 5:n++,t.next=2;break;case 8:case"end":return t.stop()}},t)}))()},changeWing:function(){var e=cc.vv.gameData.GetBetIdx(),t=cc.vv.gameData.GetGoldIngotInfos()[e-1];cc.vv.gameData.GetFreeTime()>0&&(t=cc.vv.gameData.GetGoldIngotInfoInFree());for(var n=0;n<5;n++){var a=t[n],o=t[n];this._bonusReels[n].SetBonusReel(o.idxs,o.items,a.restCnt,a.fullCnt,!0)}for(var i=0;i<this._reels.length;i++)for(var c=0;c<this._reels[i]._symbols.length;c++)this._reels[i]._symbols[c].ShowRandomSymbol()},reduceSmallWing:function(){for(var e=0;e<5;e++)this._bonusReels[e].showSmallWing(1)},OnReelSpinEnd:function(e){var t=this._gameInfo.goldIngotInfo;cc.vv.gameData.GetFreeGameTimes().status&&(t=this._gameInfo.goldIngotInfoInFree);var n=t[e],a=t[e];if(this._bonusReels[e].SetBonusReel(a.idxs,a.items,n.restCnt,n.fullCnt),0==this._reelGoldIngotInfos[e].length);else for(var o=0;o<this._reels[e]._symbols.length;o++)this._reels[e]._symbols[o].ShowMask(!0)},hideAllSmallWing:function(){for(var e=1;e<=5;e++)cc.find("reels_frame/lint_bottom/down/item"+e+"/mask/upBg",this.node).y=45;for(var t=0;t<5;t++)this._bonusReels[t].hideSuspendWing(),this._bonusReels[t].hideAllKuang(),this._bonusReels[t]._idxs=[];this.hideAllSmallCoin()},hideAllSmallCoin:function(){for(var e=0;e<5;e++){var t="reels_frame/lint_bottom/down/coin"+(e+1);cc.find(t,this.node).active=!1}},showAllMask:function(e){for(var t=0;t<this._reels.length;t++)for(var n=0;n<this._reels[t]._symbols.length;n++){this._reels[t]._symbols[n]._id;this._reels[t]._symbols[n].ShowMask(e)}cc.find("reels_bg",this.node).children.forEach(function(t){t.color=e?new cc.Color(80,80,80):cc.Color.WHITE})},showJpDialog:function(e){var t=cc.find("Canvas/safe_node/jpNode");t.active=!0;var n=cc.find("jp",t).getComponent(sp.Skeleton);n.setAnimation(0,"animation"+e,!1),Global.SlotsSoundMgr.playEffect("jp_dialog_show"),n.setCompleteListener(function(e){t.active=!1})},showReelMask:function(e){for(var t=0;t<this._reels[e]._symbols.length;t++)this._reels[e]._symbols[t].ShowMask(!0)},awaitTime:function(e){var t=this;return new Promise(function(n,a){t.scheduleOnce(function(){n()},e)})}}),cc._RF.pop()},{"./Hermes_BonusReel":"Hermes_BonusReel",LMSlots_Slots_Base:void 0}],Hermes_Store:[function(e,t,n){"use strict";function a(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=o(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,c=!0,r=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return c=e.done,e},e:function(e){r=!0,i=e},f:function(){try{c||null==a.return||a.return()}finally{if(r)throw i}}}}function o(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function c(e,t,n,a,o,i,c){try{var r=e[i](c),s=r.value}catch(e){return void n(e)}r.done?t(s):Promise.resolve(s).then(a,o)}function r(e){return function(){var t=this,n=arguments;return new Promise(function(a,o){var i=e.apply(t,n);function r(e){c(i,a,o,r,s,"next",e)}function s(e){c(i,a,o,r,s,"throw",e)}r(void 0)})}}cc._RF.push(t,"0fa0cC7PMZJZJxPix9C+hNt","Hermes_Store");var s=e("./Hermes_Tools");cc.Class({extends:cc.Component,properties:{_page:1,_pageState:1,_boxes:[],_layoutScale:1},Init:function(){this._cannotOpenTip=cc.find("layout/view/cannotOpenTip",this.node);for(var e=0;e<9;e++){var t=cc.find("layout/view/item"+(e+1),this.node);t.on("click",this.onClickBoxBtn.bind(this)),t.index=e,this._boxes[e]={node:t,state:"canBuy",type:1,coin:null}}cc.find("layout/view/zheZhao",this.node).active=!1;var n=cc.find("layout",this.node),a=cc.find("Canvas").getComponent(cc.Canvas),o=cc.winSize.width/a.designResolution.width,i=cc.winSize.height/a.designResolution.height,c=Math.min(o,i);this._layoutScale=n.scale*Math.min(c,1)},onLoad:function(){var e=this;this._page=1;var t=cc.find("layout/btn_close",this.node);Global.btnClickEvent(t,function(){e.openStore(!1,!0)},this),Global.btnClickEvent(cc.find("layout/btn_left",this.node),function(){Global.SlotsSoundMgr.playEffect("page"),this.movePage(this._page-1,"left")},this),Global.btnClickEvent(cc.find("layout/btn_right",this.node),function(){Global.SlotsSoundMgr.playEffect("page"),this.movePage(this._page+1,"right")},this)},onEnable:function(){cc.vv.NetManager.registerMsg(MsgId.SLOT_SUBGAME_DATA,this.onRecvMsgSubAction,this)},onDisable:function(){cc.vv.NetManager.unregisterMsg(MsgId.SLOT_SUBGAME_DATA,this.onRecvMsgSubAction,!1,this)},onRecvMsgSubAction:function(e){var t=this;return r(regeneratorRuntime.mark(function n(){var o,i,c,r,s,l,f,u,m,d,v,h,p,g,_;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(200!==e.code){n.next=23;break}if(!(o=e.data).errMsg){n.next=4;break}return n.abrupt("return");case 4:if(i=o.result,c=cc.vv.gameData.GetSlotsNode(),cc.vv.gameData.SetJadeStore(o.jadeStore),r=o.jadeStore.unlockPage,s=o.jadeStore.pageDetails[t._page-1].price,l=o.jadeStore.jadeCnt,cc.vv.gameData.GetSlotsScript().refreshIngotUi(o.jadeStore.jadeCnt),f=t._boxes[i.idx-1],u=t._boxes[i.idx-1].node,m=cc.find("open",u),d=null,cc.find("open",u).active=!1,cc.find("lock",u).active=!1,cc.find("canBuy",u).active=!1,cc.find("open/coinLab",u).active=!1,f.state="open",2===i.type?(m.active=!0,(d=m.getComponent(sp.Skeleton)).setAnimation(0,"animation2",!1),d.addAnimation(0,"animation2_1",!1),cc.tween(c).delay(3).call(function(){cc.vv.gameData.SetGoldIngotInfoInFree(i.goldIngotInfoInFree),cc.vv.gameData.SetFreeGameTimes({status:!0,times:i.freeInfo.freeCnt,type:"normal"}),t.openStore(!1),cc.find("layout/view/zheZhao",t.node).active=!1}).delay(.5).call(function(){cc.vv.gameData.GetSlotsScript().CheckEnterFreeGame(i.freeInfo.freeCnt)}).start()):3===i.type?(m.active=!0,(d=m.getComponent(sp.Skeleton)).setAnimation(0,"animation3",!1),d.addAnimation(0,"animation3_1",!1),cc.tween(c).delay(3).call(function(){cc.vv.gameData.SetGoldIngotInfoInFree(i.goldIngotInfoInFree),cc.vv.gameData.SetFreeGameTimes({status:!0,times:i.freeInfo.freeCnt,type:"super"}),t.openStore(!1),cc.find("layout/view/zheZhao",t.node).active=!1}).delay(.5).call(function(){cc.vv.gameData.GetSlotsScript().CheckEnterFreeGame(i.freeInfo.freeCnt)}).start()):1===i.type&&(m.active=!0,(d=m.getComponent(sp.Skeleton)).setAnimation(0,"animation1",!1),d.addAnimation(0,"animation1_1",!1),v=cc.vv.gameData.GetBottomScript().getCurrentWin(),h=i.coin,cc.vv.gameData.AddCoin(h),cc.vv.gameData.GetBottomScript().ShowWin(h+v,3,v,null,.3),cc.vv.gameData.GetTopScript().ShowCoin(),cc.tween(c).delay(1).call(function(){cc.find("open/coinLab",u).active=!0,cc.find("open/coinLab",u).getComponent(cc.Label).string=Global.formatNumShort(i.coin,0),cc.find("layout/view/zheZhao",t.node).active=!1}).start()),t._page<=r&&l<s){p=a(t._boxes);try{for(p.s();!(g=p.n()).done;)"canBuy"==(_=g.value).state&&(_.state="canNotBuy")}catch(e){p.e(e)}finally{p.f()}}i.pageReward&&(Global.SlotsSoundMgr.playEffect("logo_store"),cc.tween(c).delay(2).call(function(){t.playUpSymbolAni("open")}).delay(3).call(function(){t.openStore(!1),cc.find("layout/view/zheZhao",t.node).active=!1}).delay(.5).call(function(){cc.vv.gameData.SetFreeGameTimes({status:!0,times:i.pageReward.freeCnt,type:"pageReward",page:t._page}),cc.vv.gameData.GetSlotsScript().CheckEnterFreeGame(i.pageReward.freeCnt)}).start());case 23:case"end":return n.stop()}},n)}))()},openStore:function(e,t){var n=this,a=cc.find("store_bg",this.node),o=cc.find("layout",this.node);cc.find("layout/view/zheZhao",this.node).active=!1,e?(this.node.active=e,a.active=e,o.active=e,a.opacity=0,o.scale=0,Global.SlotsSoundMgr.playEffect("popup_out"),cc.tween(o).to(.5,{scale:this._layoutScale}).start(),cc.tween(a).to(.5,{opacity:255}).start(),this.movePage(this._page),this.updateUi()):(Global.SlotsSoundMgr.playEffect("close"),cc.tween(o).to(.5,{scale:0}).call(function(){n.node.active=e}).start(),cc.tween(a).to(.5,{opacity:0}).start(),t&&cc.vv.gameData.GetSlotsScript().CanDoNextRound())},updateUi:function(){var e=cc.vv.gameData.GetJadeStore(),t=e.unlockPage,n=e.unlockItems,o=e.pageDetails[this._page-1].price,i=e.jadeCnt;if(cc.vv.gameData.GetSlotsScript().refreshIngotUi(e.jadeCnt),this._page<=t){var c="canBuy";i<o&&(c="canNotBuy");var r,s=a(this._boxes);try{for(s.s();!(r=s.n()).done;){r.value.state=c}}catch(e){s.e(e)}finally{s.f()}var l,f=a(n[this._page-1]);try{for(f.s();!(l=f.n()).done;){var u=l.value;this._boxes[u.idx-1].state="open",this._boxes[u.idx-1].type=u.type,this._boxes[u.idx-1].coin=u.coin}}catch(e){f.e(e)}finally{f.f()}}else{var m,d=a(this._boxes);try{for(d.s();!(m=d.n()).done;){m.value.state="lock"}}catch(e){d.e(e)}finally{d.f()}}for(var v=0;v<9;v++){var h=cc.find("layout/view/item"+(v+1),this.node),p=this._boxes[v];if(cc.find("lock",h).active=!1,cc.find("open",h).active=!1,cc.find("canBuy",h).active=!1,"lock"==p.state)cc.find("lock",h).active=!0,cc.find("lock",h).getComponent(sp.Skeleton).setAnimation(0,"animation2",!1),cc.find("lock/priceNode/lab",h).getComponent(cc.Label).string=Global.FormatNumToComma(o);else if("open"==p.state)switch(cc.find("open",h).active=!0,p.type){case 1:cc.find("open/coinLab",h).active=!0,cc.find("open",h).getComponent(sp.Skeleton).setAnimation(0,"animation1_1",!1),cc.find("open/coinLab",h).getComponent(cc.Label).string=Global.formatNumShort(p.coin,0);break;case 2:cc.find("open/coinLab",h).active=!1,cc.find("open",h).getComponent(sp.Skeleton).setAnimation(0,"animation2_1",!1);break;case 3:cc.find("open/coinLab",h).active=!1,cc.find("open",h).getComponent(sp.Skeleton).setAnimation(0,"animation3_1",!1)}else if("canBuy"==p.state){cc.find("canBuy",h).active=!0,cc.find("canBuy/priceNode/lab",h).getComponent(cc.Label).string=Global.FormatNumToComma(o),cc.find("canBuy",h).getComponent(sp.Skeleton).setAnimation(0,"animation3",!1)}else if("canNotBuy"==p.state){cc.find("canBuy",h).active=!0,cc.find("canBuy/priceNode/lab",h).getComponent(cc.Label).string=Global.FormatNumToComma(o),cc.find("canBuy",h).getComponent(sp.Skeleton).setAnimation(0,"animation1",!1)}}},movePage:function(e,t){var n=this,o=cc.vv.gameData.GetJadeStore().unlockPage;Global.SlotsSoundMgr.playEffect("page"),e<=0?e=4:e>=5&&(e=1),this._page=e,this.updateUi(),this._page>=o?this.playUpSymbolAni("close"):this.playUpSymbolAni("hasOpen");var i=cc.find("layout/upBg/shangdian",this.node).getComponent(sp.Skeleton),c=i.setAnimation(0,"animation"+this._page,!1);s.spineEndFunc(cc.find("layout/upBg/shangdian",this.node),c,function(){i.setAnimation(0,"animation"+n._page+"_1",!1)});var r,l=a(cc.find("layout/choose_bg",this.node).children);try{for(l.s();!(r=l.n()).done;){var f=r.value;cc.find("choosed",f).active=!1,f.name.slice(6)==this._page&&(cc.find("choosed",f).active=!0)}}catch(e){l.e(e)}finally{l.f()}if(t){var u=100;"right"===t&&(u=-100);for(var m=0;m<9;m++){var d=cc.find("layout/view/item"+(m+1),this.node),v=d.x;cc.tween(d).to(.2,{opacity:0,x:v+u}).to(.01,{x:v,scale:0,opacity:360}).delay(.03*m).to(.2,{scale:1}).start()}}},playUpSymbolAni:function(e){var t=cc.find("layout/upBg/chuxian",this.node).getComponent(sp.Skeleton),n=this._page;"hasOpen"===e?t.setAnimation(0,"animation"+n+"_1",!1):"open"===e?(t.setAnimation(0,"animation"+n,!1),t.addAnimation(0,"animation"+n+"_1",!1)):"close"===e&&t.setAnimation(0,"animation"+n+"_2",!1)},onClickBoxBtn:function(e){var t=e.node.index,n=cc.vv.gameData.GetJadeStore(),a=n.pageDetails[this._page-1].price;if(n.jadeCnt<a&&"canNotBuy"===this._boxes[t].state){Global.SlotsSoundMgr.playEffect("nomoney");var o=this._cannotOpenTip;return o.stopAllActions(),o.x=e.node.x,o.y=e.node.y,o.active=!0,o.scale=0,void cc.tween(o).to(.5,{scale:1}).delay(.3).call(function(){o.active=!1}).start()}if("canBuy"===this._boxes[t].state){Global.SlotsSoundMgr.playEffect("buy");var i={c:MsgId.SLOT_SUBGAME_DATA};i.gameid=cc.vv.gameData.getGameId(),i.data={},i.data.rtype=1,i.data.pageId=this._page,i.data.choiceId=t+1,cc.vv.NetManager.send(i,!0),cc.find("layout/view/zheZhao",this.node).active=!0}},awaitTime:function(e){var t=this;return new Promise(function(n,a){t.scheduleOnce(function(){n()},e)})}}),cc._RF.pop()},{"./Hermes_Tools":"Hermes_Tools"}],Hermes_Symbol:[function(e,t,n){"use strict";cc._RF.push(t,"baffcNJ4bdJF5wsUzddVDGp","Hermes_Symbol");var a=e("./Hermes_Tools");cc.Class({extends:e("LMSlots_Symbol_Base"),properties:{_bonusIndex:0,_data:null},start:function(){},StartMove:function(){this._super(),cc.vv.gameData.GetFreeGameTimes()&&cc.vv.gameData.GetFreeGameTimes().status&&"pageReward"!=cc.vv.gameData.GetFreeGameTimes().type?this.ShowMask(!0):this.ShowMask(!1)},hideOther:function(){cc.find("s3/lab",this.node).active=!1,cc.find("ingot",this.node).active=!1},ShowById:function(e,t){20===e&&(e=Math.round(5*Math.random()+4)),this._super(e,t),this.hideOther(),this._data=t,t&&t.type&&(1===t.type&&t.num?this.showIngot(t.num):2===t.type&&t.item&&this.showWing(t.item));var n=cc.find("mask",this.node);n.active&&(n.height=this._showNode.height>118?this._showNode.height:118,1===this._id?n.width=154:n.width=this._showNode.width>122?this._showNode.width:122),cc.vv.gameData.GetFreeGameTimes()&&cc.vv.gameData.GetFreeGameTimes().status&&"pageReward"!=cc.vv.gameData.GetFreeGameTimes().type?this.ShowMask(!0):this.ShowMask(!1)},showIngot:function(e){var t=cc.find("ingot",this.node);t.active=!0,cc.find("lab",t).getComponent(cc.Label).string=e},showWing:function(e){if(e&&e.coin){var t=cc.find("s3/lab",this.node);t.active=!0,t.getComponent(cc.Label).string=Global.formatNumShort(e.coin,0)}},collectJade:function(){if(this._data&&1===this._data.type){var e=cc.find("Canvas/safe_node/slots/btn_collect/sd"),t=cc.instantiate(cc.find("ingot",this.node));t.parent=e;var n=a.convetOtherNodeSpace(cc.find("ingot",this.node),e);t.setPosition(n),cc.find("ingot",this.node).active=!1,cc.tween(t).to(.2,{scale:1.7}).to(.5,{position:cc.v2(-60,0)}).to(.2,{opacity:31,scale:.5}).call(function(){t.removeFromParent()}).start()}},getIngotWPos:function(){return this.ingot().convertToWorldSpaceAR(cc.v2(0,0))},playTriggerAnimation:function(){var e=!1,t=this._id,n=cc.vv.gameData.getGameCfg();if(n.symbol[t]&&n.symbol[t].win_node&&n.symbol[t].trigger_ani){this._state="trigger",this._showNode&&(this._showNode.active=!1);var a=this.setAnimationToTop(!0);a.active=!0;var o=cc.find(n.symbol[t].win_node,a);if(o.active=!0,""!=n.symbol[t].trigger_ani.name){a.zIndex=n.symbol[t].trigger_ani.zIndex-this._symbolIdx+10*this._reelIdx,e=!0;var i=o.getComponent(sp.Skeleton);i&&i.setAnimation(0,n.symbol[t].trigger_ani.name,!0)}}return e},setAnimationToTop:function(e){if(this._topAniNode){if(e){var t=cc.find(cc.js.formatStr("symbol_ani_%s_%s",this._symbolIdx,this._reelIdx),this._topAniNode);t||(t=cc.instantiate(this.node));var n=this.node.convertToWorldSpaceAR(cc.v2(0));return t.parent=this._topAniNode,t.name=cc.js.formatStr("symbol_ani_%s_%s",this._symbolIdx,this._reelIdx),t.position=this._topAniNode.convertToNodeSpaceAR(n),cc.find("ingot",t).removeFromParent(),this.node.active=!1,t}var a=cc.find(cc.js.formatStr("symbol_ani_%s_%s",this._symbolIdx,this._reelIdx),this._topAniNode);a&&(a.removeFromParent(),a.destroy()),this.node.active=!0,this._showNode&&(this._showNode.active=!0)}return this.node},playWinAnimation:function(){this.ShowMask(!1),this._super()},ShowMask:function(e){var t=cc.vv.gameData.getGameCfg();if(t.symbol[this._id]&&t.symbol[this._id].node){var n=cc.find(t.symbol[this._id].node,this.node);e?(n.color=new cc.Color(80,80,80),n.childrenCount>0&&n.children.forEach(function(e){e.color=new cc.Color(80,80,80)})):(n.color=cc.Color.WHITE,n.childrenCount>0&&n.children.forEach(function(e){e.color=cc.Color.WHITE}))}}}),cc._RF.pop()},{"./Hermes_Tools":"Hermes_Tools",LMSlots_Symbol_Base:void 0}],Hermes_Tools:[function(e,t,n){"use strict";cc._RF.push(t,"74de9mfCfNHUq3JkEznao79","Hermes_Tools"),cc.Class({extends:cc.Component,properties:{},start:function(){},statics:{changeNodeSp:function(e,t){null!=e&&(e.getComponent(cc.Sprite).spriteFrame=t)},changeNodeLab:function(e,t){null!=e&&(e.getComponent(cc.Label).string=t)},numInArr:function(e,t,n){var a=n.indexOf(e),o=n.indexOf(t);return-1!=a&&-1!=o},nodeAni:function(e,t){1===t?(e.scale=0,e.active=!0,cc.tween(e).to(.2,{scale:1}).start()):2===t?cc.tween(e).to(.2,{scale:0}).call(function(){e.active=!1,e.scale=1}).start():3===t&&cc.tween(e).to(.2,{scale:1.3}).to(.3,{scale:0}).call(function(){e.active=!1,e.scale=1}).start()},playSpineAni:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"animation",n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;e&&(e.active=!0,e.getComponent(sp.Skeleton).setAnimation(a,t,n))},getKNum:function(e){if(e)return 1e3*parseInt(e/1e3)},spineEndFunc:function(e,t,n){if(e){var a=e.getComponent(sp.Skeleton);t&&n&&a.setTrackEventListener(t,function(e,t){n()})}},localConvertWorldPoint:function(e){return e?e.convertToWorldSpaceAR(cc.v2(0,0)):null},worldConvertLocalPoint:function(e,t){return e?e.convertToNodeSpaceAR(t):null},convetOtherNodeSpace:function(e,t){if(!e||!t)return null;var n=this.localConvertWorldPoint(e);return this.worldConvertLocalPoint(t,n)}}}),cc._RF.pop()},{}],Hermes_Wheel:[function(e,t,n){"use strict";function a(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=o(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,c=!0,r=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return c=e.done,e},e:function(e){r=!0,i=e},f:function(){try{c||null==a.return||a.return()}finally{if(r)throw i}}}}function o(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}cc._RF.push(t,"ab267m68rBOS7qZ/9X+bVpj","Hermes_Wheel");cc.Class({extends:cc.Component,properties:{_items:[],_itemWidth:146,_slowSpeed:30,_fastSpeed:90},Init:function(){for(var e=0;e<9;e++)this._items.push(cc.find("moveNode/item"+e,this.node))},onLoad:function(){},start:function(){},moveToIndex:function(){},update:function(e){var t,n=a(this._items);try{for(n.s();!(t=n.n()).done;){var o=t.value;o.x+=e*this._slowSpeed,o.x>=876&&(o.x=-292)}}catch(e){n.e(e)}finally{n.f()}}}),cc._RF.pop()},{}]},{},["Hermes_BonusReel","Hermes_ButtonSafe","Hermes_Cfg","Hermes_FreeGame","Hermes_GameData","Hermes_Logic","Hermes_Pop","Hermes_Reel","Hermes_Slots","Hermes_Store","Hermes_Symbol","Hermes_Tools","Hermes_Wheel"]);
window.__require=function e(t,n,a){function i(c,r){if(!n[c]){if(!t[c]){var s=c.split("/");if(s=s[s.length-1],!t[s]){var l="function"==typeof __require&&__require;if(!r&&l)return l(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+c+"'")}c=s}var u=n[c]={exports:{}};t[c][0].call(u.exports,function(e){return i(t[c][1][e]||e)},u,u.exports,e,t,n,a)}return n[c].exports}for(var o="function"==typeof __require&&__require,c=0;c<a.length;c++)i(a[c]);return i}({LampOfAladdin_Cfg:[function(e,t,n){"use strict";var a;function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}cc._RF.push(t,"3ef53q0qfpGhKPtR/QDL00z","LampOfAladdin_Cfg");var o={symbol:(a={},i(a,1,{node:"s1",win_node:"w1",win_ani:{name:"animation",zIndex:100}}),i(a,2,{node:"s2",win_node:"w2",win_ani:{name:"animation",zIndex:100}}),i(a,3,{node:"s5",win_node:"w5",win_ani:{name:"animation",zIndex:100}}),i(a,4,{node:"s6",win_node:"w6",win_ani:{name:"animation",zIndex:100}}),i(a,5,{node:"s7",win_node:"w7",win_ani:{name:"animation",zIndex:100}}),i(a,6,{node:"s8",win_node:"w8",win_ani:{name:"animation",zIndex:100}}),i(a,7,{node:"s3",win_node:"w3",win_ani:{name:"animation",zIndex:100}}),i(a,8,{node:"s4",win_node:"w4",win_ani:{name:"animation",zIndex:100}}),i(a,9,{node:"s9",zIndex:100,win_node:"w9",win_ani:{name:"animation",zIndex:300},stop_ani:{name:"animation1",zIndex:300}}),i(a,10,{node:"s10",win_node:"w10",win_ani:{name:"animation",zIndex:100},stop_ani:{name:"animation1",zIndex:200}}),i(a,14,{node:"s14",win_node:"wildchange",win_ani:{name:"animation1",zIndex:100}}),a),scripts:{Top:"LMSlots_Top_Base",Bottom:"LMSlots_Bottom_Base",Slots:"LampOfAladdin_Slots",Reels:"LMSlots_Reel_Base",Symbols:"LampOfAladdin_Symbol"},col:5,row:3,symbolPrefab:"LampOfAladdin_Symbol",symbolSize:{width:200,height:200},randomSymbols:[1,2,3,4,5,6,7,8],scatterId:9,wildId:10,collectId:1,kuang:"LampOfAladdin_kuang",speed:3e3,reelStopInter:.2,autoModelDelay:1,auto_stop_time:.5,AddAntiTime:3,bounce:!0,bounceInfo:{distance:30,time:.1},reelStateInfo:[{id:[9],mini:3,counts:[1,1,1,1,1],antiNode:"node_anti",path:"games/LampOfAladdin/",reelStopSound:"reel_stop",symbolStopSound:"scatter_landing",antSound:"anticipation",antSpeed:2500},{id:[10],mini:0,counts:[3,3,3,3,3],path:"games/LampOfAladdin/",reelStopSound:"reel_stop",symbolStopSound:""}],normalBgm:"base_bgm",soundCfg:{base_bgm:"base_bgm",free_bgm:"free_bgm",all_anticipation:"all_anticipation",click:"click",fg_popclose:"fg_popclose",fg_popup:"fg_popup",jp_popup:"jp_popup",transition_1:"transition_1",transition_2:"transition_2",transition1:"transition1",transition2:"transition2",lock:"lock",reel_notify:"anticipation",reel_stop:"reel_stop",symbol_fly:"symbol_fly",wild_fly:"wild_fly",symbol_scatter:"scatter_landing",unlock:"unlock",win1:"win1",win1end:"win1end",win2:"win2",win2end:"win2end",win3:"win3",win3end:"win3end",win4:"win4",win4end:"win4end",map_close:"map_close",map_move:"map_move",map_open:"map_open",map_popclose:"map_popclose",map_popup:"map_popup",map_node:"map_node",meter_full:"meter_full",reel_appear:"reel_appear",reel_hide:"reel_hide",pick_bgm:"pick_bgm",pick_congratulate:"pick_congratulate",pick_popup:"pick_popup",pick_popclose:"pick_popclose",jp_congratulate:"jp_congratulate",lamp_bird:"lamp_bird",lamp_click:"lamp_click",lamp_disappear:"lamp_disappear",wheel_bgm:"wheel_bgm",wheel_popup:"wheel_popup",wheel_popclose:"wheel_popclose"},helpItems:["games/LampOfAladdin/prefab/LMSlots_Help_item1","games/LampOfAladdin/prefab/LMSlots_Help_item2","games/LampOfAladdin/prefab/LMSlots_Help_item3","games/LampOfAladdin/prefab/LMSlots_Help_item4","games/LampOfAladdin/prefab/LMSlots_Help_item5","games/LampOfAladdin/prefab/LMSlots_Help_item6"]};t.exports=o,cc._RF.pop()},{}],LampOfAladdin_CoinBoom:[function(e,t,n){"use strict";cc._RF.push(t,"8763ePJDu1Bsax32agleDAF","LampOfAladdin_CoinBoom"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this._lblNum=cc.find("lbl_num",this.node).getComponent(cc.Label),Global.registerEvent(cc.vv.gameData._EventId.SLOT_TOTALBET_UPDATED,this.onChangeBetValue,this)},start:function(){this.initShow()},initShow:function(){var e=cc.vv.gameData.GetTotalBet();this._lblNum.string=Global.FormatNumToComma(50*e)},onChangeBetValue:function(e){var t=e.detail;this._lblNum.string=Global.FormatNumToComma(50*t)}}),cc._RF.pop()},{}],LampOfAladdin_Energy_FreeGame:[function(e,t,n){"use strict";function a(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=i(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o,c=!0,r=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return c=e.done,e},e:function(e){r=!0,o=e},f:function(){try{c||null==a.return||a.return()}finally{if(r)throw o}}}}function i(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function c(e,t,n,a,i,o,c){try{var r=e[o](c),s=r.value}catch(e){return void n(e)}r.done?t(s):Promise.resolve(s).then(a,i)}function r(e){return function(){var t=this,n=arguments;return new Promise(function(a,i){var o=e.apply(t,n);function r(e){c(o,a,i,r,s,"next",e)}function s(e){c(o,a,i,r,s,"throw",e)}r(void 0)})}}cc._RF.push(t,"1e197K2hzdCjqREUIUKIok2","LampOfAladdin_Energy_FreeGame"),cc.Class({extends:cc.Component,properties:{_isEnable:!1},onLoad:function(){this._mid_ani=cc.find("Canvas/safe_node/mid_ani"),this._spine_genie=cc.find("spine_genie",this._mid_ani),this._spine_cloud=cc.find("spine_cloud",this._mid_ani),this._lbl_mult=cc.find("lbl_mult",this._mid_ani),this._soundCfg=cc.vv.gameData.getGameCfg().soundCfg},enterFreeGame:function(){var e=this;return r(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._isEnable=!0,e._setFreeUIVisible(!0),t.next=4,e._showStartUI();case 4:return t.next=6,cc.vv.gameData.reqSubGame(2);case 6:200==t.sent.code&&(Global.SlotsSoundMgr.playBgm(e._soundCfg.free_bgm),cc.vv.gameData.SetTotalFree(10),cc.vv.gameData.SetFreeTime(10),cc.vv.gameData.GetBottomScript().CanDoNextRound());case 8:case"end":return t.stop()}},t)}))()},reconnect:function(){cc.vv.gameData.GetFreeTime()>0&&(this._setFreeUIVisible(!0),this._isEnable=!0)},exitFreeGame:function(){var e=this;return r(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._showResultUI();case 2:return e._isEnable=!1,e.scheduleOnce(function(){e._setFreeUIVisible(!1),cc.vv.gameData.getCollectData().num=0,Global.dispatchEvent(cc.vv.gameData._EventId.SLOT_REFUSH_ENERGY),Global.SlotsSoundMgr.stopBgm()},.5),e.setCharacterVisible(!1),e._switchScreen(),t.next=8,cc.vv.gameData.awaitTime(1.5);case 8:e.setCharacterVisible(!0);case 9:case"end":return t.stop()}},t)}))()},isEnable:function(){return this._isEnable},onStartMove:function(){var e=this;return r(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e._isEnable){t.next=2;break}return t.abrupt("return");case 2:e._lbl_mult.active=!1;case 3:case"end":return t.stop()}},t)}))()},onEndMove:function(){var e=this;return r(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e._isEnable){t.next=2;break}return t.abrupt("return");case 2:if("animation4"!=e._spine_cloud.getComponent(sp.Skeleton).animation){t.next=7;break}return e.playSpine(e._spine_cloud,"animation1",!1,function(){e.playSpine(e._spine_cloud,"animation3")}),Global.SlotsSoundMgr.playEffect(e._soundCfg.reel_appear),t.next=7,e.playSpine(e._spine_genie,"animation1");case 7:n=cc.vv.gameData.getCollectData(),e._lbl_mult.active=!0,e._lbl_mult.getComponent(cc.Label).string=n.mult+"X",e.playSpine(e._spine_genie,"animation");case 11:case"end":return t.stop()}},t)}))()},isFinish:function(){var e=cc.vv.gameData.getGameInfo().collect;return!(!e||2!=e.open||!cc.vv.gameData.isFinishFreeTime())},_setFreeUIVisible:function(e){cc.vv.gameData.GetSlotsScript()._bottomScript.ShowFreeModel(e,10,10),cc.find("Canvas/safe_node/slots/node_energy").active=!e,cc.find("Canvas/safe_node/gameWheel").active=!e,cc.vv.gameData.setClientOpenCollectEnergy(!e),cc.find("Canvas/safe_node/slots/spine_collect_wild").active=!e,cc.vv.gameData.setClientOpenCollectWild(!e),cc.find("Canvas/safe_node/spr_bg_normal").active=!e,cc.find("Canvas/safe_node/spr_bg_free_map").active=e,cc.find("totalBetBg",cc.vv.gameData.GetSlotsScript()._bottomScript.node).active=!e,e?this._showSlotMidReel():this._hideSlotMidReel()},_showSlotMidReel:function(){this._mid_ani.active=!0,this.playSpine(this._spine_genie,"animation4"),this.playSpine(this._spine_cloud,"animation4"),this._lbl_mult.active=!1},_hideSlotMidReel:function(){this._mid_ani.active=!1},_showStartUI:function(){var e=this;this._hideFreeGameUI();var t=cc.find("grayBg",this.node);t.active=!0;var n=cc.find("spine_bg",this.node);n.active=!0;var a=cc.find("btn_start",this.node);a.active=!0;var i=cc.find("lbl_mult1",this.node);i.active=!0,i.getComponent(cc.Label).string="";var o=cc.find("lbl_mult2",this.node);return o.active=!0,o.getComponent(cc.Label).string="",new Promise(function(){var c=r(regeneratorRuntime.mark(function c(s){var l,u;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return Global.SlotsSoundMgr.playEffect(e._soundCfg.map_popclose),a.getComponent(cc.Button).enabled=!1,l={3:[2,5],7:[2,10],12:[3,25],19:[5,100]},(u=cc.vv.gameData.getCollectData())&&u.idx&&(i.getComponent(cc.Label).string=l[u.idx][0]+"X",o.getComponent(cc.Label).string=l[u.idx][1]+"X"),cc.tween(a).to(.3,{scale:1.3}).to(.2,{scale:1}).start(),c.next=8,e.playSpine(n,"animation1");case 8:a.getComponent(cc.Button).enabled=!0,e.playSpine(n,"animation1_1",!0),cc.vv.gameData.isNeedAutoPlay()&&(a.stopAllActions(),cc.tween(a).delay(cc.vv.gameData.getAutoPlayTime()).call(r(regeneratorRuntime.mark(function c(){return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return a.getComponent(cc.Button).enabled=!1,Global.SlotsSoundMgr.playEffect(e._soundCfg.fg_popclose),c.next=4,e.playSpine(n,"animation1_2");case 4:n.active=!1,a.off("click"),a.active=!1,t.active=!1,i.active=!1,o.active=!1,s();case 11:case"end":return c.stop()}},c)}))).to(.3,{scale:1.3}).to(.2,{scale:0}).start()),Global.btnClickEvent(a,r(regeneratorRuntime.mark(function c(){return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return a.stopAllActions(),a.getComponent(cc.Button).enabled=!1,Global.SlotsSoundMgr.playEffect(e._soundCfg.click),cc.tween(a).to(.3,{scale:1.3}).to(.2,{scale:0}).start(),Global.SlotsSoundMgr.playEffect(e._soundCfg.fg_popclose),c.next=7,e.playSpine(n,"animation1_2");case 7:n.active=!1,a.off("click"),a.active=!1,t.active=!1,i.active=!1,o.active=!1,s();case 14:case"end":return c.stop()}},c)})),e);case 12:case"end":return c.stop()}},c)}));return function(e){return c.apply(this,arguments)}}())},_showResultUI:function(){var e=this;return r(regeneratorRuntime.mark(function t(){var n,a,i,o,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._hideFreeGameUI(),(n=cc.find("grayBg",e.node)).active=!0,(a=cc.find("spine_bg",e.node)).active=!0,(i=cc.find("btn_collect",e.node)).active=!0,i.getComponent(cc.Button).enabled=!1,(o=cc.find("lblWinCoin",e.node)).active=!0,o.getComponent(cc.Label).string="",c=e,t.abrupt("return",new Promise(function(){var t=r(regeneratorRuntime.mark(function t(s){var l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Global.SlotsSoundMgr.playEffect(e._soundCfg.map_popup),cc.tween(i).to(.3,{scale:1.3}).to(.2,{scale:1}).start(),e.playSpine(a,"animation2",!1,function(){c.playSpine(a,"animation2_1",!0)}),t.next=5,cc.vv.gameData.awaitTime(.4);case 5:l=cc.vv.gameData.GetGameTotalFreeWin(),o.scale=1,Global.doRoallNumEff(o,0,l,2,function(){i.getComponent(cc.Button).enabled=!0},null,0,!0),cc.vv.gameData.isNeedAutoPlay()&&(i.stopAllActions(),cc.tween(i).delay(cc.vv.gameData.getAutoPlayTime()).call(r(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i.getComponent(cc.Button).enabled=!1,o.getComponent(cc.Label).string=Global.FormatNumToComma(Number(l)),cc.tween(o).to(.3,{scale:1.3}).to(.2,{scale:0}).start(),Global.SlotsSoundMgr.playEffect(e._soundCfg.fg_popclose),t.next=6,e.playSpine(a,"animation2_2");case 6:a.active=!1,i.off("click"),i.active=!1,o.active=!1,n.active=!1,s();case 12:case"end":return t.stop()}},t)}))).to(.3,{scale:1.3}).to(.2,{scale:0}).start()),Global.btnClickEvent(i,r(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i.stopAllActions(),i.getComponent(cc.Button).enabled=!1,o.getComponent(cc.Label).string=Global.FormatNumToComma(Number(l)),cc.vv.gameData.GetSlotsScript()._bottomScript.SetWin(l),Global.SlotsSoundMgr.playEffect(e._soundCfg.click),cc.tween(i).to(.3,{scale:1.3}).to(.2,{scale:0}).start(),cc.tween(o).to(.3,{scale:1.3}).to(.2,{scale:0}).start(),Global.SlotsSoundMgr.playEffect(e._soundCfg.fg_popclose),t.next=10,e.playSpine(a,"animation2_2");case 10:a.active=!1,i.off("click"),i.active=!1,o.active=!1,n.active=!1,s();case 16:case"end":return t.stop()}},t)})),e);case 10:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 13:case"end":return t.stop()}},t)}))()},_hideFreeGameUI:function(){var e,t=a(this.node.children);try{for(t.s();!(e=t.n()).done;){e.value.active=!1}}catch(e){t.e(e)}finally{t.f()}},setCharacterVisible:function(e){cc.find("Canvas/safe_node/character").active=e},_switchScreen:function(){var e=this;return r(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=cc.find("Canvas/safe_node/spine_transition"),t.next=3,e.playSpine(n,"skill_1");case 3:n.active=!1,Global.SlotsSoundMgr.playEffect(e._soundCfg.transition1);case 5:case"end":return t.stop()}},t)}))()},playSpine:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"animation",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new Promise(function(i){e?(e.active=!0,e.getComponent(sp.Skeleton).setAnimation(0,t,n),n?i():e.getComponent(sp.Skeleton).setCompleteListener(function(){a&&a(),i()})):(a&&a(),i())})},playActions:function(e,t){return new Promise(function(n){t.push(cc.callFunc(function(){n()})),e.active=!0,e.runAction(cc.sequence(t))})},awaitTime:function(e){var t=this;return new Promise(function(n){t.scheduleOnce(function(){n()},e)})}}),cc._RF.pop()},{}],LampOfAladdin_Energy:[function(e,t,n){"use strict";cc._RF.push(t,"eec6blsssFKDJoTWiL+RNmv","LampOfAladdin_Energy"),cc.Class({extends:cc.Component,properties:{_isCollectState:!1},onLoad:function(){var e=cc.find("btn_lock",this.node);Global.btnClickEvent(e,this.onClicklock,this);var t=cc.find("btn_juanzhou",this.node);Global.btnClickEvent(t,this.onClickJuanzhou,this),Global.registerEvent(cc.vv.gameData._EventId.SLOT_TOTALBET_UPDATED,this.onEventChangeBetIdx,this),Global.registerEvent(cc.vv.gameData._EventId.SLOT_REFUSH_ENERGY,this.onEventRefushEnergy,this),this._soundCfg=cc.vv.gameData.getGameCfg().soundCfg},start:function(){var e=this;this.scheduleOnce(function(){e.initShow(!1)})},initShow:function(){var e=this,t=cc.vv.gameData.getCollectData();if(t){var n=cc.find("btn_lock",this.node),a=n.getChildByName("node_spine"),i=cc.vv.gameData.isOpenCollectProgress();if(this._isCollectState!=i)if(i){Global.SlotsSoundMgr.playEffect(this._soundCfg.unlock),n.getComponent(cc.Button).enabled=!1;var o=a.getComponent(sp.Skeleton);o.setAnimation(0,"animation2",!1),o.setCompleteListener(function(){e.updateCollectProgress(t),o.setCompleteListener(null)})}else{Global.SlotsSoundMgr.playEffect(this._soundCfg.lock),n.getComponent(cc.Button).enabled=!0,a.getComponent(sp.Skeleton).setAnimation(0,"animation1",!1)}this._isCollectState=i,this.updateNextAimIcon(t)}},onClicklock:function(){if(!(cc.vv.gameData.GetFreeTime()>0)&&"idle"===cc.vv.gameData.GetSlotState()){var e=cc.vv.gameData.getCollectData();e&&(cc.vv.gameData._serverRawMult=e.min+1,cc.vv.UserManager.setEnterSelectBet(null),cc.vv.gameData.SetBetIdx(e.min+1),cc.vv.gameData.GetSlotsScript()._bottomScript.ShowBetCoin(),Global.dispatchEvent(cc.vv.gameData._EventId.SLOT_TOTALBET_UPDATED,cc.vv.gameData.GetTotalBet()),this.initShow())}},onClickJuanzhou:function(){if(!(SlotsFacade.dm.GetFreeTime()>0)&&SlotsFacade.bottomCmp.GetSpinBtnState()&&!(SlotsFacade.dm.GetAutoModelTime()>0)){var e=cc.find("Canvas/safe_node/map_game");e.active=!0,e.getComponent("LampOfAladdin_Map").enterMap(!1),Global.SlotsSoundMgr.playEffect(this._soundCfg.click)}},lockAniEndCall:function(e,t){"animation3"==(e.animation?e.animation.name:"")&&(cc.find("btn_lock",this.node).active=!1)},onEventChangeBetIdx:function(){this.initShow()},updateCollectProgress:function(e){if(e){var t=e.num/e.total;t=Math.min(t,1),this.showEnergyProgress(t)}},showEnergyProgress:function(e){var t=this.node.getChildByName("masknode"),n=t.getChildByName("bar"),a=n.getChildByName("spine_prgAdd");e>0?(a.active=!0,cc.tween(n).to(.3,{x:-t.width+t.width*e}).start(),this._playNodeSpine(a,"animation",!1)):(n.x=-t.width,a.active=!1)},onEventRefushEnergy:function(){AppLog.log("\u5237\u65b0\u80fd\u91cf");var e=cc.vv.gameData.getCollectData();this.updateCollectProgress(e),this.updateNextAimIcon(e)},updateNextAimIcon:function(e){var t=e.idx,n=cc.find("spr_collect_building",this.node),a={3:"collect_building4",7:"collect_building3",12:"collect_building2",19:"collect_building1"}[t+1],i="base";a||(i="map",a="theme175_map_yuanbao_light"),n.getComponent(cc.Sprite).spriteFrame=cc.vv.gameData.GetAtlasByName(i).getSpriteFrame(a)},_playNodeSpine:function(e,t,n){var a=sp.Skeleton;e&&(e.active=!0,e.getComponent(a).setAnimation(0,t,n))}}),cc._RF.pop()},{}],LampOfAladdin_GameData:[function(e,t,n){"use strict";cc._RF.push(t,"086e9PnyBVOgY+ZugDanNdA","LampOfAladdin_GameData");var a=[3,7,12,19];cc.Class({extends:e("LMSlots_GameData_Base"),properties:{_collectData:null,_collectWildData:null,_isClientOpenCollectEnergy:!0,_isClientOpenCollectWild:!0},reqSubGame:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise(function(a){var i={c:MsgId.SLOT_SUBGAME_DATA,gameid:t._gameId};i.data=n||{},i.data.rtype=e;cc.vv.NetManager.registerMsg(MsgId.SLOT_SUBGAME_DATA,function e(n){cc.vv.NetManager.unregisterMsg(MsgId.SLOT_SUBGAME_DATA,e,!1,t),a(n)},t),cc.vv.NetManager.send(i,!0)})},OnRcvNetSpine:function(e){e.spcode&&967==e.spcode?cc.vv.FloatTip.show("\u6d41\u7a0b\u9519\u8bef\uff01\uff01\uff01"):this._super(e)},SetSubGameData:function(e){this._subGame=e},GetSubGameData:function(){return this._subGame},IsSelectSubGame:function(){var e=this._gameInfo?this._gameInfo.select:this._deskInfo.select;return e&&e.state},getGameInfo:function(){return this._gameInfo},getCollectData:function(){var e=this.getGameInfo();return e?e.collect&&(this._collectData=e.collect):e=this.getDeskInfo(),e&&e.collect&&(this._collectData=e.collect),this._collectData},getCollectWildData:function(){var e=this.getGameInfo();return e||(e=this.getDeskInfo()),e&&e.pool&&(this._collectWildData=e.pool),this._collectWildData},clearCollectData:function(){var e=this.getGameDataInfo();e.collect&&(e.collect.open=0)},clearFreeData:function(){this._gameInfo.allFreeCnt=0},getGameDataInfo:function(){var e=cc.vv.gameData.getGameInfo();return e||((e=cc.vv.gameData.getDeskInfo())||null)},isBigGate:function(e){for(var t,n=0;n<a.length;n++)e==a[n]&&(t=!0);return t},playSpine:function(e,t,n,a){if(e){e.active=!0;var i=e.getComponent(sp.Skeleton);i&&(i.setAnimation(0,t,n),i.setCompleteListener(function(){a&&a()}))}},isFreeTime:function(){var e=this.getGameDataInfo();return e.allFreeCnt>0&&e.freeCnt!=e.allFreeCnt},isFinishFreeTime:function(){var e=this.getGameDataInfo();return e.allFreeCnt>0&&0==e.freeCnt},isEnterFreeGame:function(){var e=this.getGameDataInfo();return e.freeCnt==e.allFreeCnt&&e.allFreeCnt>0},isOpenCollectProgress:function(){var e=this.getGameDataInfo().collect||cc.vv.gameData.getDeskInfo().collect;return e&&this.GetBetIdx()>=e.min&&this._isClientOpenCollectEnergy},setClientOpenCollectEnergy:function(e){this._isClientOpenCollectEnergy=e},isOpenCollectWild:function(){return this._isClientOpenCollectWild},setClientOpenCollectWild:function(e){this._isClientOpenCollectWild=e}}),cc._RF.pop()},{LMSlots_GameData_Base:void 0}],LampOfAladdin_GameWheel:[function(e,t,n){"use strict";function a(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=i(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o,c=!0,r=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return c=e.done,e},e:function(e){r=!0,o=e},f:function(){try{c||null==a.return||a.return()}finally{if(r)throw o}}}}function i(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function c(e,t,n,a,i,o,c){try{var r=e[o](c),s=r.value}catch(e){return void n(e)}r.done?t(s):Promise.resolve(s).then(a,i)}function r(e){return function(){var t=this,n=arguments;return new Promise(function(a,i){var o=e.apply(t,n);function r(e){c(o,a,i,r,s,"next",e)}function s(e){c(o,a,i,r,s,"throw",e)}r(void 0)})}}cc._RF.push(t,"94e31CofXVLI5XlgBK7BMJI","LampOfAladdin_GameWheel");var s={JACKPOT:"theme175_wheel_jackpot",GRAND:"theme175_wheel_jp_0",ULTRA:"theme175_wheel_jp_1",MEGA:"theme175_wheel_jp_2",MAJOR:"theme175_wheel_jp_3",MINOR:"theme175_wheel_jp_4",MINI:"theme175_wheel_jp_5",2:"theme175_wheel_2x",3:"theme175_wheel_3x",5:"theme175_wheel_5x",10:"theme175_wheel_10x",FREE8:"theme175_wheel_freegame8",FREE10:"theme175_wheel_freegame10",FREE15:"theme175_wheel_freegame15",Blue:"theme175_wheel_blue",Black:"theme175_wheel_black",Orange:"theme175_wheel_orange",Gold:"theme175_wheel_gold",Red:"theme175_wheel_red",White:"theme175_wheel_white",Green:"theme175_wheel_green"},l=1,u=2,p=3,m=[3,2,2,1,2,2,3,2,2,1,2,2,3,2,2,1,2,2];cc.Class({extends:cc.Component,properties:{_isInGame:!1,_isAutoRotation:!0,_node_ui_pop:null,_wheelSpineParent:null,_wheel:null,_btnGo:null,_slotsInitPos:null,_itemsList:null,_atlas:null,_interval:0,_propsList:null,_multsList:null,_bToFree:!1,_bReceive:!1},ReconnectNet:function(e,t){this._bReceive||this.enterGame(e,t)},enterGame:function(e,t){var n=this;return r(regeneratorRuntime.mark(function a(){var i,o,c;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n._propsList=e,n._multsList=t,n._bToFree=!1,n._bReceive=!1,cc.vv.gameData.GetSlotsScript()._bottomScript.SetWin(0),Global.SlotsSoundMgr.playBgm(n._soundCfg.wheel_bgm),n.setAutoRotation(!1),n._isInGame=!0,n.scheduleOnce(function(){n._setGrayBgVisible(!0),n._setWildCollectVisible(!1)},.5),n.setCharacterVisible(!1),n._switchScreen(),a.next=13,n.awaitTime(1.5);case 13:return n.panel.active=!0,n.bg.active=!0,Global.SlotsSoundMgr.playEffect("carpet_move"),n.playSpine(cc.find("spine_magic_fog",n._wheelSpineParent)),a.next=19,n.awaitTime(.5);case 19:return n.playSpine(cc.find("ui/spine_wheel_adge",n.node),"animation",!0),n.playSpine(cc.find("ui/spine_light",n.node),"animation",!0),Global.SlotsSoundMgr.playEffect("magic_appear"),a.next=24,n.awaitTime(.5);case 24:return n.playSpine(cc.find("spine_fog_path",n._wheelSpineParent)),n._setAllNotJackpotToBlack(),a.next=28,n._setSlotsVisible(!1);case 28:return n._setAllNotJackpotToGrayMask(),a.next=31,n.awaitTime(1.5);case 31:return a.next=33,n.playSpine(cc.find("spine_disappear_fog",n._wheelSpineParent),"animation1");case 33:return n.playSpine(cc.find("spine_disappear_fog",n._wheelSpineParent),"animation2"),a.next=36,n._setGrayBgVisible(!1);case 36:return a.next=38,n._changeJackpotToPool();case 38:return a.next=40,n.awaitTime(.3);case 40:return n.playSpine(cc.find("spine_wheel_fog",n._wheelSpineParent)),a.next=43,n._showWheelItemsProp();case 43:return a.next=45,n.awaitTime(.3);case 45:return i=!1,a.next=48,cc.vv.gameData.reqSubGame(3);case 48:if(200!=(o=a.sent).code){a.next=66;break}return n._bReceive=!0,c=o.data.info,a.next=54,n._startRotationWheel(o.data.idx-1,!1);case 54:if("free"!=c.type){a.next=64;break}return i=!0,a.next=58,n._showFreeGameStartUIDialouge(c.num);case 58:cc.vv.gameData.SetTotalFree(c.num),cc.vv.gameData.SetFreeTime(c.num),cc.vv.gameData.GetSlotsScript().ShowGameview(!0),n._bToFree=!0,a.next=66;break;case 64:return a.next=66,n._showWinCoinResultUIDialouge(c.num);case 66:return a.next=68,n.exitGameWheel(i);case 68:case"end":return a.stop()}},a)}))()},exitFreeGame:function(e){var t=this;return r(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t._showFreeGameResultUIDialouge(e);case 2:t._hideAllUIDialouge(),Global.SlotsSoundMgr.stopBgm();case 4:case"end":return n.stop()}},n)}))()},exitGameWheel:function(e){var t=this;return r(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.scheduleOnce(r(regeneratorRuntime.mark(function e(){var n,i,o,c,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Global.SlotsSoundMgr.stopBgm(),t._isInGame=!1,t._isAutoRotation=!0,t._setWildCollectVisible(!0),e.next=6,t._setSlotsVisible(!0);case 6:n=a(cc.find("ui",t.node).children);try{for(n.s();!(i=n.n()).done;)"spine"==(o=i.value).name.substr(0,5)&&(o.active=!1)}catch(e){n.e(e)}finally{n.f()}t._hideAllUIDialouge(),t.resetInit(),c=a(t._wheelSpineParent.children);try{for(c.s();!(r=c.n()).done;)r.value.active=!1}catch(e){c.e(e)}finally{c.f()}t.panel.active=!1,t.bg.active=!1;case 14:case"end":return e.stop()}},e)})),.2),!e){n.next=8;break}return t._switchScreen(),n.next=5,t.awaitTime(1.5);case 5:t.setCharacterVisible(!0),n.next=9;break;case 8:t.setCharacterVisible(!0,!0);case 9:SlotsFacade.dm.GetFreeTime()>0&&Global.SlotsSoundMgr.playBgm("free_bgm");case 10:case"end":return n.stop()}},n)}))()},setAutoRotation:function(e){this._isAutoRotation=e},onLoad:function(){this._node_ui_pop=cc.find("Canvas/safe_node/node_ui_pop"),this._wheelSpineParent=cc.find("GameWheelSpine",this._node_ui_pop),this._wheelSpineParent.active=!0,this._atlas=cc.vv.gameData.GetAtlasByName("wheel"),this._wheel=cc.find("ui/wheel",this.node),this._btnSpin=cc.find("ui/btn_go",this.node);var e=cc.find("itemsList/Item",this._wheel);e.active=!1;var t=cc.find("itemListExtra/ItemExtra",this._wheel);t.active=!1,this._itemsList=[];for(var n=0;n<18;n++){var a=cc.instantiate(e);a.active=!0,a.angle=-(20*n+10),a.parent=e.parent;var i=cc.instantiate(t);i.active=!0,i.angle=a.angle,i.parent=t.parent,this._itemsList.push({item:a,mult:i})}this._soundCfg=cc.vv.gameData.getGameCfg().soundCfg,this.panel=this.node.getChildByName("ui"),this.panel.active=!1,this.bg=this.node.getChildByName("bg_wheel"),this.bg.active=!1},start:function(){this.resetInit()},resetInit:function(){this._interval=0,this._btnSpin.getComponent(cc.Button).enabled=!1;var e,t=[],n=0,i=a(m);try{for(i.s();!(e=i.n()).done;){switch(e.value){case l:t.push(["FREE8","FREE10","FREE15"][n]),n++;break;case u:var o=cc.vv.gameData.GetTotalBet()*Global.random(5,375);t.push(o);break;case p:t.push("JACKPOT")}}}catch(e){i.e(e)}finally{i.f()}this.resetWheel(t)},resetWheel:function(e,t){for(var n in this.restoreItems(),e){var a=e[n],i=null;t&&(i=t["idx_"+(parseInt(n)+1)]);var o=this._itemsList[n];this._setItemShowByData(o,a,i)}},restoreItems:function(){var e,t=a(this._itemsList);try{for(t.s();!(e=t.n()).done;){for(var n=e.value,i=n.item,o=1;o<=4;o++)i.getChildByName("props"+o).active=!1;n.mult.active=!1}}catch(e){t.e(e)}finally{t.f()}},update:function(e){this._isAutoRotation&&(this._interval+=e,this._interval>.03&&(this._interval-=.03,this._wheel.angle-=.2))},onBtnSpinClick:function(){this._btnSpin.getComponent(cc.Button).interactable=!1},_startRotationWheel:function(e,t){var n=this;return r(regeneratorRuntime.mark(function a(){var i,o,c,r;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return Global.SlotsSoundMgr.playEffect("magic_stir"),n.playSpine(cc.find("ui/spine_go",n.node)),(i=cc.find("ui/spine_genie_action",n.node)).active=!0,o=i.scaleX,c=i.scaleY,i.scale=0,cc.tween(i).to(.5,{scaleX:o,scaleY:c}).start(),n.playSpine(i,"skill",!0),Global.SlotsSoundMgr.playEffect("wheel_spin"),r=e,n.playSpine(cc.find("ui/spine_boom",n.node)),a.next=14,n._rotateWheelToTarget(r,6,t);case 14:if(Global.SlotsSoundMgr.stopEffectByName("wheel_spin"),!t){a.next=24;break}return a.next=18,n.awaitTime(1);case 18:return n._rotateWheelToTarget(r,0,!1),Global.SlotsSoundMgr.playEffect("wheel_stop"),a.next=22,n.awaitTime(.5);case 22:a.next=25;break;case 24:Global.SlotsSoundMgr.playEffect("wheel_stop");case 25:return n.playSpine(cc.find("ui/spine_win",n.node),"animation",!0),n.playSpine(cc.find("ui/spine_wheel_adge",n.node),"animation2",!0),a.next=29,n.awaitTime(2);case 29:case"end":return a.stop()}},a)}))()},_rotateWheelToTarget:function(e,t,n){var a=this;return r(regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",new Promise(function(){var i=r(regeneratorRuntime.mark(function i(o){var c,r,s,l;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return c=a._wheel,n&&++e>=18&&(e-=18),r=20*e+10,s=(r*=-1)-c.angle,l=t,i.next=8,a.playActions(c,[cc.rotateTo(.5*l+.4,c.angle+360*l+s).easing(cc.easeSineInOut())]);case 8:o();case 9:case"end":return i.stop()}},i)}));return function(e){return i.apply(this,arguments)}}()));case 1:case"end":return i.stop()}},i)}))()},_setItemShowByData:function(e,t,n){var a=this._getPropType(t),i=e.item.getChildByName("props"+a);switch(i.active=!0,a){case l:case p:i.getComponent(cc.Sprite).spriteFrame=this._atlas.getSpriteFrame(s[t]);break;case u:i.getComponent(cc.Label).string=Global.convertNumToShort(parseInt(t),1e3,0)}if(e.item.name=t.toString(),e.item.getChildByName("item_bg").getComponent(cc.Sprite).spriteFrame=this._atlas.getSpriteFrame(s[this._getItemBgColorName(t)]),n){var o=e.mult;o.active=!0,o.getChildByName("mult").getComponent(cc.Sprite).spriteFrame=this._atlas.getSpriteFrame(s[n.toString()])}},_getItemBgColorName:function(e){var t="White";switch(this._getPropType(e)){case l:t="Red";break;case p:t="Gold";break;case u:var n=parseInt(e)/cc.vv.gameData.GetTotalBet();t=n>300?"Orange":n>200?"Blue":this._isInGame?"Green":"White"}return t},_getPropType:function(e){return"string"==typeof e?"FREE"==e.substr(0,4)?l:p:u},_changeJackpotToPool:function(){var e=this;return r(regeneratorRuntime.mark(function t(){var n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:Global.SlotsSoundMgr.playEffect("jp_reset"),n=regeneratorRuntime.mark(function t(n){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(m[n]!=p){t.next=6;break}return a=e._itemsList[n].item,e._propsList&&a.runAction(cc.sequence(cc.delayTime(.3),cc.callFunc(function(){e._setItemShowByData(e._itemsList[n],e._propsList[n])}))),t.next=5,e.playSpine(a.getChildByName("spine_jackpot_change"));case 5:a.getChildByName("spine_jackpot_change").active=!1;case 6:case"end":return t.stop()}},t)}),t.t0=regeneratorRuntime.keys(m);case 3:if((t.t1=t.t0()).done){t.next=8;break}return a=t.t1.value,t.delegateYield(n(a),"t2",6);case 6:t.next=3;break;case 8:case"end":return t.stop()}},t)}))()},_showWheelItemsProp:function(){var e=this;return r(regeneratorRuntime.mark(function t(){var n,a,i,o,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e._propsList){t.next=25;break}Global.SlotsSoundMgr.playEffect("multi_reset"),t.t0=regeneratorRuntime.keys(e._propsList);case 3:if((t.t1=t.t0()).done){t.next=14;break}if(n=t.t1.value,a=e._propsList[n],e._getPropType(a)!=p){t.next=9;break}return t.abrupt("continue",3);case 9:if("Green"!=e._getItemBgColorName(a)){t.next=12;break}return t.delegateYield(regeneratorRuntime.mark(function t(){var i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=e._itemsList[n],e._setItemShowByData(i,a,e._multsList["idx_"+(parseInt(n)+1)]),i.item.getChildByName("black_mask").active=!1,t.next=5,e.playActions(i.item,[cc.delayTime(.1),cc.callFunc(function(){e.playSpine(i.item.getChildByName("spine_green_bg"),"animation2"),i.item.getChildByName("spine_green_bg").active=!1})]);case 5:case"end":return t.stop()}},t)})(),"t2",12);case 12:t.next=3;break;case 14:t.t3=regeneratorRuntime.keys(e._propsList);case 15:if((t.t4=t.t3()).done){t.next=25;break}if(i=t.t4.value,o=e._propsList[i],e._getPropType(o)!=p){t.next=21;break}return t.abrupt("continue",15);case 21:"Green"!=e._getItemBgColorName(o)&&((c=e._itemsList[i]).item.getChildByName("black_mask").active=!1,e._setItemShowByData(c,o)),t.next=15;break;case 25:case"end":return t.stop()}},t)}))()},_setAllNotJackpotToBlack:function(){var e,t=a(this._itemsList);try{for(t.s();!(e=t.n()).done;){var n=e.value;if("JACKPOT"!=n.item.name){var i=n.item.getChildByName("black_mask");i.active=!0,i.opacity=255}}}catch(e){t.e(e)}finally{t.f()}},_setAllNotJackpotToGrayMask:function(){var e,t=a(this._itemsList);try{for(t.s();!(e=t.n()).done;){var n=e.value;if("JACKPOT"!=n.item.name){var i=n.item.getChildByName("black_mask");cc.tween(i).to(.8,{opacity:180}).start()}}}catch(e){t.e(e)}finally{t.f()}},setCharacterVisible:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=cc.find("Canvas/safe_node/character");if(e&&t){var a=n.position;n.x=a.x-cc.winSize.width,n.active=e,cc.tween(n).to(.5,{position:a},{easing:"easeIn"}).start()}else n.active=e},_setSlotsVisible:function(e){var t=this;return r(regeneratorRuntime.mark(function n(){var a,i,o,c,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if((a=cc.find("Canvas/safe_node/slots")).active!=e){n.next=3;break}return n.abrupt("return");case 3:if((i=cc.find("Canvas/safe_node/slots/node_energy")).active=!1,cc.find("Canvas/safe_node/LMSlots_PrizePool_1").active=e,o=cc.v2(0,-1e3),t._slotsInitPos||(t._slotsInitPos=a.position),c=e?o:t._slotsInitPos,r=e?t._slotsInitPos:o,!e){n.next=17;break}t._bToFree||(i.active=!0),a.position=r,a.active=!0,n.next=21;break;case 17:return a.position=c,n.next=20,t.playActions(a,[cc.moveTo(1,r).easing(cc.easeSineIn())]);case 20:a.active=!1;case 21:case"end":return n.stop()}},n)}))()},_setWildCollectVisible:function(e){cc.find("Canvas/safe_node/slots/spine_collect_wild").active=e},_setGrayBgVisible:function(e){var t=e?0:200,n=e?200:0,a=cc.find("grayLayer",this._wheelSpineParent);return a.active=!0,a.opacity=t,new Promise(function(t){cc.tween(a).to(1,{opacity:n}).call(function(){e||(a.active=!1),t()}).start()})},_switchScreen:function(){var e=this;return r(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._bToFree?Global.SlotsSoundMgr.playEffect(e._soundCfg.transition1):Global.SlotsSoundMgr.playEffect(e._soundCfg.transition_2),(n=cc.find("Canvas/safe_node/spine_transition")).parent.active=!0,t.next=5,e.playSpine(n,"skill_1");case 5:n.active=!1;case 6:case"end":return t.stop()}},t)}))()},_showFreeGameStartUIDialouge:function(e){var t=this;this._hideAllUIDialouge();var n=cc.find("uiFreeGameTri",this._node_ui_pop);n.active=!0;var a=cc.find("spine",n);a.active=!0;var i=cc.find("btn",n);i.getComponent(cc.Button).enabled=!1;var o=cc.find("times",n);o.getComponent(cc.Label).string=e;var c=this;return new Promise(function(){var e=r(regeneratorRuntime.mark(function e(s){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Global.SlotsSoundMgr.stopBgm(),Global.SlotsSoundMgr.playEffect(t._soundCfg.fg_popup),o.scale=0,cc.tween(o).delay(.5).to(.3,{scale:1.3}).to(.2,{scale:1}).start(),cc.tween(i).to(.3,{scale:1.3}).to(.2,{scale:1}).start(),e.next=7,t.playSpine(a,"animation1",!1,function(){c.playSpine(a,"animation1_1",!0)});case 7:i.getComponent(cc.Button).enabled=!0,cc.vv.gameData.isNeedAutoPlay()&&(i.stopAllActions(),cc.tween(i).delay(cc.vv.gameData.getAutoPlayTime()).call(r(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.getComponent(cc.Button).enabled=!1,cc.tween(o).to(.3,{scale:1.3}).to(.2,{scale:0}).start(),cc.tween(i).to(.3,{scale:1.3}).to(.2,{scale:0}).start(),Global.SlotsSoundMgr.playEffect(t._soundCfg.fg_popclose),e.next=6,t.playSpine(a,"animation1_2");case 6:i.off("click"),n.active=!1,s();case 9:case"end":return e.stop()}},e)}))).start()),Global.btnClickEvent(i,r(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.stopAllActions(),i.getComponent(cc.Button).enabled=!1,Global.SlotsSoundMgr.playEffect(t._soundCfg.click),cc.tween(o).to(.3,{scale:1.3}).to(.2,{scale:0}).start(),cc.tween(i).to(.3,{scale:1.3}).to(.2,{scale:0}).start(),Global.SlotsSoundMgr.playEffect(t._soundCfg.fg_popclose),e.next=8,t.playSpine(a,"animation1_2");case 8:i.off("click"),n.active=!1,s();case 11:case"end":return e.stop()}},e)})),t);case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())},_showFreeGameResultUIDialouge:function(e){var t=this;return r(regeneratorRuntime.mark(function n(){var a,i,o,c,s,l,u;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t._hideAllUIDialouge(),(a=cc.find("uiFreeGameEnd",t._node_ui_pop)).active=!0,(i=cc.find("spine",a)).active=!0,o=45,(c=cc.find("uiResult",a)).active=!0,c.y=-o,c.opacity=0,(s=cc.find("btn",c)).getComponent(cc.Button).enabled=!1,(l=cc.find("lblWinCoin",c)).active=!0,l.getComponent(cc.Label).string="",u=t,n.abrupt("return",new Promise(function(){var n=r(regeneratorRuntime.mark(function n(p){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return Global.SlotsSoundMgr.stopBgm(),Global.SlotsSoundMgr.playEffect(t._soundCfg.fg_popup),cc.tween(c).to(.4,{y:0,opacity:255}).start(),t.playSpine(i,"animation2",!1,function(){u.playSpine(i,"animation2_1",!0)}),n.next=6,cc.vv.gameData.awaitTime(.4);case 6:l.active=!0,Global.doRoallNumEff(l,0,e,2,function(){s.getComponent(cc.Button).enabled=!0},null,0,!0),cc.vv.gameData.isNeedAutoPlay()&&(s.stopAllActions(),cc.tween(s).delay(cc.vv.gameData.getAutoPlayTime()).call(r(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s.getComponent(cc.Button).enabled=!1,cc.tween(c).to(.4,{y:-o,opacity:0}).start(),Global.SlotsSoundMgr.playEffect(t._soundCfg.fg_popclose),e.next=5,t.playSpine(i,"animation2_2");case 5:return s.off("click"),a.active=!1,e.next=9,t.awaitTime(.2);case 9:return cc.vv.gameData.GetSlotsScript().ShowGameview(!1),t.setCharacterVisible(!1),t._switchScreen(),e.next=14,t.awaitTime(1.3);case 14:t.setCharacterVisible(!0),p();case 16:case"end":return e.stop()}},e)}))).start()),Global.btnClickEvent(s,r(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s.stopAllActions(),s.getComponent(cc.Button).enabled=!1,Global.SlotsSoundMgr.playEffect(t._soundCfg.click),cc.tween(c).to(.4,{y:-o,opacity:0}).start(),Global.SlotsSoundMgr.playEffect(t._soundCfg.fg_popclose),e.next=7,t.playSpine(i,"animation2_2");case 7:return s.off("click"),a.active=!1,e.next=11,t.awaitTime(.2);case 11:return cc.vv.gameData.GetSlotsScript().ShowGameview(!1),t.setCharacterVisible(!1),t._switchScreen(),e.next=16,t.awaitTime(1.3);case 16:t.setCharacterVisible(!0),p();case 18:case"end":return e.stop()}},e)})),t);case 10:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()));case 17:case"end":return n.stop()}},n)}))()},_showWinCoinResultUIDialouge:function(e){var t=this;return r(regeneratorRuntime.mark(function n(){var a,i,o,c,s,l;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t._hideAllUIDialouge(),(a=cc.find("uiWinCoinDialouge",t._node_ui_pop)).active=!0,(i=cc.find("spine",a)).active=!0,(o=cc.find("uiResult",a)).active=!0,o.y=-100,o.opacity=0,(c=cc.find("btn",o)).getComponent(cc.Button).enabled=!1,(s=cc.find("lblWinCoin",o)).active=!0,s.getComponent(cc.Label).string="",l=t,n.abrupt("return",new Promise(function(){var n=r(regeneratorRuntime.mark(function n(u){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return Global.SlotsSoundMgr.stopBgm(),Global.SlotsSoundMgr.playEffect(t._soundCfg.wheel_popup),cc.tween(o).to(.4,{y:0,opacity:255}).start(),t.playSpine(i,"animation1",!1,function(){l.playSpine(i,"animation1_1",!0)}),n.next=6,cc.vv.gameData.awaitTime(.4);case 6:Global.doRoallNumEff(s,0,e,2,function(){c.getComponent(cc.Button).enabled=!0},null,0,!0),c.getComponent(cc.Button).enabled=!0,cc.vv.gameData.GetSlotsScript()._bottomScript.SetWin(e),cc.vv.gameData.AddCoin(e),cc.vv.gameData.GetSlotsScript()._topScript.ShowCoin(),cc.vv.gameData.isNeedAutoPlay()&&(c.stopAllActions(),cc.tween(c).delay(cc.vv.gameData.getAutoPlayTime()).call(r(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c.getComponent(cc.Button).enabled=!1,Global.SlotsSoundMgr.playEffect(t._soundCfg.wheel_popclose),cc.tween(o).to(.4,{y:-100,opacity:0}).start(),e.next=5,t.playSpine(i,"animation1_2");case 5:c.off("click"),a.active=!1,u();case 8:case"end":return e.stop()}},e)}))).start()),Global.btnClickEvent(c,r(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c.stopAllActions(),c.getComponent(cc.Button).enabled=!1,Global.SlotsSoundMgr.playEffect(t._soundCfg.click),Global.SlotsSoundMgr.playEffect(t._soundCfg.wheel_popclose),cc.tween(o).to(.4,{y:-100,opacity:0}).start(),e.next=7,t.playSpine(i,"animation1_2");case 7:c.off("click"),a.active=!1,u();case 10:case"end":return e.stop()}},e)})),t);case 13:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()));case 16:case"end":return n.stop()}},n)}))()},_hideAllUIDialouge:function(){cc.find("uiFreeGameTri",this._node_ui_pop).active=!1,cc.find("uiFreeGameEnd",this._node_ui_pop).active=!1,cc.find("uiWinCoinDialouge",this._node_ui_pop).active=!1},playSpine:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"animation",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new Promise(function(i){e?(e.active=!0,AppLog.log("\u64ad\u653e\u8282\u70b9["+e.parent.name+"/"+e.name+"]\u7684spine\u52a8\u4f5c: "+t),e.getComponent(sp.Skeleton).setAnimation(0,t,n),n?i():e.getComponent(sp.Skeleton).setCompleteListener(function(){a&&a(),i()})):(a&&a(),i())})},playActions:function(e,t){return new Promise(function(n){t.push(cc.callFunc(function(){n()})),e.active=!0,e.runAction(cc.sequence(t))})},awaitTime:function(e){var t=this;return new Promise(function(n){t.scheduleOnce(function(){n()},e)})}}),cc._RF.pop()},{}],LampOfAladdin_Logic:[function(e,t,n){"use strict";cc._RF.push(t,"79f09khnypKEboWdf8bnqJA","LampOfAladdin_Logic"),cc.Class({extends:e("LMSlots_Logic_Base"),properties:{},onLoad:function(){window.SlotsFacade=this,this.dm=cc.vv.gameData,this.InitCommComponent(),this.mainPanel=cc.find("safe_node",this.node),this.energyCollect=cc.find("slots/node_energy",this.mainPanel).getComponent("LampOfAladdin_Energy"),this.energyFreeGame=cc.find("node_energy_free_game",this.mainPanel).getComponent("LampOfAladdin_Energy_FreeGame"),this.gameWheel=cc.find("gameWheel",this.mainPanel).getComponent("LampOfAladdin_GameWheel"),this.map=cc.find("map_game",this.mainPanel).getComponent("LampOfAladdin_Map"),this.pickBonus=cc.find("gamePickBonus",this.mainPanel).getComponent("LampOfAladdin_PickBonus"),this.topCmp=cc.vv.gameData.GetTopScript(),this.bottomCmp=cc.vv.gameData.GetBottomScript(),this.slots=cc.vv.gameData.GetSlotsScript()},onDestroy:function(){window.SlotsFacade=null,this.dm=null},delayTime:function(e){var t=this;return new Promise(function(n,a){t.scheduleOnce(function(){n()},e)})},start:function(){this._super()}}),cc._RF.pop()},{LMSlots_Logic_Base:void 0}],LampOfAladdin_Map:[function(e,t,n){"use strict";cc._RF.push(t,"0bf8f4bXplPlbm1dI1mXm1a","LampOfAladdin_Map"),cc.Class({extends:cc.Component,properties:{yb_grey:cc.SpriteFrame,yb_light:cc.SpriteFrame},onLoad:function(){this._entermap=!1,this._lay_bg=cc.find("lay_bg",this.node),this._lay_bg.active=!1,this._node_mask=cc.find("node_mask",this.node),this._map=cc.find("map",this._node_mask),this._moveUser=cc.find("user_sp",this._map);var e=cc.find("map/btn_back",this._node_mask);Global.btnClickEvent(e,this.onClickBack,this),this._soundCfg=cc.vv.gameData.getGameCfg().soundCfg},showMapDetail:function(){var e=this,t=cc.vv.gameData.getCollectData().idx,n=cc.find("yuanbaolight",this._map);n.active=!1;for(var a=1;a<=19;a++){var i=cc.find("s_"+a,this._map);if(i)if(cc.vv.gameData.isBigGate(a)){var o=i.getChildByName("spine");a>t?o.active=!1:a!=t||this._bTrigger||(this._moveUser.position=i.position,this._moveUser.getComponent(sp.Skeleton).setAnimation(0,"animation2",!0),o.active=!0,o.getComponent(sp.Skeleton).setAnimation(0,"animation"+a+"_1",!0))}else a<t?i.getComponent(cc.Sprite).spriteFrame=this.yb_light:a==t?this._bTrigger||(this._moveUser.position=i.position,this._moveUser.getComponent(sp.Skeleton).setAnimation(0,"animation2",!0),this.showSmallGateLight(i,n),i.getComponent(cc.Sprite).spriteFrame=this.yb_light):i.getComponent(cc.Sprite).spriteFrame=this.yb_grey}if(this._bTrigger){this._moveUser.position=cc.find("s_"+(t-1),this._map).position,cc.tween(this._moveUser).to(.5,{position:cc.find("s_"+t,this._map).position}).start();var c=this._moveUser.getComponent(sp.Skeleton);c.setAnimation(0,"animation",!1),c.setCompleteListener(function(){c.setAnimation(0,"animation2",!0),c.setCompleteListener(null),e.pathMoveFinish(t,n,t),e.delayShowExistMap()}),cc.vv.gameData.isBigGate(t)?19==t?Global.SlotsSoundMgr.playEffect(this._soundCfg.meter_full):Global.SlotsSoundMgr.playEffect(this._soundCfg.map_node):Global.SlotsSoundMgr.playEffect(this._soundCfg.map_move)}},delayShowExistMap:function(){var e=this;this._bTrigger&&this.scheduleOnce(function(){e.existMap(e.showSubGame(e))},2)},ReconnectNet:function(e){},enterMap:function(e){var t=this;this._entermap||(this._entermap=!0,cc.vv.gameData.GetSlotsScript()._bottomScript.ShowBtnsByState("moveing_1"),this._bTrigger=e,this.node.active=!0,this._node_mask.active=!0,this._lay_bg.active=!0,this._map.y=2e3,Global.SlotsSoundMgr.playEffect(this._soundCfg.map_open),cc.tween(this._map).to(.3,{y:0}).call(function(){t.showMapDetail();var e=cc.find("map/btn_back",t._node_mask);e.active=!t._bTrigger,e.scale=0,e.active&&cc.tween(e).delay(.1).to(.2,{scale:1.3}).to(.2,{scale:1}).start()}).start())},existMap:function(e){var t=this;Global.SlotsSoundMgr.playEffect(this._soundCfg.map_close),cc.tween(this._map).to(.3,{position:cc.v2(0,2e3)}).call(function(){t._lay_bg.active=!1,t._node_mask.active=!1,t.node.active=!1,t._entermap=!1,e&&e()}).start()},onClickBack:function(){var e=this;Global.SlotsSoundMgr.playEffect(this._soundCfg.click);var t=cc.find("map/btn_back",this._node_mask);t.getComponent(cc.Button).enabled=!1,cc.tween(t).to(.1,{scale:1.3}).to(.2,{scale:0}).call(function(){t.getComponent(cc.Button).enabled=!0,e.existMap(function(){cc.vv.gameData.GetSlotsScript()._bottomScript.ShowBtnsByState("idle")})}).start()},pathMoveFinish:function(e,t,n){var a=cc.find("s_"+e,this._map);cc.vv.gameData.isBigGate(e)?this.openBigGate(a,n):this.openSmallGate(a,t)},showSmallGateLight:function(e,t){t.position=t.parent.convertToNodeSpaceAR(e.convertToWorldSpaceAR(cc.v2(0,0))),t.active=!0,t.getComponent(sp.Skeleton).setAnimation(0,"animation1_1",!0)},openBigGate:function(e,t){var n=e.getChildByName("spine").getComponent(sp.Skeleton);n.setAnimation(0,"animation"+t,!1),n.setCompleteListener(function(){n.setAnimation(0,"animation"+t+"_1",!0),n.setCompleteListener(null)})},openSmallGate:function(e,t){e.getComponent(cc.Sprite).spriteFrame=this.yb_light,t.position=t.parent.convertToNodeSpaceAR(e.convertToWorldSpaceAR(cc.v2(0,0))),t.active=!0;var n=t.getComponent(sp.Skeleton);n.setAnimation(0,"animation1",!1),n.setCompleteListener(function(){n.setAnimation(0,"animation1_1",!0),n.setCompleteListener(null)})},showSubGame:function(e){var t=cc.vv.gameData.getCollectData();if(t){var n=t.open;if(AppLog.log("\u663e\u793a\u5b50\u6e38\u620f:"+n),2==n)cc.find("Canvas/safe_node/node_energy_free_game").active=!0,SlotsFacade.energyFreeGame.enterFreeGame(t);else if(1==n){cc.vv.gameData.GetSlotsScript()._bottomScript.ShowBtnsByState("moveing_1");var a=cc.find("Canvas/safe_node/LMSlots_Subgame777");a.active=!0,a.getComponent("LMSlots_Subgame777").showEnter(t.bet)}cc.vv.gameData.clearCollectData()}}}),cc._RF.pop()},{}],LampOfAladdin_PickBonus:[function(e,t,n){"use strict";function a(e,t,n,a,i,o,c){try{var r=e[o](c),s=r.value}catch(e){return void n(e)}r.done?t(s):Promise.resolve(s).then(a,i)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(i,o){var c=e.apply(t,n);function r(e){a(c,i,o,r,s,"next",e)}function s(e){a(c,i,o,r,s,"throw",e)}r(void 0)})}}function o(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=c(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,o=!0,r=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){r=!0,i=e},f:function(){try{o||null==a.return||a.return()}finally{if(r)throw i}}}}function c(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}cc._RF.push(t,"aa0c4nXFUhPU42Z484urmdv","LampOfAladdin_PickBonus");var s=function(e,t,n){var a=this;this.node=e,this.atlas=t,this.owner=n,this.jackpotIdx=0,this.bottle=cc.find("bottle",this.node),this.jackpot=cc.find("jackpot",this.node),this.spine_click=cc.find("spine_click",this.node),this.spine_loop=cc.find("spine_loop",this.node),this.spine_bird_show=cc.find("spine_bird_show",this.node),this.spine_bird=cc.find("spine_bird_fly",this.node),this.spine_bottle_disappear=cc.find("spine_bottle_disappear",this.node),this.resetInit=function(){var e,t=o(a.node.children);try{for(t.s();!(e=t.n()).done;){e.value.active=!1}}catch(e){t.e(e)}finally{t.f()}a.bottle.active=!0,a.setJackpotIdx(0),a.setClickEnable(!0),a.setGray(!1)},this.restoreByData=function(e){a.setClickEnable(!1),a.setJackpotIdx(e.localType),e.localType&&(7==e.localType?(a.owner.playSpine(a.spine_bird_show,"animation",!0),a.owner.playSpine(a.spine_bird,"animation",!0),a.jackpot.active=!1):(a.owner.scheduleOnce(function(){a.owner.playSpine(a.spine_loop,"animation"+a.jackpotIdx,!0)},1),a.jackpot.getComponent(cc.Sprite).spriteFrame=a.atlas.getSpriteFrame("pick_jp_"+a.jackpotIdx),a.jackpot.active=!0,a.jackpot.scale=1))},this.setJackpotIdx=function(e){a.jackpotIdx=e,7==e?(a.bottle.getComponent(cc.Sprite).spriteFrame=a.atlas.getSpriteFrame("pick_niao"),a.bottle.active=!0):a.bottle.getComponent(cc.Sprite).spriteFrame=a.atlas.getSpriteFrame("pick_deng")},this.setClickCallback=function(e){a.node.off("click"),Global.btnClickEvent(a.node,function(){a.setClickEnable(!1),e()},a)},this.setClickEnable=function(e){a.node.getComponent(cc.Button).interactable=e},this.isClickEnable=function(){return a.node.getComponent(cc.Button).interactable},this.setGray=function(e){var t,n=e?new cc.Color(80,80,80,255):cc.Color.WHITE,i=o(a.node.children);try{for(i.s();!(t=i.n()).done;){t.value.color=n}}catch(e){i.e(e)}finally{i.f()}},this.playJackpotDisappear=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];a.jackpot.active=!0,a.jackpot.getComponent(cc.Sprite).spriteFrame=a.atlas.getSpriteFrame("pick_jp_"+a.jackpotIdx),e?cc.tween(a.jackpot).call(function(){a.jackpot.scale=0}).to(.3,{scale:1.2}).to(.15,{scale:1}).start():a.jackpot.scale=1},this.playItemLock=function(){var e=i(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setJackpotIdx(t),a.owner.scheduleOnce(function(){a.playJackpotDisappear(),a.owner.playSpine(a.spine_loop,"animation"+t,!0)},.5),e.next=4,a.owner.playSpine(a.spine_click,"animation"+t);case 4:return e.next=6,a.owner.awaitTime(.5);case 6:a.jackpot.color=new cc.Color(80,80,80,255),a.spine_loop.active=!1,a.spine_click.active=!1,a.bottle.active=!1,a.owner.playSpine(a.spine_bottle_disappear);case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),this.playOpenItem=function(){var e=i(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setJackpotIdx(t),a.owner.scheduleOnce(function(){a.playJackpotDisappear(),a.owner.playSpine(a.spine_loop,"animation"+t,!0)},.5),e.next=4,a.owner.playSpine(a.spine_click,"animation"+t);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),this.playShowBird=function(){a.jackpot.active=!1,a.bottle.active=!1,a.owner.playSpine(a.spine_bird_show,"animation",!0),a.owner.playSpine(a.spine_bird,"animation",!0)}};cc.Class({extends:cc.Component,properties:{_uiStart:null,_uiMain:null,_uiResult:null,_itemsList:null,_jackpotList:null,_subgameInfo:null},onLoad:function(){this._soundCfg=cc.vv.gameData.getGameCfg().soundCfg,this._slot=cc.find("Canvas/safe_node/slots"),this._uiStart=cc.find("uiStart",this.node),this._uiResult=cc.find("uiResult",this.node),this._uiQp=cc.find("uiQp",this.node),this._uiQp.active=!1,this._uiMain=cc.find("uiMain",this.node),this._itemsList=[];var e=cc.vv.gameData.GetAtlasByName("pick"),t=cc.find("itemListBg/List",this._uiMain),n=cc.find("ItemTemplate",t);n.active=!1;for(var a=0;a<20;a++){var i=cc.instantiate(n);i.active=!0,i.name=a.toString(),i.parent=t,this._itemsList.push(new s(i,e,this))}this._jackpotList=[];var c,r=o(cc.find("Canvas/safe_node/LMSlots_PrizePool_1").children);try{for(r.s();!(c=r.n()).done;){var l=c.value;this._jackpotList.push(l)}}catch(e){r.e(e)}finally{r.f()}},ReconnectNet:function(e,t){this._subgameInfo&&this._subgameInfo.endFlag||this.enterGame(e,t)},enterGame:function(e,t){var n=this;return i(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(n._subgameInfo=e,cc.vv.gameData.GetSlotsScript()._bottomScript.ShowBtnsByState("moveing_1"),Global.SlotsSoundMgr.playBgm(n._soundCfg.pick_bgm),n._resetInit(),!t){a.next=8;break}n._restoreByServerData(),a.next=12;break;case 8:return a.next=10,n._playWildCollectSuccess();case 10:return a.next=12,n._popStartDialuage();case 12:return a.next=14,n._showMain();case 14:return a.next=16,n._showResultDialouge(n._subgameInfo.coin);case 16:return a.next=18,n.exitGame();case 18:case"end":return a.stop()}},a)}))()},exitGame:function(){var e=this;return i(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){var n=cc.vv.gameData.getCollectWildData();n&&(n.num=0,Global.dispatchEvent(cc.vv.gameData._EventId.SLOT_REFUSH_COLLECT_WILD_PROGRESS)),cc.vv.gameData.GetSlotsScript()._bottomScript.ShowBtnsByState("idle"),e._resetInit(),Global.SlotsSoundMgr.stopBgm(),cc.vv.gameData.GetSlotsScript().ShowBottomWin(e._subgameInfo.coin,e._subgameInfo.coin,!0,function(){t()})}));case 1:case"end":return t.stop()}},t)}))()},start:function(){},_resetInit:function(){var e,t=o(this.node.children);try{for(t.s();!(e=t.n()).done;){e.value.active=!1}}catch(e){t.e(e)}finally{t.f()}var n,a=o(this._jackpotList);try{for(a.s();!(n=a.n()).done;){var i=n.value;i.getChildByName("spine_jackpot_disappear").active=!1,i.getChildByName("spine_jackpot_win").active=!1,i.color=cc.Color.WHITE;var c,r=o(i.children);try{for(r.s();!(c=r.n()).done;){c.value.color=cc.Color.WHITE}}catch(e){r.e(e)}finally{r.f()}}}catch(e){a.e(e)}finally{a.f()}var s,l=o(this._itemsList);try{for(l.s();!(s=l.n()).done;){s.value.resetInit()}}catch(e){l.e(e)}finally{l.f()}},_restoreByServerData:function(){for(var e=this._subgameInfo.pick,t=1;t<=20;t++){var n=e["idx_"+t];if(n.state)n.localType=this._convertServerType(n.type),this._itemsList[t-1].restoreByData(n)}var a=this._getBirdNum();if(a>0)for(var i=1;i<=a;i++){var c=this._jackpotList[6-i];c.color=new cc.Color(80,80,80,255);var r,s=o(c.children);try{for(s.s();!(r=s.n()).done;){r.value.color=new cc.Color(80,80,80,255)}}catch(e){s.e(e)}finally{s.f()}}},_getBirdNum:function(){for(var e=0,t=this._subgameInfo.pick,n=1;n<=20;n++){7==t["idx_"+n].type&&e++}return e},_playWildCollectSuccess:function(){var e=this;return i(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Global.SlotsSoundMgr.playEffect(e._soundCfg.pick_congratulate),n=cc.find("Canvas/safe_node/slots/spine_collect_wild/spine2"),t.next=4,e.playSpine(n);case 4:n.active=!1;case 5:case"end":return t.stop()}},t)}))()},_showMain:function(){var e=this;return i(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._playTransition(),t.next=3,cc.vv.gameData.awaitTime(2.2);case 3:return e._uiMain.active=!0,e._slot.active=!1,n=e,t.abrupt("return",new Promise(function(){var t=i(regeneratorRuntime.mark(function t(a,c){var r,s,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e._pickSuccess=a,r=o(e._itemsList);try{for(l=function(){var e=s.value;e.setClickCallback(i(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n.clickItemfunc(e);case 1:case"end":return t.stop()}},t)})))},r.s();!(s=r.n()).done;)l()}catch(e){r.e(e)}finally{r.f()}n.setAutoPlay();case 4:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()));case 7:case"end":return t.stop()}},t)}))()},clickItemfunc:function(e){var t=this;return i(regeneratorRuntime.mark(function n(){var a,i,c,r,s,l,u,p,m;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t._itemsList.forEach(function(e){e.node.stopAllActions()}),t._setUnSelectItemsClickEnable(!1),n.next=4,cc.vv.gameData.reqSubGame(4,{idx:parseInt(e.node.name)+1});case 4:if(200!==(a=n.sent).code){n.next=39;break}if(i=a.data,t._subgameInfo=i,c=t._convertServerType(i.type),e.setJackpotIdx(c),t.scheduleOnce(function(){e.bottle.active=!1},.3),7!=c){n.next=25;break}return Global.SlotsSoundMgr.playEffect(t._soundCfg.lamp_bird),e.playShowBird(),n.next=16,t.awaitTime(.6);case 16:if(r=t._getBirdNum(),s=7-r,t._subgameInfo.minTypeIdxs){l=o(t._subgameInfo.minTypeIdxs);try{for(l.s();!(u=l.n()).done;)p=u.value,m=p-1,t._itemsList[m].playItemLock(s)}catch(e){l.e(e)}finally{l.f()}Global.SlotsSoundMgr.playEffect(t._soundCfg.lamp_disappear)}return n.next=21,t.awaitTime(.6);case 21:return n.next=23,t._playJackpotDisappearEffect(parseInt(e.node.name),s);case 23:n.next=28;break;case 25:return Global.SlotsSoundMgr.playEffect(t._soundCfg.lamp_click),n.next=28,e.playOpenItem(c);case 28:if(!i.endFlag){n.next=35;break}return t._playWinEffect(c),n.next=32,t.awaitTime(2);case 32:t._pickSuccess&&(t._pickSuccess(),t._pickSuccess=null),n.next=37;break;case 35:t._setUnSelectItemsClickEnable(!0),t.setAutoPlay();case 37:n.next=40;break;case 39:AppLog.warn("\u8fd4\u56de\u6570\u636e\u9519\u8bef!");case 40:case"end":return n.stop()}},n)}))()},setAutoPlay:function(){for(var e=[],t=0;t<this._itemsList.length;t++)this._itemsList[t].isClickEnable()&&e.push(this._itemsList[t]);var n=Global.random(0,e.length-1),a=this;cc.vv.gameData.checkAutoPlay(e[n].node,function(){a.clickItemfunc(e[n])})},_convertServerType:function(e){return 7==e?e:7-e},_setUnSelectItemsClickEnable:function(e){var t,n=o(this._itemsList);try{for(n.s();!(t=n.n()).done;){var a=t.value;0==a.jackpotIdx&&a.setClickEnable(e)}}catch(e){n.e(e)}finally{n.f()}},_showUnSelectItems:function(){var e,t=o(this._itemsList);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(0==n.jackpotIdx){var a=this._subgameInfo.pick["idx_"+(parseInt(n.node.name)+1)];a.localType=this._convertServerType(a.type),n.setJackpotIdx(a.localType),7!=a.localType&&n.playJackpotDisappear(!1),n.setGray(!0)}}}catch(e){t.e(e)}finally{t.f()}},_playWinEffect:function(e){var t,n=o(this._itemsList);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.jackpotIdx==e&&this.playSpine(a.spine_loop,"animation"+a.jackpotIdx+"_1",!0)}}catch(e){n.e(e)}finally{n.f()}this._showUnSelectItems(),this._playJackpotWinEffect(e)},_playJackpotWinEffect:function(e){this._jackpotList[e-1].getChildByName("spine_jackpot_win").active=!0,Global.SlotsSoundMgr.playEffect(this._soundCfg.jp_congratulate)},_playJackpotDisappearEffect:function(e,t){var n=this;return i(regeneratorRuntime.mark(function a(){var i,c,r,s;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return i=n._jackpotList[t-1],(c=cc.find("particle_eff",n._uiMain)).active=!0,c.position=n._convertNodePosToLocalPos(n._itemsList[e].node,n._uiMain),c.getComponent(cc.ParticleSystem).resetSystem(),a.next=8,n.playActions(c,[cc.moveTo(.5,n._convertNodePosToLocalPos(i,n._uiMain))]);case 8:i.getChildByName("spine_jackpot_disappear").active=!0,i.color=new cc.Color(80,80,80,255),r=o(i.children);try{for(r.s();!(s=r.n()).done;)s.value.color=new cc.Color(80,80,80,255)}catch(e){r.e(e)}finally{r.f()}return a.next=14,n.playSpine(i.getChildByName("spine_jackpot_disappear"),"animation"+t);case 14:case"end":return a.stop()}},a)}))()},_convertNodePosToLocalPos:function(e,t){return t.convertToNodeSpaceAR(e.parent.convertToWorldSpaceAR(e.position))},_popStartDialuage:function(){var e=this;return i(regeneratorRuntime.mark(function t(){var n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._uiStart.active=!0,(n=cc.find("spine_bg",e._uiStart)).active=!0,(a=cc.find("btn_start",e._uiStart)).getComponent(cc.Button).enabled=!1,t.abrupt("return",new Promise(function(){var t=i(regeneratorRuntime.mark(function t(o){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return cc.tween(a).to(.3,{scale:1.3}).to(.2,{scale:1}).start(),t.next=3,e.playSpine(n,"animation1");case 3:return a.getComponent(cc.Button).enabled=!0,t.next=6,e.playSpine(n,"animation1_1",!0);case 6:cc.vv.gameData.isNeedAutoPlay()&&(a.stopAllActions(),cc.tween(a).delay(cc.vv.gameData.getAutoPlayTime()).call(i(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a.getComponent(cc.Button).enabled=!1,t.next=3,e.playSpine(n,"animation1_2");case 3:a.off("click"),e._uiStart.active=!1,o();case 6:case"end":return t.stop()}},t)}))).to(.3,{scale:1.3}).to(.2,{scale:0}).start()),Global.btnClickEvent(a,i(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a.stopAllActions(),Global.SlotsSoundMgr.playEffect(e._soundCfg.click),a.getComponent(cc.Button).enabled=!1,cc.tween(a).to(.3,{scale:1.3}).to(.2,{scale:0}).start(),t.next=6,e.playSpine(n,"animation1_2");case 6:a.off("click"),e._uiStart.active=!1,o();case 9:case"end":return t.stop()}},t)})),e);case 8:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 6:case"end":return t.stop()}},t)}))()},_playTransition:function(){var e=this;return i(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Global.SlotsSoundMgr.playEffect(e._soundCfg.transition2),e._uiQp.active=!0,n=cc.find("spine_transition",e._uiQp),t.next=5,e.playSpine(n,"animation");case 5:e._uiQp.active=!1;case 6:case"end":return t.stop()}},t)}))()},_showResultDialouge:function(e){var t=this;return i(regeneratorRuntime.mark(function n(){var a,o,c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t._uiResult.active=!0,(a=cc.find("spine_bg",t._uiResult)).active=!0,(o=cc.find("btn_collect",t._uiResult)).getComponent(cc.Button).enabled=!1,(c=cc.find("lblWinCoin",t._uiResult)).active=!0,c.scale=1,c.getComponent(cc.Label).string="",n.abrupt("return",new Promise(function(){var n=i(regeneratorRuntime.mark(function n(r){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return Global.SlotsSoundMgr.playEffect(t._soundCfg.pick_popup),cc.tween(o).to(.3,{scale:1.3}).to(.2,{scale:1}).start(),n.next=4,t.playSpine(a,"animation2");case 4:t.playSpine(a,"animation2_1",!0),Global.doRoallNumEff(c,0,e,2,function(){o.getComponent(cc.Button).enabled=!0,cc.vv.gameData.AddCoin(e)},null,0,!0),cc.vv.gameData.isNeedAutoPlay()&&(o.stopAllActions(),cc.tween(o).delay(cc.vv.gameData.getAutoPlayTime()).call(i(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o.getComponent(cc.Button).enabled=!1,Global.SlotsSoundMgr.playEffect(t._soundCfg.pick_popclose),cc.tween(c).to(.3,{scale:1.3}).to(.2,{scale:0}).start(),e.next=5,t.playSpine(a,"animation2_2");case 5:return o.off("click"),t._uiResult.active=!1,t.scheduleOnce(function(){t._uiMain.active=!1,t._slot.active=!0},2.2),e.next=10,t._playTransition();case 10:r();case 11:case"end":return e.stop()}},e)}))).to(.3,{scale:1.3}).to(.2,{scale:0}).start()),Global.btnClickEvent(o,i(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o.stopAllActions(),o.getComponent(cc.Button).enabled=!1,Global.SlotsSoundMgr.playEffect(t._soundCfg.click),Global.SlotsSoundMgr.playEffect(t._soundCfg.pick_popclose),cc.tween(o).to(.3,{scale:1.3}).to(.2,{scale:0}).start(),cc.tween(c).to(.3,{scale:1.3}).to(.2,{scale:0}).start(),e.next=8,t.playSpine(a,"animation2_2");case 8:return o.off("click"),t._uiResult.active=!1,t.scheduleOnce(function(){t._uiMain.active=!1,t._slot.active=!0},2.2),e.next=13,t._playTransition();case 13:r();case 14:case"end":return e.stop()}},e)})),t);case 8:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()));case 10:case"end":return n.stop()}},n)}))()},playSpine:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"animation",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new Promise(function(i){e?(e.active=!0,AppLog.log("\u64ad\u653e\u8282\u70b9["+e.parent.name+"/"+e.name+"]\u7684spine\u52a8\u4f5c: "+t),e.getComponent(sp.Skeleton).setAnimation(0,t,n),n?i():e.getComponent(sp.Skeleton).setCompleteListener(function(){a&&a(),i()})):(a&&a(),i())})},playActions:function(e,t){return new Promise(function(n){t.push(cc.callFunc(function(){n()})),e.active=!0,e.runAction(cc.sequence(t))})},awaitTime:function(e){var t=this;return new Promise(function(n){t.scheduleOnce(function(){n()},e)})}}),cc._RF.pop()},{}],LampOfAladdin_Slots:[function(e,t,n){"use strict";function a(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=i(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o,c=!0,r=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return c=e.done,e},e:function(e){r=!0,o=e},f:function(){try{c||null==a.return||a.return()}finally{if(r)throw o}}}}function i(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function c(e,t,n,a,i,o,c){try{var r=e[o](c),s=r.value}catch(e){return void n(e)}r.done?t(s):Promise.resolve(s).then(a,i)}function r(e){return function(){var t=this,n=arguments;return new Promise(function(a,i){var o=e.apply(t,n);function r(e){c(o,a,i,r,s,"next",e)}function s(e){c(o,a,i,r,s,"throw",e)}r(void 0)})}}cc._RF.push(t,"4ccfaHqsN9G4rHWjm2aVUdS","LampOfAladdin_Slots"),cc.Class({extends:e("LMSlots_Slots_Base"),properties:{_hasLoaded:!1},onLoad:function(){this._super(),this._soundCfg=cc.vv.gameData.getGameCfg().soundCfg,Global.registerEvent(cc.vv.gameData._EventId.SLOT_ENERGYGAME_OperationOVER,this.onEnergyGameOver,this)},onEnergyGameOver:function(){this._bottomScript.ShowBtnsByState("idle"),SlotsFacade.energyCollect.showEnergyProgress(0)},start:function(){this._super(),this._hasLoaded=!0,this.ReconnectShow(),this.refreshGoldPen()},ReconnectShow:function(){var e=this;return r(regeneratorRuntime.mark(function t(){var n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e._hasLoaded){t.next=43;break}if(cc.vv.gameData.GetFreeTime()?e.ShowGameview(!0):e.ShowGameview(!1),e._gameInfo=cc.vv.gameData.getDeskInfo(),!e._gameInfo.select||!e._gameInfo.select.state){t.next=41;break}if(e._bottomScript.ShowBtnsByState("moveing_1"),3!=e._gameInfo.select.rtype){t.next=15;break}if(!e._gameInfo.wheelInfo){t.next=12;break}return t.next=10,SlotsFacade.gameWheel.enterGame(e._gameInfo.wheelInfo.cfg,e._gameInfo.wheelInfo.mults);case 10:t.next=13;break;case 12:AppLog.err("\u8f6e\u76d8\u6570\u636e\u4e0d\u5b58\u5728");case 13:t.next=38;break;case 15:if(4!=e._gameInfo.select.rtype){t.next=22;break}return cc.vv.gameData.GetSlotsScript()._topScript.SetBackLobby(!1),t.next=19,SlotsFacade.pickBonus.enterGame(e._gameInfo.pool,!0);case 19:e._topScript.ShowCoin(),t.next=38;break;case 22:if(2!=e._gameInfo.select.rtype){t.next=27;break}SlotsFacade.map.node.active=!0,SlotsFacade.map.enterMap(!0),t.next=38;break;case 27:if(1!=e._gameInfo.select.rtype){t.next=37;break}if(n=cc.vv.gameData.getCollectData()){t.next=31;break}return t.abrupt("return");case 31:cc.vv.gameData.GetSlotsScript()._bottomScript.ShowBtnsByState("moveing_1"),(a=cc.find("Canvas/safe_node/LMSlots_Subgame777")).active=!0,a.getComponent("LMSlots_Subgame777").showEnter(n.bet),t.next=38;break;case 37:AppLog.warn("\u672a\u77e5\u73a9\u6cd5...");case 38:e._bottomScript.ShowBtnsByState("idle"),t.next=42;break;case 41:e._gameInfo.collect&&2==e._gameInfo.collect.open&&(cc.find("Canvas/safe_node/node_energy_free_game").active=!0,SlotsFacade.energyFreeGame.reconnect());case 42:cc.vv.gameData.GetFreeTime()&&e.CanDoNextRound();case 43:case"end":return t.stop()}},t)}))()},ReconnectNet:function(){var e=cc.vv.gameData.getDeskInfo();if(this._stopTime>0&&!this._gameInfo)this.ReconnectShow();else if(e.select&&e.select.state)if(3==e.select.rtype)e.wheelInfo&&SlotsFacade.gameWheel.ReconnectNet(e.wheelInfo.cfg,e.wheelInfo.mults);else if(4==e.select.rtype)SlotsFacade.pickBonus.ReconnectNet(e.pool,!0);else if(2==e.select.rtype)SlotsFacade.map.ReconnectNet(!0);else if(1==e.select.rtype){var t=cc.vv.gameData.getCollectData();if(!t)return;cc.find("Canvas/safe_node/LMSlots_Subgame777").getComponent("LMSlots_Subgame777").ReconnectNet(t.bet)}},RegisterEvent:function(){cc.vv.gameData._EventId.SLOT_REFUSH_COLLECT_WILD_PROGRESS="EventId.SLOT_REFUSH_COLLECT_WILD_PROGRESS",Global.registerEvent(cc.vv.gameData._EventId.SLOT_REFUSH_COLLECT_WILD_PROGRESS,this.OnEventRefreshCollectWildProgress,this)},OnEventRefreshCollectWildProgress:function(){this.refreshGoldPen()},refreshGoldPen:function(){var e=cc.vv.gameData.getCollectWildData();if(e){var t=cc.find("Canvas/safe_node/slots/spine_collect_wild"),n=e.num/e.total,a=[0,.02,.5,.85],i=0;for(var o in a)n>=a[o]&&(i=o);this._animIdxCollectWild!=i&&(this._animIdxCollectWild=i,t.getComponent(sp.Skeleton).setAnimation(0,"animation"+(0==i?"":i),!0))}},StartMove:function(){this.ClearAllTopAni(),this._super(),cc.vv.gameData.isFreeTime()||Global.SlotsSoundMgr.playNormalBgm(),SlotsFacade.energyFreeGame.onStartMove()},ClearAllTopAni:function(){var e,t=a(this._reels);try{for(t.s();!(e=t.n()).done;)for(var n=e.value,i=0;i<this._row;i++){var o=n.GetSymbolByRow(i);o&&o.ShowNormal()}}catch(e){t.e(e)}finally{t.f()}this.ClearAllTopShow()},GetSymboleExtraData:function(e){var t=this._gameInfo.wildMults;for(var n in t){if(e==parseInt(n.substr(4,n.length-4))-1)return{t:"mult",num:t[n]}}},SetSlotsResult:function(e){e.length,this._col;for(var t=[],n=0;n<e.length;n++){var a=n%this._col;if(this._cfg.symbol[e[n]]){var i={};i.sid=e[n],i.data=this.GetSymboleExtraData(n),t[a]||(t[a]=[]),t[a].unshift(i)}}for(var o=0;o<this._reels.length;o++){var c=this._reels[o],r=t[o];c.SetResult(r)}},OnReelSpinEnd:function(e){this._super(e);for(var t=this._reels[e],n=0;n<this._row;n++){var a=t.GetSymbolByRow(n);a.GetShowId()!=cc.vv.gameData.getGameCfg().wildId&&a.GetShowId()!=cc.vv.gameData.getGameCfg().scatterId||a.playWildCollectAction()}},ShowSymbolTopAni:function(e,t){var n=cc.find("top_ani",this.node);if(n){var a=cc.vv.gameData.getGameCfg().scripts.Symbols,i=cc.find(cc.js.formatStr("top_symbol_%s_%s",e,t),n);i&&i.removeFromParent(!0);var o=this._reels[t].GetSymbolByRow(e);if(o){var c=o.node.convertToWorldSpaceAR(cc.v2(0)),r=cc.instantiate(o.node);return r.parent=n,r.name=cc.js.formatStr("top_symbol_%s_%s",e,t),r.position=n.convertToNodeSpaceAR(c),r.getComponent(a)}}},ShowScatterWinTrace:function(){var e=[];if(this._gameInfo.freeResult&&this._gameInfo.freeResult.freeInfo){var t=this._gameInfo.freeResult.freeInfo;if(t.idxs)for(var n=0;n<t.idxs.length;n++){e[t.idxs[n]]=1}}for(var a in e){var i=this.GetSymbolByIdx(Number(a));i&&i.playWinAnimation()}},OnSpinEnd:function(){var e=this;return r(regeneratorRuntime.mark(function t(){var n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._bottomScript.ShowBtnsByState("moveing_1"),t.next=3,SlotsFacade.energyFreeGame.onEndMove();case 3:return e.ShowWinTrace(),t.next=6,e.ShowWinCoin();case 6:if(!cc.vv.gameData.isFinishFreeTime()){t.next=17;break}if(!SlotsFacade.energyFreeGame.isFinish()){t.next=12;break}return t.next=10,SlotsFacade.energyFreeGame.exitFreeGame();case 10:t.next=15;break;case 12:return t.next=14,SlotsFacade.gameWheel.exitFreeGame(cc.vv.gameData.GetGameTotalFreeWin());case 14:e.ShowGameview(!1);case 15:return t.next=17,new Promise(function(t){e.ShowBottomWin(cc.vv.gameData.GetGameTotalFreeWin(),cc.vv.gameData.GetGameTotalFreeWin(),!0,function(){t()})});case 17:if(!e.isNeedCollecting()||cc.vv.gameData.isFreeTime()){t.next=22;break}return e.CollectEnergy(),n=cc.vv.gameData.getCollectData(),t.next=22,e.awaitTime(n.num>=n.total?2.2:0);case 22:if(!e._gameInfo.select||!e._gameInfo.select.state){t.next=42;break}if(3!=e._gameInfo.select.rtype){t.next=36;break}return e.ShowScatterWinTrace(),Global.SlotsSoundMgr.playEffect("magic_move"),t.next=28,e.awaitTime(2);case 28:if(!e._gameInfo.wheelInfo){t.next=33;break}return t.next=31,SlotsFacade.gameWheel.enterGame(e._gameInfo.wheelInfo.cfg,e._gameInfo.wheelInfo.mults);case 31:t.next=34;break;case 33:AppLog.err("\u8f6e\u76d8\u6570\u636e\u4e0d\u5b58\u5728");case 34:t.next=42;break;case 36:if(4!=e._gameInfo.select.rtype){t.next=41;break}return t.next=39,SlotsFacade.pickBonus.enterGame(e._gameInfo.pool);case 39:t.next=42;break;case 41:AppLog.warn("\u672a\u77e5\u73a9\u6cd5...");case 42:(a=cc.vv.gameData.getCollectData())&&a.open>0&&cc.vv.gameData.IsSelectSubGame()?(SlotsFacade.map.node.active=!0,SlotsFacade.map.enterMap(!0)):e.CanDoNextRound();case 44:case"end":return t.stop()}},t)}))()},ShowWinCoin:function(){var e=this;return new Promise(function(t){var n=cc.vv.gameData.GetGameWin();if(n>0){var a=!0,i=n;cc.vv.gameData.isFreeTime()&&(i=cc.vv.gameData.GetGameTotalFreeWin(),a=!1),e.ShowBottomWin(n,i,a,function(){t()})}else t()})},isNeedCollecting:function(){var e=this._gameInfo.resultCards;if(cc.vv.gameData.isOpenCollectProgress()){var t,n=cc.vv.gameData.getGameCfg().collectId,i=a(e);try{for(i.s();!(t=i.n()).done;){if(t.value==n)return!0}}catch(e){i.e(e)}finally{i.f()}}else{var o,c=cc.vv.gameData.getGameCfg().wildId,r=a(e);try{for(r.s();!(o=r.n()).done;){if(o.value==c)return!0}}catch(e){r.e(e)}finally{r.f()}}return!1},CollectEnergy:function(){if(cc.vv.gameData.isOpenCollectProgress()){for(var e=0,t=0;t<5;t++)for(var n=this._reels[t]._symbols,a=0;a<3;a++){n[a].PlayCollectAction()&&(e+=1)}e>0&&Global.SlotsSoundMgr.playEffect(this._soundCfg.symbol_fly),this.scheduleOnce(function(){Global.dispatchEvent(cc.vv.gameData._EventId.SLOT_REFUSH_ENERGY)},1)}},ShowWinTrace:function(){for(var e=[],t=0;t<this._gameInfo.zjLuXian.length;t++)for(var n=this._gameInfo.zjLuXian[t],a=0;a<n.indexs.length;a++)e[n.indexs[a]]=1;if(this._gameInfo.scatterZJLuXian&&this._gameInfo.scatterZJLuXian.indexs)for(var i=0;i<this._gameInfo.scatterZJLuXian.indexs.length;i++){e[this._gameInfo.scatterZJLuXian.indexs[i]]=1}var o=[];for(var c in SlotsFacade.energyFreeGame.isEnable()&&(o=[3,8,13]),e){var r=this.GetSymbolByIdx(Number(c));r&&!o.includes(Number(c))&&(r.playWinAnimation(),r.ShowKuang())}},ShowGameview:function(e){this._super(e),SlotsFacade.energyCollect.node.active=!e},awaitTime:function(e){var t=this;return new Promise(function(n){t.scheduleOnce(function(){n()},e)})}}),cc._RF.pop()},{LMSlots_Slots_Base:void 0}],LampOfAladdin_Symbol:[function(e,t,n){"use strict";cc._RF.push(t,"96949/HZMhK9LWHy/V4qAzz","LampOfAladdin_Symbol"),cc.Class({extends:e("LMSlots_Symbol_Base"),properties:{},StartMove:function(){this._super(),this.SetMult()},SetSymbolIdx:function(e){this._symbolIdx=e,this.node.zIndex=10===e?50:50-e},SetMult:function(e){var t=cc.find("coin_num",this.node);e?(t.active=!0,t.getComponent(cc.Label).string=e+"X",t.scaleY=0,cc.tween(t).to(.3,{scaleY:1.2}).to(.3,{scaleY:1}).call(function(){AppLog.warn("SetMult: ",t.scaleY)}).start()):(t.cleanup(),t.active=!1)},setAnimationToTop:function(e){if(this._topAniNode){if(e){var t=cc.find(cc.js.formatStr("symbol_ani_%s_%s",this._symbolIdx,this._reelIdx),this._topAniNode);t||(t=cc.instantiate(this.node));var n=this.node.convertToWorldSpaceAR(cc.v2(0));return t.parent=this._topAniNode,t.name=cc.js.formatStr("symbol_ani_%s_%s",this._symbolIdx,this._reelIdx),t.position=this._topAniNode.convertToNodeSpaceAR(n),this.node.active=!1,this._data&&"mult"==this._data.t&&t.getComponent("LampOfAladdin_Symbol").SetMult(this._data.num),t}var a=cc.find(cc.js.formatStr("symbol_ani_%s_%s",this._symbolIdx,this._reelIdx),this._topAniNode);a&&(a.removeFromParent(),a.destroy()),this.node.active=!0,this._showNode&&(this._showNode.active=!0)}return this.node},PlayCollectAction:function(){var e=cc.vv.gameData.getGameCfg();if(this._id==e.collectId){var t=cc.instantiate(this.node),n=cc.find("Canvas/safe_node");t.parent=n;var a=n.convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(cc.v2(0,0)));t.position=a,t.active=!0,cc.find(e.symbol[this._id].node,t).active=!1;var i=cc.find(e.symbol[this._id].win_node,t);i.active=!0,i.getComponent(sp.Skeleton).setAnimation(0,"animation1",!1),i.getComponent(sp.Skeleton).setCompleteListener(function(){t.removeFromParent(!0)});var o=cc.find("Canvas/safe_node/slots/node_energy/spr_collect_m1"),c=n.convertToNodeSpaceAR(o.convertToWorldSpaceAR(cc.v2(0,0)));return t.runAction(cc.bezierTo(.4,[cc.v2(a.x,a.y),cc.v2(c.x,a.y),cc.v2(c.x,c.y)])),!0}},playWildCollectAction:function(){var e=cc.vv.gameData.getGameCfg();if(this._id==e.wildId&&cc.vv.gameData.isOpenCollectWild()){this._data&&"mult"==this._data.t&&this.SetMult(this._data.num);var t=cc.instantiate(this.node),n=t.getComponent("LampOfAladdin_Symbol"),a=cc.find("Canvas/safe_node");t.parent=a;var i=a.convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(cc.v2(0,0)));t.position=i;var o=cc.find("Canvas/safe_node/slots/spine_collect_wild"),c=a.convertToNodeSpaceAR(o.convertToWorldSpaceAR(cc.v2(-30,40)));n._showNode.active=!1,Global.SlotsSoundMgr.playEffect("wild_fly"),cc.tween(t).delay(.5).call(function(){n._showNode=cc.find("w100",t),n._showNode.active=!0,n._showNode.getComponent(sp.Skeleton).setAnimation(0,"animation",!1)}).bezierTo(.5,cc.v2(i.x,i.y),cc.v2(c.x,i.y),cc.v2(c.x,c.y)).call(function(){n._showNode.active=!1,n._showNode=cc.find("w101",t),n._showNode.active=!0,n._showNode.getComponent(sp.Skeleton).setAnimation(0,"animation",!1)}).delay(.2).call(function(){Global.dispatchEvent(cc.vv.gameData._EventId.SLOT_REFUSH_COLLECT_WILD_PROGRESS)}).removeSelf().start()}}}),cc._RF.pop()},{LMSlots_Symbol_Base:void 0}]},{},["LampOfAladdin_Cfg","LampOfAladdin_CoinBoom","LampOfAladdin_Energy","LampOfAladdin_Energy_FreeGame","LampOfAladdin_GameData","LampOfAladdin_GameWheel","LampOfAladdin_Logic","LampOfAladdin_Map","LampOfAladdin_PickBonus","LampOfAladdin_Slots","LampOfAladdin_Symbol"]);
window.__require=function e(t,n,a){function o(c,r){if(!n[c]){if(!t[c]){var s=c.split("/");if(s=s[s.length-1],!t[s]){var l="function"==typeof __require&&__require;if(!r&&l)return l(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+c+"'")}c=s}var u=n[c]={exports:{}};t[c][0].call(u.exports,function(e){return o(t[c][1][e]||e)},u,u.exports,e,t,n,a)}return n[c].exports}for(var i="function"==typeof __require&&__require,c=0;c<a.length;c++)o(a[c]);return o}({TheMagicHanzo_Bottom:[function(e,t,n){"use strict";cc._RF.push(t,"983a4iY9gBGU5iIKe5T3COE","TheMagicHanzo_Bottom"),cc.Class({extends:e("LMSlots_Bottom_Base"),properties:{},CanDoNextRound:function(){this._bStartRound=!1,this.ShowBtnsByState("idle");var e=cc.vv.gameData.GetFreeTime(),t=cc.vv.gameData.getGameCfg();if(e){var n=cc.vv.gameData.GetTotalFree(),a=cc.vv.gameData.getFreeCnt();return this.ShowFreeModel(!0,n-a+1,n),void this.scheduleOnce(this.SendSpinReq,t.autoModelDelay)}cc.vv.gameData.GetAutoModelTime()>0&&this.scheduleOnce(this.DoAutoSpine,t.autoModelDelay)},SendSpinReq:function(){this._super()},OnClickStop:function(){this._super(),cc.vv.gameData.getMoreSlotsMgr().stopMove()}}),cc._RF.pop()},{LMSlots_Bottom_Base:void 0}],TheMagicHanzo_ButtonSafe:[function(e,t,n){"use strict";cc._RF.push(t,"ea224z9QzhNsp+OmHZeGN61","TheMagicHanzo_ButtonSafe"),cc.Class({extends:cc.Component,properties:{safeTime:{default:.5,tooltip:"\u6309\u94ae\u4fdd\u62a4\u65f6\u95f4\uff0c\u6307\u5b9a\u95f4\u9694\u5185\u53ea\u80fd\u70b9\u51fb\u4e00\u6b21."}},onLoad:function(){var e=this.getComponent(cc.Button);e&&(this.clickEvents=e.clickEvents,Global.btnClickEvent(this.node,function(e){e.interactable=!1;var t=cc.vv.gameData.GetSlotsScript();t&&t.scheduleOnce(function(){e.interactable=!0},this.safeTime)},this))}}),cc._RF.pop()},{}],TheMagicHanzo_Cfg:[function(e,t,n){"use strict";var a;function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}cc._RF.push(t,"f940bS71NtO7qGG1jWxfmh/","TheMagicHanzo_Cfg");var i={symbol:(a={},o(a,1,{node:"s1",win_node:"w1",win_ani:{name:"animation",zIndex:100}}),o(a,2,{node:"s14",win_node:"w2",stop_ani:{name:"animation1",zIndex:100},trigger_ani:{name:"animation2",zIndex:200}}),o(a,3,{node:"s13",win_node:"w3",stop_ani:{name:"animation1",zIndex:100},trigger_ani:{name:"animation2",zIndex:200}}),o(a,4,{node:"s2",win_node:""}),o(a,5,{node:"s3",win_node:""}),o(a,6,{node:"s4",win_node:""}),o(a,7,{node:"s5",win_node:""}),o(a,8,{node:"s6",win_node:""}),o(a,9,{node:"s7",win_node:""}),o(a,10,{node:"s8",win_node:""}),o(a,11,{node:"s9",win_node:""}),o(a,12,{node:"s10",win_node:""}),o(a,13,{node:"s11",win_node:""}),o(a,14,{node:"s12",win_node:""}),a),scripts:{Top:"LMSlots_Top_Base",Bottom:"TheMagicHanzo_Bottom",Slots:"TheMagicHanzo_Slots",Reels:"TheMagicHanzo_Reel",Symbols:"TheMagicHanzo_Symbol"},col:5,row:3,scatterId:2,symbolPrefab:"LMSlots_Symbol",symbolPrefab50:"LMSlots_Symbol50",symbolPrefab33:"LMSlots_Symbol33",symbolSize:{width:150,height:112},randomSymbols:[4,5,6,7,8,9,10,11,12,13,14],kuang:"kuang",speed:3e3,reelStopInter:.2,auto_stop_time:1,bounce:!0,autoModelDelay:1,bounceInfo:{distance:30,time:.1},normalBgm:"base_bgm",AddAntiTime:3,reelStateInfo:[{id:[2],mini:3,counts:[0,1,1,1,0],antiNode:"node_anti",path:"games/TheMagicHanzo/",reelStopSound:"reel_stop",symbolStopSound:"symbol_scatter",antSound:"anticipation",antSpeed:2500},{id:[3],mini:6,counts:[3,3,3,3,3],path:"games/TheMagicHanzo/",reelStopSound:"reel_stop",symbolStopSound:"symbol_chip"}],commEffect:{path:"games/TheMagicHanzo/",win1:["win1","win1end"],win2:["win2","win2end"]},helpItems:["games/TheMagicHanzo/prefab/TheMagicHanzo_Help_item1","games/TheMagicHanzo/prefab/TheMagicHanzo_Help_item2","games/TheMagicHanzo/prefab/TheMagicHanzo_Help_item3","games/TheMagicHanzo/prefab/TheMagicHanzo_Help_item4"]};t.exports=i,cc._RF.pop()},{}],TheMagicHanzo_Energy:[function(e,t,n){"use strict";cc._RF.push(t,"a1013HLmTRP5bSaLEYuOLqu","TheMagicHanzo_Energy"),cc.Class({extends:cc.Component,properties:{_playUnlockState:0,_clickPyramidiconState:0,_needBonusState:0,_targetPos:cc.v2(23,7),_defautPos:cc.v2(23,150)},onLoad:function(){this._tips=cc.find("slots/mask/tips",this.node.parent),this._points=cc.find("points",this.node);var e=cc.find("btn_unlock/operate",this.node);Global.btnClickEvent(e,this.onClicklock,this);var t=cc.find("slots/pyramidicon",this.node.parent);Global.btnClickEvent(t,this.onClickpyramidicon,this),Global.registerEvent(cc.vv.gameData._EventId.SLOT_REFUSH_ENERGY,this.onEventRefushEnergy,this),Global.registerEvent(cc.vv.gameData._EventId.SLOT_TOTALBET_UPDATED,this.onChangeBetValue,this)},start:function(){var e=cc.vv.gameData.getSuperBonus();this.UNLOCKVAL=e.min,this.updateShow(),this.updateNeedBonusNum(),this.updateCoinProgress(e)},updateShow:function(){var e=cc.vv.gameData.GetBetIdx(),t=cc.find("btn_unlock",this.node);e>=this.UNLOCKVAL?1!=this._playUnlockState&&(this._playUnlockState=1,this.playTips(),Global.SlotsSoundMgr.playEffect("unlock"),cc.vv.gameData.playSpine(t,"animation3",!1,function(){t.active=!1})):2!=this._playUnlockState&&(this._playUnlockState=2,t.active=!0,this.playTips(),Global.SlotsSoundMgr.playEffect("lock"),cc.vv.gameData.playSpine(t,"animation1",!1,function(){cc.vv.gameData.playSpine(t,"animation2",!1,null)}))},playTips:function(){this._clickPyramidiconState=1,this._tips.stopAllActions();var e=cc.delayTime(5),t=cc.moveTo(.3,cc.v2(23,7)).easing(cc.easeBackOut()),n=cc.moveTo(.3,cc.v2(23,150)).easing(cc.easeBackIn()),a=cc.sequence(t,e,n);this._tips.runAction(a)},onClicklock:function(){if(!cc.vv.gameData.isReelMove()&&1!=this._playUnlockState){cc.vv.gameData.GetBottomScript().SetBetIdx(this.UNLOCKVAL);var e=cc.find("btn_unlock",this.node);cc.vv.gameData.playSpine(e,"animation3",!1,function(){e.active=!1})}},onClickpyramidicon:function(){Global.SlotsSoundMgr.playEffect("tip_show"),clearTimeout(this._timeoutId),0==this._clickPyramidiconState?this.playTips():(this._clickPyramidiconState=0,cc.tween(this._tips).to(.3,{position:this._defautPos},{easing:"backIn"}).start())},updateCoinProgress:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e)if(n||0==e.num)for(var a=1;a<11;a++){cc.find(cc.js.formatStr("points/point%s/coin",a),this.node).active=e.num>=a}else{var o=cc.find(cc.js.formatStr("points/point%s/coin",e.num),this.node),i=cc.find(cc.js.formatStr("points/point%s/spine",e.num),this.node);o.active=!0,o.scale=0,cc.vv.gameData.playSpine(i,"animation1",!1,null),cc.tween(o).to(.5,{scale:1},{easing:"backInOut"}).call(function(){if(e.total==e.num){var n=cc.find("collectfull",t.node);Global.SlotsSoundMgr.playEffect("trail_full"),cc.vv.gameData.playSpine(n,"animation",!1,function(){n.active=!1}),t.scheduleOnce(function(){cc.vv.gameData.GetUIManager().showSuperFreeStartUI()},1)}else Global.SlotsSoundMgr.playEffect("trail_in")}).start()}},updateNeedBonusNum:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];cc.vv.gameData.GetBetIdx()<13?7!=this._needBonusState&&(this._needBonusState=7,Global.SlotsSoundMgr.playEffect("low_bet"),this.playChangeBonusNumSp(t,"animation1",function(){cc.find("triggersui6",e.node).active=!1,cc.find("triggersui7",e.node).active=!0})):6!=this._needBonusState&&(this._needBonusState=6,Global.SlotsSoundMgr.playEffect("high_bet"),cc.find("triggersui7",this.node).active=!1,cc.find("triggersui6",this.node).active=!0,this.playChangeBonusNumSp(t,"animation2",null))},playChangeBonusNumSp:function(e,t,n){if(!e){var a=cc.find("betchange",this.node);cc.vv.gameData.playSpine(a,t,!1,n)}},onChangeBetValue:function(e){this.updateShow(),this.updateNeedBonusNum(!1)},onEventRefushEnergy:function(){var e=this;this.scheduleOnce(function(){var t=cc.vv.gameData.getSuperBonus();e.updateCoinProgress(t,!1)},.3)}}),cc._RF.pop()},{}],TheMagicHanzo_FreeGame:[function(e,t,n){"use strict";cc._RF.push(t,"17b98F3igNB8reL8GwjOIzn","TheMagicHanzo_FreeGame"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){}}),cc._RF.pop()},{}],TheMagicHanzo_FreeReel:[function(e,t,n){"use strict";function a(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=o(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,c=!0,r=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return c=e.done,e},e:function(e){r=!0,i=e},f:function(){try{c||null==a.return||a.return()}finally{if(r)throw i}}}}function o(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}cc._RF.push(t,"2167a4wcm1BCJDzzST0WPDQ","TheMagicHanzo_FreeReel"),cc.Class({extends:e("LMSlots_Reel_Base"),properties:{},InitReel:function(e,t,n,a){this._colMax=a,this._symbolHeight=2==a?56:37,this.Init(e,t,n)},StartMove:function(){this._super(),this._speed=1200*this.GetTimeScale(),this._offset=this._symbolHeight},OnReelSpinEnd:function(){this._reelState=[],cc.vv.gameData.getMoreSlotsMgr().reelSpineEnd(this._reelIdx)},LoadSymbols:function(){var e=cc.vv.gameData.getGameCfg(),t=2==this._colMax?e.symbolPrefab50:e.symbolPrefab33;this._symbolTemplete||(this._symbolTemplete=cc.vv.gameData.GetPrefabByName(t));for(var n=0;n<this._nCount+1;n++)this.CreateOneSymbol();this.ReLayOut()},CreateOneSymbol:function(){var e=cc.instantiate(this._symbolTemplete);e.parent=this._holderNode;var t=e.addComponent("TheMagicHanzo_FreeSymbol"),n=this._symbols.length;t.InitSymbol(n,this._topAniNode,this._colMax),t.SetSymbolReelIdx(this._reelIdx),this._symbols.push(t)},playReelStop:function(){if(this._originResult)for(var e=0;e<this._originResult.length;e++){var t,n=this._symbols[e],o=a(this._reelState);try{for(o.s();!(t=o.n()).done;){var i=t.value;i.isStop&&i.id.includes(n.GetShowId())&&n.playStopAnimation()}}catch(e){o.e(e)}finally{o.f()}}if(this._cfg.reelStateInfo&&this._cfg.reelStateInfo[0]){var c,r="",s="",l=!1,u=a(this._reelState);try{for(u.s();!(c=u.n()).done;){var h=c.value;h.isStop?(s=h.symbolStopSound?h.symbolStopSound:"",l=!0):r=""}}catch(e){u.e(e)}finally{u.f()}l&&(r=s);var f=this._cfg.reelStateInfo[0].path;f||(f=cc.vv.gameData.getGameDir()),cc.vv.AudioManager.playEff(f,r,!0)}},GetSymbolPosByRow:function(e){return cc.v2(0,(e+.5)*this._symbolHeight)}}),cc._RF.pop()},{LMSlots_Reel_Base:void 0}],TheMagicHanzo_FreeSlotsMgr:[function(e,t,n){"use strict";function a(e,t,n,a,o,i,c){try{var r=e[i](c),s=r.value}catch(e){return void n(e)}r.done?t(s):Promise.resolve(s).then(a,o)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(o,i){var c=e.apply(t,n);function r(e){a(c,o,i,r,s,"next",e)}function s(e){a(c,o,i,r,s,"throw",e)}r(void 0)})}}cc._RF.push(t,"f7335O282lJt6ibY11X+UJ7","TheMagicHanzo_FreeSlotsMgr");var i=[3,6,12,18,18];cc.Class({extends:cc.Component,properties:{bgs:[cc.SpriteFrame],_slotsScpList:[],_curSlotsCount:0,_curLevel:1,_curNum:0},onLoad:function(){var e=cc.find("mainnode/bg",this.node);this._curBgSp=e.getComponent(cc.Sprite),this._slotParNode=cc.find("mainnode/slotsnode",this.node),this._topcontentNode=cc.find("mainnode/topcontent",this.node),this._slots50=cc.find("mainnode/slots50",this.node),this._slots33=cc.find("mainnode/slots33",this.node)},start:function(){},changeBackimage:function(e){this._curBgSp.spriteFrame=this.bgs[e]},collectBonusEffect:function(){var e=this;return o(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){var n=cc.vv.gameData.getCollectData();if(e._curNum==n.num)t();else{var a=cc.find("mainnode",e.node),o=cc.find("mainnode/collectbonus",e.node),i=cc.find("mainnode/topcontent/item1/aimnode",e.node),c=cc.find("mainnode/topcontent/item1/collectspine",e.node),r=a.convertToNodeSpaceAR(i.convertToWorldSpaceAR(cc.v2(0,0)));e._curNum=n.num,e._slotsScpList.forEach(function(e){e.slotsFly(a,r,o)}),Global.SlotsSoundMgr.playEffect("free_chip_collect"),e.scheduleOnce(function(){e.updateCollectBounsNum(),cc.vv.gameData.playSpine(c,"animation",!1,null)},.3),e.scheduleOnce(function(){t()},.5)}}));case 1:case"end":return t.stop()}},t)}))()},bonusCollectUpgrade:function(){var e=this;return o(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){var n=cc.vv.gameData.getCollectData();e._curLevel==n.level||n.level>4?e.scheduleOnce(function(){t()},.1):e.scheduleOnce(function(){Global.SlotsSoundMgr.playEffect("free_message");var a=cc.find(cc.js.formatStr("mainnode/topcontent/item%s/upgradespine",n.level),e.node);cc.vv.gameData.playSpine(a,"animation",!1,function(){cc.vv.gameData.GetSlotsScript().playTransitionAni(function(){e._curLevel=n.level,e.scheduleOnce(function(){t()},.5)}),e.scheduleOnce(function(){e.updateSlotsUI(!1)},.2)})},1)}));case 1:case"end":return t.stop()}},t)}))()},startMove:function(){0!=this._slotsScpList.length&&this._slotsScpList.forEach(function(e){e.StartMove()})},stopMove:function(){0!=this._slotsScpList.length&&this._slotsScpList.forEach(function(e){e.StopMove()})},showSpineResult:function(e){if(0!=this._slotsScpList.length&&e.slotsList)for(var t=e.slotsList.info,n=0;n<this._slotsScpList.length;n++)this._slotsScpList[n].showMsgSpineResult(e,t[n].resultCards)},showWinTrance:function(){var e=cc.vv.gameData.getSlotsListData();if(e)for(var t=0;t<this._slotsScpList.length;t++)this._slotsScpList[t].ShowWinTraceResult(e.info[t]),this._slotsScpList[t].updateWinCoin(e.coins[t])},reelSpineEnd:function(e){this._slotsScpList.forEach(function(t){t.OnReelSpinEnd(e);var n=t.GetLastStopReelIdx();e==n&&t.OnSpinEnd()})},updateSlotsUI:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=cc.vv.gameData.getCollectData(),n=t?t.level:1,a=t?t.num:0,o=i[n-1];if((e||o>this._curSlotsCount)&&(this.dynamicLoadSlots(o),this.updateTopContentPos(n,o),this.updateCollectBounsNum(),e&&(this._curLevel=n,this._curNum=a)),e){var c=cc.vv.gameData.getSuperBonus();c&&(c.total==c.num?this.changeBackimage(1):this.changeBackimage(0))}},dynamicLoadSlots:function(e){this.clearSlotsUI();var t=0,n=this;(function a(){e>6?n.initSlotsUI(n._slots33,t,3):n.initSlotsUI(n._slots50,t,2,e),++t<e&&n.scheduleOnce(function(){a()},.03)})()},updateCollectBounsNum:function(){var e=cc.vv.gameData.getCollectData(),t=e?e.num:0;cc.find("mainnode/topcontent/item1/coin",this.node).getComponent(cc.Label).string=t},updateTopContentPos:function(e,t){this._topcontentNode.position=e>2?cc.v2(0,150*(Math.ceil(t/3)-1)+75):cc.v2(0,200*(Math.ceil(t/2)-1)+100);for(var n=2;n<e+1;n++){cc.find(cc.js.formatStr("mainnode/topcontent/item%s",n),this.node).active=!1}},initSlotsUI:function(e,t,n,a){var o=cc.vv.gameData.getSlotsListData(),i=o?t>=o.coins.length?0:o.coins[t]:0,c=cc.instantiate(e);c.active=!0,c.parent=this._slotParNode;var r=c.addComponent("TheMagicHanzo_FreeSlots");r.Init(n,i),this._slotsScpList.push(r),c.position=2==t&&3==a?cc.v2(0,200):this.getSlotsUIPos(t,n)},getSlotsUIPos:function(e,t){var n=0,a=0;if(2==t)n=e%2==0?-150:150,a=200*parseInt(e/2);else{var o=e%3;n=0==o?-200:1==o?0:200,a=150*parseInt(e/3)}return cc.v2(n,a)},clearSlotsUI:function(){this._slotParNode.removeAllChildren(),this._slotsScpList=[]}}),cc._RF.pop()},{}],TheMagicHanzo_FreeSlots:[function(e,t,n){"use strict";cc._RF.push(t,"5cc399Gto9IIIca/hL6Jam0","TheMagicHanzo_FreeSlots"),cc.Class({extends:e("LMSlots_Slots_Base"),properties:{_lastWinCoin:0},Init:function(e,t){this._topScript=cc.vv.gameData.GetTopScript(),this._bottomScript=cc.vv.gameData.GetBottomScript(),this._cfg=cc.vv.gameData.getGameCfg(),this._col=this._cfg.col,this._row=this._cfg.row,this.createFreeReels(this._col,this._row,e),this.updateWinCoin(t)},StartMove:function(){this._bStopRightnow=null,this._gameInfo=null,this.MoveReels(this._reels),this._stopTime=this.GetStopTime()},OnSpinEnd:function(){AppLog.log("freeslots onspinend")},updateWinCoin:function(e){var t=cc.find("head/getcoin",this.node);Global.doRoallNumEff(t,this._lastWinCoin,e,1,null,null,0,!0),this._lastWinCoin=e},ShowWinTraceResult:function(e){for(var t=[],n=0;n<e.zjLuXian.length;n++)for(var a=e.zjLuXian[n],o=0;o<a.indexs.length;o++)t[a.indexs[o]]=1;if(e.scatterZJLuXian&&e.scatterZJLuXian.indexs)for(var i=0;i<e.scatterZJLuXian.indexs.length;i++){t[e.scatterZJLuXian.indexs[i]]=1}for(var c in t){var r=this.GetSymbolByIdx(Number(c));r&&(r.playWinAnimation(),r.ShowKuang())}},createFreeReels:function(e,t,n){this._cfg.scripts.Reels;for(var a=0;a<e;a++){var o=cc.find("reels/reel"+(a+1),this.node).addComponent("TheMagicHanzo_FreeReel");o.InitReel(a,t,this._topAniNode,n),this._reels.push(o)}},showMsgSpineResult:function(e,t){this._gameInfo=e,this.SetSlotsResult(t),this.SetReelStateInfo(t)},slotsFly:function(e,t,n){for(var a=1;a<16;a++){var o=this.GetSymbolByIdx(a);if(3==o.GetShowId()){var i=cc.instantiate(n);i.parent=e,i.active=!0,i.position=e.convertToNodeSpaceAR(o.node.convertToWorldSpaceAR(cc.v2(0,0))),Global.SlotsSoundMgr.playEffect("chip_value_collect"),cc.tween(i).to(.3,{position:t}).start()}}}}),cc._RF.pop()},{LMSlots_Slots_Base:void 0}],TheMagicHanzo_FreeSymbol:[function(e,t,n){"use strict";cc._RF.push(t,"02c37j/H8pOuJPXja6w6hEX","TheMagicHanzo_FreeSymbol");var a=[40,88,102];cc.Class({extends:e("LMSlots_Symbol_Base"),properties:{},InitSymbol:function(e,t,n){this._colMax=n,this.Init(e,t)},ShowKuang:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isKuang=e;var t=cc.vv.gameData.getGameCfg();if(t.kuang){var n=cc.vv.gameData.GetAssetScript(),a=this.GetKuangShowParent();if(n&&a){var o=a.getChildByName("kuang"+this._symbolIdx+"_"+this._reelIdx);if(e){if(!o){var i=n.GetPrefabByName(this.getKuangName());if(i){(o=cc.instantiate(i)).name="kuang"+this._symbolIdx+"_"+this._reelIdx,o.parent=a;var c=this.node.convertToWorldSpaceAR(cc.v2(0,0)),r=a.convertToNodeSpaceAR(c);o.position=r}}o.active=!0,t.symbol[this._id].win_ani&&(o.zIndex=t.symbol[this._id].win_ani.zIndex-this._symbolIdx+10*this._reelIdx+10)}else o&&(o.active=!1)}}},stopWinTweenAction:function(){this._showNode&&(this._showNode.active=!0,this._showNode.cleanup(),this._showNode.opacity=255)},ShowRandomSymbol:function(){var e=cc.vv.gameData.getCollectData();if(e){var t=1;if(4==this._reelIdx&&e.num>=a[0]||(3==this._reelIdx||4==this._reelIdx)&&e.num>=a[1]||(2==this._reelIdx||3==this._reelIdx||4==this._reelIdx)&&e.num>=a[2])t=1;else{var n=cc.vv.gameData.getGameCfg(),o=Global.random(1,n.randomSymbols.length);t=n.randomSymbols[o-1]}this.ShowById(t)}else this._super()},getKuangName:function(){return 2==this._colMax?"kuang50":"kuang33"}}),cc._RF.pop()},{LMSlots_Symbol_Base:void 0}],TheMagicHanzo_GameData:[function(e,t,n){"use strict";cc._RF.push(t,"19564NaOo1PQbWL7rhD5+1W","TheMagicHanzo_GameData"),cc.Class({extends:e("LMSlots_GameData_Base"),properties:{},init:function(e,t,n){this._selectData=e.select,this._bonusGame=e.bonusGame,this._collect=e.freeGameData.collect,this._slotsList=e.freeGameData.slotsList,this._freeCnt=e.restFreeCount,this._superBonus=e.superbonus,this._super(e,t,n)},RegisterEvent:function(){this._super(),this._EventId.GORGEOUSCLEOPATRA_UNLOCK_ENERGY="GORGEOUSCLEOPATRA_UNLOCK_ENERGY"},OnRcvNetSpine:function(e){200==e.code&&(this._selectData=e.select,this._bonusGame=e.bonusGame,this._collect=e.collect,this._slotsList=e.slotsList,this._freeCnt=e.freeCnt,this._superBonus=e.superbonus,this._super(e),this._moreSlotsMgr.showSpineResult(e))},playSpine:function(e,t,n,a){if(e){e.active=!0;var o=e.getComponent(sp.Skeleton);o&&(o.setAnimation(0,t,n),o.setCompleteListener(function(){a&&a()}))}},isReelMove:function(){return this._isReelMove||this._autoTime>0},setReelMove:function(e){this._isReelMove=e},setSuperBonus:function(e){this._superBonus=e},getSuperBonus:function(){return this._superBonus},clearSuperBonus:function(){this._superBonus.num=0},getFreeCnt:function(){return this._freeCnt},getBonusData:function(){return this._bonusGame},getSelectData:function(){return this._selectData},SetGameScript:function(e){this._freeGame=e},GetFreeGameScript:function(){return this._freeGame},SetUIManagerScript:function(e){this._uimgr=e},GetUIManager:function(){return this._uimgr},SetMoreSlotsMgr:function(e){this._moreSlotsMgr=e},getMoreSlotsMgr:function(){return this._moreSlotsMgr},SetWheelData:function(e){this._wheelData=e},getWheelData:function(){return this._wheelData},clearWheelData:function(){this._wheelData=null},getSlotsListData:function(){return this._slotsList},getCollectData:function(){return this._collect},isTriggerNormalFree:function(){return this._gameInfo.freeResult.freeInfo.idxs&&this._gameInfo.freeResult.freeInfo.idxs.length>0?this._gameInfo.freeResult.freeInfo.freeCnt:0},getWheelFreeTimes:function(){var e=0;return this._wheelData&&(1==this._wheelData.result.length&&"FREE"==this._wheelData.result[0].type?e=this._wheelData.result[0].num:this._wheelData.result.length>1&&"FREE"==this._wheelData.result[1].type&&(e=this._wheelData.result[1].num)),e}}),cc._RF.pop()},{LMSlots_GameData_Base:void 0}],TheMagicHanzo_Logic:[function(e,t,n){"use strict";cc._RF.push(t,"4ae31WgZeVPOoZkdj5YT89y","TheMagicHanzo_Logic"),cc.Class({extends:e("LMSlots_Logic_Base"),properties:{},onLoad:function(){var e=this.node.addComponent("TheMagicHanzo_FreeGame");cc.vv.gameData.SetGameScript(e);var t=cc.find("safe_node/gameUI",this.node).addComponent("TheMagicHanzo_UIMgr");cc.vv.gameData.SetUIManagerScript(t);var n=cc.find("safe_node/moreslotsUI",this.node).getComponent("TheMagicHanzo_FreeSlotsMgr");cc.vv.gameData.SetMoreSlotsMgr(n),this._super()}}),cc._RF.pop()},{LMSlots_Logic_Base:void 0}],TheMagicHanzo_Reel:[function(e,t,n){"use strict";function a(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=o(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,c=!0,r=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return c=e.done,e},e:function(e){r=!0,i=e},f:function(){try{c||null==a.return||a.return()}finally{if(r)throw i}}}}function o(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}cc._RF.push(t,"d9826vaAFRG0YOIFmcrhXJJ","TheMagicHanzo_Reel"),cc.Class({extends:e("LMSlots_Reel_Base"),properties:{},playReelStop:function(){if(this._originResult)for(var e=0;e<this._originResult.length;e++){var t,n=this._symbols[e],o=a(this._reelState);try{for(o.s();!(t=o.n()).done;){var i=t.value;i.isStop&&i.id.includes(n.GetShowId())&&n.playStopAnimation()}}catch(e){o.e(e)}finally{o.f()}}if(this._cfg.reelStateInfo&&this._cfg.reelStateInfo[0]){var c,r="",s="",l=!1,u=a(this._reelState);try{for(u.s();!(c=u.n()).done;){var h=c.value;h.isStop?(s=h.symbolStopSound?h.symbolStopSound:"",l=!0):r=cc.vv.gameData.getSlotsListData()?"":h.reelStopSound?h.reelStopSound:""}}catch(e){u.e(e)}finally{u.f()}l&&(r=s);var f=this._cfg.reelStateInfo[0].path;f||(f=cc.vv.gameData.getGameDir()),cc.vv.AudioManager.playEff(f,r,!0)}}}),cc._RF.pop()},{LMSlots_Reel_Base:void 0}],TheMagicHanzo_Slots:[function(e,t,n){"use strict";function a(e,t,n,a,o,i,c){try{var r=e[i](c),s=r.value}catch(e){return void n(e)}r.done?t(s):Promise.resolve(s).then(a,o)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(o,i){var c=e.apply(t,n);function r(e){a(c,o,i,r,s,"next",e)}function s(e){a(c,o,i,r,s,"throw",e)}r(void 0)})}}cc._RF.push(t,"3f462i7MAFKwK/nMa6m4PkQ","TheMagicHanzo_Slots"),cc.Class({extends:e("LMSlots_Slots_Base"),properties:{},ReconnectShow:function(){var e=this,t=cc.vv.gameData.getSelectData();if(t&&t.state)return this.lockJackpot(),void this.startShowWheel();cc.vv.gameData.GetFreeTime()?(this.ShowGameview(!0),this.scheduleOnce(function(){e.CanDoNextRound()},.5)):this.ShowGameview(!1)},ShowGameview:function(e){var t=cc.find("moreslotsUI/mainnode",this.node.parent);if(e){if(t.active=!0,this.resetMoreSlotsTop(t),cc.vv.gameData.getWheelFreeTimes()){var n=cc.vv.gameData.GetTotalFreeWin();this._bottomScript.SetWin(n)}cc.vv.gameData.getMoreSlotsMgr().updateSlotsUI()}else t.active=!1,this._bottomScript.ShowFreeModel(!1),cc.vv.gameData.getMoreSlotsMgr().clearSlotsUI()},resetMoreSlotsTop:function(e){for(var t=2;t<5;t++){cc.find(cc.js.formatStr("topcontent/item%s",t),e).active=!0}},onMsgSpine:function(e){0==e.resultCards.length&&(e.resultCards=[4,5,6,7,8,9,10,11,12,13,14,12,13,13,5]),this._super(e)},StartMove:function(){this._super(),cc.vv.gameData.clearWheelData(),Global.SlotsSoundMgr.playNormalBgm(),cc.vv.gameData.setReelMove(!0),this.startMoveHandle(),cc.vv.gameData.getMoreSlotsMgr().startMove()},StopMove:function(){this._super(),cc.vv.gameData.getMoreSlotsMgr().stopMove()},OnSpinEnd:function(){var e=this;return o(regeneratorRuntime.mark(function t(){var n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.CheckSpecialReward()&&e._bottomScript.ShowBtnsByState("moveing_1"),!cc.vv.gameData.getSlotsListData()){t.next=5;break}return t.next=5,cc.vv.gameData.getMoreSlotsMgr().collectBonusEffect();case 5:if(e.ShowWinTrace(),cc.vv.gameData.getMoreSlotsMgr().showWinTrance(),e.showWildWinTrace(),e.playScatterAnimation(!0),!e.CheckTriggerSubGame()){t.next=13;break}return e.lockJackpot(),t.next=13,e.triggerWheelGame();case 13:return t.next=15,e.playBottomWin();case 15:if(!cc.vv.gameData.getSlotsListData()){t.next=18;break}return t.next=18,cc.vv.gameData.getMoreSlotsMgr().bonusCollectUpgrade();case 18:if(!(cc.vv.gameData.GetTotalFree()>0&&0==cc.vv.gameData.getFreeCnt())){t.next=23;break}return t.next=21,e.awaitTime(1);case 21:return cc.vv.gameData.GetUIManager().showFreeOverCollectUI(),t.abrupt("return");case 23:if(!((n=cc.vv.gameData.isTriggerNormalFree()||cc.vv.gameData.getWheelFreeTimes())>0)){t.next=35;break}if(!(a=cc.vv.gameData.getSuperBonus())){t.next=30;break}if(a.total!=a.num){t.next=30;break}return Global.dispatchEvent(cc.vv.gameData._EventId.SLOT_REFUSH_ENERGY),t.abrupt("return");case 30:if(!cc.vv.gameData.isTriggerNormalFree()){t.next=33;break}return t.next=33,e.awaitTime(3);case 33:return cc.vv.gameData.GetUIManager().showStartFreeGameUI(n),t.abrupt("return");case 35:return t.next=37,cc.vv.gameData.GetUIManager().showExtraFreeUI();case 37:return t.next=39,e.awaitTime(.3);case 39:cc.vv.gameData.setReelMove(!1),e.CanDoNextRound();case 41:case"end":return t.stop()}},t)}))()},CheckTriggerSubGame:function(){var e=cc.vv.gameData.getSelectData();return!!e&&e.state},triggerWheelGame:function(){var e=this;return o(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.playTriggerBonusAnimation();case 2:return t.next=4,e.playCoinShow();case 4:return t.next=6,e.bonsShowCollectUI();case 6:return t.next=8,e.bonusCollectCoin();case 8:return t.next=10,e.awaitTime(.5);case 10:return t.next=12,e.startShowWheel();case 12:case"end":return t.stop()}},t)}))()},startShowWheel:function(){var e=this;return o(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){e.showLogo(!0),cc.find("node_wincollect",e.node).active=!1,cc.find("subgamewheel",e.node.parent).getComponent("TheMagicHanzo_Wheel").enterGame(t)}));case 1:case"end":return t.stop()}},t)}))()},playTriggerBonusAnimation:function(){var e=this;return o(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){Global.SlotsSoundMgr.playEffect("wheel_trigger");for(var n=0;n<5;n++)for(var a=e._reels[n]._symbols,o=0;o<3;o++)a[o].playBonusAnimation(!0);e.scheduleOnce(function(){t()},2)}));case 1:case"end":return t.stop()}},t)}))()},playCoinShow:function(){var e=this;return o(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){var n=0,a=e,o=cc.vv.gameData.getBonusData().info,i=[1,6,11,2,7,12,3,8,13,4,9,14,5,10,15];(function e(){if(n>=i.length)t();else{var c=a.getBonusByIndex(o,i[n]);c?(Global.SlotsSoundMgr.playEffect("num_out"),a.GetSymbolByIdx(i[n]).playBonusNum(c.num),a.scheduleOnce(function(){n++,e()},.6)):(n++,e())}})()}));case 1:case"end":return t.stop()}},t)}))()},showLogo:function(e){cc.find("Canvas/safe_node/fububanzhang").active=e},bonsShowCollectUI:function(){var e=this;return o(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){e.showLogo(!1);var n=cc.find("node_wincollect",e.node);cc.find("getcoin",n).getComponent(cc.Label).string="",n.active=!0,n.scale=0,Global.SlotsSoundMgr.playEffect("wheel_frame_in"),cc.tween(n).to(.5,{scale:1},{easing:"backInOut"}).call(function(){t()}).start()}));case 1:case"end":return t.stop()}},t)}))()},bonusCollectCoin:function(){var e=this;return o(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){for(var n=cc.find("collectbonus",e.node),a=cc.find("node_wincollect",e.node),o=e.node.convertToNodeSpaceAR(a.convertToWorldSpaceAR(cc.v2(0,0))),i=0;i<5;i++)for(var c=e._reels[i]._symbols,r=0;r<3;r++)if(3==c[r].GetShowId()){var s=cc.instantiate(n);s.parent=e.node,s.active=!0,s.position=e.node.convertToNodeSpaceAR(c[r].node.convertToWorldSpaceAR(cc.v2(0,0))),cc.tween(s).to(.5,{position:o}).start()}Global.SlotsSoundMgr.playEffect("chip_value_collect"),e.scheduleOnce(function(){var n=cc.vv.gameData.getBonusData(),o=cc.find("getcoin",a),i=cc.find("node_wincollect/collectframespine",e.node);cc.vv.gameData.playSpine(i,"animation",!1,function(){i.active=!1}),Global.SlotsSoundMgr.playEffect("win_rollup"),Global.doRoallNumEff(o,0,n.gamewin,1.5,function(){t()},null,0,!0)},.5)}));case 1:case"end":return t.stop()}},t)}))()},getBonusByIndex:function(e,t){for(var n=0;n<e.length;n++)if(e[n].idx==t)return e[n];return null},playScatterAnimation:function(e){if(cc.vv.gameData.isTriggerNormalFree()){Global.SlotsSoundMgr.playEffect("scatter_trigger");for(var t=0;t<5;t++)for(var n=this._reels[t]._symbols,a=0;a<3;a++)n[a].playScatterAnimation(e)}},startMoveHandle:function(){for(var e=0;e<5;e++)for(var t=this._reels[e]._symbols,n=0;n<4;n++)t[n].clearBonusNum()},showWildWinTrace:function(){for(var e=cc.find("top_ani",this.node),t=0;t<this._gameInfo.zjLuXian.length;t++)for(var n=this._gameInfo.zjLuXian[t],a=0;a<4;a++){var o=n.indexs[a],i=(o-1)%5,c=4-Math.floor((o-1)/5)-1,r=cc.find(cc.js.formatStr("top_symbol_%s_%s",c,i),e);r&&r.active&&r.getComponent(sp.Skeleton).setAnimation(0,"animation2",!0)}},startEnterFreeGame:function(){var e=this;this.backupSymbolState(),this.playTransitionAni(function(){e.scheduleOnce(function(){cc.vv.gameData.GetBottomScript().SendSpinReq()},.5)}),this.scheduleOnce(function(){Global.SlotsSoundMgr.playBgm("free_bgm"),e.ShowGameview(!0);var t=cc.vv.gameData.isTriggerNormalFree()||cc.vv.gameData.getWheelFreeTimes();cc.vv.gameData.SetFreeTime(t),cc.vv.gameData.GetBottomScript().ShowFreeModel(!0,1,t)},.2)},backupSymbolState:function(){for(var e=0;e<5;e++)this._reels[e].Backup()},resumeSymbolState:function(){for(var e=0;e<5;e++)this._reels[e].Resume()},exitFreeGame:function(){var e=this;this.resetJackpot(),this.playTransitionAni(function(){var t=cc.vv.gameData.GetGameTotalFreeWin();cc.vv.gameData.GetSlotsScript().ShowBottomWin(t,t,!0,function(){e.CanDoNextRound()})}),this.scheduleOnce(function(){e.resumeSymbolState(),Global.SlotsSoundMgr.stopBgm(),Global.dispatchEvent(cc.vv.gameData._EventId.SLOT_REFUSH_ENERGY),e.ShowGameview(!1)},.2)},lockJackpot:function(){var e=cc.vv.gameData.getBonusData();cc.find("LMSlots_PrizePool_1",this.node.parent).getComponent("LMSlots_PrizePool_Base").PausePool([{prizeType:0,pauseNum:e.poolList[0]},{prizeType:1,pauseNum:e.poolList[1]},{prizeType:2,pauseNum:e.poolList[2]},{prizeType:3,pauseNum:e.poolList[3]}])},resetJackpot:function(){cc.find("LMSlots_PrizePool_1",this.node.parent).getComponent("LMSlots_PrizePool_Base").ResumePausePool()},playTransitionAni:function(e){Global.SlotsSoundMgr.playEffect("transition");var t=cc.find("screenspine/transition",this.node.parent);cc.vv.gameData.playSpine(t,"animation",!1,e)},playBottomWin:function(){var e=this;return o(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){var n=cc.vv.gameData.GetGameWin(),a=n,o=!0;if(cc.vv.gameData.GetTotalFree()>0&&cc.vv.gameData.GetTotalFree()!=cc.vv.gameData.GetFreeTime())a=cc.vv.gameData.GetGameTotalFreeWin(),o=0==cc.vv.gameData.GetFreeTime();else{var i=cc.vv.gameData.getWheelData();i&&(n=i.wincoin,a=i.wincoin,cc.vv.gameData.AddCoin(a))}e.ShowBottomWin(n,a,o,function(){t()})}));case 1:case"end":return t.stop()}},t)}))()},awaitTime:function(e){var t=this;return new Promise(function(n){t.scheduleOnce(function(){n()},e)})}}),cc._RF.pop()},{LMSlots_Slots_Base:void 0}],TheMagicHanzo_Symbol:[function(e,t,n){"use strict";cc._RF.push(t,"071f4MKD9ZBOr7xS36O5axp","TheMagicHanzo_Symbol"),cc.Class({extends:e("LMSlots_Symbol_Base"),properties:{},onLoad:function(){},playScatterAnimation:function(e){if(2==this._id){var t=cc.vv.gameData.getGameCfg(),n=cc.find(t.symbol[this._id].win_node,this.node);e?(n.active=!0,n.getComponent(sp.Skeleton).setAnimation(0,"animation2",!0)):n.active=!1}},playBonusAnimation:function(e){if(3==this._id){var t=cc.vv.gameData.getGameCfg(),n=cc.find(t.symbol[this._id].win_node,this.node);e?(n.active=!0,n.getComponent(sp.Skeleton).setAnimation(0,"animation2",!1)):n.active=!1}},playBonusNum:function(e){var t=cc.find("num",this.node);t.getComponent(cc.Label).string=Global.convertNumToShort(e,1e3,0),t.scale=0,cc.tween(t).to(.5,{scale:1},{easing:"backInOut"}).start()},clearBonusNum:function(){cc.find("num",this.node).getComponent(cc.Label).string=""}}),cc._RF.pop()},{LMSlots_Symbol_Base:void 0}],TheMagicHanzo_UIMgr:[function(e,t,n){"use strict";function a(e,t,n,a,o,i,c){try{var r=e[i](c),s=r.value}catch(e){return void n(e)}r.done?t(s):Promise.resolve(s).then(a,o)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(o,i){var c=e.apply(t,n);function r(e){a(c,o,i,r,s,"next",e)}function s(e){a(c,o,i,r,s,"throw",e)}r(void 0)})}}cc._RF.push(t,"dc836AYVv1B6LX7566ehHEC","TheMagicHanzo_UIMgr"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this._luckUI=cc.find("luckui",this.node),this._wheelresultUI=cc.find("wheelresultui",this.node),this._startfreeUI=cc.find("startfreegameui",this.node),this._collectfreeUI=cc.find("collectui",this.node),this._startSuperfreeUI=cc.find("startsuperfreegameui",this.node),this._collectSuperfreeUI=cc.find("supercollectui",this.node),this._extrafreeUI=cc.find("extrafreeui",this.node),this._extrasuperfreeUI=cc.find("extrasuperfreeui",this.node);var e=cc.find("mainnode/btn_collect",this._wheelresultUI);Global.btnClickEvent(e,this.onCollectCoin,this);var t=cc.find("mainnode/btn_start",this._startfreeUI);Global.btnClickEvent(t,this.onStartFreeGame,this);var n=cc.find("mainnode/btn_start",this._collectfreeUI);Global.btnClickEvent(n,this.onFreeOverCollect,this);var a=cc.find("mainnode/btn_start",this._startSuperfreeUI);Global.btnClickEvent(a,this.onSuperFreeStart,this);var o=cc.find("mainnode/btn_start",this._collectSuperfreeUI);Global.btnClickEvent(o,this.onSuperFreeOverCollect,this)},start:function(){},showLuckyUI:function(e){var t=this;this._luckUI.active=!0,Global.showAlertAction(this._luckUI,!0,.01,1,function(){t.scheduleOnce(function(){Global.SlotsSoundMgr.playEffect("popup_out"),Global.showAlertAction(t._luckUI,!1,1,0,e)},2)})},showExtraFreeUI:function(){var e=this;return o(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){var n=cc.vv.gameData.getSlotsListData();if(n)if(n.free>0){var a=cc.vv.gameData.getSuperBonus();if(a){var o=a.total==a.num?e._extrasuperfreeUI:e._extrafreeUI,i=cc.find("mainnode",o);o.active=!0,cc.find("freegames/middle/freetimes",i).getComponent(cc.Label).string=n.free,Global.showAlertAction(i,!0,.01,1,function(){e.scheduleOnce(function(){Global.showAlertAction(i,!1,1,0,function(){o.active=!1,t()})},2)})}}else t();else t()}));case 1:case"end":return t.stop()}},t)}))()},showWheelResultUI:function(e){var t=this;this._wheelData=e;var n=e.result;this._wheelresultUI.active=!0;var a=cc.find("mainnode",this._wheelresultUI);1==n.length?"MULT"==n[0].type?this.showMultUI(n[0].num,e.gamewin):"FREE"==n[0].type&&this.showFreeUI(n[0].num):this.showJackpotUI(n[0],n[1],e.gamewin);var o=this;Global.showAlertAction(a,!0,.01,1,function(){var t=cc.find("mainnode/bottom/totalwin",o._wheelresultUI);Global.doRoallNumEff(t,e.wincoin,e.wincoin,0,null,null,0,!0)});var i=cc.find("mainnode/btn_collect",this._wheelresultUI);cc.vv.gameData.checkAutoPlay(i,function(){Global.SlotsSoundMgr.playEffect("btn_click");var e=cc.find("mainnode",t._wheelresultUI);cc.tween(e).to(.1,{scale:1.2}).to(.3,{scale:0},{easing:"backOut"}).call(function(){t._wheelData.select&&t._wheelData.select.state?t.sendEnterFreeeGame(t._wheelData.select.rtype):cc.find("Canvas/safe_node/subgamewheel").getComponent("TheMagicHanzo_Wheel").wheelResultUIClose(),t._wheelresultUI.active=!1}).start()})},showJackpotUI:function(e,t,n){this.showSubUI(!0,!1,!1);var a=cc.find("mainnode/jackpot/middle_mult",this._wheelresultUI),o=cc.find("mainnode/jackpot/middle_free",this._wheelresultUI),i=cc.find("mainnode/jackpot/totalwin",this._wheelresultUI),c=cc.find("mainnode/jackpot/head",this._wheelresultUI),r=this.getJackpotSpName(e.num);c.getComponent(cc.Sprite).spriteFrame=cc.vv.gameData.GetAtlasByName("popup").getSpriteFrame(r),"MULT"==t.type?(cc.find("multnum",a).getComponent(cc.Label).string=t.num+"X",this.setShortNum(cc.find("totalwin",a),n),i.active=!0,a.active=!0,o.active=!1):"FREE"==t.type&&(cc.find("freetimes",o).getComponent(cc.Label).string=t.num,i.active=!1,o.active=!0,a.active=!1)},setShortNum:function(e,t){e.getComponent(cc.Label).string=t>1e3?Global.FormatNumToComma(Number(t/1e3))+"K":t},getJackpotSpName:function(e){switch(e){case 1:return"theme143_popup_text7_4";case 2:return"theme143_popup_text7_3";case 3:return"theme143_popup_text7_2";case 4:return"theme143_popup_text7_1"}},showMultUI:function(e,t){Global.SlotsSoundMgr.playEffect("tip_show"),this.showSubUI(!1,!0,!1);var n=cc.find("mainnode/mult",this._wheelresultUI);cc.find("multnum",n).getComponent(cc.Label).string=e+"X";var a=cc.find("middle/totalwin",n);this.setShortNum(a,t)},showFreeUI:function(e){Global.SlotsSoundMgr.playEffect("tip_show"),this.showSubUI(!1,!1,!0),cc.find("mainnode/freegames/middle/freetimes",this._wheelresultUI).getComponent(cc.Label).string=e},showSubUI:function(e,t,n){Global.SlotsSoundMgr.playEffect("tip_show");var a=cc.find("mainnode/jackpot",this._wheelresultUI),o=cc.find("mainnode/mult",this._wheelresultUI),i=cc.find("mainnode/freegames",this._wheelresultUI);a.active=e,o.active=t,i.active=n},showStartFreeGameUI:function(e){var t=this;Global.SlotsSoundMgr.playEffect("free_popup_trigger"),this._startfreeUI.active=!0;var n=cc.find("mainnode",this._startfreeUI);cc.find("freegames/middle/freetimes",n).getComponent(cc.Label).string=e,Global.showAlertAction(n,!0,.01,1,null);var a=cc.find("mainnode/btn_start",this._startfreeUI);cc.vv.gameData.checkAutoPlay(a,function(){Global.SlotsSoundMgr.playEffect("btn_click");var e=cc.find("mainnode",t._startfreeUI);cc.tween(e).to(.1,{scale:1.2}).to(.3,{scale:0},{easing:"backOut"}).call(function(){t._startfreeUI.active=!1,cc.log("2222222222222222222222222222222"),cc.vv.gameData.GetSlotsScript().startEnterFreeGame()}).start()})},showSuperFreeStartUI:function(){var e=this;Global.SlotsSoundMgr.playEffect("free_popup_trigger"),this._startSuperfreeUI.active=!0;var t=cc.vv.gameData.isTriggerNormalFree()||cc.vv.gameData.getWheelFreeTimes(),n=cc.find("mainnode",this._startSuperfreeUI);cc.find("freegames/middle/freetimes",n).getComponent(cc.Label).string=t,Global.showAlertAction(n,!0,.01,1,null);var a=cc.find("mainnode/btn_start",this._startSuperfreeUI);cc.vv.gameData.checkAutoPlay(a,function(){Global.SlotsSoundMgr.playEffect("btn_click");var t=cc.find("mainnode",e._startSuperfreeUI);cc.tween(t).to(.1,{scale:1.2}).to(.3,{scale:0},{easing:"backOut"}).call(function(){e._startSuperfreeUI.active=!1,cc.vv.gameData.getMoreSlotsMgr().changeBackimage(1),cc.vv.gameData.GetSlotsScript().startEnterFreeGame()}).start()})},showSuperFreeCollectUI:function(){var e=this;Global.SlotsSoundMgr.playEffect("free_popup_collect"),this._collectSuperfreeUI.active=!0;var t=cc.find("mainnode",this._collectSuperfreeUI);Global.showAlertAction(t,!0,.01,1,function(){var e=cc.find("freegames/middle/collectcoin",t),n=cc.vv.gameData.GetGameTotalFreeWin();e.getComponent(cc.Label).string="",Global.doRoallNumEff(e,0,n,1,null,null,0,!0)});var n=cc.find("mainnode/btn_start",this._collectSuperfreeUI);cc.vv.gameData.checkAutoPlay(n,function(){Global.SlotsSoundMgr.playEffect("btn_click"),cc.vv.gameData.clearSuperBonus();var t=cc.find("mainnode",e._collectSuperfreeUI);cc.tween(t).to(.1,{scale:1.2}).to(.3,{scale:0},{easing:"backOut"}).call(function(){e._collectSuperfreeUI.active=!1,cc.vv.gameData.GetSlotsScript().exitFreeGame()}).start()})},showFreeOverCollectUI:function(){var e=this;Global.SlotsSoundMgr.playEffect("free_popup_collect");var t=cc.vv.gameData.getSuperBonus();if(t&&t.total==t.num)this.showSuperFreeCollectUI();else{this._collectfreeUI.active=!0;var n=cc.find("mainnode",this._collectfreeUI);Global.showAlertAction(n,!0,.01,1,function(){var e=cc.find("freegames/middle/collectcoin",n),t=cc.vv.gameData.GetGameTotalFreeWin();e.getComponent(cc.Label).string="",Global.doRoallNumEff(e,0,t,1,null,null,0,!0)});var a=cc.find("mainnode/btn_start",this._collectfreeUI);cc.vv.gameData.checkAutoPlay(a,function(){Global.SlotsSoundMgr.playEffect("btn_click");var t=cc.find("mainnode",e._collectfreeUI);cc.tween(t).to(.1,{scale:1.2}).to(.3,{scale:0},{easing:"backOut"}).call(function(){e._collectfreeUI.active=!1,cc.vv.gameData.GetSlotsScript().exitFreeGame()}).start()})}},onSuperFreeStart:function(){var e=this;cc.find("mainnode/btn_start",this._startSuperfreeUI).stopAllActions(),Global.SlotsSoundMgr.playEffect("btn_click");var t=cc.find("mainnode",this._startSuperfreeUI);cc.tween(t).to(.1,{scale:1.2}).to(.3,{scale:0},{easing:"backOut"}).call(function(){e._startSuperfreeUI.active=!1,cc.vv.gameData.getMoreSlotsMgr().changeBackimage(1),cc.vv.gameData.GetSlotsScript().startEnterFreeGame()}).start()},onFreeOverCollect:function(){var e=this;cc.find("mainnode/btn_start",this._collectfreeUI).stopAllActions(),Global.SlotsSoundMgr.playEffect("btn_click");var t=cc.find("mainnode",this._collectfreeUI);cc.tween(t).to(.1,{scale:1.2}).to(.3,{scale:0},{easing:"backOut"}).call(function(){e._collectfreeUI.active=!1,cc.vv.gameData.GetSlotsScript().exitFreeGame()}).start()},onSuperFreeOverCollect:function(){var e=this;cc.find("mainnode/btn_start",this._collectSuperfreeUI).stopAllActions(),Global.SlotsSoundMgr.playEffect("btn_click"),cc.vv.gameData.clearSuperBonus();var t=cc.find("mainnode",this._collectSuperfreeUI);cc.tween(t).to(.1,{scale:1.2}).to(.3,{scale:0},{easing:"backOut"}).call(function(){e._collectSuperfreeUI.active=!1,cc.vv.gameData.GetSlotsScript().exitFreeGame()}).start()},onCollectCoin:function(){var e=this;cc.find("mainnode/btn_collect",this._wheelresultUI).stopAllActions(),Global.SlotsSoundMgr.playEffect("btn_click");var t=cc.find("mainnode",this._wheelresultUI);cc.tween(t).to(.1,{scale:1.2}).to(.3,{scale:0},{easing:"backOut"}).call(function(){e._wheelData.select&&e._wheelData.select.state?e.sendEnterFreeeGame(e._wheelData.select.rtype):cc.find("Canvas/safe_node/subgamewheel").getComponent("TheMagicHanzo_Wheel").wheelResultUIClose(),e._wheelresultUI.active=!1}).start()},onStartFreeGame:function(){var e=this;cc.find("mainnode/btn_start",this._startfreeUI).stopAllActions(),Global.SlotsSoundMgr.playEffect("btn_click");var t=cc.find("mainnode",this._startfreeUI);cc.tween(t).to(.1,{scale:1.2}).to(.3,{scale:0},{easing:"backOut"}).call(function(){e._startfreeUI.active=!1,cc.log("11111111111111111111111111111"),cc.vv.gameData.GetSlotsScript().startEnterFreeGame()}).start()},sendEnterFreeeGame:function(e){var t={c:MsgId.SLOT_SUBGAME_DATA,data:{}};t.data.rtype=e,t.gameid=cc.vv.gameData.getGameId(),cc.vv.NetManager.send(t,!0)}}),cc._RF.pop()},{}],TheMagicHanzo_Wheel:[function(e,t,n){"use strict";function a(e,t,n,a,o,i,c){try{var r=e[i](c),s=r.value}catch(e){return void n(e)}r.done?t(s):Promise.resolve(s).then(a,o)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(o,i){var c=e.apply(t,n);function r(e){a(c,o,i,r,s,"next",e)}function s(e){a(c,o,i,r,s,"throw",e)}r(void 0)})}}cc._RF.push(t,"8ece5KJw+xIzYzqem7qvRDk","TheMagicHanzo_Wheel"),cc.Class({extends:cc.Component,properties:{_node_main:null,_node_wheel:null,_node_win:null,_targetIdx:0},onLoad:function(){this._node_main=cc.find("mainnode",this.node),this._node_wheel=cc.find("node_wheel",this._node_main),this._node_win=cc.find("node_win",this._node_main),this._node_winSpine=cc.find("wheelNode/spinewining",this._node_wheel),this._node_morewinSpine=cc.find("wheelNode/morewiningspine",this._node_wheel),this._node_activewheel=cc.find("wheelNode/activewheel",this._node_wheel),this._btnSpin=cc.find("wheelNode/btnSpin",this._node_wheel),Global.btnClickEvent(this._btnSpin,this.onWheelStart,this),cc.vv.gameData.playSpine(this._btnSpin,"animation1",!0,null)},start:function(){},onEnable:function(){cc.vv.NetManager.registerMsg(MsgId.SLOT_SUBGAME_DATA,this.onRcvSubGameAction,this)},onDisable:function(){cc.vv.NetManager.unregisterMsg(MsgId.SLOT_SUBGAME_DATA,this.onRcvSubGameAction,!1,this)},onWheelStart:function(e){this._btnSpin.stopAllActions(),e.node.getComponent(cc.Button).interactable=!1,Global.SlotsSoundMgr.playEffect("wheel_press"),cc.vv.gameData.GetUIManager().sendEnterFreeeGame(1);var t=cc.find("wheelNode/spineSpinEffect",this._node_wheel);cc.vv.gameData.playSpine(t,"animation",!1,function(){t.active=!1})},enterGame:function(e){var t=this;return o(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t._nextStep=e,t._targetIdx=-1,t._node_winSpine.active=!1,t._node_morewinSpine.active=!1,t.clearWheelSubObject(),t._btnSpin.getComponent(cc.Button).interactable=!1,n.next=8,t.showMain();case 8:case"end":return n.stop()}},n)}))()},exitGame:function(){var e=this;return o(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.awaitTime(1);case 2:return t.next=4,e.playActions(e._node_main,[cc.scaleTo(.2,1.3),cc.scaleTo(.5,0)]);case 4:e._node_main.active=!1;case 5:case"end":return t.stop()}},t)}))()},showMain:function(){var e=this;return o(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=o(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._node_main.active=!0,e._node_win.position=cc.v2(0,-225),e._node_win.scale=.6,e._node_wheel.scale=0,e.showEnterGameWinCoin(),Global.SlotsSoundMgr.playEffect("wheel_in"),cc.find("wheelNode/rotationWheel",e._node_wheel).angle=126,t.next=10,e.playActions(e._node_wheel,[cc.scaleTo(.3,1).easing(cc.easeBackInOut())]);case 10:return t.next=12,e.awaitTime(.3);case 12:return t.next=14,e.playActions(e._node_win,[cc.moveTo(.2,cc.v2(0,130)).easing(cc.easeBackInOut())]);case 14:e._btnSpin.getComponent(cc.Button).interactable=!0,cc.vv.gameData.checkAutoPlay(e._btnSpin,function(){e._btnSpin.getComponent(cc.Button).interactable=!1,Global.SlotsSoundMgr.playEffect("wheel_press"),cc.vv.gameData.GetUIManager().sendEnterFreeeGame(1);var t=cc.find("wheelNode/spineSpinEffect",e._node_wheel);cc.vv.gameData.playSpine(t,"animation",!1,function(){t.active=!1})}),cc.vv.gameData.playSpine(e._btnSpin,"animation1",!0),n();case 18:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},showEnterGameWinCoin:function(){var e=cc.find("getcoin",this._node_win),t=cc.vv.gameData.getBonusData();Global.doRoallNumEff(e,0,t.gamewin,0,null,null,0,!0)},showResult:function(e){var t=this;return o(regeneratorRuntime.mark(function n(){var a,o,i,c,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a=cc.find("wheelNode/rotationWheel",t._node_wheel),o=a.angle,-1!=t._targetIdx&&(o=a.angle%360-18*t._targetIdx),t._targetIdx=e-1,i=18*t._targetIdx,c=-i-o,r=12,n.next=9,t.awaitTime(1);case 9:return cc.vv.gameData.playSpine(t._btnSpin,"animation2",!0,null),cc.find("wheelNode/spindisable",t._node_wheel).active=!0,Global.SlotsSoundMgr.playEffect("wheel_spin"),n.next=14,t.playActions(a,[cc.rotateTo(.5*r,360*r+c).easing(cc.easeSineInOut())]);case 14:return t._wheelData.lucky?cc.vv.gameData.playSpine(t._node_morewinSpine,"animation1",!0,null):cc.vv.gameData.playSpine(t._node_winSpine,"animation",!0,null),Global.SlotsSoundMgr.playEffect("wheel_win"),n.next=18,t.awaitTime(2);case 18:t.showResultUI();case 19:case"end":return n.stop()}},n)}))()},clearWheelSubObject:function(){cc.find("wheelNode/rotationWheel",this._node_wheel).removeAllChildren()},showResultUI:function(){var e=this;this._wheelData.lucky?(Global.SlotsSoundMgr.playEffect("wheel_spin_again"),cc.vv.gameData.GetUIManager().showLuckyUI(function(){Global.SlotsSoundMgr.playEffect("wheel_double"),cc.vv.gameData.playSpine(e._node_activewheel,"animation",!1,function(){var t=cc.find("wheelNode/rotationWheel",e._node_wheel),n=cc.instantiate(e._node_morewinSpine);n.parent=t,n.angle=-t.angle,cc.vv.gameData.playSpine(n,"animation2",!0,null),e._node_morewinSpine.active=!1,e._node_winSpine.active=!1,Global.SlotsSoundMgr.playEffect("wheel_win");var a=cc.find("wheelNode/btnSpin",e._node_wheel);cc.vv.gameData.playSpine(a,"animation1",!0,null),a.getComponent(cc.Button).interactable=!0,cc.vv.gameData.checkAutoPlay(a,function(){a.getComponent(cc.Button).interactable=!1,Global.SlotsSoundMgr.playEffect("wheel_press"),cc.vv.gameData.GetUIManager().sendEnterFreeeGame(1);var t=cc.find("wheelNode/spineSpinEffect",e._node_wheel);cc.vv.gameData.playSpine(t,"animation",!1,function(){t.active=!1})}),cc.find("wheelNode/spindisable",e._node_wheel).active=!1})})):(Global.SlotsSoundMgr.playEffect("wheel_popup"),cc.vv.gameData.GetUIManager().showWheelResultUI(this._wheelData))},wheelResultUIClose:function(){var e=this;Global.SlotsSoundMgr.playEffect("wheel_in"),cc.tween(this._node_win).to(.3,{scale:0}).start(),cc.tween(this._node_wheel).to(.3,{scale:0}).call(function(){e._node_main.active=!1,cc.vv.gameData.GetSlotsScript().resetJackpot(),e._nextStep&&e._nextStep()}).start()},onRcvSubGameAction:function(e){200==e.code&&(this._wheelData=e.data,cc.vv.gameData.setSuperBonus(e.data.superbonus),1==this._wheelData.rtype?(cc.vv.gameData.SetWheelData(e.data),this.showResult(e.data.idx)):this.wheelResultUIClose())},playActions:function(e,t){return new Promise(function(n){t.push(cc.callFunc(function(){n()})),e.active=!0,e.runAction(cc.sequence(t))})},awaitTime:function(e){var t=this;return new Promise(function(n){t.scheduleOnce(function(){n()},e)})}}),cc._RF.pop()},{}]},{},["TheMagicHanzo_Bottom","TheMagicHanzo_ButtonSafe","TheMagicHanzo_Cfg","TheMagicHanzo_Energy","TheMagicHanzo_FreeGame","TheMagicHanzo_FreeReel","TheMagicHanzo_FreeSlots","TheMagicHanzo_FreeSlotsMgr","TheMagicHanzo_FreeSymbol","TheMagicHanzo_GameData","TheMagicHanzo_Logic","TheMagicHanzo_Reel","TheMagicHanzo_Slots","TheMagicHanzo_Symbol","TheMagicHanzo_UIMgr","TheMagicHanzo_Wheel"]);
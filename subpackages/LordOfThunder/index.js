window.__require=function e(t,n,o){function i(a,s){if(!n[a]){if(!t[a]){var c=a.split("/");if(c=c[c.length-1],!t[c]){var u="function"==typeof __require&&__require;if(!s&&u)return u(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+a+"'")}a=c}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){return i(t[a][1][e]||e)},l,l.exports,e,t,n,o)}return n[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<o.length;a++)i(o[a]);return i}({LordOfThunder_BonusGame:[function(e,t,n){"use strict";function o(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=i(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r,a=!0,s=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return a=e.done,e},e:function(e){s=!0,r=e},f:function(){try{a||null==o.return||o.return()}finally{if(s)throw r}}}}function i(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function a(e,t,n,o,i,r,a){try{var s=e[r](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(o,i)}function s(e){return function(){var t=this,n=arguments;return new Promise(function(o,i){var r=e.apply(t,n);function s(e){a(r,o,i,s,c,"next",e)}function c(e){a(r,o,i,s,c,"throw",e)}s(void 0)})}}cc._RF.push(t,"0a4b7+kuWJIZKodpaOlwwic","LordOfThunder_BonusGame"),cc.Class({extends:cc.Component,properties:{_exitCallBack:null,_reels:[],_emptyId:13,_curShowId:111,_cell_height:81,_curRow:6},start:function(){},Init:function(){this._topScript=cc.vv.gameData.GetTopScript(),this._bottomScript=cc.vv.gameData.GetBottomScript(),this._cfg=cc.vv.gameData.getGameCfg(),this._col=this._cfg.col,this._row=this._cfg.row,this._curRow=this._row,this._cell_height=this._cfg.symbolSize.height,this.initBonusNode(),this.createReels(this._col,this._row)},createReels:function(e,t){this._cfg.scripts.Reels;for(var n=0;n<e;n++){var o=cc.find("reel"+(n+1),this._reels_node).addComponent("LordOfThunder_BonusReel");o.Init(n,1,t,this._topAniNode),this._reels.push(o)}},setAllSymbolEmpty:function(){for(var e=0;e<this._col;e++)for(var t=0;t<this._row;t++){this._reels[e].GetSymbolByRow(t).ShowById(this._emptyId)}},initBonusNode:function(){this._bonus_slots=cc.find("safe_node/bonus_slots",this.node),this._bonus_slots.active=!1,this._reels_panel=cc.find("mask",this._bonus_slots),this._reels_bg=cc.find("mask/reels_bg",this._bonus_slots),this._reels_node=cc.find("mask/reels",this._bonus_slots),this._node_times=cc.find("node_times",this._reels_bg),this.setTimesNode(!1),this._spine_hit=cc.find("spine_hit",this._bonus_slots),this._spine_kuang_up=cc.find("safe_node/bonus_spine/spine_kuang_up",this.node),this._spine_kuang_down=cc.find("safe_node/bonus_spine/spine_kuang_down",this.node),this._spine_huoshen=cc.find("safe_node/bonus_spine/spine_huoshen",this.node),this._spine_result_title=cc.find("safe_node/bonus_spine/spine_result_title",this.node),this._spine_hit.active=!1,this._spine_kuang_up.active=!1,this._spine_kuang_down.active=!1,this._spine_huoshen.active=!1,this._spine_result_title.active=!1,this._fire_node=cc.find("safe_node/fire_node",this.node),this._top_fireNode=cc.find("single_fire",this._fire_node),this._top_multiFireNode=cc.find("multi_fire",this._fire_node)},enterBonusGame:function(){var e=this;return s(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._bottomScript.ShowBtnsByState("moveing_1"),Global.SlotsSoundMgr.playBgm("bonus_bgm"),cc.vv.gameData.SetIsBonusGame(!0),e._curAll=cc.vv.gameData.GetBonusAll(),e._curRest=e._curAll-cc.vv.gameData.GetBonusRest(),e.lockJackpot(),e.showEnterState(),t.next=9,e.awaitTime(2);case 9:cc.vv.gameData.SetIsBonusGame(!0),e.sendNextRound();case 11:case"end":return t.stop()}},t)}))()},triBonusGame:function(e){var t=this;return s(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Global.SlotsSoundMgr.playBgm("bonus_bgm"),cc.vv.gameData.SetIsBonusGame(!0),t._curAll=cc.vv.gameData.GetBonusAll(),t._curRest=t._curAll-cc.vv.gameData.GetBonusRest(),t.lockJackpot(),t.initTriState(),e.next=8,t.awaitTime(2);case 8:t.sendNextRound(),t.setTimesNode(!0);case 10:case"end":return e.stop()}},e)}))()},exitBonusGame:function(){var e=this;return s(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return cc.vv.gameData.SetIsBonusGame(!1),Global.SlotsSoundMgr.stopBgm(),cc.vv.gameData.GetPopupScript().playBonusQpAnim(),t.next=5,e.awaitTime(.5);case 5:return e.resetJackpot(),e.showExitState(),t.next=9,e.awaitTime(1);case 9:cc.vv.gameData.GetSlotsScript().exitBonusGame();case 10:case"end":return t.stop()}},t)}))()},initTriState:function(){var e=this;return s(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return cc.find("Canvas/safe_node/spr_bg_bonus").active=!0,cc.find("Canvas/safe_node/slots").active=!1,cc.vv.gameData.GetSlotsScript().showShandianSpineActive(!0),e._bonus_slots.active=!0,t.next=6,e.awaitTime(0);case 6:e.playCharacterAnim(!0),e._reels_bg.position=cc.v2(0,(e._curRow-5)*e._cell_height),e._reels_node.position=cc.v2(0,(e._curRow-3)*e._cell_height),e._top_fireNode.position=e._fire_node.convertToNodeSpaceAR(e._reels_panel.convertToWorldSpaceAR(cc.v2(0,(e._curRow-6)*e._cell_height))),e.setPosType(2),e.initBottomSprType(),e._curShowId=cc.vv.gameData.GetBonusCardId(),cc.vv.gameData.SetBonusRandomList(e._curShowId),e._curRow=e._row,e.setAllSymbolEmpty();case 16:case"end":return t.stop()}},t)}))()},showEnterState:function(){var e=this;return s(regeneratorRuntime.mark(function t(){var n,i,r,a,s,c,u,l,_,p;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],cc.vv.gameData.GetBonusAll()===cc.vv.gameData.GetBonusRest()?e._curRow=e._row:(n=cc.vv.gameData.GetBonusCards(),e._curRow=n.length/e._col),cc.find("Canvas/safe_node/spr_bg_bonus").active=!0,cc.find("Canvas/safe_node/slots").active=!1,cc.vv.gameData.GetSlotsScript().showShandianSpineActive(!0),e._bonus_slots.active=!0,t.next=8,e.awaitTime(0);case 8:for(e.playCharacterAnim(!0),e._reels_bg.position=cc.v2(0,(e._curRow-5)*e._cell_height),e._reels_node.position=cc.v2(0,(e._curRow-3)*e._cell_height),e._top_fireNode.position=e._fire_node.convertToNodeSpaceAR(e._reels_panel.convertToWorldSpaceAR(cc.v2(0,(e._curRow-6)*e._cell_height))),e.setPosType(2),e.initBottomSprType(),e.initTimesNode(),e._curShowId=cc.vv.gameData.GetBonusCardId(),cc.vv.gameData.SetBonusRandomList(e._curShowId),e.setAllSymbolEmpty(),(i=cc.vv.gameData.GetBonusScript().setMultiFireNode(e._curShowId,0,0,6)).active=!0,i.getComponent(sp.Skeleton).addAnimation(0,"animation6",!0),r=0;r<n.length;r++)if(n[r]!==e._emptyId)if(a=Math.floor(r/e._col),0===(s=r%e._col)&&a>=0&&a<=5);else if(c=e.setSymbolTopAni(a,s,n[r]),12!==n[r])c.ShowById(n[r]),c.playBonusShowAnim();else{u=cc.vv.gameData.GetBonusSpInfo(),l=o(u);try{for(l.s();!(_=l.n()).done;)(p=_.value).idx===r+1&&(1===p.rtype?c.ShowById(121):2===p.rtype?c.ShowById(122):3===p.rtype?c.ShowById(123):4===p.rtype&&c.ShowById(124))}catch(e){l.e(e)}finally{l.f()}c.showBg(!0)}case 22:case"end":return t.stop()}},t)}))()},showExitState:function(){this._curRow=6,cc.find("Canvas/safe_node/spr_bg_bonus").active=!1,cc.find("Canvas/safe_node/slots").active=!0,cc.vv.gameData.GetSlotsScript().showShandianSpineActive(!1),this._bonus_slots.active=!1,this.playCharacterAnim(!1),this._reels_bg.position=cc.v2(0,(this._curRow-5)*this._cell_height),this._reels_node.position=cc.v2(0,(this._curRow-3)*this._cell_height),this._top_fireNode.position=this._fire_node.convertToNodeSpaceAR(this._reels_panel.convertToWorldSpaceAR(cc.v2(0,(this._curRow-6)*this._cell_height))),this.setPosType(1),this.destroyAllMultiFire()},initBottomSprType:function(){var e=cc.vv.gameData.GetBonusFireList()[0];cc.find("node/spr_blue",this._node_times).active=1===e,cc.find("node/spr_purple",this._node_times).active=2===e},initTimesNode:function(){var e=cc.find("spr_kuang",this._node_times);e.active=!0,cc.find("lbl_times_curr",e).getComponent(cc.Label).string=this._curRest,cc.find("lbl_times_all",e).getComponent(cc.Label).string=this._curAll},setTimesNode:function(e){var t=cc.find("spr_kuang",this._node_times);e?(this.initTimesNode(),t.opacity=0,cc.tween(t).to(.5,{opacity:255}).start()):(t.opacity=255,t.active=!1)},setSymbolTopAni:function(e,t,n){var o=cc.vv.gameData.getGameCfg().scripts.Symbols,i=cc.find(cc.js.formatStr("reel%s/top_fire_%s",t,e),this._top_fireNode);if(i)return i.active=!0,i.getComponent(o);var r=cc.vv.gameData.GetPrefabByName(this._cfg.symbolPrefab),a=cc.instantiate(r),s=a.addComponent(o);a.parent=this._top_fireNode.getChildByName("reel"+t),a.name=cc.js.formatStr("top_fire_%s",e);var c=(6-e-.5)*this._cell_height;return a.position=cc.v2(0,c),a.zIndex=5*e+t+10*e+10,s.setSymType("bonus"),s},getSymbolTopAni:function(e,t){var n=cc.vv.gameData.getGameCfg().scripts.Symbols,o=cc.find(cc.js.formatStr("reel%s/top_fire_%s",t,e),this._top_fireNode);return o?(o.active=!0,o.getComponent(n)):null},destroyAllTopFire:function(){for(var e=0;e<this._col;e++){cc.find("reel"+e,this._top_fireNode).destroyAllChildren()}},setPosType:function(e){var t,n=this;t=1===e?cc.find("safe_node/slots/reels",this.node):this._reels_node,this.scheduleOnce(function(){n._top_multiFireNode.position=n._top_multiFireNode.parent.convertToNodeSpaceAR(t.convertToWorldSpaceAR(cc.v2(0,0)))},0)},setMultiFireNode:function(e,t,n,o){var i=this.getCloneNode(e,o),r=cc.instantiate(i);r.name=cc.js.formatStr("fireNode_%s_%s",n,o),r.active=!0,r.parent=cc.find("reel"+(t+1),this._top_multiFireNode);var a=(n+.5*o)*this._cfg.symbolSize.height*-1;return r.position=cc.v2(0,a),r},getMultiFireNode:function(e,t,n){var o=cc.find(cc.js.formatStr("reel%s/fireNode_%s_%s",e+1,t,n),this._top_multiFireNode);return o||null},destroyAllMultiFire:function(){for(var e=0;e<this._col;e++){cc.find("reel"+(e+1),this._top_multiFireNode).destroyAllChildren()}},getCloneNode:function(e,t){var n="",o="";111===e?n="blue":112===e?n="gold":113===e?n="red":114===e&&(n="purple"),1===t?o="1":t>1&&t<8?o="234567":t>=8&&t<=10&&(o="8910");var i=cc.js.formatStr("%s_%s",n,o);return cc.find("Canvas/safe_node/fire_node/clone_node/"+i)},StartMove:function(){this._bStopRightnow=null,this._gameInfo=null,this._topScript.StartMove(),this.MoveReels(this._reels),this._stopTime=this.GetStopTime(),this._curTimes-=1,this._curRest+=1,this.initTimesNode(),this.playKuangFire(),Global.SlotsSoundMgr.playEffect("startspin")},MoveReels:function(e){this.moveReelLastIdx=-1;for(var t=1;t<e.length;t++){var n=e[t];n.StartMove();var o=n.GetReelIdx();o>this.moveReelLastIdx&&(this.moveReelLastIdx=o)}},onMsgSpine:function(e){this._gameInfo=e;var t=e.resultCards;this.SetSlotsResult(t)},SetSlotsResult:function(e){for(var t=this._row,n=[],o=0;o<this._row*this._col;o++){Math.floor(o/t);var i=o%this._col;if(this._cfg.symbol[e[o]]){var r={};r.sid=e[o],n[i]||(n[i]=[]),n[i].unshift(r)}}for(var a=0;a<this._reels.length;a++){var s=this._reels[a],c=n[a];s.SetResult(c)}},OnReelBounsActionEnd:function(e){for(var t=0;t<this._row;t++){var n=this._reels[e].GetSymbolByRow(t),o=n.GetShowId(),i=this.getSymbolTopAni(this._row-t-1,e);if(13!=o&&!i){var r=this.setSymbolTopAni(this._row-t-1,e,o);r.ShowById(o),12===o?(r.playStopAnimation(),n.ShowById(this._emptyId)):(Global.SlotsSoundMgr.playEffect("symbol_hint3"),r.playBonusShowAnim(),r.playBonusKuangAnim(),Global.SlotsSoundMgr.playEffect("fire1"));var a=cc.vv.gameData.GetBonusAll();this._curAll!=a&&(this._curAll=a,this.initTimesNode())}}},OnSpinEnd:function(){var e=this;return s(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.awaitTime(1);case 2:return t.next=4,e.playSpecialAnim();case 4:return t.next=6,e.awaitTime(.5);case 6:cc.vv.gameData.GetBonusRest()>0?e.sendNextRound():e.playBonusEnd();case 7:case"end":return t.stop()}},t)}))()},playKuangFire:function(){this._spine_kuang_up.active=!0,this._spine_kuang_down.active=!0,this._spine_kuang_up.y=this._spine_kuang_down.y+this._curRow*this._cell_height+20,this._spine_kuang_up.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),this._spine_kuang_down.getComponent(sp.Skeleton).setAnimation(0,"animation",!1)},playSpecialAnim:function(){var e=this;return s(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=s(regeneratorRuntime.mark(function t(n,o){var i,r,a,s,c,u,l,_,p,h,m;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=!1,r=1;case 2:if(!(r<e._col)){t.next=64;break}a=0;case 4:if(!(a<e._row)){t.next=61;break}if(!(s=e.getSymbolTopAni(e._row-a-1,r))||12!==s.GetShowId()){t.next=58;break}return i=!0,Global.SlotsSoundMgr.playEffect("change2"),c=cc.vv.gameData.GetBonusSpResult().type,u=e,l="",1===c?s.playBonusAnimation("animation101",!1):2===c?(s.playBonusAnimation("animation103",!1),l="animation3"):3===c?(s.playBonusAnimation("animation102",!1),l="animation2"):4===c&&(s.playBonusAnimation("animation104",!1),l="animation4"),t.next=15,e.awaitTime(2);case 15:return t.next=17,e.awaitTime(2.3);case 17:return _=e._bonus_slots.convertToNodeSpaceAR(s.node.convertToWorldSpaceAR(cc.v2(0,0))),e._spine_hit.setPosition(_),e._spine_hit.active=!0,e._spine_hit.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),Global.SlotsSoundMgr.playEffect("transtion2"),t.next=24,e.awaitTime(1);case 24:if(Global.SlotsSoundMgr.stopEffectByName("change2"),1!==c){t.next=36;break}return t.next=28,e.showWheelGame(s);case 28:s.ShowById(121),p=cc.vv.gameData.GetBonusSpResult().rs,h=cc.vv.gameData.GetWheelScript().getJpType(p.rs_1.idx-1),m=cc.vv.gameData.GetWheelScript().getMultType(p.rs_2.idx-1),s.ShowWheelResult(m,h),n(),t.next=57;break;case 36:return e._spine_result_title.active=!0,e._spine_result_title.getComponent(sp.Skeleton).setAnimation(0,l,!1),t.next=40,e.awaitTime(2);case 40:if(2!==c){t.next=46;break}return t.next=43,u.showAddReward();case 43:s.ShowById(122),t.next=56;break;case 46:if(3!==c){t.next=52;break}return t.next=49,u.showUpReward();case 49:s.ShowById(123),t.next=56;break;case 52:if(4!==c){t.next=56;break}return t.next=55,u.showScatterReward(a,r);case 55:s.ShowById(124);case 56:n();case 57:s.showBg(!0);case 58:a++,t.next=4;break;case 61:r++,t.next=2;break;case 64:i||n();case 65:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},showWheelGame:function(e){return s(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=s(regeneratorRuntime.mark(function e(t,n){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=cc.vv.gameData.GetBonusSpResult().rs,e.next=3,cc.vv.gameData.GetWheelScript().gainWheel(o);case 3:t();case 4:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)}))()},showAddReward:function(){var e=this;return new Promise(function(){var t=s(regeneratorRuntime.mark(function t(n,o){var i,r,a,s,c,u,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(Global.SlotsSoundMgr.playEffect("plus"),i=cc.vv.gameData.GetBonusSpResult(),r=i.rs.fire,a=e._curShowId,1===r?a=111:2===r?a=112:3===r?a=113:4===r&&(a=114),s=0;s<e._col;s++)for(c=0;c<e._curRow;c++)(u=e.getSymbolTopAni(c,s))&&u.GetShowId()===e._curShowId&&(u.ShowById(a),u.playBonusShowAnim());return cc.vv.gameData.SetBonusRandomList(a),e.getMultiFireNode(0,0,6).destroy(),(l=e.setMultiFireNode(a,0,0,6)).active=!0,l.getComponent(sp.Skeleton).setAnimation(0,"animation6",!0),e._curShowId=a,t.next=15,e.awaitTime(1);case 15:n();case 16:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}())},showUpReward:function(){var e=this;return s(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=s(regeneratorRuntime.mark(function t(n,o){var i,r,a,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Global.SlotsSoundMgr.playEffect("reelup"),e._curRow+=1,i=.8,cc.tween(e._reels_bg).by(i,{position:cc.v2(0,e._cell_height)}).start(),cc.tween(e._reels_node).by(i,{position:cc.v2(0,e._cell_height)}).start(),cc.tween(e._top_fireNode).by(i,{position:cc.v2(0,e._cell_height)}).start(),cc.tween(e._top_multiFireNode).by(i,{position:cc.v2(0,e._cell_height)}).start(),t.next=9,e.awaitTime(i);case 9:r=.5,a=0;case 11:if(!(a<e._col)){t.next=22;break}return(s=e.setSymbolTopAni(e._curRow-1,a,e._curShowId)).ShowById(e._curShowId),s.playBonusShowAnim(),s.playBoombAnim(),Global.SlotsSoundMgr.playEffect("symbol_hint3"),t.next=19,e.awaitTime(r);case 19:a++,t.next=11;break;case 22:n();case 23:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},showScatterReward:function(e,t){var n=this;return new Promise(function(){var o=s(regeneratorRuntime.mark(function o(i,r){var a,s,c,u,l;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:for(Global.SlotsSoundMgr.playEffect("expand"),a=!1,s=n.getSymbolTopAni(n._row-e-1,t),c=Math.max(t-1,1);c<=Math.min(n._col-1,t+1);c++)for(u=function(e){var t=n.getSymbolTopAni(n._row-e-1,c);if(t);else{a=!0,(t=n.setSymbolTopAni(n._row-e-1,c,n._curShowId)).ShowById(n._curShowId);var o=t.node.position,i=t.node.parent.convertToNodeSpaceAR(s.node.convertToWorldSpaceAR(cc.v2(0,0)));t.node.position=i,cc.tween(t.node).to(.5,{position:o}).call(function(){t.playBonusShowAnim()}).start()}},l=Math.max(e-1,0);l<=Math.min(n._row-1,e+1);l++)u(l);if(!a){o.next=7;break}return o.next=7,n.awaitTime(.8);case 7:return o.next=9,n.awaitTime(.5);case 9:i();case 10:case"end":return o.stop()}},o)}));return function(e,t){return o.apply(this,arguments)}}())},playBonusEnd:function(){var e=this;return s(regeneratorRuntime.mark(function t(){var n,o,i,r,a,s,c,u,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(e.setTimesNode(!1),e._curRow>e._row&&(e.getMultiFireNode(0,0,6).destroy(),(n=e.setMultiFireNode(e._curShowId,0,0,e._curRow)).active=!0,n.getComponent(sp.Skeleton).setAnimation(0,"animation"+e._curRow,!0)),o=1;o<e._col;o++)for(i=0,r=0,a=0;a<e._curRow;a++)e.getSymbolTopAni(a,o)?(0===i&&(r=a),i+=1):(i>0&&((s=e.setMultiFireNode(e._curShowId,o,r,i)).active=!0,i>1?s.getComponent(sp.Skeleton).setAnimation(0,"animation"+i,!0):s.getComponent(sp.Skeleton).setAnimation(0,"animation",!0)),i=0),i>0&&a===e._curRow-1&&((c=e.setMultiFireNode(e._curShowId,o,r,i)).active=!0,i>1?c.getComponent(sp.Skeleton).setAnimation(0,"animation"+i,!0):c.getComponent(sp.Skeleton).setAnimation(0,"animation",!0));return e.setAllSymbolEmpty(),e.destroyAllTopFire(),cc.tween(e._top_multiFireNode).repeatForever(cc.tween().to(.8,{scale:1.1}).to(.8,{scale:1})).start(),u=cc.vv.gameData.GetBonusTotalWinCoin(),l=u,t.next=10,new Promise(function(e,t){cc.vv.gameData.GetSlotsScript().ShowBottomWin(u,l,!0,e)});case 10:e._top_multiFireNode.cleanup(),e._top_multiFireNode.setScale(1),e.exitBonusGame();case 13:case"end":return t.stop()}},t)}))()},sendNextRound:function(){cc.vv.gameData.GetBottomScript().SendSpinReq()},GetStopTime:function(){return this._cfg.auto_stop_time||1},SetStopTime:function(e){this._stopTime=e},GetReelStopInter:function(e){return e*(this._cfg.reelStopInter||.6)},GetSymbolByIdx:function(e){var t=(e-1)%this._col,n=this._row-Math.floor((e-1)/this._col)-1;return this._reels[t].GetSymbolByRow(n)},GetLastStopReelIdx:function(){return this.moveReelLastIdx},lockJackpot:function(){var e=cc.vv.gameData.GetBonusPoolList();cc.find("safe_node/LMSlots_PrizePool_1",this.node).getComponent("LMSlots_PrizePool_Base").PausePool([{prizeType:0,pauseNum:e[0]},{prizeType:1,pauseNum:e[1]},{prizeType:2,pauseNum:e[2]},{prizeType:3,pauseNum:e[3]},{prizeType:4,pauseNum:e[4]}])},resetJackpot:function(){cc.find("safe_node/LMSlots_PrizePool_1",this.node).getComponent("LMSlots_PrizePool_Base").ResumePausePool()},update:function(e){if(this._stopTime>0&&(this._stopTime=this._stopTime-e,this._stopTime<=0))for(var t=0;t<this._reels.length;t++){var n=this._reels[t],o=this.GetReelStopInter(t);n.StopMove(o)}},awaitTime:function(e){var t=this;return new Promise(function(n,o){t.scheduleOnce(function(){n()},e)})},playCharacterAnim:function(e){cc.vv.gameData.GetSlotsScript().playCharacterAnim(e)}}),cc._RF.pop()},{}],LordOfThunder_BonusReel:[function(e,t,n){"use strict";function o(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=i(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r,a=!0,s=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return a=e.done,e},e:function(e){s=!0,r=e},f:function(){try{a||null==o.return||o.return()}finally{if(s)throw r}}}}function i(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}cc._RF.push(t,"6187ekl5JpPoYXoTVTEP4sJ","LordOfThunder_BonusReel"),cc.Class({extends:cc.Component,properties:{_maskList:[],_holderData:[]},start:function(){},Init:function(e,t,n,o){this._reelIdx=e,this._holderCount=n,this._nCount=t,this._symbols=[],this._topAniNode=o;for(var i=0;i<this._holderCount;i++){var r={},a=cc.find("mask_"+(i+1),this.node);r.node=cc.find("holder",a),r.OrigPosY=r.node.position.y,r.symbols=[],this._maskList.push(a),this._holderData.push(r)}this.LoadSymbols()},GetReelIdx:function(){return this._reelIdx},LoadSymbols:function(){var e=cc.vv.gameData.getGameCfg().symbolPrefab;this._symbolTemplete||(this._symbolTemplete=cc.vv.gameData.GetPrefabByName(e));for(var t=0;t<this._holderData.length;t++){for(var n=this._holderData[t],o=0;o<2;o++){var i=cc.vv.gameData.getGameCfg(),r=cc.instantiate(this._symbolTemplete);r.parent=n.node;var a=r.addComponent(i.scripts.Symbols),s=o+1;a.Init(s,this._topAniNode),a.SetSymbolReelIdx(this._reelIdx),a.setSymType("bonus"),n.symbols.push(a)}this.ReLayOut(n.symbols)}},ReLayOut:function(e){for(var t=0;t<e.length;t++){var n=e[t];n.node.position=this.GetSymbolPosByRow(t),n.SetSymbolIdx(t)}},GetSymbolByRow:function(e){return this._holderData[e].symbols[0]},GetSymbolPosByRow:function(e){var t=cc.vv.gameData.getGameCfg();return cc.v2(0,(e+.5)*t.symbolSize.height)},StartMove:function(){this._result=null;var e=cc.vv.gameData.getGameCfg();this._curY=0,this._bMoving=!0,this._bStoping=!1,this._fillCount=0;var t,n=o(this._holderData);try{for(n.s();!(t=n.n()).done;){var i,r=o(t.value.symbols);try{for(r.s();!(i=r.n()).done;){var a=i.value;a.node.active=!0,a.StartMove()}}catch(e){r.e(e)}finally{r.f()}}}catch(e){n.e(e)}finally{n.f()}this._speed=e.speed,this._offset=e.symbolSize.height},StopMove:function(e){this._bMoving&&(this._bStoping=!0,this._stopTime=e)},StopMoveRightNow:function(){this._stopRightNow=!0},OnReelSpinEnd:function(){var e=cc.vv.gameData.GetBonusScript(),t=e.GetLastStopReelIdx();this._reelIdx==t&&e.OnSpinEnd()},SetResult:function(e){this._result=e},UpdatePosition:function(e){if(e=Math.min(e,.025),this._stopTime=this._stopTime-e,this._stopTime<=0&&this._bStoping&&this._result&&this._stopRightNow){var t=cc.vv.gameData.getGameCfg();this._speed=Math.max(t.speed/2,this._speed-t.speed*e)}if(this._curY+=e*this._speed,this._curY>this._offset){this._curY=0;var n,i=o(this._holderData);try{for(i.s();!(n=i.n()).done;){var r=n.value;r.node.y=r.OrigPosY;var a=0,s=null;if(this._stopTime<=0&&this._bStoping&&this._result)if(this._fillCount<this._holderCount){var c=this._result.shift();a=c.sid,s=c.data,this._fillCount++}else this._bMoving=!1;var u=r.symbols.shift();a>0?u.ShowById(a,s):u.ShowRandomSymbol(),r.symbols.push(u),this.ReLayOut(r.symbols)}}catch(e){i.e(e)}finally{i.f()}}else{var l,_=o(this._holderData);try{for(_.s();!(l=_.n()).done;){var p=l.value;p.node.y=p.OrigPosY-this._curY}}catch(e){_.e(e)}finally{_.f()}}this._bMoving||this.OnReelBounsAction()},OnReelBounsActionDeep:function(){},OnReelBounsActionEnd:function(){cc.vv.gameData.GetBonusScript().OnReelBounsActionEnd(this._reelIdx),this.OnReelSpinEnd()},OnReelBounsAction:function(){var e,t=cc.vv.gameData.getGameCfg(),n=t.bounceInfo?t.bounceInfo.distance:30,i=t.bounceInfo?t.bounceInfo.time:.3,r=o(this._holderData);try{for(r.s();!(e=r.n()).done;){var a=e.value;cc.tween(a.node).to(n/this._speed,{position:cc.v2(a.node.x,a.OrigPosY-n)}).to(i,{position:cc.v2(a.node.x,a.OrigPosY)}).start()}}catch(e){r.e(e)}finally{r.f()}cc.tween(this.node).delay(n/this._speed).call(this.OnReelBounsActionDeep.bind(this)).delay(i).call(this.OnReelBounsActionEnd.bind(this)).start()},update:function(e){this._bMoving&&this.UpdatePosition(e)}}),cc._RF.pop()},{}],LordOfThunder_Cfg:[function(e,t,n){"use strict";var o;function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}cc._RF.push(t,"f0ea48X241LtIE635Rr59ac","LordOfThunder_Cfg");var r={symbol:(o={},i(o,1,{node:"s1",win_node:"w1",win_ani:{name:"animation",zIndex:300},isMask:!0}),i(o,201,{node:"s201",win_node:"w201",stop_ani:{name:"animation1",zIndex:100},nudge_ani:{name:"animation2",zIndex:100},isMask:!1}),i(o,202,{node:"s202",win_node:"w202",stop_ani:{name:"animation1",zIndex:100},nudge_ani:{name:"animation2",zIndex:100},isMask:!1}),i(o,203,{node:"s203",win_node:"w203",trigger_ani:{name:"animation2",zIndex:300},stop_ani:{name:"animation1",zIndex:100},nudge_ani:{name:"animation2",zIndex:100},isMask:!1}),i(o,3,{node:"s3",win_node:"",win_ani:{name:"",zIndex:300},isMask:!0}),i(o,4,{node:"s4",win_node:"",win_ani:{name:"",zIndex:300},isMask:!0}),i(o,5,{node:"s5",win_node:"",win_ani:{name:"",zIndex:300},isMask:!0}),i(o,6,{node:"s6",win_node:"",win_ani:{name:"",zIndex:300},isMask:!0}),i(o,7,{node:"s7",win_node:"",win_ani:{name:"",zIndex:300},isMask:!0}),i(o,8,{node:"s8",win_node:"",win_ani:{name:"",zIndex:300},isMask:!0}),i(o,9,{node:"s9",win_node:"",win_ani:{name:"",zIndex:300},isMask:!0}),i(o,10,{node:"s10",win_node:"",win_ani:{name:"",zIndex:300},isMask:!0}),i(o,111,{node:"s111",bonus_node:"s111_0",win_node:"w111",show_ani:{name:"animation",zIndex:300},isMask:!0}),i(o,112,{node:"s112",bonus_node:"s112_0",win_node:"w112",show_ani:{name:"animation",zIndex:300},isMask:!0}),i(o,113,{node:"s113",bonus_node:"s113_0",win_node:"w113",show_ani:{name:"animation",zIndex:300},isMask:!0}),i(o,114,{node:"s114",bonus_node:"s114_0",win_node:"w114",show_ani:{name:"animation",zIndex:300},isMask:!0}),i(o,12,{node:"s12",bonus_node:"s12",win_node:"w12",stop_ani:{name:"animation1",zIndex:300}}),i(o,121,{node:"s121",win_node:""}),i(o,122,{node:"s122",win_node:""}),i(o,123,{node:"s123",win_node:""}),i(o,124,{node:"s124",win_node:""}),i(o,13,{node:"s0",win_node:"",win_ani:""}),o),scripts:{Top:"LMSlots_Top_Base",Bottom:"LMSlots_Bottom_Base",Slots:"LordOfThunder_Slots",Reels:"LordOfThunder_Reels",Symbols:"LordOfThunder_Symbol"},col:5,row:6,bonus_col:5,bonus_row:10,symbolPrefab:"LMSlots_Symbol",symbolSize:{height:81},randomSymbols:[1,3,4,5,6,7,8,9,10],kuang:"kuang",autoModelDelay:1,speed:3e3,reelStopInter:.2,auto_stop_time:1,bounceInfo:{distance:20,time:.1},helpItems:["games/LordOfThunder/prefab/help_node/page_1","games/LordOfThunder/prefab/help_node/page_2","games/LordOfThunder/prefab/help_node/page_3"],commEffect:{path:"games/LordOfThunder/",win1:["win1","win1end"],win2:["win2","win2end"]},AddAntiTime:2.5,reelStateInfo:[{id:[201,202,203],mini:3,counts:[1,1,1,1,1],antiNode:"node_anti",path:"games/LordOfThunder/",reelStopSound:"reel_stop",symbolStopSound:"symbol_scatter",antSound:"reel_speedup",antSpeed:2e3}],normalBgm:"base_bgm",sysFloatOffsetPos:cc.v2(0,40)};t.exports=r,cc._RF.pop()},{}],LordOfThunder_GameData:[function(e,t,n){"use strict";cc._RF.push(t,"715a5fmRltCmKa0qRMOwERZ","LordOfThunder_GameData"),cc.Class({extends:e("LMSlots_GameData_Base"),properties:{},start:function(){},init:function(e,t,n){this._fireGame=e.fireGame,this._fireGame&&(this._bonusRest=this._fireGame.rest,this._bonusAll=this._fireGame.all,this._bonusTotalWinCoin=this._fireGame.totalWinCoin,this._fireGame.fire&&this.setBonusIdByFire(this._fireGame.fire),this._fireGame.poolList&&(this._poolList=this._fireGame.poolList)),this._freeWinCoin=e.freeWinCoin,this._super(e,t,n)},OnRcvNetSpine:function(e){200==e.code&&(this._fireGame=e.fireGame,this._fireGame&&(this._fireGame.spineCnt&&(this._bonusRest=this._fireGame.spineCnt.rest,this._bonusAll=this._fireGame.spineCnt.all,this._bonusTotalWinCoin=this._fireGame.spineCnt.totalWinCoin),this._fireGame.poolList&&(this._poolList=this._fireGame.poolList)),this._freeWinCoin=e.freeWinCoin),this._super(e)},SetPopupScript:function(e){this._popupScp=e},GetPopupScript:function(){return this._popupScp},SetBonusScript:function(e){this._bonusScp=e},GetBonusScript:function(){return this._bonusScp},SetWheelScript:function(e){this._wheelScp=e},GetWheelScript:function(){return this._wheelScp},GetFireGame:function(){return this._fireGame},GetChangeNumBet:function(){return this._fireGame.minBet},SetIsBonusGame:function(e){this._isBonusGame=e},IsBonusGame:function(){return this._isBonusGame},GetBonusAll:function(){return this._bonusAll},GetBonusRest:function(){return this._bonusRest},GetBonusTotalWinCoin:function(){return this._bonusTotalWinCoin},setBonusIdByFire:function(e){1===e?this.SetBonusCardId(111):2===e?this.SetBonusCardId(112):3===e?this.SetBonusCardId(113):4===e&&this.SetBonusCardId(114)},SetBonusCardId:function(e){this._bonusCardId=e},GetBonusCardId:function(){return this._bonusCardId},SetBonusRandomList:function(e){var t=[12,13,13,13,13];t.push(e),t.push(e),t.push(e),t.push(e),this._bonusRandomList=t},GetBonusRandomList:function(){return this._bonusRandomList},GetBonusCards:function(){return this._fireGame.cards},GetBonusSpInfo:function(){return this._fireGame.spInfo},GetBonusFireList:function(){return this._fireGame.fireList},GetBonusSpResult:function(){return this._fireGame.sp_result},GetBonusPoolList:function(){return this._poolList},GetFreeWinCoin:function(){return this._freeWinCoin},setSymbolDark:function(e){this._symDark=e},getSymbolDark:function(){return this._symDark}}),cc._RF.pop()},{LMSlots_GameData_Base:void 0}],LordOfThunder_Logic:[function(e,t,n){"use strict";cc._RF.push(t,"74423p3ZTNEiKUffJTiE0/M","LordOfThunder_Logic"),cc.Class({extends:e("LMSlots_Logic_Base"),properties:{},InitCommComponent:function(){this._super();var e=this.node.addComponent("LordOfThunder_Popup");e.Init(),cc.vv.gameData.SetPopupScript(e);var t=this.node.addComponent("LordOfThunder_BonusGame");t.Init(),cc.vv.gameData.SetBonusScript(t);var n=this.node.addComponent("LordOfThunder_Wheel");n.Init(),cc.vv.gameData.SetWheelScript(n)}}),cc._RF.pop()},{LMSlots_Logic_Base:void 0}],LordOfThunder_Popup:[function(e,t,n){"use strict";function o(e,t,n,o,i,r,a){try{var s=e[r](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(o,i)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(i,r){var a=e.apply(t,n);function s(e){o(a,i,r,s,c,"next",e)}function c(e){o(a,i,r,s,c,"throw",e)}s(void 0)})}}cc._RF.push(t,"dad6a75CH9KtJKyiX+ZVjDx","LordOfThunder_Popup"),cc.Class({extends:cc.Component,properties:{},start:function(){},Init:function(){this._node_popup=cc.find("safe_node/node_popup",this.node),this._node_popup.active=!1,this._node_free_end=cc.find("pop_free_end",this._node_popup),this._node_free_end.active=!1,this._node_free_tri=cc.find("pop_free_tri",this._node_popup),this._node_free_tri.active=!1,this._node_qp=cc.find("safe_node/node_qp",this.node),this._spine_free_chui=cc.find("spine_free_chui",this._node_qp),this._spine_bonus_qp=cc.find("spine_bonus_qp",this._node_qp),this._spine_free_chui.active=!1,this._spine_bonus_qp.active=!1},showGainFree:function(e){var t=this;return i(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise(function(){var n=i(regeneratorRuntime.mark(function n(o,r){var a,s,c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return Global.SlotsSoundMgr.playEffect("touch_out"),t._node_popup.active=!0,t._node_free_tri.active=!0,cc.find("fnt_freecnt",t._node_free_tri).getComponent(cc.Label).string=e,t._node_free_tri.opacity=0,cc.tween(t._node_free_tri).to(.5,{opacity:255}).start(),n.next=8,t.awaitTime(.5);case 8:a=t._node_free_tri.getChildByName("btn_collect"),s=t,c=function(){var e=i(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.getComponent(cc.Button).interactable=!1,cc.tween(s._node_free_tri).to(.5,{opacity:0}).call(function(){s._node_popup.active=!1,s._node_free_tri.active=!1}).start(),e.next=4,t.awaitTime(.4);case 4:o();case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),cc.vv.gameData.checkAutoPlay(a,c),a.getComponent(cc.Button).interactable=!0,a.off("click"),a.on("click",i(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.stopAllActions(),c();case 2:case"end":return e.stop()}},e)})));case 15:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}()));case 1:case"end":return n.stop()}},n)}))()},showEndFree:function(e){var t=this;return new Promise(function(){var n=i(regeneratorRuntime.mark(function n(o,r){var a,s,c,u;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return cc.vv.gameData.GetBottomScript().ShowBtnsByState("moveing_1"),Global.SlotsSoundMgr.playEffect("FreeGame_End"),t._node_popup.active=!0,t._node_free_end.active=!0,a=cc.find("lbl_wincoin",t._node_free_end),Global.doRoallNumEff(a,0,e,1.5,null,null,0,!0),t._node_free_end.opacity=0,cc.tween(t._node_free_end).to(.5,{opacity:255}).start(),n.next=10,t.awaitTime(.5);case 10:s=t._node_free_end.getChildByName("btn_collect"),c=t,u=function(){var n=i(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(s.getComponent(cc.Button).interactable=!1,a.stopAllActions(),!(Global.FormatCommaNumToNum(a.getComponent(cc.Label).string)<e)){n.next=6;break}return a.getComponent(cc.Label).string=Global.FormatNumToComma(e),n.next=6,t.awaitTime(.2);case 6:return cc.tween(c._node_free_end).to(.5,{opacity:0}).call(function(){c._node_popup.active=!1,c._node_free_end.active=!1}).start(),n.next=9,t.awaitTime(.4);case 9:o();case 10:case"end":return n.stop()}},n)}));return function(){return n.apply(this,arguments)}}(),cc.vv.gameData.checkAutoPlay(s,u),s.getComponent(cc.Button).interactable=!0,s.off("click"),s.on("click",i(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s.stopAllActions(),u();case 2:case"end":return e.stop()}},e)})));case 17:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}())},playFreeQpAnim:function(){var e=this;Global.SlotsSoundMgr.playEffect("transtion1"),this._spine_free_chui.active=!0,this._spine_free_chui.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),this._spine_free_chui.getComponent(sp.Skeleton).setCompleteListener(function(){e._spine_free_chui.active=!1})},playBonusQpAnim:function(){var e=this;Global.SlotsSoundMgr.playEffect("fire1"),this._spine_bonus_qp.active=!0,this._spine_bonus_qp.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),this._spine_bonus_qp.getComponent(sp.Skeleton).setCompleteListener(function(){e._spine_bonus_qp.active=!1})},awaitTime:function(e){var t=this;return new Promise(function(n,o){t.scheduleOnce(function(){n()},e)})}}),cc._RF.pop()},{}],LordOfThunder_Reels:[function(e,t,n){"use strict";function o(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=i(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r,a=!0,s=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return a=e.done,e},e:function(e){s=!0,r=e},f:function(){try{a||null==o.return||o.return()}finally{if(s)throw r}}}}function i(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}cc._RF.push(t,"0aca474mN1JaJAIa3Ux2GEW","LordOfThunder_Reels"),cc.Class({extends:e("LMSlots_Reel_Base"),properties:{},start:function(){},reelMove:function(e,t,n){var o=this._cfg.symbolSize.height;cc.tween(this._holderNode).to(n,{position:cc.v2(this._holderNode.x,this._holderNode.y+e*t*o)}).start()},ShowAntiEffect:function(e,t){if(0==e){if(this._cfg.reelStateInfo){var n,i=o(this._cfg.reelStateInfo);try{for(i.s();!(n=i.n()).done;){var r=n.value,a=cc.find(r.antiNode+"_"+(this._reelIdx+1),this.node.parent);a&&a.active&&(a.active=!1,this._stopRightNow&&cc.vv.AudioManager.stopEffectByName(r.antSound))}}catch(e){i.e(e)}finally{i.f()}}}else{var s=cc.find(t+"_"+(this._reelIdx+1),this.node.parent);s?(s.active=e,s.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),cc.vv.gameData.setSymbolDark(!0),cc.vv.gameData.GetSlotsScript().setBgMask(!0),cc.vv.gameData.GetSlotsScript().setAllSymbolMask(!0)):cc.log("\u672a\u627e\u5230\u52a0\u901f\u8282\u70b9\uff1amask/node_anti")}},getAllSymbol:function(){return this._symbols},setScatterNum:function(e){this._scatterNum=e},getScatterNum:function(){return this._scatterNum}}),cc._RF.pop()},{LMSlots_Reel_Base:void 0}],LordOfThunder_Slots:[function(e,t,n){"use strict";function o(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=i(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r,a=!0,s=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return a=e.done,e},e:function(e){s=!0,r=e},f:function(){try{a||null==o.return||o.return()}finally{if(s)throw r}}}}function i(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function a(e,t,n,o,i,r,a){try{var s=e[r](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(o,i)}function s(e){return function(){var t=this,n=arguments;return new Promise(function(o,i){var r=e.apply(t,n);function s(e){a(r,o,i,s,c,"next",e)}function c(e){a(r,o,i,s,c,"throw",e)}s(void 0)})}}cc._RF.push(t,"571868MOi5O8as2pkkQxA50","LordOfThunder_Slots"),cc.Class({extends:e("LMSlots_Slots_Base"),properties:{_isSixTri:!1,_triFreeIdxs:[],_isInitEntry:!0},start:function(){},Init:function(e,t){this._isInitEntry=!0,Global.registerEvent(EventId.END_QUEUE_POP,this.onEventEndQueuePop,this),this._node_banner=cc.find("node_banner",this.node),this._node_free_spins=cc.find("node_free_spins",this.node),this._node_free_spins.active=!1,this._top_free=cc.find("top_free",this.node),this.hideAllFreeCnt(),this.setBgMask(!1),this._super(e,t)},RegisterEvent:function(){this._super(),Global.registerEvent(cc.vv.gameData._EventId.SLOT_TOTALBET_UPDATED,this.onEventTotalbetUpdated,this)},ReconnectShow:function(){var e=this;return s(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.initBannerState(),cc.vv.gameData.GetTotalFree()>0?e.ShowGameview(!0):e.ShowGameview(!1),cc.vv.gameData.GetBonusAll()>0?cc.vv.gameData.GetBonusScript().enterBonusGame():e.CanDoNextRound();case 3:case"end":return t.stop()}},t)}))()},onEventEndQueuePop:function(){if(this._isInitEntry){this._isInitEntry=!1;var e=cc.vv.gameData.GetTotalFree()>0,t=cc.vv.gameData.GetBonusAll()>0;e||t?this.playCharacterAnim(e):this.playEnterGameEff()}},playEnterGameEff:function(){var e=this;Global.SlotsSoundMgr.playEffect("welcome");var t=cc.find("Canvas/safe_node/leishen"),n=t.getComponent(sp.Skeleton).setAnimation(0,"skill",!1);t.getComponent(sp.Skeleton).setTrackCompleteListener(n,function(){t.getComponent(sp.Skeleton).setTrackCompleteListener(n,null),e.playCharacterAnim()})},onMsgSpine:function(e){if(cc.vv.gameData.IsBonusGame())cc.vv.gameData.GetBonusScript().onMsgSpine(e);else{this._gameInfo=e;var t=e.resultCards;t=this.dealCards(t),this.SetSlotsResult(t),this.SetReelStateInfo(t)}if(e.fireGame&&e.fireGame.tri){this.SetStopTime(1e3);var n=this;cc.tween(this.node).delay(this._cfg.auto_stop_time).call(function(){n._reels[0].StopMove(0)}).start()}},dealCards:function(e){for(var t=0;t<this._col;t++){for(var n=0,o=[0,0,0,0,0,0],i=0;i<this._row;i++){2===this.GetResutByRowCol(e,i,t)&&(o[i]=1,n+=1)}for(var r=o.indexOf(1),a=0;a<n;a++){var s=this.ChangeRowColToIdx(e,a+r,t),c=0;o[0]&&(c=3-n),e[s]=203-a-c}this._reels[t].setScatterNum(n)}return e},SetReelStateInfo:function(e){if(this._cfg.reelStateInfo){var t=cc.vv.gameData.GetFireGame();if(!t||!t.tri){for(var n=[],i=0;i<e.length;i++){var r=e[i],a=i%this._col;n[a]||(n[a]=[]),n[a].push(r)}var s,c=o(this._cfg.reelStateInfo);try{for(c.s();!(s=c.n()).done;){var u=s.value,l=Global.copy(u);l.isStop=!1,l.isAnt=!1;for(var _=l.mini,p=Global.copy(l.counts),h=0,m=!0,f=0;f<n.length;f++){var d=this._reels[f];n[f];l.isStop=!1,l.isAnt=!1,h>=_-1&&l.counts[f]>0&&m&&(l.isAnt=!0);var v=this._reels[f].getScatterNum()>0?1:0;h+=v,p.shift();var g=(p.length>0?p.reduce(function(e,t){return e+t}):0)+h;v>0&&g>=_&&m&&(l.isStop=!0),l.continuous&&l.counts[f]>0&&0==v&&(m=!1),d.AddReelStateInfo(Global.copy(l))}}}catch(e){c.e(e)}finally{c.f()}}}},StartMove:function(){cc.vv.gameData.IsBonusGame()?cc.vv.gameData.GetBonusScript().StartMove():(this._super(),Global.SlotsSoundMgr.playNormalBgm())},StopMove:function(){cc.vv.gameData.IsBonusGame()||this._super()},OnReelBounsActionEnd:function(e){var t=this;return s(regeneratorRuntime.mark(function n(){var o,i,r,a,s,c,u,l,_,p,h,m;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(0!==e){n.next=41;break}if(!(o=cc.vv.gameData.GetFireGame())||!o.tri){n.next=41;break}for(i=0,r=[0,0,0,0,0,0],a=[],s=cc.vv.gameData.GetBonusCardId(),c=0;c<t._row;c++)t._reels[e].GetSymbolByRow(c).GetShowId()===s?(++i,r[c]=1):a.push(s);if(!(i<6)){n.next=26;break}return t._reels[e].AppendSymbol(a,r[0]?1:2),u=r[0]?1:-1,l=r[0]?6:r.lastIndexOf(0),(_=cc.find("reels/reel1/spine_nudge",t.node)).position=_.parent.convertToNodeSpaceAR(t._reels[e].GetSymbolByRow(l).node.convertToWorldSpaceAR(cc.v2(0,0))),_.active=!0,_.setScale(cc.v2(1,r[0]?-1:1)),_.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),n.next=19,t.awaitTime(.5);case 19:return t._reels[e].reelMove(u,a.length,.6*a.length),p=t._cfg.symbolSize.height,cc.tween(_).to(.6*a.length,{position:cc.v2(_.x,u*a.length*p+_.y)}).start(),n.next=24,t.awaitTime(.6*a.length);case 24:t._reels[e].DelAppendSymbol(),_.active=!1;case 26:return(h=cc.vv.gameData.GetBonusScript().getMultiFireNode(e,0,6))||(h=cc.vv.gameData.GetBonusScript().setMultiFireNode(s,e,0,6)),h.active=!0,h.getComponent(sp.Skeleton).setAnimation(0,"animation6_1",!1),h.getComponent(sp.Skeleton).addAnimation(0,"animation6",!0),cc.vv.gameData.GetBonusScript().setPosType(1),n.next=34,t.awaitTime(1);case 34:return cc.vv.gameData.GetPopupScript().playBonusQpAnim(),n.next=37,t.awaitTime(.5);case 37:for(m=1;m<t._col;m++)t._reels[m].StopMove(0);return n.next=40,t.awaitTime(.1);case 40:cc.vv.gameData.GetBonusScript().triBonusGame();case 41:case"end":return n.stop()}},n)}))()},OnReelBounsActionDeep:function(e){e===this._col-1&&(cc.vv.gameData.setSymbolDark(!1),this.setBgMask(!1),this.setAllSymbolMask(!1))},OnSpinEnd:function(){this.onSpinEndAction()},onSpinEndAction:function(){var e=this;return s(regeneratorRuntime.mark(function t(){var n,o,i,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=e._gameInfo.fireGame)||!n.tri){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,e.playScatterNudge();case 5:return e.ShowWinTrace(),o=cc.vv.gameData.GetGameWin(),i=o,cc.vv.gameData.GetTotalFree()>0&&cc.vv.gameData.GetTotalFree()!=cc.vv.gameData.GetFreeTime()&&(i=cc.vv.gameData.GetGameTotalFreeWin()),t.next=11,new Promise(function(t,n){e.ShowBottomWin(o,i,!0,t)});case 11:if(!((r=e._gameInfo.freeResult.freeInfo)&&r.freeCnt>0)){t.next=15;break}return t.next=15,e.CheckEnterFreeGame();case 15:if(!(e._gameInfo.allFreeCnt>0&&0==e._gameInfo.freeCnt)){t.next=20;break}return Global.SlotsSoundMgr.stopBgm(),t.next=19,e.CheckExitFreeGame();case 19:Global.SlotsSoundMgr.playNormalBgm();case 20:e.CanDoNextRound();case 21:case"end":return t.stop()}},t)}))()},playScatterNudge:function(){var e=this;return new Promise(function(){var t=s(regeneratorRuntime.mark(function t(n,o){var i,r,a,s,c,u,l,_,p,h,m,f,d;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(i=[],r=0;r<e._col;r++)(a=e._reels[r].getScatterNum())>0&&a<3&&i.push(r);if(!(i.length>0)){t.next=11;break}return t.next=5,e.awaitTime(.2);case 5:for(s=0;s<i.length;s++){for(c=i[s],u=e._reels[c].getScatterNum(),l=e._reels[c].GetSymbolByRow(0).GetShowId(),_=201===l||202===l,p=[],h=0;h<3-u;h++)_?p.unshift(203-h):p.unshift(201+h);for(e._reels[c].AppendSymbol(p,_?1:2),e._reels[c].reelMove(_?1:-1,p.length,.3),Global.SlotsSoundMgr.playEffect("nudge_scatter"),m=e._reels[c].getAllSymbol(),f=0;f<m.length;f++)m[f].playNudgeAnim()}return t.next=8,e.awaitTime(.3);case 8:for(d=0;d<i.length;d++)e._reels[i[d]].DelAppendSymbol();return t.next=11,e.awaitTime(.2);case 11:n();case 12:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}())},CheckEnterFreeGame:function(){var e=this;return s(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=s(regeneratorRuntime.mark(function t(n,i){var r,a,s,c,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:Global.SlotsSoundMgr.playEffect("fg_ling"),r=e._gameInfo.freeResult.freeInfo,e._triFreeIdxs=r.idxs,a=o(e._triFreeIdxs);try{for(a.s();!(s=a.n()).done;)c=s.value,(u=e.GetSymbolByIdx(c))&&u.playTriggerAnimation(!1)}catch(e){a.e(e)}finally{a.f()}return t.next=7,e.awaitTime(1.5);case 7:return e.Backup(),t.next=10,e.showTriFreeAni();case 10:return t.next=12,cc.vv.gameData.GetPopupScript().showGainFree(r.freeCnt);case 12:return cc.vv.gameData.GetPopupScript().playFreeQpAnim(),t.next=15,e.awaitTime(1.2);case 15:return Global.SlotsSoundMgr.playEffect("frame1"),e._node_free_spins.active=!1,e.hideAllFreeCnt(),e.ShowGameview(!0),e.playCharacterAnim(!0),t.next=22,e.awaitTime(1);case 22:n();case 23:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},showTriFreeAni:function(){var e=this;return s(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=s(regeneratorRuntime.mark(function t(n,o){var i,r,a,s,c,u,l,_,p,h,m,f,d;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Global.SlotsSoundMgr.stopBgm(),Global.SlotsSoundMgr.playBgm("beforefg"),i=cc.find("node_count/lbl_count",e._node_free_spins),r=cc.find("node_count/spine_count_1",e._node_free_spins),a=cc.find("node_count/spine_count_2",e._node_free_spins),i.getComponent(cc.Label).string="",r.getComponent(sp.Skeleton).setAnimation(0,"animation1",!0),a.active=!1,Global.SlotsSoundMgr.playEffect("frame1"),e._node_free_spins.active=!0,e._node_free_spins.y=-200,cc.tween(e._node_free_spins).to(1,{position:cc.v2(e._node_free_spins.x,24)}).start(),t.next=14,e.awaitTime(1);case 14:s=e._gameInfo.freeResult.freeInfo,c=s.freeCnt,u=s.idxs,l=e.splitCount(c,u.length),_=0,p=0,h=0;case 21:if(!(h<e._col&&_<l.length)){t.next=43;break}m=e._row-1;case 23:if(!(m>=0&&_<l.length)){t.next=40;break}if(f=e.ChangeRowColToIdx(e._gameInfo.resultCards,m,h),!u.includes(f+1)){t.next=37;break}return _%2==0?Global.SlotsSoundMgr.playEffect("digital1"):Global.SlotsSoundMgr.playEffect("digital2"),d=l[_],e.playFreeCnt(f+1,d),p+=d,i.active=!0,i.getComponent(cc.Label).string=p,a.active=!0,a.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),_+=1,t.next=37,e.awaitTime(.7);case 37:m--,t.next=23;break;case 40:h++,t.next=21;break;case 43:n();case 44:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},playFreeCnt:function(e,t){this._top_free.active=!0;var n=cc.find("fg_"+e,this._top_free);n.active=!0,n.getComponent(sp.Skeleton).setAnimation(0,"animation"+t,!1)},hideAllFreeCnt:function(){for(var e=0;e<this._top_free.childrenCount;e++)this._top_free.children[e].active=!1;this._top_free.active=!1},CheckExitFreeGame:function(){var e=this;return s(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=s(regeneratorRuntime.mark(function t(n,i){var r,a,s,c,u,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,cc.vv.gameData.GetPopupScript().showEndFree(cc.vv.gameData.GetGameTotalFreeWin());case 2:return cc.vv.gameData.GetPopupScript().playFreeQpAnim(),t.next=5,e.awaitTime(1.2);case 5:if(e.Resume(),e._triFreeIdxs&&e._triFreeIdxs.length>0){r=o(e._triFreeIdxs);try{for(r.s();!(a=r.n()).done;)s=a.value,(c=e.GetSymbolByIdx(s))&&c.playTriggerAnimation(!0)}catch(e){r.e(e)}finally{r.f()}e._triFreeIdxs=[]}return e.ShowGameview(!1),e.playCharacterAnim(!1),t.next=11,e.awaitTime(1);case 11:return u=cc.vv.gameData.GetGameTotalFreeWin(),l=u,t.next=15,new Promise(function(t,n){e.ShowBottomWin(u,l,!0,t)});case 15:n();case 16:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},exitBonusGame:function(){var e=this;return s(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(Global.SlotsSoundMgr.stopBgm(),!(cc.vv.gameData.GetTotalFree()>0)){t.next=8;break}if(Global.SlotsSoundMgr.playBgm("free_bgm"),0!=cc.vv.gameData.GetFreeTime()){t.next=6;break}return t.next=6,e.CheckExitFreeGame();case 6:t.next=9;break;case 8:Global.SlotsSoundMgr.playNormalBgm();case 9:cc.vv.gameData.SetBonusCardId(e._isSixTri?111:112),e.CanDoNextRound();case 11:case"end":return t.stop()}},t)}))()},splitCount:function(e,t){var n=[1,2,3,5,10],o=[];for(t=t||9;t>0;)if(1===t)o.push(e),--t;else if(t<=3){for(var i=0===parseInt(e/2)?1:parseInt(e/2),r=0;r<n.length;r++)i<=n[r]&&i>n[r-1]&&(i=i+t>e?n[r-1]:n[r]);o.push(i),--t,e-=i}else{var a=e-t+1,s=parseInt(Math.random()*(a+1));s=0===s?1:s,n.includes(s)&&(o.push(s),--t,e-=s)}return o.reverse(),o},ShowGameview:function(e){if(e){Global.SlotsSoundMgr.playBgm("free_bgm");var t=cc.vv.gameData.GetTotalFree(),n=cc.vv.gameData.GetFreeTime();this._bottomScript.ShowFreeModel(!0,t-n,t);var o=cc.vv.gameData.GetFreeWinCoin();this._bottomScript.SetWin(o)}else this._bottomScript.ShowFreeModel(!1);var i=cc.find("Canvas/safe_node/spr_bg_normal"),r=cc.find("Canvas/safe_node/spr_bg_free");r&&(i&&(i.active=!e),r.active=e),this.showShandianSpineActive(e)},showShandianSpineActive:function(e){cc.find("Canvas/safe_node/shandian").active=e},setBgMask:function(e){cc.find("reels_bg/items_bg/mask",this.node).active=e},setAllSymbolMask:function(e){for(var t=0;t<this._reels.length;t++)for(var n=this._reels[t].getAllSymbol(),o=0;o<n.length;o++)n[o].setMaskVisible(e)},setBannerState:function(e){var t=cc.find("bg_title/title_6",this._node_banner),n=cc.find("bg_title/title_4",this._node_banner),o=cc.find("icon_6",this._node_banner),i=cc.find("icon_4",this._node_banner),r=cc.find("spr_6",this._node_banner);t.active=e,n.active=!e,o.active=e,i.active=!e,r.active=e},initBannerState:function(){cc.vv.gameData.GetBetIdx()<=cc.vv.gameData.GetChangeNumBet()?(this._isSixTri=!0,this.setBannerState(!0)):(this._isSixTri=!1,this.setBannerState(!1)),cc.vv.gameData.SetBonusCardId(this._isSixTri?111:112)},onEventTotalbetUpdated:function(){var e=cc.find("spine_change",this._node_banner);e.active=!1;var t=cc.vv.gameData.GetBetIdx(),n=cc.vv.gameData.GetChangeNumBet();!this._isSixTri&&t<=n?(Global.SlotsSoundMgr.playEffect("change1"),this._isSixTri=!0,e.active=!0,e.getComponent(sp.Skeleton).setAnimation(0,"animation2",!1),this.setBannerState(!0)):this._isSixTri&&t>n&&(Global.SlotsSoundMgr.playEffect("change1"),this._isSixTri=!1,e.active=!0,e.getComponent(sp.Skeleton).setAnimation(0,"animation2",!1),this.setBannerState(!1)),cc.vv.gameData.SetBonusCardId(this._isSixTri?111:112)},awaitTime:function(e){var t=this;return new Promise(function(n,o){t.scheduleOnce(function(){n()},e)})},playCharacterAnim:function(e){var t=cc.find("Canvas/safe_node/leishen");e?(t.stopAllActions(),t.runAction(cc.repeatForever(cc.sequence(cc.callFunc(function(){t.getComponent(sp.Skeleton).setAnimation(0,"idle",!1),t.getComponent(sp.Skeleton).addAnimation(0,"idle",!1),t.getComponent(sp.Skeleton).addAnimation(0,"skill",!1)}),cc.delayTime(11.2))))):(t.stopAllActions(),t.getComponent(sp.Skeleton).setAnimation(0,"idle",!0))}}),cc._RF.pop()},{LMSlots_Slots_Base:void 0}],LordOfThunder_Symbol:[function(e,t,n){"use strict";cc._RF.push(t,"fc3bannNg5BooY1q4kmhHiQ","LordOfThunder_Symbol"),cc.Class({extends:e("LMSlots_Symbol_Base"),properties:{_type:"normal"},Init:function(e,t){this._super(e,t)},setSymType:function(e){this._type=e},playBonusShowAnim:function(){var e=this._id,t=cc.vv.gameData.getGameCfg();if(t.symbol[e]&&t.symbol[e].win_node&&t.symbol[e].show_ani&&(this._showNode&&(this._showNode.active=!1),this._showNode=cc.find(t.symbol[e].win_node,this.node),this._showNode.active=!0,""!=t.symbol[e].show_ani.name)){var n=this._showNode.getComponent(sp.Skeleton);n&&n.setAnimation(0,t.symbol[e].show_ani.name,!0)}},playBonusAnimation:function(e,t){var n=this._id,o=cc.vv.gameData.getGameCfg();if(o.symbol[n]&&o.symbol[n].win_node&&""!=e){var i=this._showNode.getComponent(sp.Skeleton);i&&i.setAnimation(0,e,t)}},playBoombAnim:function(){var e=cc.find("bonus_bao",this.node);e&&(e.active=!0,e.getComponent(sp.Skeleton).setAnimation(0,"animation1",!1),e.getComponent(sp.Skeleton).setCompleteListener(function(){e.active=!1}))},playBonusKuangAnim:function(){var e=cc.find("fire_kuang",this.node);e&&(e.active=!0,e.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),e.getComponent(sp.Skeleton).setCompleteListener(function(){e.active=!1}))},showBg:function(e){var t=cc.find("bg",this.node);t&&(t.active=e)},ShowWheelResult:function(e,t){this._showNode&&(this._showNode.active=!1),this._showNode=cc.find("s121_0",this.node),this._showNode.active=!0;var n=cc.find("spr_mult",this.node),o=cc.find("spr_jp",this.node);n.active=!0,o.active=!0,n.getComponent(cc.Sprite).spriteFrame=cc.vv.gameData.GetAtlasByName("base_game").getSpriteFrame("theme_wheel_num"+e),o.getComponent(cc.Sprite).spriteFrame=cc.vv.gameData.GetAtlasByName("base_game").getSpriteFrame("theme_jackpot_"+t)},ShowRandomSymbol:function(){if("bonus"===this._type){var e=cc.vv.gameData.GetBonusRandomList(),t=(cc.vv.gameData.getGameCfg(),e[Global.random(1,e.length)-1]);this.ShowById(t)}else{var n=cc.vv.gameData.GetBonusCardId(),o=cc.vv.gameData.getGameCfg(),i=Global.copy(o.randomSymbols);i.push(n);var r=i[Global.random(1,i.length)-1];this.ShowById(r)}},playWinAnimation:function(){this._showNode&&(this._showNode.active=!1);var e=this._id,t=cc.vv.gameData.getGameCfg();if(this._state="win",t.symbol[e]&&t.symbol[e].win_node){this._showNode&&(this._showNode.active=!1);var n=this.setAnimationToTop(!0);n.active=!0;var o=cc.find(t.symbol[e].win_node,n);if(o.active=!0,t.symbol[e].win_ani&&""!=t.symbol[e].win_ani.name){n.zIndex=t.symbol[e].win_ani.zIndex-this._symbolIdx+10*this._reelIdx;var i=o.getComponent(sp.Skeleton);i&&i.setAnimation(0,t.symbol[e].win_ani.name,!0)}this._playNode=o}else this._showNode.active=!0,this._playNode=this._showNode;this.playWinTweenAction()},playWinTweenAction:function(){this._playNode.cleanup();var e=this._playNode.scale;this._showNodeOrgScale=e,cc.tween(this._playNode).repeatForever(cc.tween().to(.5,{scale:e+.2}).to(.5,{scale:e}).delay(1)).start()},stopWinTweenAction:function(){this._playNode&&(this._playNode.cleanup(),this._playNode=null)},ShowById:function(e,t){this._super(e,t),this.setMaskVisible(!0)},setMaskVisible:function(e){var t=cc.vv.gameData.getGameCfg();if(t.symbol[this._id]&&t.symbol[this._id].node&&t.symbol[this._id].isMask){var n=cc.find(t.symbol[this._id].node,this.node);e&&cc.vv.gameData.getSymbolDark()?n.color=new cc.Color(105,105,105):n.color=cc.Color.WHITE}},playNudgeAnim:function(){var e=this._id,t=cc.vv.gameData.getGameCfg();if(t.symbol[e]&&t.symbol[e].win_node&&t.symbol[e].nudge_ani&&(this._showNode&&(this._showNode.active=!1),this._showNode=cc.find(t.symbol[e].win_node,this.node),this._showNode.active=!0,""!=t.symbol[e].nudge_ani.name)){this.node.zIndex=t.symbol[e].nudge_ani.zIndex-this._symbolIdx+10*this._reelIdx;var n=this._showNode.getComponent(sp.Skeleton);n&&n.setAnimation(0,t.symbol[e].nudge_ani.name,!1)}},playTriggerAnimation:function(e){var t=!1,n=this._id,o=cc.vv.gameData.getGameCfg();if(o.symbol[n]&&o.symbol[n].win_node&&o.symbol[n].trigger_ani){this._state="trigger",this._showNode&&(this._showNode.active=!1);var i=this.setAnimationToTop(!0);i.active=!0;var r=cc.find(o.symbol[n].win_node,i);if(r.active=!0,""!=o.symbol[n].trigger_ani.name){i.zIndex=o.symbol[n].trigger_ani.zIndex-this._symbolIdx+10*this._reelIdx,t=!0;var a=r.getComponent(sp.Skeleton);a&&(e=e||!1,a.setAnimation(0,o.symbol[n].trigger_ani.name,e))}}return t},playStopAnimation:function(){var e=this._id,t=cc.vv.gameData.getGameCfg();if(t.symbol[e]&&t.symbol[e].win_node&&t.symbol[e].stop_ani&&(this._state="stop",this._showNode&&(this._showNode.active=!1),this._showNode=cc.find(t.symbol[e].win_node,this.node),this._showNode.active=!0,""!=t.symbol[e].stop_ani.name)){"normal"==this._type&&(this.node.zIndex=t.symbol[e].stop_ani.zIndex-this._symbolIdx+10*this._reelIdx);var n=this._showNode.getComponent(sp.Skeleton);n&&n.setAnimation(0,t.symbol[e].stop_ani.name,!1)}},Resume:function(e){this.stopWinTweenAction(),this._super(e)}}),cc._RF.pop()},{LMSlots_Symbol_Base:void 0}],LordOfThunder_Wheel:[function(e,t,n){"use strict";function o(e,t,n,o,i,r,a){try{var s=e[r](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(o,i)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(i,r){var a=e.apply(t,n);function s(e){o(a,i,r,s,c,"next",e)}function c(e){o(a,i,r,s,c,"throw",e)}s(void 0)})}}cc._RF.push(t,"fc828Aiov5IY4Vp0w2/gNsu","LordOfThunder_Wheel"),cc.Class({extends:cc.Component,properties:{_soundCfg:null,_turn_wheel:0},Init:function(){this._wheelData1=["HEPHAESTUS","MAJOR","MINI","MEGA","MINOR","MAJOR","MINI","MINOR","MEGA","MINI"],this._wheelData2=[10,3,1,5,2,3,1,2,5,1],this._node_wheel=cc.find("safe_node/node_wheel",this.node),this._node_wheel.active=!1,this._nodeUI=cc.find("node",this._node_wheel),this._wheel_1=cc.find("node/wheel_1",this._node_wheel),this._wheel_2=cc.find("node/wheel_2",this._node_wheel),this._spine_spin=cc.find("node/spine_spin",this._node_wheel),this._node_result=cc.find("node/wheel_2/node_result",this._node_wheel)},start:function(){},gainWheel:function(e){var t=this;return i(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise(function(){var n=i(regeneratorRuntime.mark(function n(o,i){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return Global.SlotsSoundMgr.playBgm("wheel_bgm"),t._result=e,t._node_wheel.active=!0,t.recoverAllNode(),t.setJackPotGray(!1),n.next=7,t.showWheel();case 7:return n.next=9,t.readyWheel1();case 9:return n.next=11,t.moveWheel(1);case 11:return n.next=13,t.showResultAnim(1);case 13:return n.next=15,t.showResultWheel1();case 15:return t.setJackPotGray(!0),n.next=18,t.readyWheel2();case 18:return n.next=20,t.moveWheel(2);case 20:return n.next=22,t.showResultAnim(2);case 22:return n.next=24,t.showResultWheel2();case 24:return Global.SlotsSoundMgr.stopBgm(),Global.SlotsSoundMgr.playBgm("bonus_bgm"),o(),n.next=29,t.awaitTime(.5);case 29:t._node_wheel.active=!1,t.setJackPotGray(!1);case 31:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}()));case 1:case"end":return n.stop()}},n)}))()},recoverAllNode:function(){this._nodeUI.active=!0,this._nodeUI.opacity=255,this._wheel_1.position=cc.find("node/pos_1",this._node_wheel).position,this._wheel_2.position=cc.find("node/pos_2",this._node_wheel).position,cc.find("spr_di",this._wheel_1).angle=0,cc.find("spr_di",this._wheel_2).angle=0,cc.find("spr_multi",this._wheel_2).y=0,cc.find("spr_multi",this._wheel_2).active=!1,cc.find("spine_light",this._wheel_2).active=!1,this._spine_spin.active=!1,this._node_result.active=!1},showWheel:function(){var e=this;return new Promise(function(t,n){Global.SlotsSoundMgr.playEffect("wheel_popup"),e._nodeUI.position=cc.find("pos_s",e._node_wheel).position,cc.tween(e._nodeUI).to(1,{position:cc.v2(0,0)},{easing:"backOut"}).call(function(){t()}).start()})},readyWheel1:function(){var e=this;return new Promise(function(){var t=i(regeneratorRuntime.mark(function t(n,o){var r,a,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._spine_spin.active=!0,e._spine_spin.getComponent(sp.Skeleton).setAnimation(0,"animation1_1",!1),e._spine_spin.getComponent(sp.Skeleton).addAnimation(0,"animation1_2",!0),t.next=5,e.awaitTime(1);case 5:(r=cc.find("node/btn_start_1",e._node_wheel)).active=!0,r.getComponent(cc.Button).interactable=!0,r.off("click"),a=e,s=function(){var t=i(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Global.SlotsSoundMgr.playEffect("click"),r.getComponent(cc.Button).interactable=!1,r.active=!1,a._spine_spin.getComponent(sp.Skeleton).setAnimation(0,"animation1_3",!1),t.next=6,e.awaitTime(.5);case 6:a._spine_spin.active=!1,n();case 8:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),cc.vv.gameData.checkAutoPlay(r,s),r.on("click",i(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r.stopAllActions(),s();case 2:case"end":return e.stop()}},e)})));case 13:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}())},moveWheel:function(e){var t=this;return new Promise(function(){var n=i(regeneratorRuntime.mark(function n(o,i){var r,a,s,c,u,l,_;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:Global.SlotsSoundMgr.playEffect("wheel_spin"),a=4,c=t._result.rs_1.idx,u=10,l=t._result.rs_2.idx,_=10,t._result_wheel2=t._result.rs_2.coin,1===e?(r=cc.find("spr_di",t._wheel_1),s=360/u*(u-(c-1))+360*a):(r=cc.find("spr_di",t._wheel_2),s=360/_*(_-(l-1))+360*a),t,cc.tween(r).by(7,{angle:-s},{easing:"quadInOut"}).call(function(){o()}).start();case 10:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}())},showResultAnim:function(e){var t=this;return new Promise(function(){var n=i(regeneratorRuntime.mark(function n(o,i){var r,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:Global.SlotsSoundMgr.playEffect("word"),1===e?((r=cc.find("spine_result",t._wheel_1)).active=!0,r.getComponent(sp.Skeleton).setAnimation(0,"animation1",!1),r.getComponent(sp.Skeleton).setCompleteListener(function(){r.active=!1,o()})):2===e&&((a=cc.find("spine_result",t._wheel_2)).active=!0,a.getComponent(sp.Skeleton).setAnimation(0,"animation1",!1),a.getComponent(sp.Skeleton).setCompleteListener(function(){a.active=!1,o()}));case 2:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}())},showResultWheel1:function(){var e=this;return new Promise(function(){var t=i(regeneratorRuntime.mark(function t(n,o){var i,r,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Global.SlotsSoundMgr.playEffect("wheel_stop1"),i=cc.find("spr_title",e._node_result),r=cc.find("lbl_result",e._node_result),a=e.getJpType(e._result.rs_1.idx-1),i.getComponent(cc.Sprite).spriteFrame=cc.vv.gameData.GetAtlasByName("base_game").getSpriteFrame("theme_jackpot_"+a),r.getComponent(cc.Label).string="",e._node_result.active=!0,e._node_result.setScale(0),cc.tween(e._node_result).to(1,{scale:1},{easing:"backOut"}).start(),t.next=11,e.awaitTime(1);case 11:return Global.SlotsSoundMgr.playEffect("qianshu"),Global.doRoallNumEff(r,0,e._result.rs_1.coin,.7,null,null,0,!0),t.next=15,e.awaitTime(.7);case 15:Global.SlotsSoundMgr.stopEffectByName("qianshu"),n();case 17:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}())},readyWheel2:function(){var e=this;return new Promise(function(){var t=i(regeneratorRuntime.mark(function t(n,o){var r,a,s,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Global.SlotsSoundMgr.playEffect("wheel_popup"),r=cc.find("node/pos_1",e._node_wheel).position,cc.tween(e._wheel_2).to(1,{position:r}).start(),t.next=5,e.awaitTime(1);case 5:return e._spine_spin.active=!0,e._spine_spin.getComponent(sp.Skeleton).setAnimation(0,"animation2_1",!1),e._spine_spin.getComponent(sp.Skeleton).addAnimation(0,"animation2_2",!0),t.next=10,e.awaitTime(1);case 10:(a=cc.find("node/btn_start_2",e._node_wheel)).active=!0,a.getComponent(cc.Button).interactable=!0,a.off("click"),s=e,c=function(){var t=i(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Global.SlotsSoundMgr.playEffect("click"),a.getComponent(cc.Button).interactable=!1,a.active=!1,s._spine_spin.getComponent(sp.Skeleton).setAnimation(0,"animation2_3",!1),t.next=6,e.awaitTime(.5);case 6:s._spine_spin.active=!1,n();case 8:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),cc.vv.gameData.checkAutoPlay(a,c),a.on("click",i(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.stopAllActions(),c();case 2:case"end":return e.stop()}},e)})));case 18:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}())},showResultWheel2:function(){var e=this;return new Promise(function(){var t=i(regeneratorRuntime.mark(function t(n,o){var i,r,a,s,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Global.SlotsSoundMgr.playEffect("wheel_stop2"),(i=cc.find("spine_light",e._wheel_2)).active=!0,i.setScale(1),i.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),i.getComponent(sp.Skeleton).setCompleteListener(function(){i.active=!1}),r=cc.find("spr_multi",e._wheel_2),a=cc.find("lbl_result",e._node_result),s=cc.find("spine_result",e._node_result),c=e.getMultType(e._result.rs_2.idx-1),r.active=!0,r.setScale(2),r.opacity=255,r.getComponent(cc.Sprite).spriteFrame=cc.vv.gameData.GetAtlasByName("mini_game").getSpriteFrame("theme_bonus_multi_"+c),t.next=16,e.awaitTime(.5);case 16:return Global.SlotsSoundMgr.playEffect("jackpotframe"),cc.tween(r).to(1,{position:e._node_result.position,scale:1}).to(.5,{opacity:0}).start(),cc.tween(i).to(.5,{scale:0}).start(),t.next=21,e.awaitTime(1);case 21:return s.active=!0,s.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),s.getComponent(sp.Skeleton).setCompleteListener(function(){s.active=!1}),Global.doRoallNumEff(a,e._result.rs_1.coin,e._result.rs_2.coin,1.5,null,null,0,!0),t.next=27,e.awaitTime(1.5);case 27:cc.tween(e._nodeUI).to(.5,{opacity:0}).call(function(){n()}).start();case 28:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}())},getJpType:function(e){var t=this._wheelData1[e],n=1;return"HEPHAESTUS"==t?n=0:"MEGA"==t?n=1:"MAJOR"==t?n=2:"MINOR"==t?n=3:"MINI"==t&&(n=4),n},getMultType:function(e){return this._wheelData2[e]},setJackPotGray:function(e){var t=cc.find("Canvas/safe_node/LMSlots_PrizePool_1");e?cc.tween(t).to(.5,{opacity:0}).start():cc.tween(t).to(.5,{opacity:255}).start()},awaitTime:function(e){var t=this;return new Promise(function(n,o){t.scheduleOnce(function(){n()},e)})}}),cc._RF.pop()},{}]},{},["LordOfThunder_BonusGame","LordOfThunder_BonusReel","LordOfThunder_Cfg","LordOfThunder_GameData","LordOfThunder_Logic","LordOfThunder_Popup","LordOfThunder_Reels","LordOfThunder_Slots","LordOfThunder_Symbol","LordOfThunder_Wheel"]);
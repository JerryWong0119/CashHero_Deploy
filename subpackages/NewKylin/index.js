window.__require=function e(t,n,o){function a(i,c){if(!n[i]){if(!t[i]){var s=i.split("/");if(s=s[s.length-1],!t[s]){var l="function"==typeof __require&&__require;if(!c&&l)return l(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+i+"'")}i=s}var u=n[i]={exports:{}};t[i][0].call(u.exports,function(e){return a(t[i][1][e]||e)},u,u.exports,e,t,n,o)}return n[i].exports}for(var r="function"==typeof __require&&__require,i=0;i<o.length;i++)a(o[i]);return a}({NewKylin_Cfg:[function(e,t,n){"use strict";var o;function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}cc._RF.push(t,"23afbfU/ppEJob5PF2dhky6","NewKylin_Cfg");var r={symbol:(o={},a(o,1,{node:"s1",win_node:"w1",win_ani:{name:"Wild_02",zIndex:500},stop_ani:{name:"Wild_01",zIndex:400}}),a(o,2,{node:"s2",win_node:"w2",win_ani:{name:"Scatter_02",zIndex:500},stop_ani:{name:"Scatter_01",zIndex:400},trigger_ani:{name:"Scatter_02",zIndex:500}}),a(o,5,{node:"s5",win_node:"w5",win_ani:{name:"H2",zIndex:300}}),a(o,6,{node:"s6",win_node:"w6",win_ani:{name:"H3",zIndex:300}}),a(o,7,{node:"s7",win_node:"w7",win_ani:{name:"H4",zIndex:300}}),a(o,8,{node:"s8",win_node:"w8",win_ani:{name:"H5",zIndex:300}}),a(o,9,{node:"s9",win_node:""}),a(o,10,{node:"s10",win_node:""}),a(o,11,{node:"s11",win_node:""}),a(o,12,{node:"s12",win_node:""}),a(o,13,{node:"s13",win_node:""}),a(o,14,{node:"s14",win_node:"w14",win_ani:{name:"Repeat_down",zIndex:500},stop_ani:{name:"Repeat_down",zIndex:400},trigger_ani:{name:"Repeat_open",zIndex:500}}),a(o,401,{node:"s401",win_node:"w401",win_ani:{name:"H1",zIndex:400}}),a(o,402,{node:"s402",win_node:"w402",win_ani:{name:"H1",zIndex:400}}),o),wildId:1,scatterId:2,bonusId:14,scripts:{Top:"LMSlots_Top_Base",Bottom:"LMSlots_Bottom_Base",Slots:"NewKylin_Slots",Reels:"NewKylin_Reel",Symbols:"NewKylin_symbol"},col:5,row:4,symbolPrefab:"LMSlots_Symbol",symbolSize:{height:90},helpItems:["games/NewKylin/prefab/LMSlots_Help_item1","games/NewKylin/prefab/LMSlots_Help_item2"],randomSymbols:[1,5,6,7,8,9,10,11,12,13],kuang:"kuang",speed:2100,reelStopInter:.25,auto_stop_time:1,autoModelDelay:1,AddAntiTime:2,reelStateInfo:[{id:[2],mini:3,counts:[1,0,1,0,1],antiNode:"node_anti",path:"games/NewKylin/",reelStopSound:"reelstop",symbolStopSound:"reelsctr",antSound:"reelfast",antSpeed:2400}],normalBgm:"ngbgm",isScatter:function(e){return 2==e},isWild:function(e){return 1==e},FreeGameType:{Win:1,Spin:2,Prize:3,Wild:4}};t.exports=r,cc._RF.pop()},{}],NewKylin_Character:[function(e,t,n){"use strict";function o(e,t,n,o,a,r,i){try{var c=e[r](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(o,a)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(a,r){var i=e.apply(t,n);function c(e){o(i,a,r,c,s,"next",e)}function s(e){o(i,a,r,c,s,"throw",e)}c(void 0)})}}cc._RF.push(t,"3a290WFZ3hAVriI7Uqzhzic","NewKylin_Character"),cc.Class({extends:cc.Component,properties:{role:sp.Skeleton},hide:function(){this.node.active=!1},show:function(){this.node.active=!0},collectWild:function(){var e=this;return a(regeneratorRuntime.mark(function t(){var n,o,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return");case 4:for(n=SlotsFacade.mainPanel.top_node.convertToNodeSpaceAR(e.getBallGlobalPos()),SlotsFacade.soundMgr.playEffect("nmbrfly"),o=function(t){var o=SlotsFacade.slots.getIdxGlobalPos((void 0)[t]),a=cc.instantiate(e.fly_particle).getComponent(cc.ParticleSystem);a.node.active=!0,a.node.parent=SlotsFacade.mainPanel.top_node,a.node.position=a.node.parent.convertToNodeSpaceAR(o),a.resetSystem(),cc.tween(a.node).to(.5,{position:n}).call(function(){a.node.removeFromParent()}).start()},a=0;a<(void 0).length;a++)o(a);return t.next=10,SlotsFacade.delayTime(.5);case 10:e.zhuzi_effect.node.active=!0,e.zhuzi_effect.setAnimation(0,"zhuzi_collect",!1),e.zhuzi_effect.setCompleteListener(function(){e.zhuzi_effect.setCompleteListener(null),e.zhuzi_effect.node.active=!1});case 13:case"end":return t.stop()}},t)}))()},getBallGlobalPos:function(){return this.ball.node.convertToWorldSpaceAR(cc.v2(0,0))}}),cc._RF.pop()},{}],NewKylin_CollectProgress:[function(e,t,n){"use strict";function o(e,t,n,o,a,r,i){try{var c=e[r](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(o,a)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(a,r){var i=e.apply(t,n);function c(e){o(i,a,r,c,s,"next",e)}function s(e){o(i,a,r,c,s,"throw",e)}c(void 0)})}}cc._RF.push(t,"be46cD2mNZHEpk6qUxu3lou","NewKylin_CollectProgress"),cc.Class({extends:cc.Component,properties:{lock_btn:cc.Node,spine_collect_lock:sp.Skeleton,collect_track_particle:[cc.ParticleSystem],_stepItems:null,_isOpen:!1},onLoad:function(){var e=this;this._stepItems=[[],[],[],[]];for(var t=0;t<this._stepItems.length;t++)for(var n=cc.find("type".concat(t+1),this.node),o=0;o<4;o++)this._stepItems[t].push(n.getChildByName("item".concat(o+1)));Global.registerEvent(cc.vv.gameData._EventId.SLOT_TOTALBET_UPDATED,function(){e.showCollect(!1)},this),this.lock_btn.on(cc.Node.EventType.TOUCH_END,function(){e._isOpen&&e.node.parent!=SlotsFacade.mainPanel.collect_progress_container||e._openCollect()},this),this.updateProgress(),this.showCollect(!0)},updateProgress:function(){for(var e=SlotsFacade.dm.collectInfo,t=0;t<this._stepItems.length;t++)for(var n=e.counts[t],o=0;o<4;o++){var a=this._stepItems[t][o],r=n>o;a.getChildByName("icon").active=r||3==o,a.getChildByName("effect").active=!1}},_openCollect:function(){if(!this._isOpen&&!SlotsFacade.dm.hasFree()&&SlotsFacade.bottomCmp.GetSpinBtnState()&&!(cc.vv.gameData.GetAutoModelTime()>0)){var e=SlotsFacade.dm.GetBetMults(),t=SlotsFacade.dm.getDeskInfo().needBet;if(!(t>e.length)){SlotsFacade.dm.SetBetIdx(t),SlotsFacade.bottomCmp.ShowBetCoin();var n=cc.vv.gameData.GetTotalBet();Global.dispatchEvent(cc.vv.gameData._EventId.SLOT_TOTALBET_UPDATED,n)}}},showCollect:function(e){var t=SlotsFacade.dm.canCollect();t?this._isOpen||(e?this.spine_collect_lock.node.active=!1:(SlotsFacade.soundMgr.playEffect("repeatopen"),this.spine_collect_lock.node.active=!0,this.spine_collect_lock.setAnimation(0,"Betup_unlock",!1))):(this.spine_collect_lock.node.active=!0,e?this.spine_collect_lock.setAnimation(0,"Betup_lock",!1):this._isOpen&&(SlotsFacade.soundMgr.playEffect("lock"),this.spine_collect_lock.setAnimation(0,"Betup_lock_idle",!1),this.spine_collect_lock.addAnimation(0,"Betup_lock",!1))),this._isOpen=t},collectEnergy:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){var o,a,r,i,c,s,l,u;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(SlotsFacade.dm.canCollect()){n.next=2;break}return n.abrupt("return");case 2:return o=SlotsFacade.dm.collectInfo,a=o.freeGameInfo,r=o.counts[a.type-1],i=t._stepItems[a.type-1][r-1],SlotsFacade.soundMgr.playEffect("wheelfly"),(c=t.collect_track_particle[a.type-1]).node.position=t.node.convertToNodeSpaceAR(e),c.node.active=!0,c.resetSystem(),s=t.node.convertToNodeSpaceAR(i.convertToWorldSpaceAR(cc.v2(0,0))),cc.tween(c.node).to(.5,{x:s.x,y:s.y}).call(function(){c.node.active=!1}).start(),n.next=15,SlotsFacade.delayTime(.5);case 15:return(l=i.getChildByName("icon")).active=!0,(u=i.getChildByName("effect").getComponent(sp.Skeleton)).node.active=!0,4==r?(u.setAnimation(0,"super_fire",!1),l.getComponent(sp.Skeleton).setAnimation(0,"super_".concat(["wins","spins","awards","wilds"][a.type-1],"_1"),!1)):u.setAnimation(0,"S_".concat(["wins","spins","prizes","wilds"][a.type-1]),!1),u.setCompleteListener(function(){u.setCompleteListener(null),u.node.active=!1}),n.next=23,SlotsFacade.delayTime(1);case 23:case"end":return n.stop()}},n)}))()},changeParent:function(e){e=e||SlotsFacade.mainPanel.collect_progress_container,this.node.parent=e}}),cc._RF.pop()},{}],NewKylin_FlowCtrl:[function(e,t,n){"use strict";function o(e,t,n,o,a,r,i){try{var c=e[r](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(o,a)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(a,r){var i=e.apply(t,n);function c(e){o(i,a,r,c,s,"next",e)}function s(e){o(i,a,r,c,s,"throw",e)}c(void 0)})}}cc._RF.push(t,"fce830Ku79FqpX1MYl9O9d3","NewKylin_FlowCtrl"),cc.Class({extends:cc.Component,enterRoom:function(){var e=this;return a(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.enterWheelGame();case 2:if(!(cc.vv.gameData.GetFreeTime()>0)){t.next=8;break}return n=cc.vv.gameData.GetTotalFreeWin(),SlotsFacade.bottomCmp.SetWin(n),t.next=8,e.enterFreeGame(!0);case 8:return t.next=10,e.enterPickGame();case 10:SlotsFacade.slots.CanDoNextRound();case 11:case"end":return t.stop()}},t)}))()},startMove:function(){return a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:SlotsFacade.freeGame.startMove();case 1:case"end":return e.stop()}},e)}))()},onSpinMsg:function(e){return a(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,SlotsFacade.freeGame.onSpinMsg();case 2:SlotsFacade.slots._gameInfo=e,n=e.resultCards,SlotsFacade.slots.SetSlotsResult(n),SlotsFacade.slots.SetReelStateInfo(n);case 6:case"end":return t.stop()}},t)}))()},spinEnd:function(){var e=this;return a(regeneratorRuntime.mark(function t(){var n,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,SlotsFacade.freeGame.spinEnd();case 2:return SlotsFacade.slots.ShowWinTrace(),t.next=5,e.collectEnergy();case 5:if(!(cc.vv.gameData.GetTotalFree()>0&&cc.vv.gameData.GetTotalFree()!=cc.vv.gameData.GetFreeTime())){t.next=10;break}return t.next=8,SlotsFacade.freeGame.settlementRound();case 8:t.next=14;break;case 10:return n=cc.vv.gameData.GetGameWin(),o=n,t.next=14,new Promise(function(e){SlotsFacade.slots.ShowBottomWin(n,o,!0,e)});case 14:return t.next=16,e.enterPickGame();case 16:return t.next=18,e.enterWheelGame();case 18:if(!SlotsFacade.dm.isTriggerFree()){t.next=25;break}return SlotsFacade.soundMgr.playEffect("vo_free"),SlotsFacade.slots.Backup(),t.next=23,e.enterFreeGame();case 23:t.next=38;break;case 25:if(!SlotsFacade.dm.isLastEndFree()){t.next=38;break}return SlotsFacade.bottomCmp.ShowBtnsByState("moveing_1"),t.next=29,SlotsFacade.freeGame.settlementTotal();case 29:return t.next=31,SlotsFacade.popup.showWinGold(SlotsFacade.dm.GetGameTotalFreeWin());case 31:return t.next=33,SlotsFacade.mainPanel.showSceneTransition(1);case 33:return SlotsFacade.slots.Resume(),t.next=36,SlotsFacade.freeGame.exit();case 36:return t.next=38,e.enterNormalGame();case 38:SlotsFacade.slots.CanDoNextRound();case 39:case"end":return t.stop()}},t)}))()},enterFreeGame:function(e){return a(regeneratorRuntime.mark(function t(){var n,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return SlotsFacade.topCmp.SetBackLobby(!1),SlotsFacade.bottomCmp.ShowBtnsByState("moveing_1"),SlotsFacade.mainPanel.showBg(1),SlotsFacade.soundMgr.playFreeBgm(),SlotsFacade.bottomCmp.node.getChildByName("totalBetBg").active=!0,n=cc.vv.gameData.GetTotalFree(),o=cc.vv.gameData.GetFreeTime(),SlotsFacade.bottomCmp.ShowFreeModel(!0,n-o,n),t.next=10,SlotsFacade.freeGame.enter(e);case 10:return t.next=12,SlotsFacade.delayTime(.5);case 12:case"end":return t.stop()}},t)}))()},enterNormalGame:function(){return a(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(SlotsFacade.bottomCmp.ShowFreeModel(!1),SlotsFacade.mainPanel.showBg(0),SlotsFacade.soundMgr.playBgm(null,!0),SlotsFacade.bottomCmp.node.getChildByName("totalBetBg").active=!0,!SlotsFacade.dm.isLastEndFree()){e.next=8;break}return t=cc.vv.gameData.GetGameTotalFreeWin(),e.next=8,new Promise(function(e){SlotsFacade.slots.ShowBottomWin(t,t,!0,e)});case 8:case"end":return e.stop()}},e)}))()},collectEnergy:function(){return a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(cc.vv.gameData.GetTotalFree()>0)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,SlotsFacade.character.collectWild();case 4:case"end":return e.stop()}},e)}))()},enterPickGame:function(){return a(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(SlotsFacade.dm.pickData){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,new Promise(function(e){SlotsFacade.pickGame.open(e)});case 5:return t=SlotsFacade.dm.pickData.winCoin,t,SlotsFacade.dm.getSpinData()&&SlotsFacade.dm.GetGameWin(),SlotsFacade.dm.AddCoin(t),e.next=11,new Promise(function(e){SlotsFacade.slots.ShowBottomWin(t,t,!0,e)});case 11:case"end":return e.stop()}},e)}))()},enterWheelGame:function(){return a(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(SlotsFacade.topCmp.SetBackLobby(!1),SlotsFacade.bottomCmp.ShowBtnsByState("moveing_1"),1==SlotsFacade.dm.collectInfo.state){e.next=5;break}return e.abrupt("return");case 5:if(!((t=SlotsFacade.dm.getCardsIndexs(SlotsFacade.dm.getGameCfg().scatterId)).length>0)){e.next=9;break}return e.next=9,SlotsFacade.slots.playTriggerAni(t);case 9:return e.next=11,new Promise(function(e){SlotsFacade.wheelGame.open(e)});case 11:case"end":return e.stop()}},e)}))()}}),cc._RF.pop()},{}],NewKylin_FreeGame:[function(e,t,n){"use strict";function o(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=a(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r,i=!0,c=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return i=e.done,e},e:function(e){c=!0,r=e},f:function(){try{i||null==o.return||o.return()}finally{if(c)throw r}}}}function a(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function i(e,t,n,o,a,r,i){try{var c=e[r](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(o,a)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(o,a){var r=e.apply(t,n);function c(e){i(r,o,a,c,s,"next",e)}function s(e){i(r,o,a,c,s,"throw",e)}c(void 0)})}}cc._RF.push(t,"a412aVH0cBOTLUw8y3RaUEi","NewKylin_FreeGame"),cc.Class({extends:cc.Component,properties:{title:cc.Node,dialog_node:cc.Node,wild_node:cc.Node,spine_glow:sp.Skeleton,collect_coin_particle:cc.ParticleSystem,spineBottom:sp.Skeleton,_isEnter:!1,_roundItems:null,_currFreeType:1},onLoad:function(){this._bottomLabel=cc.find("winBg/lbl_winNum_nor",SlotsFacade.bottomCmp.node);var e=this._bottomLabel.convertToWorldSpaceAR(cc.v2(0,0));e=SlotsFacade.mainPanel.top_node.convertToNodeSpaceAR(e),this.spineBottom.node.position=e,this._symbolTemplate=SlotsFacade.dm.GetPrefabByName(SlotsFacade.dm.getGameCfg().symbolPrefab),this._symbolTemplate.optimizationPolicy=cc.Prefab.OptimizationPolicy.MULTI_INSTANCE,this.title.active=!1,this.dialog_node.active=!1,this._roundItems=[[],[],[],[]];for(var t=0;t<4;t++)for(var n=0;n<10;n++)this._roundItems[t].push(cc.find("items".concat(t+1,"/round").concat(n+1),this.node))},_showTitle:function(e,t,n){if(e=e||!1,this.title.active=e,e){t=t||1;var o=this.title.getChildByName("label").getComponent("ImgSwitchCmp");n?o.setIndex(4+t-1):o.setIndex(t-1)}},_showRoundInfo:function(){var e=SlotsFacade.dm.getGameCfg(),t=SlotsFacade.dm.collectInfo,n=t.freeGameInfo.type;this._currFreeType=n,this._showTitle(!0,n,3==t.state),this.node.getChildByName("items".concat(n)).active=!0;for(var o=this._roundItems[n-1],a=t.freeGameInfo.coins,r=t.freeGameInfo.useCnt,i=t.freeGameInfo.mults,c=0;c<o.length;c++){var s=o[c];if(c>=a.length)s.active=!1;else{s.active=!0;var l=s.getChildByName("label").getComponent(cc.Label);if(a[c]>0?l.string=Global.FormatNumToComma(a[c]):l.string="",n==e.FreeGameType.Win||n==e.FreeGameType.Spin){s.getChildByName("title").getComponent("ImgSwitchCmp").setIndex(c);var u=s.getChildByName("spine_numb").getComponent(sp.Skeleton);r<1?n==e.FreeGameType.Win?u.node.active=c<i.length-1:u.node.active=c<4:u.node.active=!0,u.setSkin("".concat(i[c],"x")),r>c?u.setAnimation(0,"Num_grey_jingzhen",!1):u.setAnimation(0,"Num_jingzhen",!1)}else{var d=s.getChildByName("round_label").getComponent("ImgSwitchCmp");if(d.setIndex(c),r>c?d.showSpriteByName("".concat(c+1,"spin2")):d.showSpriteByName("".concat(c+1,"spin1")),n==e.FreeGameType.Prize)s.getChildByName("label_prize").getComponent(cc.Label).string=Global.convertNumToShort(t.freeGameInfo.prizes[c])}}}},_showFreeDialog:function(){var e=this;return c(regeneratorRuntime.mark(function t(){var n,o,a,r,i,s,l,u,d,m,p;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=SlotsFacade.dm.getGameCfg(),o=SlotsFacade.dm.collectInfo,a=o.freeGameInfo.type,r=10==o.freeGameInfo.coins.length,(i=e.dialog_node).scale=1,i.active=!0,i.getChildByName("title").getComponent("ImgSwitchCmp").setIndex(a-1+(r?4:0)),s=null,1!=a&&2!=a){t.next=19;break}for(l=o.freeGameInfo.mults[o.freeGameInfo.mults.length-1],(s=i.getChildByName("content1")).active=!0,u=0;u<3;u++)d=s.getChildByName("box".concat(u+1)),(m=d.getChildByName("multiple").getComponent("ImgSwitchCmp")).node.opacity=0,m.node.active=!1,(p=d.getChildByName("spine").getComponent(sp.Skeleton)).node.active=!0,p.node.opacity=255,p.setAnimation(0,"FG_box_intro",!1),p.addAnimation(0,"FG_box_idle",!0);return t.next=17,new Promise(function(t){for(var r=function(r){var u=s.getChildByName("box".concat(r+1));u.on(cc.Node.EventType.TOUCH_END,c(regeneratorRuntime.mark(function d(){var m,p,f,h,g,_,v,S,y;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return SlotsFacade.soundMgr.playEffect("fgpick"),u.getChildByName("spine").getComponent(sp.Skeleton).setAnimation(0,"FG_box_click",!1),d.next=4,SlotsFacade.delayTime(.6);case 4:for(m=0;m<3;m++)(p=s.getChildByName("box".concat(m+1))).off(cc.Node.EventType.TOUCH_END),(f=p.getChildByName("multiple").getComponent("ImgSwitchCmp")).node.active=!0,r==m?f.showSpriteByName("".concat(l,"x1")):f.showSpriteByName("".concat([6,8,10][Math.floor(3*Math.random())],"x2")),cc.tween(f.node).to(.5,{opacity:255}).start(),h=p.getChildByName("spine").getComponent(sp.Skeleton),cc.tween(h.node).to(.5,{opacity:0}).start();return d.next=7,SlotsFacade.delayTime(.6);case 7:return SlotsFacade.soundMgr.playEffect("fgmult"),(g=cc.instantiate(u.getChildByName("multiple"))).position=i.convertToNodeSpaceAR(u.convertToWorldSpaceAR(cc.v2(0,0))),g.parent=i,a==n.FreeGameType.Win?(_=e._roundItems[a-1][o.freeGameInfo.mults.length-1].getChildByName("spine_numb").getComponent(sp.Skeleton),v=_.node.convertToWorldSpaceAR(cc.v2(0,0)),v=i.convertToNodeSpaceAR(v),cc.tween(g).to(.5,{x:v.x,y:v.y}).call(function(){g.removeFromParent(),_.node.active=!0,_.setSkin("".concat(l,"x")),_.setAnimation(0,"Num_intro",!1)}).start()):(S=e._roundItems[a-1][4].getChildByName("spine_numb").getComponent(sp.Skeleton),y=S.node.convertToWorldSpaceAR(cc.v2(0,0)),y=i.convertToNodeSpaceAR(y),cc.tween(g).to(.5,{x:y.x,y:y.y}).call(c(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:g.removeFromParent(),n=4;case 2:if(!(n<o.freeGameInfo.mults.length)){t.next=12;break}return(r=e._roundItems[a-1][n].getChildByName("spine_numb").getComponent(sp.Skeleton)).node.active=!0,r.setSkin("".concat(l,"x")),r.setAnimation(0,"Num_intro",!1),t.next=9,SlotsFacade.delayTime(.1);case 9:n++,t.next=2;break;case 12:case"end":return t.stop()}},t)}))).start()),d.next=14,SlotsFacade.delayTime(1);case 14:t();case 15:case"end":return d.stop()}},d)})),e)},u=0;u<3;u++)r(u)});case 17:t.next=21;break;case 19:(s=i.getChildByName("content".concat(a))).active=!0;case 21:return t.next=23,new Promise(function(e){cc.tween(i).delay(1.5).to(.4,{scale:0},{easing:"backIn"}).call(function(){s.active=!1,i.active=!1,e()}).start()});case 23:case"end":return t.stop()}},t)}))()},startMove:function(){var e=this;return c(regeneratorRuntime.mark(function t(){var n,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e._isEnter){t.next=2;break}return t.abrupt("return");case 2:n=SlotsFacade.dm.getGameCfg(),(o=SlotsFacade.dm.collectInfo.freeGameInfo).type!=n.FreeGameType.Win&&o.type!=n.FreeGameType.Spin||e._roundItems[o.type-1][o.useCnt].getChildByName("spine_numb").getComponent(sp.Skeleton).setAnimation(0,"Num_idle",!0);case 5:case"end":return t.stop()}},t)}))()},onSpinMsg:function(){var e=this;return c(regeneratorRuntime.mark(function t(){var n,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e._isEnter){t.next=2;break}return t.abrupt("return");case 2:if(n=SlotsFacade.dm.getGameCfg(),o=SlotsFacade.dm.collectInfo,o.freeGameInfo.type==n.FreeGameType.Wild){t.next=7;break}return t.abrupt("return");case 7:return t.next=9,e.showRandomWild(o.freeGameInfo.currWilds);case 9:case"end":return t.stop()}},t)}))()},spinEnd:function(){var e=this;return c(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e._isEnter){t.next=2;break}return t.abrupt("return");case 2:e.removeWild();case 3:case"end":return t.stop()}},t)}))()},enter:function(e){var t=this;return c(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(SlotsFacade.mainPanel.jackpot_node.active=!1,SlotsFacade.character.hide(),t._isEnter=!0,t._showRoundInfo(),!(SlotsFacade.dm.collectInfo.freeGameInfo.useCnt<1)){e.next=7;break}return e.next=7,t._showFreeDialog();case 7:case"end":return e.stop()}},e)}))()},exit:function(){var e=this;return c(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:SlotsFacade.mainPanel.jackpot_node.active=!0,SlotsFacade.character.show(),e._isEnter=!1,e._showTitle(!1),e.node.getChildByName("items".concat(e._currFreeType)).active=!1;case 6:case"end":return t.stop()}},t)}))()},showRandomWild:function(e){var t=this;return c(regeneratorRuntime.mark(function n(){var a,r,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t.wild_node.active=!0,a=o(e),n.prev=2,a.s();case 4:if((r=a.n()).done){n.next=13;break}return i=r.value,SlotsFacade.soundMgr.playEffect("wildin"),t.genAWildSymbol(i).playWildAppear(),n.next=11,SlotsFacade.delayTime(.7);case 11:n.next=4;break;case 13:n.next=18;break;case 15:n.prev=15,n.t0=n.catch(2),a.e(n.t0);case 18:return n.prev=18,a.f(),n.finish(18);case 21:return SlotsFacade.soundMgr.playEffect("wild_appear"),n.next=24,SlotsFacade.delayTime(.5);case 24:case"end":return n.stop()}},n,null,[[2,15,18,21]])}))()},genAWildSymbol:function(e){var t=SlotsFacade.dm.getGameCfg(),n=cc.instantiate(this._symbolTemplate);n.parent=this.wild_node;var o=n.addComponent(t.scripts.Symbols);o.SetSymbolReelIdx(0),o.Init(0,this.node),o.ShowById(t.wildId);var a=SlotsFacade.slots.getIdxGlobalPos(e);return a=this.wild_node.convertToNodeSpaceAR(a),n.setPosition(a),o},removeWild:function(){this.wild_node.active=!1,this.wild_node.removeAllChildren()},settlementRound:function(){var e=this;return c(regeneratorRuntime.mark(function t(){var n,o,a,r,i,c,s,l,u,d,m,p,f,h;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=SlotsFacade.dm.getGameCfg(),o=SlotsFacade.dm.collectInfo,a=o.freeGameInfo,r=a.type,10==a.coins.length,!((i=a.useCnt)<1)){t.next=8;break}return t.abrupt("return");case 8:if(c=e._roundItems[a.type-1][i-1],s=SlotsFacade.dm.GetGameWin(),l=r==n.FreeGameType.Prize&&a.currBoxs&&a.currBoxs.length>0,!(s>0||l)){t.next=49;break}if(u=c.getChildByName("label").getComponent("LabelRollCmp"),!s){t.next=19;break}return SlotsFacade.soundMgr.playEffect("win_a"),t.next=17,new Promise(function(e){u.startRoll(0,s,1.5,e)});case 17:SlotsFacade.soundMgr.stopEffectByName("win_a"),SlotsFacade.soundMgr.playEffect("win_end");case 19:if(r!=n.FreeGameType.Win&&r!=n.FreeGameType.Spin){t.next=32;break}return SlotsFacade.soundMgr.playEffect("popupend"),c.getChildByName("spine_numb").getComponent(sp.Skeleton).setAnimation(0,"Num_Mul",!1),(d=c.getChildByName("spine_numb_trans").getComponent(sp.Skeleton)).node.active=!0,d.setAnimation(0,"Num_Mul_trans",!1),d.setCompleteListener(function(){d.setCompleteListener(null),d.node.active=!1}),t.next=29,SlotsFacade.delayTime(1);case 29:u.label.string=Global.FormatNumToComma(a.coins[i-1]),t.next=34;break;case 32:c.getChildByName("round_label").getComponent("ImgSwitchCmp").showSpriteByName("".concat(a.useCnt,"spin2"));case 34:if(!l){t.next=47;break}for(m=a.currBoxs,p=0,f=0;f<m.length;f++)h=m[f],SlotsFacade.slots.GetSymbolByIdx(h.idx).openBox(h.coin),p+=h.coin;if(SlotsFacade.soundMgr.playEffect("repeatopen"),!m.length){t.next=47;break}return t.next=42,SlotsFacade.delayTime(2);case 42:return SlotsFacade.soundMgr.playEffect("win_a"),t.next=45,new Promise(function(e){u.startRoll(s,s+p,1.5,e)});case 45:SlotsFacade.soundMgr.stopEffectByName("win_a"),SlotsFacade.soundMgr.playEffect("win_end");case 47:t.next=50;break;case 49:r==n.FreeGameType.Win||r==n.FreeGameType.Spin?c.getChildByName("spine_numb").getComponent(sp.Skeleton).setAnimation(0,"Num_grey_jingzhen",!1):c.getChildByName("round_label").getComponent("ImgSwitchCmp").showSpriteByName("".concat(i,"spin2"));case 50:case"end":return t.stop()}},t)}))()},settlementTotal:function(){var e=this;return c(regeneratorRuntime.mark(function t(){var n,o,a,r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=SlotsFacade.dm.collectInfo,o=n.freeGameInfo,a=o.winCoin-o.coins.reduce(function(e,t){return e+t},0),r=regeneratorRuntime.mark(function t(n){var r,i,c,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!((r=o.coins[n])<1)){t.next=3;break}return t.abrupt("return","continue");case 3:return i=e._roundItems[o.type-1][n],c=i.convertToWorldSpaceAR(cc.v2(0,0)),e.spine_glow.node.position=e.node.convertToNodeSpaceAR(c),e.spine_glow.node.active=!0,e.spine_glow.setAnimation(0,"jiesuan_glow",!1),SlotsFacade.soundMgr.playEffect("wheelfly"),(s=cc.instantiate(e.collect_coin_particle.node).getComponent(cc.ParticleSystem)).node.active=!0,s.node.parent=SlotsFacade.mainPanel.top_node,s.node.position=SlotsFacade.mainPanel.top_node.convertToNodeSpaceAR(c),s.resetSystem(),cc.tween(s.node).to(.5,{x:e.spineBottom.node.x,y:e.spineBottom.node.y}).call(function(){s.node.removeFromParent()}).start(),t.next=17,SlotsFacade.delayTime(.5);case 17:return e.spineBottom.node.active=!0,e.spineBottom.setAnimation(0,"animation",!1),e._bottomLabel.active=!0,t.next=22,new Promise(function(t){Global.doRoallNumEff(e._bottomLabel,a,a+r,.3,t,null,0,!0)});case 22:a+=r;case 23:case"end":return t.stop()}},t)}),i=0;case 5:if(!(i<o.coins.length)){t.next=13;break}return t.delegateYield(r(i),"t0",7);case 7:if("continue"!==t.t0){t.next=10;break}return t.abrupt("continue",10);case 10:i++,t.next=5;break;case 13:return t.next=15,SlotsFacade.delayTime(.5);case 15:e.spineBottom.node.active=!0;case 16:case"end":return t.stop()}},t)}))()}}),cc._RF.pop()},{}],NewKylin_GameData:[function(e,t,n){"use strict";cc._RF.push(t,"cd176OfFENMBrPCSRd4g/7I","NewKylin_GameData"),cc.Class({extends:e("LMSlots_GameData_Base"),properties:{pickData:null,collectInfo:null},init:function(e,t,n){this.pickData=e.jackpotGame,this.collectInfo=e.collectInfo,this._super(e,t,n)},RegisterMsg:function(){this._super(),cc.vv.NetManager.registerMsg(MsgId.SLOT_SUBGAME_DATA,this.onResp,this)},UnregisterMsg:function(){this._super(),cc.vv.NetManager.unregisterMsg(MsgId.SLOT_SUBGAME_DATA,this.onResp,!1,this)},OnRcvNetSpine:function(e){200==e.code&&(this.pickData=e.jackpotGame,this.collectInfo=e.collectInfo),this._super(e)},getSpinData:function(){return this._gameInfo},canCollect:function(){return this.GetBetIdx()>=this.getDeskInfo().needBet},reqSubGame:function(e){var t={c:MsgId.SLOT_SUBGAME_DATA,gameid:this._gameId,data:e};cc.vv.NetManager.send(t,!0)},onResp:function(e){console.log("reqSubGame-resp:",e),1==e.data.rtype?SlotsFacade.pickGame.onPickMsg(e):2==e.data.rtype&&SlotsFacade.wheelGame.onWheelMsg(e)},hasFree:function(){return this.GetFreeTime()>0},isTriggerFree:function(){return this.isFistTriggerFree()},isFistTriggerFree:function(){return this.hasFree()&&this.GetFreeTime()==this.GetTotalFree()},isLastEndFree:function(){return 0==this.GetFreeTime()&&this.GetTotalFree()>0},getCardsIndexs:function(e){if(!this._gameInfo)return[];for(var t=[],n=this._gameInfo.resultCards,o=0;o<n.length;o++)e==n[o]&&t.push(o+1);return t}}),cc._RF.pop()},{LMSlots_GameData_Base:void 0}],NewKylin_Logic:[function(e,t,n){"use strict";cc._RF.push(t,"6efd3FLq2BMXq+1iKaZJzaQ","NewKylin_Logic"),cc.Class({extends:e("LMSlots_Logic_Base"),properties:{},onLoad:function(){this.InitCommComponent(),window.SlotsFacade=this,this.dm=cc.vv.gameData,this.mainPanel=cc.find("safe_node",this.node).addComponent("NewKylin_MainPanel"),this.flowCtrl=this.addComponent("NewKylin_FlowCtrl"),this.soundMgr=this.addComponent("NewKylin_Sound"),this.collectProgress=this.mainPanel.collect_progress.getComponent("NewKylin_CollectProgress"),this.pickGame=this.mainPanel.pick_game.getComponent("NewKylin_PickGame"),this.popup=this.mainPanel.popup.getComponent("NewKylin_Popup"),this.character=this.mainPanel.character_node.getComponent("NewKylin_Character"),this.wheelGame=this.mainPanel.wheel_game.getComponent("NewKylin_Wheel"),this.freeGame=this.mainPanel.free_game.getComponent("NewKylin_FreeGame"),this.topCmp=cc.vv.gameData.GetTopScript(),this.bottomCmp=cc.vv.gameData.GetBottomScript(),this.slots=cc.vv.gameData.GetSlotsScript()},onDestroy:function(){window.SlotsFacade=null,this.dm=null},delayTime:function(e){var t=this;return new Promise(function(n,o){t.scheduleOnce(function(){n()},e)})}}),cc._RF.pop()},{LMSlots_Logic_Base:void 0}],NewKylin_MainPanel:[function(e,t,n){"use strict";function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t,n,o,a,r,i){try{var c=e[r](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(o,a)}function r(e){return function(){var t=this,n=arguments;return new Promise(function(o,r){var i=e.apply(t,n);function c(e){a(i,o,r,c,s,"next",e)}function s(e){a(i,o,r,c,s,"throw",e)}c(void 0)})}}cc._RF.push(t,"3edcbqukP5Kao5xtoQ74mnP","NewKylin_MainPanel"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.bg=this.node.getChildByName("bg"),this.slots=this.node.getChildByName("slots"),this.character_node=this.slots.getChildByName("character_node"),this.collect_progress_container=this.slots.getChildByName("collect_container"),this.collect_progress=this.collect_progress_container.getChildByName("collect"),this.free_game=this.slots.getChildByName("free_info"),this.pick_game=this.node.getChildByName("pick_game"),this.wheel_game=this.node.getChildByName("wheel_game"),this.popup=this.node.getChildByName("popup"),this.jackpot_node=this.node.getChildByName("LMSlots_PrizePool_1"),this.transition_node=this.node.getChildByName("transition_node"),this.top_node=this.node.getChildByName("top_node")},showBg:function(e){var t=0;e&&(t=1),this.bg.getComponent("ImgSwitchCmp").setIndex(t)},showSceneTransition:function(e){var t=this;return r(regeneratorRuntime.mark(function n(){var a,r,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e=e||1,r=(a={},o(a,1,{spineNode:"spine1",aniName:"FG_guochang",delayTime:1.5,sound:"fgtranstion"}),o(a,2,{spineNode:"spine2",aniName:"skill",delayTime:2,sound:"bgtransition"}),a)[e],SlotsFacade.soundMgr.playEffect(r.sound),(i=t.transition_node.getChildByName(r.spineNode).getComponent(sp.Skeleton)).node.active=!0,i.setAnimation(0,r.aniName,!1),i.setCompleteListener(function(){i.setCompleteListener(null),i.node.active=!1}),n.next=9,SlotsFacade.delayTime(r.delayTime);case 9:case"end":return n.stop()}},n)}))()}}),cc._RF.pop()},{}],NewKylin_PickGame:[function(e,t,n){"use strict";function o(e,t,n,o,a,r,i){try{var c=e[r](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(o,a)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(a,r){var i=e.apply(t,n);function c(e){o(i,a,r,c,s,"next",e)}function s(e){o(i,a,r,c,s,"throw",e)}c(void 0)})}}cc._RF.push(t,"b254egSnopFlqXbi4fROlu3","NewKylin_PickGame"),cc.Class({extends:cc.Component,properties:{panel:cc.Node,pickItems:[cc.Node],_canTouch:!1,_callBack:null},onLoad:function(){for(var e=0;e<this.pickItems.length;e++){this.pickItems[e].addComponent("NewKylin_PickItem").init(e+1,this._pickItemHandler.bind(this))}this._reset()},_reset:function(){for(var e=0;e<this.pickItems.length;e++){this.pickItems[e].getComponent("NewKylin_PickItem").reset()}},_pickItemHandler:function(e){this._canTouch&&(SlotsFacade.dm.pickData.items[e-1].isOpen?console.log("Error:".concat(e," \u5df2\u7ecf\u6253\u5f00")):(SlotsFacade.soundMgr.playEffect("bgpick"),this._canTouch=!1,SlotsFacade.dm.reqSubGame({rtype:1,choiceId:e})))},onPickMsg:function(e){var t=e.data.jackpotGame;SlotsFacade.dm.pickData=t;var n=e.data.choiceId,o=this.pickItems[n-1].getComponent("NewKylin_PickItem"),a=t.items[n-1].jackpotId;o.setState(3,a),t.isEnd?(this._canTouch=!1,this._settlement(a)):this._canTouch=!0},_settlement:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){var o,a,r,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:for(SlotsFacade.soundMgr.playEffect("coinsure"),o=SlotsFacade.dm.pickData.items,a=0;a<o.length;a++)o[a].jackpotId==e&&t.pickItems[a].getComponent("NewKylin_PickItem").playWin();return n.next=5,SlotsFacade.delayTime(1);case 5:for(r=0;r<o.length;r++)(i=o[r]).isOpen||t.pickItems[r].getComponent("NewKylin_PickItem").setState(2,i.jackpotId);return n.next=8,SlotsFacade.delayTime(1.5);case 8:return n.next=10,SlotsFacade.popup.showWinJpGold(SlotsFacade.dm.pickData.winCoin,e);case 10:t.close();case 11:case"end":return n.stop()}},n)}))()},_initBag:function(){for(var e=SlotsFacade.dm.jackpotGame,t=0;t<e.choiceIdxs.length;t++){var n=e.choiceIdxs[t],o=e.choiceItems[t];this._bagList[n-1].setItemType(o)}},_initItems:function(){var e=this,t=SlotsFacade.dm.pickData;t&&this.scheduleOnce(function(){for(var n=0;n<t.items.length;n++){if(t.items[n].isOpen)e.pickItems[n].getComponent("NewKylin_PickItem").setState(3,t.items[n].jackpotId)}})},open:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t._callBack=e,SlotsFacade.soundMgr.playEffect("triggering"),n.next=4,SlotsFacade.mainPanel.showSceneTransition(2);case 4:SlotsFacade.soundMgr.playBgm("bgbgm"),t.panel.active=!0,t._reset(),t._canTouch=!0,t._initItems();case 9:case"end":return n.stop()}},n)}))()},close:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,SlotsFacade.mainPanel.showSceneTransition(2);case 2:SlotsFacade.soundMgr.playBgm(null,!0),e.panel.active=!1,SlotsFacade.dm.hasFree()?SlotsFacade.soundMgr.playFreeBgm():(Global.SlotsSoundMgr.stopBgm(),SlotsFacade.soundMgr.playBgm()),e._callBack&&e._callBack();case 6:case"end":return t.stop()}},t)}))()}}),cc._RF.pop()},{}],NewKylin_PickItem:[function(e,t,n){"use strict";function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}cc._RF.push(t,"ed3a4wjkkdMyqKJ6KgrGdxy","NewKylin_PickItem"),cc.Class({extends:cc.Component,properties:{canTouch:!1,spine:sp.Skeleton,spineWin:sp.Skeleton,_id:0,_handler:null,_jpType:0,_isLoaded:!1},onLoad:function(){var e=this;this.canTouch=!1,this.spine=this.node.getChildByName("spine").getComponent(sp.Skeleton),this.spineWin=this.node.getChildByName("spine_win").getComponent(sp.Skeleton),this.node.on(cc.Node.EventType.TOUCH_END,function(){e.canTouch&&e._handler(e.id)}),this._isLoaded=!0,this.reset()},reset:function(){this._isLoaded&&(this.canTouch=!0,this.spineWin.node.active=!1,this.setState(1))},init:function(e,t){this.id=e,this._handler=t},setState:function(e,t){var n,a;e=e||1,t=t||1,this._jpType=t;var r=(n={},o(n,1,{aniName:"zhuzi_idle",loop:!0,canTouch:!0}),o(n,2,{aniName:"zhuzi_hui",loop:!1,canTouch:!1}),o(n,3,{aniName:"zhuzi_click",loop:!1,canTouch:!1}),n)[e],i=(a={},o(a,1,"Mini"),o(a,2,"Minor"),o(a,3,"Major"),o(a,4,"Grand"),a)[t];this.spine.setSkin(i),this.spine.setAnimation(0,r.aniName,r.loop),this.canTouch=r.canTouch},playWin:function(){this.spineWin.node.active=!0,this.spineWin.setAnimation(0,"glow".concat(this._jpType,"b"),!0)}}),cc._RF.pop()},{}],NewKylin_Popup:[function(e,t,n){"use strict";function o(e,t,n,o,a,r,i){try{var c=e[r](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(o,a)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(a,r){var i=e.apply(t,n);function c(e){o(i,a,r,c,s,"next",e)}function s(e){o(i,a,r,c,s,"throw",e)}c(void 0)})}}cc._RF.push(t,"2adbaT0+j1DG7x1XuCtsBzm","NewKylin_Popup"),cc.Class({extends:cc.Component,properties:{bg:cc.Node},onLoad:function(){},showBg:function(e){this.bg.active=e},showWinGold:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){var o,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return SlotsFacade.soundMgr.playEffect("bell"),t.showBg(!0),(o=t.node.getChildByName("panel_win_coin")).active=!0,o.scale=0,o.getChildByName("label").getComponent("LabelRollCmp").startRoll(0,e),cc.tween(o).to(.5,{scale:1},{easing:"backOut"}).start(),n.next=9,SlotsFacade.delayTime(.5);case 9:return a=o.getChildByName("btn_ok"),n.next=12,new Promise(function(e){a.on(cc.Node.EventType.TOUCH_END,function n(){SlotsFacade.soundMgr.playEffect("popup_out"),a.off(cc.Node.EventType.TOUCH_END,n),cc.tween(o).to(.5,{scale:0},{easing:"backIn"}).call(function(){t.showBg(!1),o.active=!1,e()}).start()})});case 12:case"end":return n.stop()}},n)}))()},showWinJpGold:function(e,t){var n=this;return a(regeneratorRuntime.mark(function o(){var a,r;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t||(t=1),SlotsFacade.soundMgr.playEffect("jpwin"),n.showBg(!0),(a=n.node.getChildByName("panel_win_jp_coin")).active=!0,a.scale=0,a.getChildByName("label").getComponent("LabelRollCmp").startRoll(0,e),a.getChildByName("jp_icon").getComponent("ImgSwitchCmp").setIndex(t-1),cc.tween(a).to(.5,{scale:1},{easing:"backOut"}).start(),o.next=12,SlotsFacade.delayTime(.5);case 12:return r=a.getChildByName("btn_ok"),o.next=15,new Promise(function(e){r.on(cc.Node.EventType.TOUCH_END,function t(){r.off(cc.Node.EventType.TOUCH_END,t),SlotsFacade.soundMgr.playEffect("popup_out"),cc.tween(a).to(.5,{scale:0},{easing:"backIn"}).call(function(){n.showBg(!1),a.active=!1,e()}).start()})});case 15:case"end":return o.stop()}},o)}))()}}),cc._RF.pop()},{}],NewKylin_Reel:[function(e,t,n){"use strict";cc._RF.push(t,"7303atQ6OFJOa0IXlOysA6+","NewKylin_Reel"),cc.Class({extends:e("LMSlots_Reel_Base"),properties:{}}),cc._RF.pop()},{LMSlots_Reel_Base:void 0}],NewKylin_Slots:[function(e,t,n){"use strict";function o(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=a(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r,i=!0,c=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return i=e.done,e},e:function(e){c=!0,r=e},f:function(){try{i||null==o.return||o.return()}finally{if(c)throw r}}}}function a(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function i(e,t,n,o,a,r,i){try{var c=e[r](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(o,a)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(o,a){var r=e.apply(t,n);function c(e){i(r,o,a,c,s,"next",e)}function s(e){i(r,o,a,c,s,"throw",e)}c(void 0)})}}cc._RF.push(t,"7feafcC4gtA5okt7rACSDNJ","NewKylin_Slots"),cc.Class({extends:e("LMSlots_Slots_Base"),properties:{mask:cc.Node},onLoad:function(){this._super(),this.mask=this.node.getChildByName("mask")},StartMove:function(){this._super(),SlotsFacade.flowCtrl.startMove(),0==SlotsFacade.dm.GetTotalFree()&&Global.SlotsSoundMgr.playNormalBgm()},onMsgSpine:function(e){SlotsFacade.flowCtrl.onSpinMsg(e)},OnSpinEnd:function(){SlotsFacade.flowCtrl.spinEnd()},ReconnectShow:function(){this.scheduleOnce(function(){SlotsFacade.flowCtrl.enterRoom()})},transferIdx:function(e){return{col:(e-=1)%this._col,row:this._row-Math.floor(e/this._col)-1}},getIdxGlobalPos:function(e){var t=this.transferIdx(e),n=this._reels[t.col],o=n.GetSymbolPosByRow(t.row);return n.node.getChildByName("mask").convertToWorldSpaceAR(o)},getSymbolsByServerIds:function(e){var t=this,n=[];return e.forEach(function(e){n.push(t.GetSymbolByIdx(e))}),n},SetSlotsResult:function(e){for(var t=e.length/this._col,n=[],o=0;o<e.length;o++){Math.floor(o/t);var a=o%this._col;if(this._cfg.symbol[e[o]]){var r={};r.sid=e[o],r.data={idx:o+1},n[a]||(n[a]=[]),n[a].unshift(r)}}SlotsFacade.dm.getSpinData();for(var i=0;i<this._reels.length;i++){var c=this._reels[i],s=n[i];c.SetResult(s)}},playTriggerAni:function(e){var t=this;return c(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return SlotsFacade.soundMgr.playEffect("triggering"),e.forEach(function(e){t.GetSymbolByIdx(e).playTriggerAnimation()}),n.next=4,SlotsFacade.delayTime(1.5);case 4:case"end":return n.stop()}},n)}))()},shakeReels:function(e,t){var n=this;return c(regeneratorRuntime.mark(function a(){var r,i,c;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:SlotsFacade.soundMgr.playEffect("sym_shake"),e=e||1,t=t||2,r=o(n._reels);try{for(r.s();!(i=r.n()).done;)c=i.value,Global.shakeNode(c.node,t,e)}catch(e){r.e(e)}finally{r.f()}return a.next=7,SlotsFacade.delayTime(e);case 7:case"end":return a.stop()}},a)}))()},resetReelBonusAni:function(){var e,t=o(this._reels);try{for(t.s();!(e=t.n()).done;){e.value.showBonusAni(!1)}}catch(e){t.e(e)}finally{t.f()}},updateAllSymbol:function(){SlotsFacade.dm.updateRandomSymbols();var e,t=o(this._reels);try{for(t.s();!(e=t.n()).done;){var n,a=o(e.value._symbols);try{for(a.s();!(n=a.n()).done;){var r=n.value;r.StartMove(),r.ShowRandomSymbol()}}catch(e){a.e(e)}finally{a.f()}}}catch(e){t.e(e)}finally{t.f()}}}),cc._RF.pop()},{LMSlots_Slots_Base:void 0}],NewKylin_Sound:[function(e,t,n){"use strict";cc._RF.push(t,"144e5nXzQpHWLg4nj/xvOdc","NewKylin_Sound"),cc.Class({extends:cc.Component,properties:{_soundPath:"games/NewKylin/",_isPlayBgm:!1},playEffect:function(e,t){return cc.vv.AudioManager.playEff(this._soundPath,e,!0,t)},stopEffectByName:function(e){cc.vv.AudioManager.stopEffectByName(e)},stopEffect:function(){cc.vv.AudioManager.stopAudio()},playBgm:function(e,t){e?(Global.SlotsSoundMgr.stopBgm(),Global.SlotsSoundMgr.playBgm(e)):(t=t||!1,Global.SlotsSoundMgr.playNormalBgm(t))},playFreeBgm:function(){this.playBgm("fgbgm")}}),cc._RF.pop()},{}],NewKylin_Wheel:[function(e,t,n){"use strict";function o(e,t,n,o,a,r,i){try{var c=e[r](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(o,a)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(a,r){var i=e.apply(t,n);function c(e){o(i,a,r,c,s,"next",e)}function s(e){o(i,a,r,c,s,"throw",e)}c(void 0)})}}cc._RF.push(t,"e4008CSIolBWpz9gbsGDwPn","NewKylin_Wheel"),cc.Class({extends:cc.Component,properties:{roundCount:10,_canSpin:!1,_callBack:null,_resultIdx:0,panel:cc.Node,bg:cc.Node,board:cc.Node,btn_spin:cc.Node,arrow:cc.Node,collect_container:cc.Node,particle_start_pos:cc.Node,spine_super:sp.Skeleton,spine_8to10:sp.Skeleton,spine_win:sp.Skeleton},_getRotation:function(){var e=360*-this.roundCount;return e+=[-22.5,-112.5,-67.5,-157.5][this._resultIdx-1]},onLoad:function(){var e=this;this.btn_spin.on(cc.Node.EventType.TOUCH_END,function(){e._canSpin&&(e._canSpin=!1,SlotsFacade.soundMgr.playEffect("wheelspin"),SlotsFacade.dm.reqSubGame({rtype:2}),e.btn_spin.getChildByName("spine").getComponent(sp.Skeleton).setAnimation(0,"Wheel_button_click",!1))},this)},onWheelMsg:function(e){SlotsFacade.dm.collectInfo=e.data.collectInfo;var t=e.data.collectInfo.freeGameInfo;SlotsFacade.dm.SetFreeTime(t.totalCnt),SlotsFacade.dm.SetTotalFree(t.totalCnt),this._resultIdx=t.type,this._startWheel()},_reset:function(){this.board.angle=0;for(var e=1;e<=4;e++)this.board.getChildByName("wheelNum".concat(e,"1")).active=!0;this.bg.active=!0,this.spine_super.node.active=!1,this.spine_8to10.node.active=!1,this.spine_win.node.active=!0,this.spine_win.setAnimation(0,"Wheel_idle",!0),this.btn_spin.getChildByName("spine").getComponent(sp.Skeleton).setAnimation(0,"Wheel_button_idle",!0)},_startWheel:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.spine_win.node.active=!1,SlotsFacade.soundMgr.playEffect("wheel"),t.next=4,new Promise(function(t){cc.tween(e.board).to(8,{angle:e._getRotation()},{easing:"quartInOut"}).call(function(){e.spine_win.node.active=!0,e.spine_win.setAnimation(0,"Wheel_win",!0),SlotsFacade.soundMgr.playEffect("wheelstop"),t()}).start()});case 4:return t.next=6,SlotsFacade.delayTime(2);case 6:return t.next=8,SlotsFacade.collectProgress.collectEnergy(e.particle_start_pos.convertToWorldSpaceAR(cc.v2(0,0)));case 8:return t.next=10,e._processSuperMode();case 10:e._completeWheel();case 11:case"end":return t.stop()}},t)}))()},_processSuperMode:function(){var e=this;return a(regeneratorRuntime.mark(function t(){var n,o,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(3==(n=SlotsFacade.dm.collectInfo).state){t.next=3;break}return t.abrupt("return");case 3:return SlotsFacade.soundMgr.playEffect("supermode"),e.spine_super.node.active=!0,e.spine_super.setAnimation(0,"Supermode_intro",!1),e.spine_super.addAnimation(0,"Supermode_idle",!0),t.next=9,SlotsFacade.delayTime(3);case 9:return cc.tween(e.spine_super.node).parallel(cc.tween().to(.5,{scale:.2},{easing:"backIn"}),cc.tween().to(.5,{position:e.spine_8to10.node.position},{easing:"cubicIn"})).call(function(){e.spine_super.node.active=!1}).start(),t.next=12,SlotsFacade.delayTime(.5);case 12:return o=n.freeGameInfo,e.board.getChildByName("wheelNum".concat(o.type,"1")).active=!1,SlotsFacade.soundMgr.playEffect("collectIn"),a=["Wins_8To10","Spins_8To10","Prizes_8To10","Wilds_8To10"][o.type-1],e.spine_8to10.node.active=!0,e.spine_8to10.setSkin(a),e.spine_8to10.setAnimation(0,"Wheel_8to10",!1),e.spine_8to10.setCompleteListener(function(){e.spine_8to10.setCompleteListener(null)}),t.next=22,SlotsFacade.delayTime(3);case 22:case"end":return t.stop()}},t)}))()},_completeWheel:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.close();case 2:case"end":return t.stop()}},t)}))()},open:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t._callBack=e,n.next=3,SlotsFacade.mainPanel.showSceneTransition(1);case 3:SlotsFacade.soundMgr.playBgm("bgbgm"),t.bg.active=!0,t.panel.active=!0,t._reset(),SlotsFacade.collectProgress.changeParent(t.collect_container),t._canSpin=!0;case 9:case"end":return n.stop()}},n)}))()},close:function(){var e=this;return a(regeneratorRuntime.mark(function t(){var n,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,SlotsFacade.mainPanel.showSceneTransition(1);case 2:if(3==(n=SlotsFacade.dm.collectInfo).state){for(o=0;o<n.counts.length;o++)4==n.counts[o]&&(n.counts[o]=0);SlotsFacade.collectProgress.updateProgress()}SlotsFacade.collectProgress.changeParent(),e.panel.active=!1,e.bg.active=!1,e._callBack&&e._callBack();case 8:case"end":return t.stop()}},t)}))()}}),cc._RF.pop()},{}],NewKylin_symbol:[function(e,t,n){"use strict";cc._RF.push(t,"3907bGX4ctIPbcnXbHmBn9j","NewKylin_symbol"),cc.Class({extends:e("LMSlots_Symbol_Base"),properties:{},StartMove:function(){this._super()},ShowById:function(e,t){this._super(e,t)},playWildAppear:function(){var e=cc.vv.gameData.getGameCfg();if(this._id==e.wildId){this._showNode&&(this._showNode.active=!1);var t=this._id;this._showNode=cc.find(e.symbol[t].win_node,this.node),this._showNode.active=!0;var n=this._showNode.getComponent(sp.Skeleton);n&&n.setAnimation(0,"Wild_03",!1)}},StopMoveDeep:function(){var e=SlotsFacade.dm.getGameCfg();this._id==e.bonusId&&this.playStopAnimation()},openBox:function(e){var t=this._id,n=cc.vv.gameData.getGameCfg();this._showNode&&(this._showNode.active=!1);var o=this.setAnimationToTop(!0);o.active=!0;var a=cc.find(n.symbol[t].win_node,o);a.active=!0,o.zIndex=n.symbol[t].trigger_ani.zIndex-this._symbolIdx+10*this._reelIdx;var r=a.getComponent(sp.Skeleton);r.setAnimation(0,"Repeat_open",!1),r.addAnimation(0,"Repeat_idle",!0);var i=o.getChildByName("label");i.active=!0,i.opacity=0,i.getComponent(cc.Label).string=Global.convertNumToShort(e),cc.tween(i).delay(1).to(.3,{opacity:255}).start()}}),cc._RF.pop()},{LMSlots_Symbol_Base:void 0}]},{},["NewKylin_Cfg","NewKylin_Character","NewKylin_CollectProgress","NewKylin_FlowCtrl","NewKylin_FreeGame","NewKylin_GameData","NewKylin_Logic","NewKylin_MainPanel","NewKylin_PickGame","NewKylin_PickItem","NewKylin_Popup","NewKylin_Reel","NewKylin_Slots","NewKylin_Sound","NewKylin_Wheel","NewKylin_symbol"]);
window.__require=function e(t,n,o){function i(a,r){if(!n[a]){if(!t[a]){var c=a.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!r&&l)return l(c,!0);if(s)return s(c,!0);throw new Error("Cannot find module '"+a+"'")}a=c}var _=n[a]={exports:{}};t[a][0].call(_.exports,function(e){return i(t[a][1][e]||e)},_,_.exports,e,t,n,o)}return n[a].exports}for(var s="function"==typeof __require&&__require,a=0;a<o.length;a++)i(o[a]);return i}({GodnessOfLove_BonusGame:[function(e,t,n){"use strict";function o(e,t,n,o,i,s,a){try{var r=e[s](a),c=r.value}catch(e){return void n(e)}r.done?t(c):Promise.resolve(c).then(o,i)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(i,s){var a=e.apply(t,n);function r(e){o(a,i,s,r,c,"next",e)}function c(e){o(a,i,s,r,c,"throw",e)}r(void 0)})}}cc._RF.push(t,"de7fb9XHIxOG5I+HczDuJLd","GodnessOfLove_BonusGame"),cc.Class({extends:cc.Component,properties:{_exitCallBack:null,_curTimes:3,_reels:[],_shelterList:[],_bonusPoolList:[]},start:function(){},Init:function(){this.initBonusNode(),this._topScript=cc.vv.gameData.GetTopScript(),this._bottomScript=cc.vv.gameData.GetBottomScript(),this._cfg=cc.vv.gameData.getGameCfg(),this._col=this._cfg.bonus_col,this._row=this._cfg.bonus_row,this.createReels(this._col,this._row),this.initBonusUI()},createReels:function(e,t){this._cfg.scripts.Reels;for(var n=0;n<e;n++){var o=cc.find("reels/reel"+(n+1),this._bonus_slots).addComponent("GodnessOfLove_BonusReel");o.Init(n,1,t,this._topAniNode),this._reels.push(o)}},initBonusNode:function(){this._normal_slots=cc.find("safe_node/slots",this.node),this._bg_bonus=cc.find("safe_node/spr_bg_bonus",this.node),this._bonus_slots=cc.find("safe_node/bonus_slots",this.node),this._topAniNode=cc.find("top_ani",this._bonus_slots),this._node_reels=cc.find("reels",this._bonus_slots),this._reels_bg_1=cc.find("reels_bg_1",this._bonus_slots),this._reels_bg_2=cc.find("reels_bg_2",this._bonus_slots),this._spine_hengtiao=cc.find("spine_hengtiao",this._bonus_slots),this._reels_bg=cc.find("reels_bg",this._bonus_slots),this._node_col=cc.find("mask/node_col",this._reels_bg),this._node_row_left=cc.find("mask/node_row_left",this._reels_bg),this._node_row_right=cc.find("mask/node_row_right",this._reels_bg),this._frame_top=cc.find("frame_top",this._bonus_slots),this._node_tit=cc.find("node_tit",this._frame_top),this._par_left=cc.find("par_left",this._frame_top),this._par_right=cc.find("par_right",this._frame_top),this._shelterList.push(cc.find("shelter_1",this._frame_top)),this._shelterList.push(cc.find("shelter_2",this._frame_top)),this._shelterList.push(cc.find("shelter_3",this._frame_top)),this._shelterList.push(cc.find("shelter_4",this._frame_top)),this._spine_jsKuang=cc.find("spine_jsKuang",this._bonus_slots),this._spine_shouji=cc.find("spine_bonus_shouji",this._bonus_slots.parent),this._spine_js=cc.find("spine_bonus_js",this._bonus_slots.parent)},initBonusUI:function(){this._normal_slots.active=!0,this._bg_bonus.active=!1,this._bonus_slots.active=!1,this._reels_bg_1.active=!1,this._reels_bg_2.active=!1,this._spine_hengtiao.active=!1,this._reels_bg.active=!1,this.setLineState(this._node_col,!1),this.setLineState(this._node_row_left,!1),this.setLineState(this._node_row_right,!1),this._node_tit.active=!1;for(var e=0;e<this._shelterList.length;e++)this._shelterList[e].active=!1;this._par_left.active=!1,this._par_right.active=!1,this._node_reels.active=!1,this._spine_jsKuang.active=!1,this._spine_shouji.active=!1,this._spine_js.active=!1},setLineState:function(e,t){for(var n=0;n<e.childrenCount;n++)e.children[n].active=t},playBonusBgm:function(){cc.vv.gameData.GetCollectSuper()?Global.SlotsSoundMgr.playBgm("LoveShotSounds_Rsbg"):Global.SlotsSoundMgr.playBgm("music_LoveShot_mapGameBG")},triBonusGame:function(e){var t=this;return i(regeneratorRuntime.mark(function n(){var o,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:for(t._exitCallBack=e,t.playBonusBgm(),t._bottomScript.SetWin(),o=0;o<t._col;o++)for(i=0;i<t._row;i++)t._reels[o].setHolderPlay(i,!0);return n.next=6,t.playTriAnim();case 6:cc.vv.gameData.SetIsBonusGame(!0),t.sendNextRound();case 8:case"end":return n.stop()}},n)}))()},playTriAnim:function(){var e=this;return new Promise(function(){var t=i(regeneratorRuntime.mark(function t(n,o){var i,s,a,r,c,l,_,u,p,m,d,f,h,v;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._normal_slots.active=!1,e._bg_bonus.active=!0,e._bonus_slots.active=!0,e._reels_bg_1.active=!0,t.next=6,e.awaitTime(1);case 6:return Global.SlotsSoundMgr.playEffect("reel_raise"),e._reels_bg_2.active=!0,e._reels_bg_2.position=cc.v2(750,120),cc.tween(e._reels_bg_2).to(.8,{position:cc.v2(0,120)}).to(.8,{position:cc.v2(0,e._reels_bg_1.y+e._reels_bg_1.height)},{easing:"backInOut"}).start(),t.next=12,e.awaitTime(1.3);case 12:return cc.tween(cc.find("spr_up",e._reels_bg_1)).to(.3,{opacity:0}).start(),cc.tween(cc.find("spr_down",e._reels_bg_2)).to(.3,{opacity:0}).start(),e._spine_hengtiao.active=!0,e._spine_hengtiao.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),t.next=18,e.awaitTime(.5);case 18:for(e._reels_bg.active=!0,cc.find("spr_up",e._reels_bg_1).opacity=255,cc.find("spr_down",e._reels_bg_2).opacity=255,e._reels_bg_1.active=!1,e._reels_bg_2.active=!1,i=1.4,s=function(t){var n=e._node_col.children[t];n.active=!0,n.y=-400,"par"===n.name&&n.getComponent(cc.ParticleSystem).resetSystem(),cc.tween(n).to(i,{position:cc.v2(n.x,400)}).call(function(){"par"===n.name&&(n.active=!1)}).start()},a=0;a<e._node_col.childrenCount;a++)s(a);return e._par_left.active=!0,e._par_left.position=cc.v2(0,-400),e._par_left.getComponent(cc.ParticleSystem).resetSystem(),e._par_right.active=!0,e._par_right.position=cc.v2(0,-400),e._par_right.getComponent(cc.ParticleSystem).resetSystem(),cc.tween(e._par_left).to(i,{position:cc.v2(-333,-400)}).start(),cc.tween(e._par_right).to(i,{position:cc.v2(333,-400)}).start(),t.next=36,e.awaitTime(i);case 36:for(r=1.4,c=function(t){var n=e._node_row_left.children[t];n.active=!0,n.x=-333,"par"===n.name&&n.getComponent(cc.ParticleSystem).resetSystem(),cc.tween(n).to(r,{position:cc.v2(333,n.y)}).call(function(){"par"===n.name&&(n.active=!1)}).start()},l=0;l<e._node_row_left.childrenCount;l++)c(l);for(_=function(t){var n=e._node_row_right.children[t];n.active=!0,n.x=333,"par"===n.name&&n.getComponent(cc.ParticleSystem).resetSystem(),cc.tween(n).to(r,{position:cc.v2(-333,n.y)}).call(function(){"par"===n.name&&(n.active=!1)}).start()},u=0;u<e._node_row_right.childrenCount;u++)_(u);return cc.tween(e._par_left).to(r,{position:cc.v2(-333,400)}).start(),cc.tween(e._par_right).to(r,{position:cc.v2(333,400)}).start(),t.next=45,e.awaitTime(r);case 45:return p=.7,cc.tween(e._par_left).to(p,{position:cc.v2(0,400)}).call(function(){e._par_left.active=!1}).start(),cc.tween(e._par_right).to(p,{position:cc.v2(0,400)}).call(function(){e._par_right.active=!1}).start(),t.next=50,e.awaitTime(p);case 50:return m=.5,e._node_tit.active=!0,e._node_tit.setScale(0),Global.SlotsSoundMgr.playEffect("bonus_land"),cc.tween(e._node_tit).to(m,{scale:1},{easing:"backOut"}).start(),e._curTimes=3,e.setTitleNum(e._curTimes),e._node_reels.active=!0,e.initAllSymbol(!0),t.next=61,e.awaitTime(m);case 61:e.getCurUnlockNum(),d=cc.vv.gameData.GetBonusCfg(),f=0;case 64:if(!(f<e._shelterList.length)){t.next=74;break}return Global.SlotsSoundMgr.playEffect("lock_show"),e._shelterList[f].active=!0,cc.find("lbl_num",e._shelterList[f]).getComponent(cc.Label).string=d[f],cc.find("spine_bao",e._shelterList[f]).active=!1,t.next=71,e.awaitTime(.3);case 71:f++,t.next=64;break;case 74:return t.next=76,e.hideShelter();case 76:return t.next=78,e.awaitTime(.3);case 78:return t.next=80,e.playBounceAnim();case 80:return t.next=82,e.awaitTime(1);case 82:return h=cc.vv.gameData.GetCollectSuper(),v=cc.vv.gameData.GetBonusRow().after,t.next=86,cc.vv.gameData.GetPopupScript().showBonusPress(h,v);case 86:n();case 87:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}())},enterBonusGame:function(e){var t=this;return i(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t._exitCallBack=e,t.playBonusBgm(),t.lockJackpot(),t.showEnterState(),n.next=6,t.awaitTime(2);case 6:cc.vv.gameData.SetIsBonusGame(!0),t.sendNextRound();case 8:case"end":return n.stop()}},n)}))()},showEnterState:function(){this._normal_slots.active=!1,this._bg_bonus.active=!0,this._bonus_slots.active=!0;for(var e=0;e<this._node_col.childrenCount;e++)"par"===this._node_col.children[e].name?this._node_col.children[e].active=!1:(this._node_col.children[e].active=!0,this._node_col.children[e].position=cc.v2(this._node_col.children[e].x,400));for(var t=0;t<this._node_row_left.childrenCount;t++)"par"===this._node_row_left.children[t].name?this._node_row_left.children[t].active=!1:(this._node_row_left.children[t].active=!0,this._node_row_left.children[t].position=cc.v2(333,this._node_row_left.children[t].y));for(var n=0;n<this._node_row_right.childrenCount;n++)"par"===this._node_row_right.children[n].name?this._node_row_right.children[n].active=!1:(this._node_row_right.children[n].active=!0,this._node_row_right.children[n].position=cc.v2(-333,this._node_row_right.children[n].y));this._node_tit.active=!0,this._node_tit.setScale(1),this._curTimes=cc.vv.gameData.GetBonusRestNum(),this.setTitleNum(this._curTimes),this._reels_bg.active=!0,this._node_reels.active=!0,this.initAllSymbol(!1);for(var o=this.getCurUnlockNum(),i=cc.vv.gameData.GetBonusCfg(),s=0;s<this._shelterList.length;s++)o<i[s]?(this._shelterList[s].active=!0,cc.find("lbl_num",this._shelterList[s]).getComponent(cc.Label).string=i[s]-o):this._shelterList[s].active=!1},exitBonusGame:function(){var e=this;return i(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return cc.vv.gameData.GetCollectSuper()&&(cc.vv.gameData.SetCollectCurNum(0),cc.vv.gameData.GetCollectScript().initItems()),cc.vv.gameData.GetPopupScript().playBonusQpAnim(),t.next=4,e.awaitTime(1.5);case 4:return e.resetJackpot(),e.initBonusUI(),cc.vv.gameData.SetIsBonusGame(!1),t.next=9,e.awaitTime(1.5);case 9:return n=cc.vv.gameData.GetBonusWinCoin(),t.next=12,new Promise(function(e,t){cc.vv.gameData.GetSlotsScript().ShowBottomWin(n,n,!0,e)});case 12:e._exitCallBack&&(e._exitCallBack(),e._exitCallBack=null),Global.SlotsSoundMgr.stopBgm(),Global.SlotsSoundMgr.playNormalBgm();case 15:case"end":return t.stop()}},t)}))()},setTitleNum:function(e){cc.find("node_3",this._node_tit).active=3===e,cc.find("node_2",this._node_tit).active=2===e,cc.find("node_1",this._node_tit).active=1===e,cc.find("node_0",this._node_tit).active=0===e,cc.find("node_complete",this._node_tit).active=e<0;var t=cc.find("spine",this._node_tit);this._curTimes<e&&3===e?(t.active=!0,t.getComponent(sp.Skeleton).setAnimation(0,"animation",!1)):t.active=!1,e<0&&Global.SlotsSoundMgr.playEffect("respin_end"),this._curTimes=e},initAllSymbol:function(e){for(var t=cc.vv.gameData.GetBonusResult(),n=[],o=0;o<this._col*this._row;o++){var i={sid:16,data:{}};n.push(i)}if(e){var s=t[0].red,a=t[0].boost;for(var r in s.data){var c=Number(r.substring("idx_".length));n[c-1].sid=5,n[c-1].data=s.data[r]}for(var l=0;l<a.idxs.length;l++){n[a.idxs[l]-1].sid=6}}else{var _=t[t.length-1].red;t[t.length-1].boost;for(var u in _.data){var p=Number(u.substring("idx_".length));1===_.data[u].color?n[p-1].sid=5:n[p-1].sid=601,n[p-1].data=_.data[u]}}for(var m=0;m<this._col*this._row;m++){var d=this.GetSymbolByIdx(m+1);if(16===n[m].sid){var f=cc.vv.gameData.getGameCfg(),h=Global.random(1,f.randomSymbolsBonus.length);n[m].sid=f.randomSymbolsBonus[h-1],d.ShowById(n[m].sid)}else d.ShowById(n[m].sid,n[m].data),d.playBonusIdleAnim(),this._reels[this.getColByIdx(m+1)].setHolderPlay(this.getRowByIdx(m+1),!1)}},playBounceAnim:function(){var e=this;return i(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=i(regeneratorRuntime.mark(function t(n,o){var i,s,a,r,c,l,_,u,p,m,d,f,h,v,g,b;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=cc.vv.gameData.GetBonusResult(),s=cc.find("spine_move",e._bonus_slots),a=cc.find("par_move",e._bonus_slots),r=cc.find("spine_move_end",e._bonus_slots),!(i&&i.length>1)){t.next=43;break}c=1;case 6:if(!(c<i.length)){t.next=43;break}return t.next=9,e.awaitTime(.4);case 9:l=i[c],_=l.boost.traceIdxs,u=l.boost.showIdx,p=e._bonus_slots.convertToNodeSpaceAR(e.GetSymbolByIdx(u).node.convertToWorldSpaceAR(cc.v2(0,0))),s.position=p,a.position=p,_.push(u),m=0;case 17:if(!(m<_.length)){t.next=40;break}return d=_[m],f=e.GetSymbolByIdx(d),h=e._bonus_slots.convertToNodeSpaceAR(f.node.convertToWorldSpaceAR(cc.v2(0,0))),s.active=!0,a.active=!0,a.getComponent(cc.ParticleSystem).resetSystem(),Global.SlotsSoundMgr.playEffect("bonus_fly"),v=.3,cc.tween(s).to(v,{position:h}).call(function(){s.active=!1}).start(),cc.tween(a).to(v,{position:h}).call(function(){a.active=!1}).start(),t.next=30,e.awaitTime(v);case 30:for(g in r.active=!0,r.position=h,r.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),l.red.data)b=Number(g.substring("idx_".length)),d===b&&(f.ShowById(601,l.red.data[g]),f.playBonusIdleAnim());return t.next=36,e.awaitTime(.1);case 36:Global.SlotsSoundMgr.stopEffectByName("bonus_fly");case 37:m++,t.next=17;break;case 40:c++,t.next=6;break;case 43:n();case 44:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},StartMove:function(){this._bStopRightnow=null,this._gameInfo=null,this.MoveReels(this._reels),this._stopTime=this.GetStopTime(),this._curTimes-=1,this.setTitleNum(this._curTimes),Global.SlotsSoundMgr.playEffect("")},MoveReels:function(e){this.moveReelLastIdx=-1;for(var t=0;t<e.length;t++){var n=e[t];n.StartMove();var o=n.GetReelIdx();o>this.moveReelLastIdx&&(this.moveReelLastIdx=o)}},StopMove:function(){this._bStopRightnow=!0,this._bottomScript.ShowBtnsByState("moveing_1"),this._stopTime=-1;for(var e=0;e<this._reels.length;e++){var t=this._reels[e];t.StopMove(0),t.StopMoveRightNow()}},onMsgSpine:function(e){this._gameInfo=e;var t=e.resultCards;this.SetSlotsResult(t)},SetSlotsResult:function(){for(var e=[],t=cc.vv.gameData.GetBonusResult(),n=[],o=0;o<this._col*this._row;o++){var i={},s=cc.vv.gameData.getGameCfg(),a=Global.random(1,s.randomSymbolsBonus.length);i.sid=s.randomSymbolsBonus[a-1],i.data={},n.push(i)}var r=t[0].red,c=t[0].boost;for(var l in r.data){var _=Number(l.substring("idx_".length));n[_-1].sid=5,n[_-1].data=r.data[l]}for(var u=0;u<c.idxs.length;u++){n[c.idxs[u]-1].sid=6}for(var p=0;p<n.length;p++){var m=p%this._col;e[m]||(e[m]=[]),e[m].unshift(n[p])}for(var d=0;d<this._reels.length;d++){var f=this._reels[d],h=e[d];f.SetResult(h)}},OnReelBounsActionDeep:function(e){Global.SlotsSoundMgr.playEffect("reel_stop")},OnReelBounsActionEnd:function(e){for(var t=0;t<this._row;t++){if(this._reels[e].getHolderPlay(t)){var n=this._reels[e].GetSymbolByRow(t),o=n.GetShowId();5!==o&&6!==o||(Global.SlotsSoundMgr.playEffect("bonus_land"),n.playBonusStopAnim(),this._reels[e].setHolderPlay(t,!1))}}},OnSpinEnd:function(){var e=this;return i(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=cc.vv.gameData.GetBonusRestNum(),console.log("--1\u67e5\u770b\u51fabonus\u6e38\u620f\u5361\u4f4f11111",n),e.setTitleNum(n),3!==n){t.next=6;break}return t.next=6,e.hideShelter();case 6:return t.next=8,e.playBounceAnim();case 8:return t.next=10,e.awaitTime(1);case 10:if(console.log("--1\u67e5\u770b\u51fabonus\u6e38\u620f\u5361\u4f4f11111",n),0!==n){t.next=18;break}return console.log("--1\u67e5\u770b\u51fabonus\u6e38\u620f\u5361\u4f4f11111"),t.next=15,e.playCompleteAnim();case 15:e.exitBonusGame(),t.next=19;break;case 18:e.sendNextRound();case 19:case"end":return t.stop()}},t)}))()},getCurUnlockNum:function(){for(var e=cc.vv.gameData.GetBonusRow().after,t=0,n=0;n<this._col;n++)for(var o=0;o<e;o++){var i=this._reels[n].GetSymbolByRow(o).GetShowId();5!==i&&6!==i&&601!==i||(t+=1)}return t},hideShelter:function(){var e=this;return new Promise(function(){var t=i(regeneratorRuntime.mark(function t(n,o){var i,s,a,r,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(i=cc.vv.gameData.GetBonusCfg(),s=e.getCurUnlockNum(),a=e._shelterList.length-1;a>=0;a--)e._shelterList[a].active&&(r=i[a]-s,cc.find("lbl_num",e._shelterList[a]).getComponent(cc.Label).string=Math.max(0,r),cc.find("spine_bao",e._shelterList[a]).active=!0,cc.find("spine_bao",e._shelterList[a]).getComponent(sp.Skeleton).setAnimation(0,"animation1",!1));return t.next=5,e.awaitTime(.5);case 5:c=e._shelterList.length-1;case 6:if(!(c>=0)){t.next=13;break}if(!(s>=i[c])){t.next=10;break}if(!e._shelterList[c].active){t.next=10;break}return t.delegateYield(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Global.SlotsSoundMgr.playEffect("reel_unlock"),e,e._shelterList[c].active=!1,(n=cc.find("unlock_"+(c+1),e._frame_top)).active=!0,n.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),n.getComponent(sp.Skeleton).setCompleteListener(function(){n.active=!1}),t.next=9,e.awaitTime(.5);case 9:case"end":return t.stop()}},t)})(),"t0",10);case 10:c--,t.next=6;break;case 13:n();case 14:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}())},playBonusBombAnim:function(e){var t=this;return i(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=6;break}return e.playBonusBombAnim(!0),e.playBonusEndAnim(),n.next=5,t.awaitTime(.5);case 5:e.playBonusShoujiAnim(!0);case 6:case"end":return n.stop()}},n)}))()},playCompleteAnim:function(){var e=this;return new Promise(function(){var t=i(regeneratorRuntime.mark(function t(n,o){var i,s,a,r,c,l,_,u,p,m,d,f,h,v,g,b,S,w;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("--1\u67e5\u770b\u51fabonus\u6e38\u620f\u5361\u4f4f222222"),e.setTitleNum(-1),Global.SlotsSoundMgr.playEffect(""),t.next=5,e.awaitTime(1);case 5:for(e._node_tit.active=!1,e._spine_jsKuang.active=!0,e._spine_jsKuang.getComponent(sp.Skeleton).setAnimation(0,"animation",!0),console.log("--1\u67e5\u770b\u51fabonus\u6e38\u620f\u5361\u4f4f33333"),Global.SlotsSoundMgr.playEffect("respin_light"),i=[],s=cc.vv.gameData.GetBonusRow().after,a=s-1;a>=0;a--)for(r=0;r<e._col;r++)e._reels[r].getHolderPlay(a)||(c=e._reels[r].GetSymbolByRow(a),e.playBonusBombAnim(c),i.push(c));return t.next=15,e.awaitTime(1.3);case 15:l=0;case 16:if(!(l<i.length)){t.next=57;break}if((_=i[l]).playBonusShoujiAnim(!1),u=_.GetData(),p=u.coin,u.pool>0&&(m=cc.vv.gameData.GetBonusPool(),p+=m[u.pool-1]),d=!0,!(u.pool>0)){t.next=30;break}if(cc.vv.gameData.GetPoolScript().showWinJp(u.pool,!0),d=cc.vv.gameData.GetPoolScript().poolIsLock(u.pool)){t.next=30;break}return t.next=29,cc.vv.gameData.GetPopupScript().showWinJp(p,u.pool);case 29:cc.vv.gameData.GetPoolScript().showWinJp(u.pool,!1);case 30:if(!(u.pool<=0||d)){t.next=50;break}return Global.SlotsSoundMgr.playEffect("win_fly"),_.getSymbolIdx(),_.getReelIdx(),e._spine_shouji.active=!0,f=cc.vv.gameData.GetBottomScript().getWinLabelNor(),h=e._spine_shouji.parent.convertToNodeSpaceAR(_.node.convertToWorldSpaceAR(cc.v2(0,0))),v=e._spine_shouji.parent.convertToNodeSpaceAR(f.convertToWorldSpaceAR(cc.v2(0,0))),g=cc.v2(v.x-h.x,v.y-h.y),b=g.signAngle(cc.v2(1,0)),e._spine_shouji.position=e._spine_shouji.parent.convertToNodeSpaceAR(_.node.convertToWorldSpaceAR(cc.v2(0,0))),e._spine_shouji.angle=-b*cc.macro.DEG+90,e._spine_shouji.scaleY=Math.abs(g.mag())/750,e._spine_shouji.getComponent(sp.Skeleton).setAnimation(0,"animation1_3",!1),t.next=46,e.awaitTime(.6);case 46:e._spine_js.active=!0,e._spine_js.position=v,e._spine_js.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),u.pool>0&&cc.vv.gameData.GetPoolScript().showWinJp(u.pool,!1);case 50:return S=p+e._bottomScript.getCurrentWin(),e._bottomScript.SetWin(S),t.next=54,e.awaitTime(.3);case 54:l++,t.next=16;break;case 57:return e._spine_jsKuang.active=!1,w=cc.vv.gameData.GetBonusWinCoin(),t.next=61,cc.vv.gameData.GetPopupScript().showBonusWin(w);case 61:console.log("--1\u67e5\u770b\u51fabonus\u6e38\u620f\u5361\u4f4f4444"),n();case 63:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}())},sendNextRound:function(){this._bottomScript.SendSpinReq()},GetStopTime:function(){return this._cfg.auto_stop_time||1},SetStopTime:function(e){this._stopTime=e},GetReelStopInter:function(e){return e*(this._cfg.reelStopInter||.6)},getColByIdx:function(e){return(e-1)%this._col},getRowByIdx:function(e){return this._row-Math.floor((e-1)/this._col)-1},GetSymbolByIdx:function(e){var t=(e-1)%this._col,n=this._row-Math.floor((e-1)/this._col)-1;return this._reels[t].GetSymbolByRow(n)},GetLastStopReelIdx:function(){return this.moveReelLastIdx},update:function(e){if(this._stopTime>0&&(this._stopTime=this._stopTime-e,this._stopTime<=0)){this._bottomScript.ShowBtnsByState("moveing_2");for(var t=0;t<this._reels.length;t++){var n=this._reels[t],o=this.GetReelStopInter(t);n.StopMove(o)}}},lockJackpot:function(){var e=cc.vv.gameData.GetBonusPool();cc.vv.gameData.GetPoolScript().PausePool([{prizeType:0,pauseNum:e[0]},{prizeType:1,pauseNum:e[1]},{prizeType:2,pauseNum:e[2]},{prizeType:3,pauseNum:e[3]},{prizeType:4,pauseNum:e[4]}])},resetJackpot:function(){cc.vv.gameData.GetPoolScript().ResumePausePool()},awaitTime:function(e){var t=this;return new Promise(function(n,o){t.scheduleOnce(function(){n()},e)})}}),cc._RF.pop()},{}],GodnessOfLove_BonusReel:[function(e,t,n){"use strict";function o(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=i(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s,a=!0,r=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return a=e.done,e},e:function(e){r=!0,s=e},f:function(){try{a||null==o.return||o.return()}finally{if(r)throw s}}}}function i(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}cc._RF.push(t,"6c451+T4O5LcqT1Es60rD/D","GodnessOfLove_BonusReel"),cc.Class({extends:cc.Component,properties:{_maskList:[],_holderData:[]},start:function(){},Init:function(e,t,n,o){this._reelIdx=e,this._holderCount=n,this._nCount=t,this._symbols=[],this._topAniNode=o;for(var i=0;i<this._holderCount;i++){var s={},a=cc.find("mask_"+(i+1),this.node);s.node=cc.find("holder",a),s.OrigPosY=s.node.position.y,s.symbols=[],s.isPlay=!0,this._maskList.push(a),this._holderData.push(s)}this.LoadSymbols()},setHolderPlay:function(e,t){this._holderData[e].isPlay=t},getHolderPlay:function(e){return this._holderData[e].isPlay},GetReelIdx:function(){return this._reelIdx},LoadSymbols:function(){var e=cc.vv.gameData.getGameCfg().symbolPrefab;this._symbolTemplete||(this._symbolTemplete=cc.vv.gameData.GetPrefabByName(e));for(var t=0;t<this._holderData.length;t++){for(var n=this._holderData[t],o=0;o<2;o++){var i=cc.vv.gameData.getGameCfg(),s=cc.instantiate(this._symbolTemplete);s.parent=n.node;var a=s.addComponent(i.scripts.Symbols),r=o+1;a.Init(r,this._topAniNode),a.SetSymbolReelIdx(this._reelIdx),a.setBonusIndex(t),a.setSymType("bonus"),n.symbols.push(a)}this.ReLayOut(n.symbols)}},ReLayOut:function(e){for(var t=0;t<e.length;t++){var n=e[t];n.node.position=this.GetSymbolPosByRow(t),n.SetSymbolIdx(t)}},GetSymbolByRow:function(e){return this._holderData[e].symbols[0]},GetSymbolPosByRow:function(e){var t=cc.vv.gameData.getGameCfg();return cc.v2(0,(e+.5)*t.symbolSize.height)},StartMove:function(){this._result=null;var e=cc.vv.gameData.getGameCfg();this._curY=0,this._bMoving=!0,this._bStoping=!1,this._fillCount=0;var t,n=o(this._holderData);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(i.isPlay){var s,a=o(i.symbols);try{for(a.s();!(s=a.n()).done;){var r=s.value;r.node.active=!0,r.StartMove()}}catch(e){a.e(e)}finally{a.f()}}}}catch(e){n.e(e)}finally{n.f()}this._speed=e.speed,this._offset=e.symbolSize.height},StopMove:function(e){this._bMoving&&(this._bStoping=!0,this._stopTime=e)},StopMoveRightNow:function(){this._stopRightNow=!0},OnReelSpinEnd:function(){var e=cc.vv.gameData.GetBonusScript(),t=e.GetLastStopReelIdx();this._reelIdx==t&&e.OnSpinEnd()},SetResult:function(e){this._result=e},UpdatePosition:function(e){if(this._stopTime=this._stopTime-e,this._stopTime<=0&&this._bStoping&&this._result&&this._stopRightNow){var t=cc.vv.gameData.getGameCfg();this._speed=Math.max(t.speed/2,this._speed-t.speed*e)}if(this._curY+=e*this._speed,this._curY>this._offset){this._curY=0;var n,i=o(this._holderData);try{for(i.s();!(n=i.n()).done;){var s=n.value;if(s.isPlay){s.node.y=s.OrigPosY;var a=0,r=null;if(this._stopTime<=0&&this._bStoping&&this._result)if(this._fillCount<this._holderCount){var c=this._result.shift();a=c.sid,r=c.data,this._fillCount++}else this._bMoving=!1;var l=s.symbols.shift();a>0?l.ShowById(a,r):l.ShowRandomSymbol(),s.symbols.push(l),this.ReLayOut(s.symbols)}else this._stopTime<=0&&this._bStoping&&this._result&&(this._fillCount<this._holderCount?(this._result.shift(),this._fillCount++):this._bMoving=!1)}}catch(e){i.e(e)}finally{i.f()}}else{var _,u=o(this._holderData);try{for(u.s();!(_=u.n()).done;){var p=_.value;p.isPlay&&(p.node.y=p.OrigPosY-this._curY)}}catch(e){u.e(e)}finally{u.f()}}this._bMoving||this.OnReelBounsAction()},OnReelBounsActionDeep:function(){cc.vv.gameData.GetBonusScript().OnReelBounsActionDeep(this._reelIdx)},OnReelBounsActionEnd:function(){cc.vv.gameData.GetBonusScript().OnReelBounsActionEnd(this._reelIdx),this.OnReelSpinEnd()},OnReelBounsAction:function(){var e,t=cc.vv.gameData.getGameCfg(),n=t.bounceInfo?t.bounceInfo.distance:30,i=t.bounceInfo?t.bounceInfo.time:.3,s=o(this._holderData);try{for(s.s();!(e=s.n()).done;){var a=e.value;a.isPlay&&cc.tween(a.node).to(n/this._speed,{position:cc.v2(a.node.x,a.OrigPosY-n)}).to(i,{position:cc.v2(a.node.x,a.OrigPosY)}).start()}}catch(e){s.e(e)}finally{s.f()}cc.tween(this.node).delay(n/this._speed).call(this.OnReelBounsActionDeep.bind(this)).delay(i).call(this.OnReelBounsActionEnd.bind(this)).start()},update:function(e){this._bMoving&&this.UpdatePosition(e)}}),cc._RF.pop()},{}],GodnessOfLove_Cfg:[function(e,t,n){"use strict";var o;function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}cc._RF.push(t,"d77a7qthPhEroB8wp7YSmPF","GodnessOfLove_Cfg");var s={symbol:(o={},i(o,1,{node:"s1",zIndex:100,bonus_node:"s1_0",win_node:"w1",win_ani:{name:"animation",zIndex:300},isMask:!0}),i(o,2,{node:"s2",zIndex:300,bonus_node:"s2_0",win_node:"w2",trigger_ani:{name:"animation2",zIndex:300},stop_ani:{name:"animation1",zIndex:100},isMask:!1}),i(o,3,{node:"s3",zIndex:300,bonus_node:"s3_0",win_node:"w3",trigger_ani:{name:"animation3",zIndex:300},stop_ani:{name:"animation1",zIndex:100},isMask:!1}),i(o,4,{node:"s4",zIndex:100,bonus_node:"",win_node:"w_Gem",stop_ani:{name:"animation3_1",zIndex:300},await_ani:{name:"animation3_2",zIndex:300},idle_ani:{name:"animation3_3",zIndex:300},isMask:!1}),i(o,5,{node:"s5",zIndex:100,bonus_node:"s5_0",win_node:"w_Gem",stop_ani:{name:"animation2_1",zIndex:300},trigger_ani:{name:"animation2_2",zIndex:300},idle_ani:{name:"animation2_5",zIndex:300},end_ani:{name:"animation2_4",zIndex:300},isMask:!1}),i(o,6,{node:"s6",zIndex:100,bonus_node:"s6_0",win_node:"w_Gem",stop_ani:{name:"animation1_1",zIndex:300},trigger_ani:{name:"animation1_2",zIndex:300},idle_ani:{name:"animation1_9",zIndex:300},isMask:!1}),i(o,601,{node:"s6_1",zIndex:100,bonus_node:"s6_1",win_node:"w_Gem",idle_ani:{name:"animation1_8",zIndex:300},end_ani:{name:"animation1_6",zIndex:300},isMask:!1}),i(o,7,{node:"s7",zIndex:100,bonus_node:"s7_0",win_node:"w7",win_ani:{name:"idle4",zIndex:300},isMask:!0}),i(o,8,{node:"s8",zIndex:100,bonus_node:"s8_0",win_node:"w8",win_ani:{name:"animation",zIndex:300},isMask:!0}),i(o,9,{node:"s9",zIndex:100,bonus_node:"s9_0",win_node:"w9",win_ani:{name:"animation",zIndex:300},isMask:!0}),i(o,10,{node:"s10",zIndex:100,bonus_node:"s10_0",win_node:"w10",win_ani:{name:"animation",zIndex:300},isMask:!0}),i(o,11,{node:"s11",zIndex:100,bonus_node:"s11_0",win_node:"w11",win_ani:{name:"animation",zIndex:300},isMask:!0}),i(o,12,{node:"s12",zIndex:100,bonus_node:"s12_0",win_node:"w12",win_ani:{name:"animation",zIndex:300},isMask:!0}),i(o,13,{node:"s13",zIndex:100,bonus_node:"s13_0",win_node:"w13",win_ani:{name:"animation",zIndex:300},isMask:!0}),i(o,14,{node:"s14",zIndex:100,bonus_node:"s14_0",win_node:"w14",win_ani:{name:"animation",zIndex:300},isMask:!0}),i(o,15,{node:"s15",zIndex:100,bonus_node:"s15_0",win_node:"w15",win_ani:{name:"animation",zIndex:300},isMask:!0}),i(o,16,{node:"s0",win_node:"",win_ani:""}),o),scripts:{Top:"LMSlots_Top_Base",Bottom:"LMSlots_Bottom_Base",Slots:"GodnessOfLove_Slots",Reels:"GodnessOfLove_Reels",Symbols:"GodnessOfLove_Symbol"},col:5,row:4,bonus_col:5,bonus_row:8,symbolPrefab:"LMSlots_Symbol",symbolSize:{height:100},randomSymbols:[1,5,6,7,8,9,10,11,12,13,14,15,1,7,8,9,10,11,12,13,14,15,7,8,9,10,11,12,13,14,15],randomSymbolsBonus:[1,7,8,9,10,11,12,13,14,15],kuang:"kuang",autoModelDelay:1,speed:3e3,reelStopInter:.2,auto_stop_time:1,bounceInfo:{distance:20,time:.1},helpItems:["games/GodnessOfLove/prefab/help_node/page_1","games/GodnessOfLove/prefab/help_node/page_2","games/GodnessOfLove/prefab/help_node/page_3","games/GodnessOfLove/prefab/help_node/page_4","games/GodnessOfLove/prefab/help_node/page_5","games/GodnessOfLove/prefab/help_node/page_6"],commEffect:{path:"games/GodnessOfLove/",win1:["win1","win1end"],win2:["win2","win2end"]},AddAntiTime:2.8,reelStateInfo:[{id:[2],mini:3,counts:[0,1,1,1,0],antiNode:"free_anti",path:"games/GodnessOfLove/",reelStopSound:"reel_stop",symbolStopSound:"scatter_land",antSound:"free_anticipation",antSpeed:2200},{id:[5,6],mini:4,counts:[1,1,1,1,1],antiNode:"bonus_anti",path:"games/GodnessOfLove/",reelStopSound:"reel_stop",symbolStopSound:"bonus_land",antSound:"reel_anticipation",antSpeed:2200}],normalBgm:"LoveShotSounds_basebg",soundCfg:{bell:"",music_LoveShot_rush_CollectGame_Trigger:"",bonus_land:"",bonus_lock:"",bonus_trigger:"",bonus_unlock:"",jp_lock:"",jp_unlock:"",reel_stop:"",scatter_land:"",stop:"",win1:"",win1end:"",win2:"",win2end:"",win3:"",win3end:"",win4:"",win4end:"",bonus_fly:"",lock_show:"",reel_raise:"",reel_unlock:"",music_LoveShot_mapGameBG:"",respin_end:"",respin_light:"",LoveShotSounds_Rsbg:"",win_fly:"",LoveShotSounds_fsbg:"",spin_add:"",music_LoveShot_over_fs:"",sound_LuckyDollar_bonus_over:"",dialog_fg_retrigger:"",sound_LuckyDollar_freespin_over:"",sound_LuckyDollar_freespin_start:"",dialog_trigger_JP:"",popup_out:""}};t.exports=s,cc._RF.pop()},{}],GodnessOfLove_Collect:[function(e,t,n){"use strict";cc._RF.push(t,"c5ad0jXUZZIWrTkdhvmcJza","GodnessOfLove_Collect"),cc.Class({extends:cc.Component,properties:{_isLockState:!0,_itemList:[]},start:function(){},Init:function(){this._node_collect=cc.find("safe_node/slots/node_collect",this.node),this._node_collect.on("click",this.onClickCollectBtn.bind(this)),this._spine_lock=cc.find("spine_lock",this._node_collect),this._spine_unLock=cc.find("spine_unLock",this._node_collect),this._spine_full=cc.find("spine_full",this._node_collect),this._spine_full.active=!1,this._spine_bomb=cc.find("layout/spine_bomb",this._node_collect),this._spine_bomb.active=!1,this.initCollectState(),this.initItems(),Global.registerEvent(cc.vv.gameData._EventId.SLOT_TOTALBET_UPDATED,this.onEventTotalbetUpdated,this)},initCollectState:function(){cc.vv.gameData.GetBetIdx()<cc.vv.gameData.GetCollectMinBet()?(this._isLockState=!0,this._spine_unLock.active=!1,this._spine_lock.active=!0,this._spine_lock.getComponent(sp.Skeleton).setAnimation(0,"animation5",!0)):(this._isLockState=!1,this._spine_lock.active=!1,this._spine_unLock.active=!0,this._spine_unLock.getComponent(sp.Skeleton).setAnimation(0,"animation6_1",!0))},initItems:function(){for(var e=cc.vv.gameData.GetCollectCurNum(),t=1;t<=10;t++){var n=cc.find("layout/item"+t,this._node_collect);n.active=t<=e,this._itemList.push(n)}0===e&&(this._spine_bomb.active=!1)},addOneItem:function(){var e=cc.vv.gameData.GetCollectCurNum(),t=cc.vv.gameData.GetCollectMaxNum(),n=cc.find("layout/item"+e,this._node_collect);if(n&&!n.active){n.active=!0,this._spine_bomb.active=!0,this._spine_bomb.position=n.position;var o=1;e===t&&(o=2),this._spine_bomb.getComponent(sp.Skeleton).setAnimation(0,"animation"+o,!1),this._spine_bomb.getComponent(sp.Skeleton).addAnimation(0,"animation"+o+"_1",!1)}},onEventTotalbetUpdated:function(){var e=cc.vv.gameData.GetBetIdx(),t=cc.vv.gameData.GetCollectMinBet();!this._isLockState&&e<t?(Global.SlotsSoundMgr.playEffect("bonus_lock"),this._isLockState=!0,this._spine_lock.active=!0,this._spine_lock.getComponent(sp.Skeleton).setAnimation(0,"animation2",!1),this._spine_lock.getComponent(sp.Skeleton).addAnimation(0,"animation5",!0),this._spine_unLock.getComponent(sp.Skeleton).setAnimation(0,"animation6_3",!1)):this._isLockState&&e>=t&&(Global.SlotsSoundMgr.playEffect("bonus_unlock"),this._isLockState=!1,this._spine_lock.getComponent(sp.Skeleton).setAnimation(0,"animation1",!1),this._spine_unLock.active=!0,this._spine_unLock.getComponent(sp.Skeleton).setAnimation(0,"animation6_2",!1),this._spine_unLock.getComponent(sp.Skeleton).addAnimation(0,"animation6_1",!0))},onClickCollectBtn:function(){if(cc.vv.gameData.GetBottomScript().GetSpinBtnState()&&!cc.vv.gameData.isFreeGame()&&!(cc.vv.gameData.GetAutoModelTime()>0)&&this._isLockState){var e=cc.vv.gameData.GetCollectMinBet();e>cc.vv.gameData.GetBetMults().length||cc.vv.gameData.GetBottomScript().SetBetIdx(e)}},playFullAnim:function(e){e?(this._spine_full.active=!0,this._spine_full.getComponent(sp.Skeleton).setAnimation(0,"animation3",!1)):this._spine_full.active=!1},setCollectState:function(e){this._node_collect.active=e}}),cc._RF.pop()},{}],GodnessOfLove_GameData:[function(e,t,n){"use strict";cc._RF.push(t,"0cdd1AJBKBPSoSQBv1br33x","GodnessOfLove_GameData"),cc.Class({extends:e("LMSlots_GameData_Base"),properties:{},start:function(){},init:function(e,t,n){this._bonusCfg=e.bonusGame.cfg,this._bonusInfo=e.bonusGame.info,this._bonusRestNum=e.bonusGame.num,this._bonusPoolList=e.bonusGame.poolList,this._bonusResult=e.bonusGame.result,this._bonusRow=e.bonusGame.row,this._bonusWinCoin=e.bonusGame.winCoin,this._collectData=e.collect,e.collect&&(this._collectCurNum=e.collect.num),this._freeWinCoin=e.freeWinCoin,this._super(e,t,n)},OnRcvNetSpine:function(e){200==e.code&&(this._bonusInfo=e.bonusGame.info,this._bonusRestNum=e.bonusGame.num,this._bonusPoolList=e.bonusGame.poolList,this._bonusResult=e.bonusGame.result,this._bonusRow=e.bonusGame.row,this._bonusWinCoin=e.bonusGame.winCoin,this._collectData=e.collect,e.collect&&(this._collectCurNum=e.collect.num),this._freeWinCoin=e.freeWinCoin),this._super(e)},SetCollectScript:function(e){this._collectScp=e},GetCollectScript:function(){return this._collectScp},SetPopupScript:function(e){this._popupScp=e},GetPopupScript:function(){return this._popupScp},SetBonusScript:function(e){this._bonusScp=e},GetBonusScript:function(){return this._bonusScp},SetPoolScript:function(e){this._poolScp=e},GetPoolScript:function(){return this._poolScp},SetIsBonusGame:function(e){this._isBonusGame=e},IsBonusGame:function(){return this._isBonusGame},GetBonusCfg:function(){this._bonusCfg.sort(function(e,t){return t.row-e.row});for(var e=[],t=0;t<this._bonusCfg.length;t++)e.push(this._bonusCfg[t].num);return e},GetBonusInfo:function(){return this._bonusInfo},GetBonusState:function(){return this._deskInfo.bonusGame.state},GetBonusWinCoin:function(){return this._bonusWinCoin},GetBonusRestNum:function(){return this._bonusRestNum},GetBonusPool:function(){return this._bonusPoolList},GetBonusRow:function(){return this._bonusRow},GetBonusResult:function(){return this._bonusResult},GetCollectMinBet:function(){return this._collectData.bet},SetCollectCurNum:function(e){this._collectCurNum=e},GetCollectCurNum:function(){return this._collectCurNum},GetCollectMaxNum:function(){return this._collectData.max},GetCollectSuper:function(){return this._collectData.super},GetFreeWinCoin:function(){return this._freeWinCoin},isFreeGame:function(){return this._isFreeGame},SetIsFreeGame:function(e){this._isFreeGame=e},setSymbolDark:function(e){this._symDark=e},getSymbolDark:function(){return this._symDark}}),cc._RF.pop()},{LMSlots_GameData_Base:void 0}],GodnessOfLove_Logic:[function(e,t,n){"use strict";cc._RF.push(t,"c7373TA5sVB0LoOdNLkIzcC","GodnessOfLove_Logic"),cc.Class({extends:e("LMSlots_Logic_Base"),properties:{},InitCommComponent:function(){this._super();var e=this.node.addComponent("GodnessOfLove_Collect");e.Init(),cc.vv.gameData.SetCollectScript(e);var t=this.node.addComponent("GodnessOfLove_Popup");t.Init(),cc.vv.gameData.SetPopupScript(t);var n=this.node.addComponent("GodnessOfLove_BonusGame");n.Init(),cc.vv.gameData.SetBonusScript(n);var o=cc.find("safe_node/bonus_slots/LMSlots_PrizePool_1",this.node).getComponent("GodnessOfLove_PrizePool");cc.vv.gameData.SetPoolScript(o)}}),cc._RF.pop()},{LMSlots_Logic_Base:void 0}],GodnessOfLove_Popup:[function(e,t,n){"use strict";function o(e,t,n,o,i,s,a){try{var r=e[s](a),c=r.value}catch(e){return void n(e)}r.done?t(c):Promise.resolve(c).then(o,i)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(i,s){var a=e.apply(t,n);function r(e){o(a,i,s,r,c,"next",e)}function c(e){o(a,i,s,r,c,"throw",e)}r(void 0)})}}cc._RF.push(t,"d3681lyga1OMp2JmNKtAAmP","GodnessOfLove_Popup"),cc.Class({extends:cc.Component,properties:{},start:function(){},Init:function(){var e=cc.find("safe_node/slots",this.node);this._node_free_again=cc.find("pop_free_again",e),this._node_free_again.active=!1;var t=cc.find("safe_node/bonus_slots",this.node);this._node_bonus_press=cc.find("node_bonus_press",t),this._node_bonus_press.active=!1,this._node_popup=cc.find("safe_node/node_popup",this.node),this._node_popup.active=!1,this._node_free_start=cc.find("pop_free_start",this._node_popup),this._node_free_end=cc.find("pop_free_end",this._node_popup),this._node_jp_win=cc.find("pop_jp_win",this._node_popup),this._node_tri_bonus=cc.find("pop_tri_bonus",this._node_popup),this._node_bonus_end=cc.find("node_bonus_end",this._node_popup),this._node_free_start.active=!1,this._node_free_end.active=!1,this._node_jp_win.active=!1,this._node_tri_bonus.active=!1,this._node_bonus_end.active=!1,this._node_qp=cc.find("safe_node/node_qpAnim",this.node),this._spine_bonus_qp=cc.find("spine_bonus_qp",this._node_qp),this._spine_bonus_qp.active=!1},showFirstGainFree:function(){var e=this;return i(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=i(regeneratorRuntime.mark(function t(n,o){var i,s,a,r,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Global.SlotsSoundMgr.stopBgm(),cc.vv.gameData.GetBottomScript().ShowBtnsByState("moveing_1"),Global.SlotsSoundMgr.playEffect("mapPopup"),e._node_popup.active=!0,e._node_free_start.active=!0,e._node_free_start.setScale(1),i=cc.find("spr",e._node_free_start),s=cc.find("btn_start",e._node_free_start),i.setScale(0),s.setScale(0),(a=cc.find("spine",e._node_free_start)).getComponent(sp.Skeleton).setAnimation(0,"animation1",!1),a.getComponent(sp.Skeleton).addAnimation(0,"animation1_1",!0),t.next=15,e.awaitTime(.3);case 15:return cc.tween(i).to(.5,{scale:1},{easing:"backOut"}).start(),cc.tween(s).to(.5,{scale:1},{easing:"backOut"}).start(),t.next=19,e.awaitTime(.3);case 19:s.getComponent(cc.Button).interactable=!0,s.off("click"),r=e,c=function(){s.getComponent(cc.Button).interactable=!1,Global.SlotsSoundMgr.playEffect("mapend"),cc.tween(e._node_free_start).to(.7,{scale:0},{easing:"backIn"}).call(function(){r._node_popup.active=!1,r._node_free_start.active=!1,n()}).start()},cc.vv.gameData.checkAutoPlay(s,c),s.on("click",function(){s.stopAllActions(),c()});case 25:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},showAgainGainFree:function(e){var t=this;return new Promise(function(){var n=i(regeneratorRuntime.mark(function n(o,i){var s,a,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return Global.SlotsSoundMgr.playEffect("dialog_fg_retrigger"),t._node_free_again.active=!0,(s=cc.find("node_pop",t._node_free_again)).setScale(1),(a=cc.find("lbl_num",s)).getComponent(cc.Label).string=e,a.setScale(0),(r=cc.find("spine",s)).getComponent(sp.Skeleton).setAnimation(0,"animation1",!1),r.getComponent(sp.Skeleton).addAnimation(0,"animation2",!0),n.next=12,t.awaitTime(.5);case 12:return cc.tween(a).to(.5,{scale:1},{easing:"backOut"}).start(),n.next=15,t.awaitTime(1.5);case 15:return Global.SlotsSoundMgr.playEffect("mapPopup"),cc.tween(s).to(.7,{scale:0},{easing:"backIn"}).start(),n.next=19,t.awaitTime(.7);case 19:t._node_free_again.active=!1,o();case 21:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}())},showEndFree:function(e){var t=this;return new Promise(function(){var n=i(regeneratorRuntime.mark(function n(o,i){var s,a,r,c,l;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return Global.SlotsSoundMgr.stopBgm(),cc.vv.gameData.GetBottomScript().ShowBtnsByState("moveing_1"),Global.SlotsSoundMgr.playEffect("sound_LuckyDollar_bonus_over"),t._node_popup.active=!0,t._node_free_end.active=!0,t._node_free_end.setScale(1),s=cc.find("lbl_winCoin",t._node_free_end),Global.doRoallNumEff(s,0,e,1.5,null,null,0,!0),(a=cc.find("btn_collect",t._node_free_end)).setScale(0),(r=cc.find("spine",t._node_free_end)).getComponent(sp.Skeleton).setAnimation(0,"animation2",!1),r.getComponent(sp.Skeleton).addAnimation(0,"animation2_1",!0),n.next=15,t.awaitTime(.3);case 15:return cc.tween(a).to(.5,{scale:1},{easing:"backOut"}).start(),n.next=18,t.awaitTime(.3);case 18:a.getComponent(cc.Button).interactable=!0,a.off("click"),c=t,l=function(){a.getComponent(cc.Button).interactable=!1,s.stopAllActions();var n=0;Global.FormatCommaNumToNum(s.getComponent(cc.Label).string)<e&&(s.getComponent(cc.Label).string=Global.FormatNumToComma(e),n+=.3),Global.SlotsSoundMgr.playEffect("mapend"),cc.tween(t._node_free_end).delay(n).to(.7,{scale:0},{easing:"backIn"}).call(function(){c._node_popup.active=!1,c._node_free_end.active=!1,o()}).start()},cc.vv.gameData.checkAutoPlay(a,l),a.on("click",function(){a.stopAllActions(),l()});case 24:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}())},showWinJp:function(e,t){var n=this;return new Promise(function(){var o=i(regeneratorRuntime.mark(function o(i,s){var a,r,c,l,_,u;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return Global.SlotsSoundMgr.playEffect("dialog_trigger_JP"),n._node_popup.active=!0,n._node_jp_win.active=!0,n._node_jp_win.setScale(1),a=cc.find("lbl_winCoin",n._node_jp_win),Global.doRoallNumEff(a,0,e,1.5,null,null,0,!0),(r=cc.find("btn_collect",n._node_jp_win)).setScale(0),c=cc.find("spine",n._node_jp_win),l=5-t,c.getComponent(sp.Skeleton).setAnimation(0,"animation"+l+"_1",!1),c.getComponent(sp.Skeleton).addAnimation(0,"animation"+l+"_2",!0),o.next=14,n.awaitTime(.3);case 14:return cc.tween(r).to(.5,{scale:1},{easing:"backOut"}).start(),cc.tween(n._node_jp_win).delay(5).call(function(){r.off("click"),Global.SlotsSoundMgr.playEffect("popup_out")}).to(.7,{scale:0},{easing:"backIn"}).call(function(){_._node_popup.active=!1,_._node_jp_win.active=!1,i()}).start(),o.next=18,n.awaitTime(.3);case 18:r.getComponent(cc.Button).interactable=!0,r.off("click"),_=n,u=function(){Global.SlotsSoundMgr.playEffect("popup_out"),r.getComponent(cc.Button).interactable=!1,n._node_jp_win.cleanup(),cc.tween(n._node_jp_win).to(.7,{scale:0},{easing:"backIn"}).call(function(){_._node_popup.active=!1,_._node_jp_win.active=!1,i()}).start()},cc.vv.gameData.checkAutoPlay(r,u),r.on("click",function(){r.stopAllActions(),u()});case 24:case"end":return o.stop()}},o)}));return function(e,t){return o.apply(this,arguments)}}())},playTriBonusAnim:function(e){var t=this;return new Promise(function(){var n=i(regeneratorRuntime.mark(function n(o,i){var s,a,r,c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(Global.SlotsSoundMgr.stopBgm(),t._node_popup.active=!0,t._node_tri_bonus.active=!0,s=cc.find("spine_super",t._node_tri_bonus),a=cc.find("spine_normal",t._node_tri_bonus),s.active=e,a.active=!e,r=t,!e){n.next=17;break}return Global.SlotsSoundMgr.playEffect("sound_LuckyDollar_freespin_start"),s.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),n.next=13,t.awaitTime(3);case 13:Global.SlotsSoundMgr.playEffect("bgbgmend"),s.getComponent(sp.Skeleton).setCompleteListener(function(){r._node_popup.active=!1,r._node_tri_bonus.active=!1,o()}),n.next=23;break;case 17:Global.SlotsSoundMgr.playEffect("music_LoveShot_over_fs"),a.getComponent(sp.Skeleton).setAnimation(0,"animation1",!1),a.getComponent(sp.Skeleton).addAnimation(0,"animation2",!1),c=a.getComponent(sp.Skeleton).addAnimation(0,"animation3",!1),a.getComponent(sp.Skeleton).setTrackStartListener(c,function(){Global.SlotsSoundMgr.playEffect("bgbgmend")}),a.getComponent(sp.Skeleton).setTrackCompleteListener(c,function(){r._node_popup.active=!1,r._node_tri_bonus.active=!1,o()});case 23:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}())},showBonusPress:function(e,t){var n=this;return new Promise(function(){var o=i(regeneratorRuntime.mark(function o(s,a){var r,c,l,_,u,p,m;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return n._node_bonus_press.active=!0,r=cc.find("node_pop",n._node_bonus_press),c=cc.find("mask",n._node_bonus_press),r.setScale(1),l=cc.vv.gameData.getGameCfg(),r.height=t*l.symbolSize.height,c.height=t*l.symbolSize.height,_=cc.find("spine",r),e?(_.getComponent(sp.Skeleton).setAnimation(0,"animation1",!1),_.getComponent(sp.Skeleton).addAnimation(0,"animation2",!0)):(_.getComponent(sp.Skeleton).setAnimation(0,"animation3",!1),_.getComponent(sp.Skeleton).addAnimation(0,"animation4",!0)),o.next=11,n.awaitTime(.5);case 11:(u=cc.find("btn_press",r)).getComponent(cc.Button).interactable=!0,u.off("click"),p=n,m=function(){var e=i(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u.getComponent(cc.Button).interactable=!1,cc.tween(r).to(.7,{scale:0},{easing:"backIn"}).start(),e.next=4,p.awaitTime(.7);case 4:p._node_bonus_press.active=!1,s();case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),cc.vv.gameData.checkAutoPlay(u,m),u.on("click",i(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u.stopAllActions(),e.next=3,m();case 3:case"end":return e.stop()}},e)})));case 18:case"end":return o.stop()}},o)}));return function(e,t){return o.apply(this,arguments)}}())},showBonusWin:function(e){var t=this;return new Promise(function(){var n=i(regeneratorRuntime.mark(function n(o,i){var s,a,r,c,l;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return Global.SlotsSoundMgr.stopBgm(),cc.vv.gameData.GetBottomScript().ShowBtnsByState("moveing_1"),Global.SlotsSoundMgr.playEffect("sound_LuckyDollar_freespin_over"),t._node_popup.active=!0,t._node_bonus_end.active=!0,t._node_bonus_end.setScale(1),s=cc.find("lbl_winCoin",t._node_bonus_end),Global.doRoallNumEff(s,0,e,1.5,null,null,0,!0),(a=cc.find("btn_collect",t._node_bonus_end)).setScale(0),(r=cc.find("spine",t._node_bonus_end)).getComponent(sp.Skeleton).setAnimation(0,"animation1",!1),r.getComponent(sp.Skeleton).addAnimation(0,"animation2",!0),n.next=15,t.awaitTime(.3);case 15:return cc.tween(a).to(.5,{scale:1},{easing:"backOut"}).start(),n.next=18,t.awaitTime(.3);case 18:a.getComponent(cc.Button).interactable=!0,a.off("click"),c=t,l=function(){Global.SlotsSoundMgr.playEffect("bgend"),a.getComponent(cc.Button).interactable=!1,s.stopAllActions();var n=0;Global.FormatCommaNumToNum(s.getComponent(cc.Label).string)<e&&(s.getComponent(cc.Label).string=Global.FormatNumToComma(e),n+=.3),cc.tween(t._node_bonus_end).delay(n).to(.7,{scale:0},{easing:"backIn"}).call(function(){c._node_popup.active=!1,c._node_bonus_end.active=!1,o()}).start()},cc.vv.gameData.checkAutoPlay(a,l),a.on("click",function(){a.stopAllActions(),l()});case 24:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}())},playBonusQpAnim:function(){var e=this;Global.SlotsSoundMgr.playEffect("music_LoveShot_rush_CollectGame_Trigger"),this._spine_bonus_qp.active=!0,this._spine_bonus_qp.getComponent(sp.Skeleton).setAnimation(0,"idle2",!1),this._spine_bonus_qp.getComponent(sp.Skeleton).setCompleteListener(function(){e._spine_bonus_qp.active=!1})},awaitTime:function(e){var t=this;return new Promise(function(n,o){t.scheduleOnce(function(){n()},e)})}}),cc._RF.pop()},{}],GodnessOfLove_PrizePool:[function(e,t,n){"use strict";cc._RF.push(t,"0254cFfWuhEb5LJD3g3ijDe","GodnessOfLove_PrizePool");var o=["MINI","MINOR","MAJOR","GRAND"];cc.Class({extends:e("LMSlots_PrizePool_Base"),properties:{},ShowNodeLockByNode:function(e,t,n,o,i){var s=e,a=cc.find("jpshangsuo",s);if(s){this.showTipNode(t,o,i);var r=[4,3,2,1];t?(a.active=!0,i?a.getComponent(sp.Skeleton).setAnimation(0,cc.js.formatStr("animation%s_%s",r[o],2),!0):(Global.SlotsSoundMgr.playEffect("jp_lock"),a.getComponent(sp.Skeleton).setAnimation(0,cc.js.formatStr("animation%s",r[o]),!1),a.getComponent(sp.Skeleton).addAnimation(0,cc.js.formatStr("animation%s_%s",r[o],2),!0))):i?a.getComponent(sp.Skeleton).setAnimation(0,cc.js.formatStr("animation%s_%s",r[o],1),!1):(Global.SlotsSoundMgr.playEffect("jp_unlock"),a.getComponent(sp.Skeleton).setAnimation(0,cc.js.formatStr("animation%s_%s",r[o],1),!1))}},showTipNode:function(e,t,n){for(var i=0;i<o.length;i++){var s=cc.find(cc.js.formatStr("prizePool_%s/tip",o[i]),this.node);n||t!==i?(cc.find("spr_lock",s).active=!1,cc.find("spr_unlock",s).active=!1,s.stopAllActions(),s.scale=0):e?(cc.find("spr_lock",s).active=!0,cc.find("spr_unlock",s).active=!1,s.scale=0,cc.tween(s).to(.5,{scale:1},{easing:"backOut"}).delay(.5).to(.5,{scale:0},{easing:"backIn"}).start()):(cc.find("spr_lock",s).active=!1,cc.find("spr_unlock",s).active=!0,s.scale=0,cc.tween(s).to(.5,{scale:1},{easing:"backOut"}).delay(.5).to(.5,{scale:0},{easing:"backIn"}).start())}},showWinJp:function(e,t){cc.find(cc.js.formatStr("prizePool_%s/spine_win",o[e-1]),this.node).active=t},poolIsLock:function(e){return cc.find(cc.js.formatStr("prizePool_%s",o[e-1]),this.node).getComponent("LMSlotMachine_PrizePool").isLocked()}}),cc._RF.pop()},{LMSlots_PrizePool_Base:void 0}],GodnessOfLove_Reels:[function(e,t,n){"use strict";function o(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=i(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s,a=!0,r=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return a=e.done,e},e:function(e){r=!0,s=e},f:function(){try{a||null==o.return||o.return()}finally{if(r)throw s}}}}function i(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}cc._RF.push(t,"8b1f5MZMlpJYIZ++gm2KRhK","GodnessOfLove_Reels"),cc.Class({extends:e("LMSlots_Reel_Base"),properties:{},start:function(){},ShowAntiEffect:function(e,t){if(0==e){if(this._cfg.reelStateInfo){var n,i=o(this._cfg.reelStateInfo);try{for(i.s();!(n=i.n()).done;){var s=n.value,a=cc.find(s.antiNode+"_"+(this._reelIdx+1),this.node.parent);a&&a.active&&(a.active=!1,this._stopRightNow&&cc.vv.AudioManager.stopEffectByName(s.antSound))}}catch(e){i.e(e)}finally{i.f()}}}else{var r=cc.find(t+"_"+(this._reelIdx+1),this.node.parent);r?(r.active=e,r.getComponent(sp.Skeleton).setAnimation(0,"animation",!0)):cc.log("\u672a\u627e\u5230\u52a0\u901f\u8282\u70b9\uff1amask/node_anti")}}}),cc._RF.pop()},{LMSlots_Reel_Base:void 0}],GodnessOfLove_Slots:[function(e,t,n){"use strict";function o(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=i(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s,a=!0,r=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return a=e.done,e},e:function(e){r=!0,s=e},f:function(){try{a||null==o.return||o.return()}finally{if(r)throw s}}}}function i(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function a(e,t,n,o,i,s,a){try{var r=e[s](a),c=r.value}catch(e){return void n(e)}r.done?t(c):Promise.resolve(c).then(o,i)}function r(e){return function(){var t=this,n=arguments;return new Promise(function(o,i){var s=e.apply(t,n);function r(e){a(s,o,i,r,c,"next",e)}function c(e){a(s,o,i,r,c,"throw",e)}r(void 0)})}}cc._RF.push(t,"1b4b0sRMMpIhoa107jbxL9r","GodnessOfLove_Slots"),cc.Class({extends:e("LMSlots_Slots_Base"),properties:{},start:function(){},Init:function(e,t){this._node_banner=cc.find("node_banner",this.node),this._spine_free_shouji=cc.find("spine_free_shouji",this.node.parent),this._spine_js=cc.find("spine_bonus_js",this.node.parent),this._spine_free_shouji.active=!1,this._spine_js.active=!1,this._super(e,t)},ReconnectShow:function(){var e=this;return r(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e._bottomScript.ShowBtnsByState("moveing_1"),!cc.vv.gameData.GetBonusState()){t.next=4;break}return t.next=4,new Promise(function(){var e=r(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:cc.vv.gameData.GetBonusScript().enterBonusGame(t);case 1:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 4:if(!(cc.vv.gameData.GetTotalFree()>0)){t.next=11;break}if(e.ShowGameview(!0),!(cc.vv.gameData.GetTotalFree()>0&&0==cc.vv.gameData.GetFreeTime())){t.next=9;break}return t.next=9,e.CheckExitFreeGame();case 9:t.next=12;break;case 11:e.ShowGameview(!1);case 12:e._topScript.StopMove(),e._bottomScript.CanDoNextRound();case 14:case"end":return t.stop()}},t)}))()},onMsgSpine:function(e){cc.vv.gameData.IsBonusGame()?cc.vv.gameData.GetBonusScript().onMsgSpine(e):this._super(e)},SetSlotsResult:function(e){for(var t=e.length/this._col,n=[],o=0;o<e.length;o++){Math.floor(o/t);var i=o%this._col;if(this._cfg.symbol[e[o]]){var s={};s.sid=e[o];var a=cc.vv.gameData.GetBonusInfo();for(var r in a){Number(r.substring("idx_".length))===o+1&&(s.data=a[r])}if(this._gameInfo.freeBonusInfo&&this._gameInfo.freeBonusInfo.info)for(var c=this._gameInfo.freeBonusInfo.info,l=0;l<c.length;l++)if(c[l].idx===o+1){var _={};_.coin=c[l].num,s.data=_;break}n[i]||(n[i]=[]),n[i].unshift(s)}}for(var u=0;u<this._reels.length;u++){var p=this._reels[u],m=n[u];p.SetResult(m)}},StartMove:function(){cc.vv.gameData.IsBonusGame()?cc.vv.gameData.GetBonusScript().StartMove():(this._super(),Global.SlotsSoundMgr.playNormalBgm(),cc.vv.gameData.isFreeGame()||cc.vv.gameData.IsBonusGame()||cc.vv.gameData.setSymbolDark(!0))},StopMove:function(){cc.vv.gameData.IsBonusGame()?cc.vv.gameData.GetBonusScript().StopMove():this._super()},OnReelBounsActionBefore:function(e){this._super(e),cc.vv.gameData.setSymbolDark(!1)},OnReelBounsActionDeep:function(e){this._super(e);for(var t=0;t<this._row;t++){var n=this._reels[e].GetSymbolByRow(t),o=n.GetShowId();3===o&&(Global.SlotsSoundMgr.playEffect("spin_add"),n.playStopAnimation()),4===o&&(Global.SlotsSoundMgr.playEffect("bonus_land"),n.playPurpleGemStopAnim())}},DoCheckReelAnti:function(e){cc.vv.gameData.IsBonusGame()||this._super(e)},OnSpinEnd:function(){this.onSpinEndAction()},onSpinEndAction:function(){var e=this;return r(regeneratorRuntime.mark(function t(){var n,o,i,s,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.ShowWinTrace(),n=0,(o=e._gameInfo.freeBonusInfo)&&o.winCoin>0&&(n=o.winCoin),i=cc.vv.gameData.GetGameWin()-n,s=i,cc.vv.gameData.GetTotalFree()>0&&cc.vv.gameData.GetTotalFree()!=cc.vv.gameData.GetFreeTime()&&(s=cc.vv.gameData.GetGameTotalFreeWin()-n),t.next=9,new Promise(function(t,n){e.ShowBottomWin(i,s,!0,t)});case 9:if(!(o&&o.winCoin>0)){t.next=12;break}return t.next=12,e.playPurpleWinCoin();case 12:if(!e._gameInfo.bonusGame||!e._gameInfo.bonusGame.start){t.next=16;break}return cc.vv.gameData.GetCollectScript().addOneItem(),t.next=16,e.CheckTriggerBonusGame();case 16:if(!((a=e._gameInfo.freeResult.freeInfo)&&a.freeCnt>0)){t.next=20;break}return t.next=20,e.CheckEnterFreeGame();case 20:if(!(e._gameInfo.allFreeCnt>0&&0==e._gameInfo.freeCnt)){t.next=23;break}return t.next=23,e.CheckExitFreeGame();case 23:e.CanDoNextRound();case 24:case"end":return t.stop()}},t)}))()},playPurpleWinCoin:function(){var e=this;return r(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=r(regeneratorRuntime.mark(function t(n,o){var i,s,a,r,c,l,_,u,p,m,d,f,h,v,g,b;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=e._gameInfo.freeBonusInfo.info,s=Global.copy(i),a=0;case 3:if(!(a<e._col)){t.next=45;break}r=e._row-1;case 5:if(!(r>=0)){t.next=42;break}c=e._reels[a].GetSymbolByRow(r),l=e.getIdxByRowCol(r,a),_=0,u=0;case 10:if(!(u<s.length)){t.next=39;break}if(l!==s[u].idx){t.next=36;break}return Global.SlotsSoundMgr.playEffect("win_fly"),_=s[u].num,c.playPurpleGemIdleAnim(),e._spine_free_shouji.active=!0,p=e.GetSymbolByIdx(l),m=cc.vv.gameData.GetBottomScript().getWinLabelNor(),d=e._spine_free_shouji.parent.convertToNodeSpaceAR(p.node.convertToWorldSpaceAR(cc.v2(0,0))),f=e._spine_free_shouji.parent.convertToNodeSpaceAR(m.convertToWorldSpaceAR(cc.v2(0,0))),h=cc.v2(f.x-d.x,f.y-d.y),v=h.signAngle(cc.v2(1,0)),e._spine_free_shouji.position=e._spine_free_shouji.parent.convertToNodeSpaceAR(p.node.convertToWorldSpaceAR(cc.v2(0,0))),e._spine_free_shouji.angle=-v*cc.macro.DEG+90,e._spine_free_shouji.scaleY=Math.abs(h.mag())/500,e._spine_free_shouji.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),t.next=28,e.awaitTime(.6);case 28:return e._spine_js.active=!0,e._spine_js.position=f,e._spine_js.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),g=e._bottomScript.getCurrentWin(),b=_+g,t.next=35,e._bottomScript.ShowWin(b,null,g,null,.5);case 35:return t.abrupt("break",39);case 36:u++,t.next=10;break;case 39:r--,t.next=5;break;case 42:a++,t.next=3;break;case 45:n();case 46:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},CheckEnterFreeGame:function(){var e=this;return r(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=r(regeneratorRuntime.mark(function t(n,i){var s,a,r,c,l,_;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:Global.SlotsSoundMgr.playEffect("bell"),s=e._gameInfo.freeCnt===e._gameInfo.allFreeCnt,a=o(e._gameInfo.freeResult.freeInfo.idxs);try{for(a.s();!(r=a.n()).done;)c=r.value,(l=e.GetSymbolByIdx(c))&&l.playTriggerAnimation(s)}catch(e){a.e(e)}finally{a.f()}return t.next=6,e.awaitTime(1.5);case 6:if(!s){t.next=18;break}return e.Backup(),t.next=10,cc.vv.gameData.GetPopupScript().showFirstGainFree();case 10:return cc.vv.gameData.GetPopupScript().playBonusQpAnim(),t.next=13,e.awaitTime(1.5);case 13:return e.ShowGameview(!0),t.next=16,e.awaitTime(2);case 16:t.next=23;break;case 18:return _=e._gameInfo.freeResult.freeInfo.freeCnt,t.next=21,cc.vv.gameData.GetPopupScript().showAgainGainFree(_);case 21:return t.next=23,e.awaitTime(1);case 23:n();case 24:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},CheckExitFreeGame:function(){var e=this;return r(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=r(regeneratorRuntime.mark(function t(n,o){var i,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,cc.vv.gameData.GetPopupScript().showEndFree(cc.vv.gameData.GetGameTotalFreeWin());case 2:return cc.vv.gameData.GetPopupScript().playBonusQpAnim(),t.next=5,e.awaitTime(1.5);case 5:return e.Resume(),e.ShowGameview(!1),Global.SlotsSoundMgr.stopBgm(),Global.SlotsSoundMgr.playNormalBgm(),t.next=11,e.awaitTime(2);case 11:return i=cc.vv.gameData.GetGameTotalFreeWin(),s=i,t.next=15,new Promise(function(t,n){e.ShowBottomWin(i,s,!0,t)});case 15:n();case 16:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},CheckTriggerBonusGame:function(){var e=this;return r(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=r(regeneratorRuntime.mark(function t(n,o){var i,s,a,r,c,l,_,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(i=cc.vv.gameData.GetCollectSuper())){t.next=8;break}return t.next=4,e.awaitTime(.5);case 4:cc.vv.gameData.GetCollectScript().playFullAnim(!0),Global.SlotsSoundMgr.playEffect("bonus_trigger"),t.next=9;break;case 8:Global.SlotsSoundMgr.playEffect("bell");case 9:for(a in s=cc.vv.gameData.GetBonusInfo())r=s[a].idx,(c=e.GetSymbolByIdx(r))&&c.playTriggerAnimation(!0);return t.next=13,e.awaitTime(1.5);case 13:return cc.vv.gameData.GetBonusScript().lockJackpot(),t.next=16,cc.vv.gameData.GetPopupScript().playTriBonusAnim(i);case 16:return cc.vv.gameData.GetPopupScript().playBonusQpAnim(),t.next=19,e.awaitTime(1.5);case 19:return t.next=21,cc.vv.gameData.GetBonusScript().triBonusGame(n);case 21:for(l in s)_=s[l].idx,(u=e.GetSymbolByIdx(_))&&u.ShowNormal(!0);case 22:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},getIdxByRowCol:function(e,t){return(this._row-e-1)*this._col+t+1},ShowGameview:function(e){if(e){Global.SlotsSoundMgr.playBgm("LoveShotSounds_fsbg");var t=cc.vv.gameData.GetTotalFree(),n=cc.vv.gameData.GetFreeTime();this._bottomScript.ShowFreeModel(!0,t-n,t);var o=cc.vv.gameData.GetFreeWinCoin();this._bottomScript.SetWin(o),cc.vv.gameData.GetCollectScript().setCollectState(!1)}else this._bottomScript.ShowFreeModel(!1),cc.vv.gameData.GetCollectScript().setCollectState(!0);cc.vv.gameData.SetIsFreeGame(e),this.playCharacterAnim(e);var i=cc.find("Canvas/safe_node/spr_bg_normal"),s=cc.find("Canvas/safe_node/spr_bg_free");s&&(i&&(i.active=!e),s.active=e)},playCharacterAnim:function(e){var t=cc.find("Canvas/safe_node/role/renwu"),n=t.getComponent(sp.Skeleton);t.stopAllActions(),n.setAnimation(0,"skill",!1),n.addAnimation(0,"idle",!0)},awaitTime:function(e){var t=this;return new Promise(function(n,o){t.scheduleOnce(function(){n()},e)})}}),cc._RF.pop()},{LMSlots_Slots_Base:void 0}],GodnessOfLove_Symbol:[function(e,t,n){"use strict";cc._RF.push(t,"ad08aTq+eVBoYpZYEXC2xWX","GodnessOfLove_Symbol"),cc.Class({extends:e("LMSlots_Symbol_Base"),properties:{_type:"normal"},Init:function(e,t){this._super(e,t),this.setMaskVisible(!1)},setSymType:function(e){this._type=e},ShowRandomSymbol:function(){if(this._super(),5===this._id){var e=Global.random(1,5)*cc.vv.gameData.GetTotalBet();this.setNum(e)}cc.vv.gameData.isFreeGame()||cc.vv.gameData.IsBonusGame()||this.setMaskVisible(!0)},ShowById:function(e,t){if("bonus"===this._type){this._id=e,this._data=t,this._state="normal",this._showNode&&(this._showNode.active=!1);var n=cc.vv.gameData.getGameCfg();n.symbol[e]&&n.symbol[e].bonus_node&&(this._showNode=cc.find(n.symbol[e].bonus_node,this.node),this._showNode.active=!0)}else this._super(e,t);this.setNum(),this.setPool(),this.setNumAndJpPosition(),t&&(t.pool>0&&this.setPool(t.pool),t.coin>0&&this.setNum(t.coin),3===t.type&&this.setNumAndJpPosition()),this.setMaskVisible(!1)},setMaskVisible:function(e){var t=cc.vv.gameData.getGameCfg();if(t.symbol[this._id]&&t.symbol[this._id].node&&t.symbol[this._id].isMask){var n=cc.find(t.symbol[this._id].node,this.node);e?cc.vv.gameData.getSymbolDark()?n.color=new cc.Color(80,80,80):n.color=new cc.Color(200,200,200):n.color=cc.Color.WHITE}},getSymbolIdx:function(){return"bonus"===this._type?this._bonusIndex:this._symbolIdx},getReelIdx:function(){return this._reelIdx},setNum:function(e){var t=cc.find("lbl",this.node);if(e){var n=null;n=5===this._id?cc.vv.gameData.GetFontByName("theme197_baoshizi1_0"):cc.vv.gameData.GetFontByName("theme197_baoshizi2_0"),t.active=!0,t.getComponent(cc.Label).font=n,t.getComponent(cc.Label).string=Global.formatNumShort(e,0)}else t.active=!1,t.getComponent(cc.Label).string="";t.y=5.5},setPool:function(e){var t=cc.find("spr_jp",this.node);if(e){t.active=!0;var n=cc.js.formatStr("theme197_s_jp%s",5-e);cc.vv.gameData.GetAtlasByName("symbols");t.getComponent(cc.Sprite).spriteFrame=cc.vv.gameData.GetAtlasByName("symbols").getSpriteFrame(n)}else t.active=!1;t.position=cc.v2(0,0)},setNumAndJpPosition:function(){var e=cc.find("lbl",this.node),t=cc.find("spr_jp",this.node);e.active&&t.active?(cc.find("spr_add",this.node).active=!0,e.y=-24,t.position=cc.v2(0,28)):cc.find("spr_add",this.node).active=!1},setBonusIndex:function(e){this._bonusIndex=e},playPurpleGemStopAnim:function(){var e=this._id,t=cc.vv.gameData.getGameCfg();if(t.symbol[e]&&t.symbol[e].win_node&&t.symbol[e].stop_ani&&(this._showNode&&(this._showNode.active=!1),this._showNode=cc.find(t.symbol[e].win_node,this.node),this._showNode.active=!0,""!=t.symbol[e].stop_ani.name)){var n=this._showNode.getComponent(sp.Skeleton);n&&(n.setAnimation(0,t.symbol[e].stop_ani.name,!1),""!=t.symbol[e].await_ani.name&&n.addAnimation(0,t.symbol[e].await_ani.name,!0))}},playPurpleGemIdleAnim:function(){var e=this._id,t=cc.vv.gameData.getGameCfg();if(t.symbol[e]&&t.symbol[e].win_node&&t.symbol[e].idle_ani&&(this._showNode&&(this._showNode.active=!1),this._showNode=cc.find(t.symbol[e].win_node,this.node),this._showNode.active=!0,""!=t.symbol[e].idle_ani.name)){var n=this._showNode.getComponent(sp.Skeleton);n&&n.setAnimation(0,t.symbol[e].idle_ani.name,!0)}},playBonusStopAnim:function(){var e=this._id,t=cc.vv.gameData.getGameCfg();if(t.symbol[e]&&t.symbol[e].win_node&&t.symbol[e].stop_ani&&(this._showNode&&(this._showNode.active=!1),this._showNode=cc.find(t.symbol[e].win_node,this.node),this._showNode.active=!0,""!=t.symbol[e].stop_ani.name)){var n=this._showNode.getComponent(sp.Skeleton);n&&(n.setAnimation(0,t.symbol[e].stop_ani.name,!1),""!=t.symbol[e].idle_ani.name&&n.addAnimation(0,t.symbol[e].idle_ani.name,!0))}},playBonusIdleAnim:function(){var e=this._id,t=cc.vv.gameData.getGameCfg();if(t.symbol[e]&&t.symbol[e].win_node&&t.symbol[e].idle_ani&&(this._showNode&&(this._showNode.active=!1),this._showNode=cc.find(t.symbol[e].win_node,this.node),this._showNode.active=!0,""!=t.symbol[e].idle_ani.name)){var n=this._showNode.getComponent(sp.Skeleton);n&&n.setAnimation(0,t.symbol[e].idle_ani.name,!0)}},playBonusEndAnim:function(){var e=this._id,t=cc.vv.gameData.getGameCfg();if(t.symbol[e]&&t.symbol[e].win_node&&t.symbol[e].end_ani&&(this._showNode&&(this._showNode.active=!1),this._showNode=cc.find(t.symbol[e].win_node,this.node),this._showNode.active=!0,""!=t.symbol[e].end_ani.name)){var n=this._showNode.getComponent(sp.Skeleton);n&&n.setAnimation(0,t.symbol[e].end_ani.name,!0)}},playBonusBombAnim:function(e){var t=cc.find("bouns_bomb",this.node);e?(t.active=!0,t.getComponent(sp.Skeleton).setAnimation(0,"animation",!1)):t.active=!1},playBonusShoujiAnim:function(e){var t=cc.find("bouns_shouji",this.node);e?(t.active=!0,t.getComponent(sp.Skeleton).setAnimation(0,"animation",!0)):t.active=!1},playTriggerAnimation:function(e){var t=!1,n=this._id,o=cc.vv.gameData.getGameCfg();if(o.symbol[n]&&o.symbol[n].win_node&&o.symbol[n].trigger_ani){this._state="trigger",this._showNode&&(this._showNode.active=!1);var i=this.setAnimationToTop(!0);i.active=!0;var s=cc.find(o.symbol[n].win_node,i);if(s.active=!0,""!=o.symbol[n].trigger_ani.name){i.zIndex=o.symbol[n].trigger_ani.zIndex-this._symbolIdx+10*this._reelIdx+100,t=!0;var a=s.getComponent(sp.Skeleton);a&&(e=!1!==e||e,a.setAnimation(0,o.symbol[n].trigger_ani.name,e))}}return t}}),cc._RF.pop()},{LMSlots_Symbol_Base:void 0}]},{},["GodnessOfLove_BonusGame","GodnessOfLove_BonusReel","GodnessOfLove_Cfg","GodnessOfLove_Collect","GodnessOfLove_GameData","GodnessOfLove_Logic","GodnessOfLove_Popup","GodnessOfLove_PrizePool","GodnessOfLove_Reels","GodnessOfLove_Slots","GodnessOfLove_Symbol"]);
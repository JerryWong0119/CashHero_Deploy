window.__require=function e(t,n,o){function a(r,s){if(!n[r]){if(!t[r]){var c=r.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(i)return i(c,!0);throw new Error("Cannot find module '"+r+"'")}r=c}var m=n[r]={exports:{}};t[r][0].call(m.exports,function(e){return a(t[r][1][e]||e)},m,m.exports,e,t,n,o)}return n[r].exports}for(var i="function"==typeof __require&&__require,r=0;r<o.length;r++)a(o[r]);return a}({JapaneseSinger_BonusGame:[function(e,t,n){"use strict";function o(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=a(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i,r=!0,s=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return r=e.done,e},e:function(e){s=!0,i=e},f:function(){try{r||null==o.return||o.return()}finally{if(s)throw i}}}}function a(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function r(e,t,n,o,a,i,r){try{var s=e[i](r),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(o,a)}function s(e){return function(){var t=this,n=arguments;return new Promise(function(o,a){var i=e.apply(t,n);function s(e){r(i,o,a,s,c,"next",e)}function c(e){r(i,o,a,s,c,"throw",e)}s(void 0)})}}cc._RF.push(t,"0239eUo2jhCQ6ABy/woFqrQ","JapaneseSinger_BonusGame"),cc.Class({extends:cc.Component,properties:{_exitCallBack:null,_curTimes:3,_subGameData:null,_canSelect:!1,_coinNum:0,_yellowCoin:0,_greenCoin:0,_remainTimes:0},start:function(){},Init:function(){this.initBonusNode(),this._slotsScript=this._bonus_slots.addComponent("JapaneseSinger_BonusSlots"),this.initBonusUI()},initBonusNode:function(){this._bg_bonus=cc.find("safe_node/spr_bg_bonus",this.node),this.bianpao=cc.find("safe_node/role",this.node),this._normal_slots=cc.find("safe_node/slots",this.node),this._bonus_slots=cc.find("safe_node/bonus_slots",this.node),this._topAniNode=cc.find("top_ani",this._bonus_slots),this._node_reels=cc.find("reels",this._bonus_slots),this.select_root=cc.find("select_root",this._bonus_slots),this.gold_coin=cc.find("bg_count_board_yellow/coin",this._bonus_slots),this.gold_spine=cc.find("bg_count_board_yellow/spine",this._bonus_slots),this.green_coin=cc.find("bg_count_board_green/coin",this._bonus_slots),this.green_spine=cc.find("bg_count_board_green/spine",this._bonus_slots),this.pick_title=cc.find("count_board/pick_title",this._bonus_slots),this.times_title=cc.find("count_board/times_title",this._bonus_slots),this.remain_times=cc.find("count_board/times",this._bonus_slots),this.coin_num=cc.find("B_Coin_Glow/coins",this._bg_bonus),this.bonus_win=cc.find("bonus_win",this._bonus_slots),this.bonus_win_coin=cc.find("coin",this.bonus_win),this.bonus_win_spine=cc.find("spine",this.bonus_win),this.add_spin_spine=cc.find("count_board/spine",this._bonus_slots),this.bj_glow=cc.find("bj_glow",this._bg_bonus)},initBonusUI:function(){this._bg_bonus.active=!1,this._normal_slots.active=!0,this._bonus_slots.active=!1,this.bianpao.active=!0,cc.find("safe_node/info_board",this.node).active=!0},startBonusGame:function(e){var t=this;return s(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise(function(){var n=s(regeneratorRuntime.mark(function n(a){var i,r,c,l,m;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t._exitCallBack=a,t.bj_glow.active=!1,cc.vv.gameData.SetIsBonusGame(!0),t.bianpao.active=!1,cc.find("safe_node/info_board",t.node).active=!1,t._bg_bonus.active=!0,t._normal_slots.active=!1,t._bonus_slots.active=!0,t.bonus_win.active=!1,t.remain_times.parent.active=!0,t.gold_coin.parent.active=!0,t.green_coin.parent.active=!0,t._coinNum=0,t._yellowCoin=0,t._greenCoin=0,t._remainTimes=e.gameInfo.restCnt,t.updateRemainTimes(),t._slotsScript.Init(),t._slotsScript.reconnectInitSymbol(),2!==e.state){n.next=30;break}for(Global.SlotsSoundMgr.stopBgm(),Global.SlotsSoundMgr.playBgm("sgbgm"),t._canSelect=!0,t.select_root.active=!0,i=function(n){var o=cc.find("item_"+(n+1),t.select_root);o.off(cc.Node.EventType.TOUCH_END);var a=e.gameInfo.items[n];if(a.empty)o.active=!0,cc.find("spine",o).getComponent(sp.Skeleton).setAnimation(0,"PickOne_idle",!0),o.on(cc.Node.EventType.TOUCH_END,s(regeneratorRuntime.mark(function e(){var a,i,r,s,c,l,m,u,p,f,_;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t._canSelect){e.next=2;break}return e.abrupt("return");case 2:return Global.SlotsSoundMgr.playEffect("pickone"),t._canSelect=!1,o.off(cc.Node.EventType.TOUCH_END),a={rtype:1,choiceId:n+1},e.next=8,cc.vv.gameData.reqSubGame(a);case 8:if(200!==(i=e.sent).code){e.next=47;break}return r=i.data.choiceId,cc.vv.gameData.setCollectGame(i.data.collectGame),s=cc.find("item_"+r,t.select_root),c=i.data.collectGame.gameInfo.items[r-1],cc.find("spine",s).getComponent(sp.Skeleton).setAnimation(0,"PickOne_click",!1),t._coinNum++,t.coin_num.getComponent(cc.Label).string=t._coinNum,t._remainTimes=i.data.collectGame.gameInfo.restCnt,t.updateRemainTimes(),l=cc.find("safe_node",t.node),(m=cc.instantiate(cc.find("particle_dian",l))).active=!0,m.parent=l,u=s.convertToWorldSpaceAR(cc.v2(0,0)),u=l.convertToNodeSpaceAR(u),m.position=u,p=t.gold_coin.convertToWorldSpaceAR(cc.v2(0,0)),p=l.convertToNodeSpaceAR(p),t._yellowCoin+=c.coin,t._greenCoin+=c.coin,Global.SlotsSoundMgr.playEffect("fg_triggerfly"),cc.tween(m).to(.5,{position:p}).call(function(){t.gold_spine.active=!0,t.gold_spine.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),t.gold_spine.getComponent(sp.Skeleton).setCompleteListener(function(){t.gold_spine.getComponent(sp.Skeleton).setCompleteListener(null),t.gold_spine.active=!1}),t.updateCoin()}).removeSelf().start(),e.next=35,cc.vv.gameData.awaitTime(.3);case 35:return(f=t._slotsScript.GetSymbolByIdx(r))&&(f.ShowById(cc.vv.gameData.getGameCfg().scatterId,c),f.playBonusAppearAnimation()),e.next=39,cc.vv.gameData.awaitTime(.5);case 39:if(3!==i.data.collectGame.state){e.next=46;break}return e.next=42,t.popBonusEnterDialog();case 42:for(_=0;_<15;_++)cc.find("item_"+(_+1),t.select_root).active=!1;t.reqSpin(),e.next=47;break;case 46:t._canSelect=!0;case 47:case"end":return e.stop()}},e)})));else{t._coinNum++,o.active=!1;var i=t._slotsScript.GetSymbolByIdx(n+1);i&&i.showBonus(),t._yellowCoin+=a.coin,t._greenCoin+=a.coin}},r=0;r<15;r++)i(r);t.coin_num.getComponent(cc.Label).string=t._coinNum,t.updateCoin(),n.next=40;break;case 30:if(3!==e.state){n.next=40;break}for(c=0;c<15;c++)cc.find("item_"+(c+1),t.select_root).active=!1;l=o(e.gameInfo.items);try{for(l.s();!(m=l.n()).done;)m.value.empty||t._coinNum++}catch(e){l.e(e)}finally{l.f()}return t._yellowCoin=e.gameInfo.baseCoin,t._greenCoin=e.gameInfo.fullCoin,t.updateCoin(),n.next=39,cc.vv.gameData.awaitTime(.5);case 39:t.reqSpin();case 40:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()));case 1:case"end":return n.stop()}},n)}))()},playBjGlow:function(){var e=this;this.bj_glow.active=!0,this.bj_glow.getComponent(sp.Skeleton).setAnimation(0,"bg_glow",!1),this.bj_glow.getComponent(sp.Skeleton).setCompleteListener(function(){e.bj_glow.getComponent(sp.Skeleton).setCompleteListener(null),e.bj_glow.active=!1})},popBonusEnterDialog:function(){var e=this;return new Promise(function(){var t=s(regeneratorRuntime.mark(function t(n){var o,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Global.SlotsSoundMgr.stopBgm(),Global.SlotsSoundMgr.playBgm("bgbgm"),Global.SlotsSoundMgr.playEffect("fgend"),(o=cc.find("safe_node/dialog_node",e.node)).active=!0,(a=cc.find("bonus_enter_node",o)).active=!0,a.scale=0,cc.tween(a).to(.5,{scale:1},{easing:"backOut"}).start(),cc.find("coin",a).getComponent(cc.Label).string=Global.formatNumShort(e._yellowCoin,0),t.next=12,cc.vv.gameData.awaitTime(1.5);case 12:cc.tween(a).to(.5,{scale:0},{easing:"backIn"}).call(function(){o.active=!1,a.active=!1,n()}).start();case 13:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())},popBonusResultDialog:function(){var e=this;return new Promise(function(){var t=s(regeneratorRuntime.mark(function t(n){var o,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Global.SlotsSoundMgr.playEffect("bgend"),(o=cc.find("safe_node/dialog_node",e.node)).active=!0,(a=cc.find("bonus_result_node",o)).active=!0,a.scale=0,cc.tween(a).to(.5,{scale:1},{easing:"backOut"}).start(),cc.find("coin",a).getComponent(cc.Label).string=Global.FormatNumToComma(cc.vv.gameData.getCollectGame().gameInfo.winCoin),t.next=10,cc.vv.gameData.awaitTime(1.5);case 10:cc.tween(a).to(.5,{scale:0},{easing:"backIn"}).call(function(){o.active=!1,a.active=!1,n()}).start();case 11:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())},updateCoin:function(){this.gold_coin.getComponent(cc.Label).string=Global.formatNumShort(this._yellowCoin,0),this.green_coin.getComponent(cc.Label).string=Global.formatNumShort(this._greenCoin,0)},updateRemainTimes:function(){var e=cc.vv.gameData.getCollectGame();this._remainTimes<0&&(this._remainTimes=0),2===e.state?(this.pick_title.active=!0,this.times_title.active=!1,this._remainTimes<=1?this.pick_title.getComponent("ImgSwitchCmp").setIndex(0):this.pick_title.getComponent("ImgSwitchCmp").setIndex(1)):3===e.state&&(this.pick_title.active=!1,this.times_title.active=!0,this._remainTimes<=1?this.times_title.getComponent("ImgSwitchCmp").setIndex(0):this.times_title.getComponent("ImgSwitchCmp").setIndex(1)),this.remain_times.getComponent(cc.Label).string=this._remainTimes},exitBonusGame:function(){this._slotsScript.ClearAllTopShow(),cc.vv.gameData.GetSlotsScript().clearCollectProgress(),this.initBonusUI(),cc.vv.gameData.SetIsBonusGame(!1)},StopMove:function(){this._slotsScript.StopMove()},OnSpinEnd:function(){var e=this;return s(regeneratorRuntime.mark(function t(){var n,o,a,i,r,s,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=cc.find("safe_node",e.node),o=cc.vv.gameData.getCollectGame(),a=0;case 3:if(!(a<e._subGameData.idxs.length)){t.next=20;break}if(i=e._subGameData.idxs[a],4!==o.gameInfo.items[a].type){t.next=17;break}if(!(r=e._slotsScript.GetSymbolByIdx(i))){t.next=17;break}return r.playAddSpinAnimation(),e._remainTimes++,e.updateRemainTimes(),e.add_spin_spine.active=!0,e.add_spin_spine.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),t.next=16,cc.vv.gameData.awaitTime(.5);case 16:e.add_spin_spine.active=!1;case 17:a++,t.next=3;break;case 20:s=regeneratorRuntime.mark(function t(a){var i,r,s,c,l,m,u,p,f,_,g;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e._subGameData.idxs[a],r=e._slotsScript.GetSymbolByIdx(i),s=o.gameInfo.items[i-1],r){t.next=5;break}return t.abrupt("return","continue");case 5:c=0,l=0,m=0;case 8:if(!(m<o.gameInfo.items.length)){t.next=17;break}if((u=o.gameInfo.items[m]).empty||m+1===i||1!==u.type){t.next=14;break}if(!(p=e._slotsScript.GetSymbolByIdx(m+1))){t.next=14;break}return t.delegateYield(regeneratorRuntime.mark(function t(){var o,a,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c+=u.coin,++l>6&&(l=6),3!==s.type?Global.SlotsSoundMgr.playEffect("scatr_red"+l):2===u.type||3===u.type?Global.SlotsSoundMgr.playEffect("scatr_yellowgreen"):Global.SlotsSoundMgr.playEffect("scatr_red"+l),(o=cc.instantiate(cc.find("safe_node/fly_circle",e.node))).active=!0,o.parent=n,a=p.node.convertToWorldSpaceAR(cc.v2(0,0)),a=n.convertToNodeSpaceAR(a),o.position=a,i=r.node.convertToWorldSpaceAR(cc.v2(0,0)),i=n.convertToNodeSpaceAR(i),cc.tween(o).to(.5,{position:i}).call(function(){r.showBonusCoin(c);var e=cc.instantiate(cc.find("scatter_up",n));e.active=!0,e.parent=n,e.position=i,e.getComponent(sp.Skeleton).setAnimation(0,"Scatter_up",!1),e.getComponent(sp.Skeleton).setCompleteListener(function(){e.removeFromParent()})}).removeSelf().start(),t.next=15,cc.vv.gameData.awaitTime(.6);case 15:case"end":return t.stop()}},t)})(),"t0",14);case 14:m++,t.next=8;break;case 17:f=0;case 18:if(!(f<o.gameInfo.items.length)){t.next=27;break}if((_=o.gameInfo.items[f]).empty||f+1===i||3!==s.type||2!==_.type&&3!==_.type){t.next=24;break}if(!(g=e._slotsScript.GetSymbolByIdx(f+1))){t.next=24;break}return t.delegateYield(regeneratorRuntime.mark(function t(){var o,a,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c+=_.coin,++l>6&&(l=6),3!==s.type?Global.SlotsSoundMgr.playEffect("scatr_red"+l):2===_.type||3===_.type?Global.SlotsSoundMgr.playEffect("scatr_yellowgreen"):Global.SlotsSoundMgr.playEffect("scatr_red"+l),(o=cc.instantiate(cc.find("safe_node/fly_circle",e.node))).active=!0,o.parent=n,a=g.node.convertToWorldSpaceAR(cc.v2(0,0)),a=n.convertToNodeSpaceAR(a),o.position=a,i=r.node.convertToWorldSpaceAR(cc.v2(0,0)),i=n.convertToNodeSpaceAR(i),cc.tween(o).to(.5,{position:i}).call(function(){r.showBonusCoin(c);var e=cc.instantiate(cc.find("scatter_up",n));e.active=!0,e.parent=n,e.position=i,e.getComponent(sp.Skeleton).setAnimation(0,"Scatter_up",!1),e.getComponent(sp.Skeleton).setCompleteListener(function(){e.removeFromParent()})}).removeSelf().start(),t.next=15,cc.vv.gameData.awaitTime(.6);case 15:case"end":return t.stop()}},t)})(),"t1",24);case 24:f++,t.next=18;break;case 27:case"end":return t.stop()}},t)}),c=0;case 22:if(!(c<e._subGameData.idxs.length)){t.next=30;break}return t.delegateYield(s(c),"t0",24);case 24:if("continue"!==t.t0){t.next=27;break}return t.abrupt("continue",27);case 27:c++,t.next=22;break;case 30:return e._greenCoin=o.gameInfo.fullCoin,e.updateCoin(),t.next=34,cc.vv.gameData.awaitTime(.5);case 34:if(!o.gameInfo.isEnd){t.next=38;break}return t.delegateYield(regeneratorRuntime.mark(function t(){var a,i,r,s,c,l,m;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:Global.SlotsSoundMgr.playEffect("bgbgmend"),e.bonus_win.active=!0,e.remain_times.parent.active=!1,e.gold_coin.parent.active=!1,e.green_coin.parent.active=!1,e.bonus_win_coin.getComponent(cc.Label).string="",a=0,i=0;case 8:if(!(i<o.gameInfo.items.length)){t.next=30;break}if((r=o.gameInfo.items[i]).empty||4===r.type){t.next=27;break}if(Global.SlotsSoundMgr.playEffect("bgwin"),a+=r.coin,!(s=e._slotsScript.GetSymbolByIdx(i+1))){t.next=27;break}return s.playBonusWinAnimation(),(c=cc.instantiate(cc.find("particle_dian",n))).active=!0,c.parent=n,l=s.node.convertToWorldSpaceAR(cc.v2(0,0)),l=n.convertToNodeSpaceAR(l),c.position=l,m=e.bonus_win_coin.convertToWorldSpaceAR(cc.v2(0,0)),m=n.convertToNodeSpaceAR(m),cc.tween(c).to(.5,{position:m}).call(function(){e.bonus_win_coin.getComponent(cc.Label).string=Global.FormatNumToComma(a),e.bonus_win_spine.active=!0,e.bonus_win_spine.getComponent(sp.Skeleton).setAnimation(0,"jiesuan_glow",!1),e.bonus_win_spine.getComponent(sp.Skeleton).setCompleteListener(function(){e.bonus_win_spine.getComponent(sp.Skeleton).setCompleteListener(null),e.bonus_win_spine.active=!1})}).removeSelf().start(),t.next=27,cc.vv.gameData.awaitTime(.7);case 27:i++,t.next=8;break;case 30:return t.next=32,e.popBonusResultDialog();case 32:e.exitBonusGame(),Global.SlotsSoundMgr.stopBgm(),Global.SlotsSoundMgr.playNormalBgm(),cc.vv.gameData.AddCoin(o.gameInfo.winCoin),cc.vv.gameData.GetSlotsScript().ShowBottomWin(o.gameInfo.winCoin,o.gameInfo.winCoin,!0,function(){e._exitCallBack&&e._exitCallBack(),cc.vv.gameData.GetSlotsScript().CanDoNextRound()});case 37:case"end":return t.stop()}},t)})(),"t1",36);case 36:t.next=39;break;case 38:e.reqSpin();case 39:case"end":return t.stop()}},t)}))()},addCoinNum:function(){this._coinNum++,this.coin_num.getComponent(cc.Label).string=this._coinNum},getSubGameData:function(){return this._subGameData},getMaxReelIdx:function(e,t){return this._slotsScript.getLastStopReel()[t]},GetLastStopSlotReel:function(){return this._slotsScript.GetLastStopReelIdx()},reqSpin:function(){var e=this;return s(regeneratorRuntime.mark(function t(){var n,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._subGameData=null,e._remainTimes--,e.updateRemainTimes(),cc.vv.gameData.setScatterNumInBonusGame(0),e._slotsScript.StartMove(cc.vv.gameData.getDeskInfo().collectGame.gameInfo.items),n={rtype:2},t.next=8,cc.vv.gameData.reqSubGame(n);case 8:200!==(o=t.sent).code||o.spcode||(e._subGameData=o.data,cc.vv.gameData.setCollectGame(o.data.collectGame),e._slotsScript.setSpinResult(o.data.collectGame));case 10:case"end":return t.stop()}},t)}))()}}),cc._RF.pop()},{}],JapaneseSinger_BonusReel:[function(e,t,n){"use strict";cc._RF.push(t,"bcddfqhkI9HFIFRA09QD51g","JapaneseSinger_BonusReel"),cc.Class({extends:e("LMSlots_Reel_Base"),properties:{},Init:function(e,t,n){this._holderNode=cc.find("mask/holder",this.node),this._holderOrigPosY=this._holderNode.position.y,this._super(e,t,n)},LoadSymbols:function(){this._symbolTemplete||(this._symbolTemplete=cc.vv.gameData.GetPrefabByName("bonus_symbol"),this._symbolTemplete&&(this._symbolTemplete.optimizationPolicy=cc.Prefab.OptimizationPolicy.MULTI_INSTANCE));for(var e=0;e<this._nCount+1;e++)this.CreateOneSymbol();this.ReLayOut()},OnReelSpinEnd:function(){this._reelState=[];var e=this._symbols[0];e.GetShowId()===cc.vv.gameData.getGameCfg().scatterId&&(4!==e.GetData().type&&(cc.vv.gameData.GetBonusScript().playBjGlow(),e.playBonusStopAnimation(),cc.vv.gameData.setScatterNumInBonusGame(cc.vv.gameData.getScatterNumInBonusGame()+1),Global.SlotsSoundMgr.playEffect("scatr_bg"+cc.vv.gameData.getScatterNumInBonusGame()),cc.vv.gameData.GetBonusScript().addCoinNum()));var t=cc.vv.gameData.GetBonusScript().GetLastStopSlotReel();this._reelIdx===t&&(cc.log(cc.js.formatStr("OnReelSpinEnd, %s",t)),cc.vv.gameData.GetBonusScript().OnSpinEnd())},ReadyToStop:function(){this._bNotifyReadyStop||(this._bNotifyReadyStop=!0)},OnReelBounsActionBefore:function(){if(this._originResult)for(var e=0;e<this._originResult.length;e++)this._symbols[e].StopMoveBefore()},OnReelBounsActionDeep:function(){if(this._originResult)for(var e=0;e<this._originResult.length;e++)this._symbols[e].StopMoveDeep();this.playStopAnim()},playStopAnim:function(){var e=cc.vv.gameData.GetBonusScript().getMaxReelIdx(this._type,this._reelIdx%5);this._reelIdx===e&&Global.SlotsSoundMgr.playEffect("reelstop")},OnReelBounsActionEnd:function(){if(this._originResult)for(var e=0;e<this._originResult.length;e++)this._symbols[e].StopMoveEnd();else cc.log("\u56de\u5f39\u7ed3\u675f\uff0c\u6570\u636e\u5df2\u7ecf\u88ab\u6e05\u7a7a\u4e86");this.OnReelSpinEnd()}}),cc._RF.pop()},{LMSlots_Reel_Base:void 0}],JapaneseSinger_BonusSlots:[function(e,t,n){"use strict";cc._RF.push(t,"157aabwm9lDkYjI4oJmeaiO","JapaneseSinger_BonusSlots"),cc.Class({extends:e("LMSlots_Slots_Base"),properties:{},onLoad:function(){this._super()},start:function(){},Init:function(){this._topScript=cc.vv.gameData.GetTopScript(),this._bottomScript=cc.vv.gameData.GetBottomScript(),this._cfg=cc.vv.gameData.getGameCfg(),this._col=15,this._row=1,this._topAniNode=cc.find("top_ani",this.node),this.createReels(this._col,this._row)},createReels:function(e,t){for(var n=0;n<e;n++){var o=cc.find("reels/reel"+(n+1),this.node);if(!o.getComponent("JapaneseSinger_BonusReel")){var a=o.addComponent("JapaneseSinger_BonusReel");a.Init(n,t,this._topAniNode),this._reels.push(a)}}},GetReelStopInter:function(e){return e%5*(this._cfg.reelStopInter||.6)},OnSpinEnd:function(){},StartMove:function(e){this._bStopRightnow=null,this._gameInfo=null;var t=[],n=[];this._reels.forEach(function(o){var a=!1,i=e[o.GetReelIdx()];i.empty||4===i.type||(a=!0),a||(t.push(o),n.push(o.GetReelIdx()))}),this.MoveReels(t),this.setMoveLastIdx(n),this._stopTime=this.GetStopTime()},MoveReels:function(e){for(var t=0;t<e.length;t++){e[t].StartMove()}},setMoveLastIdx:function(e){cc.log(e);var t=null,n=[];e.forEach(function(e){(e%5>t%5||e%5==t%5&&e/3>t/3)&&(t=e),n[e%5]=n[e%5]?Math.max(n[e%5],e):e}),cc.log(n),this.moveReelLastIdx=t,cc.log("StartMove\uff1athis.moveReelLastIdx:",this.moveReelLastIdx),this._reelMax=n},getLastStopReel:function(){return this._reelMax},setSpinResult:function(e){for(var t=cc.vv.gameData.getGameCfg(),n=[],o=1;o<=15;o++){var a=Global.random(1,t.randomBonusSymbols.length),i=t.randomBonusSymbols[a-1];n.push(i)}this.SetSlotsResult(n,e)},SetSlotsResult:function(e,t){for(var n=e.length/this._col,o=[],a=0;a<e.length;a++){Math.floor(a/n);var i=a%this._col;if(this._cfg.symbol[e[a]]){var r={};r.sid=e[a],r.data={};var s=t.gameInfo.items[a];s.empty||(r.sid=this._cfg.scatterId,r.data=s),o[i]||(o[i]=[]),o[i].unshift(r)}}for(var c=0;c<this._reels.length;c++){var l=this._reels[c],m=o[c];l.SetResult(m)}},CanStopSlot:function(){return null!=cc.vv.gameData.GetBonusScript().getSubGameData()},getSlotsIndex:function(){return this._slotsIndex},getReel:function(e){return this._reels[e]},reconnectInitSymbol:function(){for(var e=cc.vv.gameData.getCollectGame(),t=0;t<e.gameInfo.items.length;t++){var n=e.gameInfo.items[t];n.empty?this._reels[t].GetSymbolByRow(0).ShowRandomSymbol():(this._reels[t].GetSymbolByRow(0).ShowById(this._cfg.scatterId,n),this._reels[t].GetSymbolByRow(0).showBonus())}}}),cc._RF.pop()},{LMSlots_Slots_Base:void 0}],JapaneseSinger_Cfg:[function(e,t,n){"use strict";var o;function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}cc._RF.push(t,"045cbkwY1ZGMZWnBnHMvFex","JapaneseSinger_Cfg");var i={symbol:(o={},a(o,1,{node:"symbol_1",win_node:"animation_1",stop_ani:{name:"Wild_01",zIndex:100},win_ani:{name:"Wild_02",zIndex:300}}),a(o,2,{node:"symbol_2",win_node:"animation_2",stop_ani:{name:"Scatter_red_down",zIndex:100},win_ani:{name:"Scatter_red_win",zIndex:300},free_stop_ani:{name:""}}),a(o,4,{node:"symbol_4"}),a(o,5,{node:"symbol_5"}),a(o,6,{node:"symbol_6"}),a(o,7,{node:"symbol_7"}),a(o,8,{node:"symbol_8"}),a(o,9,{node:"symbol_9"}),a(o,10,{node:"symbol_10"}),o),scripts:{Top:"LMSlots_Top_Base",Bottom:"LMSlots_Bottom_Base",Slots:"JapaneseSinger_Slots",Reels:"JapaneseSinger_Reel",Symbols:"JapaneseSinger_Symbol"},col:5,row:3,symbolPrefab:"symbol",symbolSize:{width:124,height:114},randomSymbols:[1,2,4,5,6,7,8,9,10],randomBonusSymbols:[1,4,5,6,7,8,9,10],wildId:1,scatterId:2,kuang:"kuang",speed:1500,reelStopInter:.3,auto_stop_time:1,bounceInfo:{distance:30,time:.4},autoModelDelay:1,AddAntiTime:1.5,helpItems:["games/JapaneseSinger/prefab/help_item_1","games/JapaneseSinger/prefab/help_item_2","games/JapaneseSinger/prefab/help_item_3"],commEffect:{path:"games/JapaneseSinger/",win1:["win_a","win_end"],win2:["win_b","win_end"],win3:["win_c","win_end"],win4:["win_d","win_end"]},normalBgm:"ngbgm",sysFloatOffsetPos:cc.v2(0,-120)};t.exports=i,cc._RF.pop()},{}],JapaneseSinger_GameData:[function(e,t,n){"use strict";cc._RF.push(t,"c5495AxD7tDpoWzMbjG97kZ","JapaneseSinger_GameData"),cc.Class({extends:e("LMSlots_GameData_Base"),properties:{},RegisterMsg:function(){this._super(),cc.vv.NetManager.registerMsg(MsgId.SLOT_SUBGAME_DATA,this.onRcvSubGameAction,this)},UnregisterMsg:function(){this._super(),cc.vv.NetManager.unregisterMsg(MsgId.SLOT_SUBGAME_DATA,this.onRcvSubGameAction,!1,this)},isFreeOver:function(){return!!this._gameInfo&&(this._gameInfo.allFreeCnt>0&&0===this._gameInfo.freeCnt)},isInFreeGame:function(){return this._deskInfo.restFreeCount>=0&&this._deskInfo.allFreeCount>0&&this._deskInfo.restFreeCount!==this._deskInfo.allFreeCount},SetBonusScript:function(e){this._bonusScp=e},GetBonusScript:function(){return this._bonusScp},SetIsBonusGame:function(e){this._isBonusGame=e},IsBonusGame:function(){return this._isBonusGame},getCollectGame:function(){return this._deskInfo.collectGame},setCollectGame:function(e){this._deskInfo.collectGame=e},getScatterNumInBonusGame:function(){return this._scatterNumInBonusGame>6?6:this._scatterNumInBonusGame},setScatterNumInBonusGame:function(e){this._scatterNumInBonusGame=e},reqSubGame:function(e){var t=this;return new Promise(function(n){var o={c:MsgId.SLOT_SUBGAME_DATA,gameid:t._gameId,data:e};cc.vv.NetManager.send(o,!0),t._subCallBack=n})},onRcvSubGameAction:function(e){this._subCallBack&&(this._subCallBack(e),this._subCallBack=null)}}),cc._RF.pop()},{LMSlots_GameData_Base:void 0}],JapaneseSinger_Logic:[function(e,t,n){"use strict";cc._RF.push(t,"c090clFssNPYpeODlw/Nlyp","JapaneseSinger_Logic"),cc.Class({extends:e("LMSlots_Logic_Base"),properties:{_lockBonus:!1},onLoad:function(){this._super();var e=cc.vv.gameData.getDeskInfo();this._lockBonus=e.needbet>e.currmult,Global.registerEvent(cc.vv.gameData._EventId.SLOT_TOTALBET_UPDATED,this.onUpdateBet,this)},InitCommComponent:function(){this._super();var e=this.node.addComponent("JapaneseSinger_BonusGame");e.Init(),cc.vv.gameData.SetBonusScript(e)},onUpdateBet:function(){var e=cc.find("safe_node/LMSlots_PrizePool_1/prizePool_Grand/spine",this.node).getComponent(sp.Skeleton),t=cc.vv.gameData.getDeskInfo();t.needbet<=cc.vv.gameData.GetBetIdx()&&this._lockBonus?(Global.SlotsSoundMgr.playEffect("unlock"),e.setAnimation(0,"Grand_unlock",!1),this._lockBonus=!1):t.needbet>cc.vv.gameData.GetBetIdx()&&!this._lockBonus&&(Global.SlotsSoundMgr.playEffect("lock"),this._lockBonus=!0,e.setAnimation(0,"Grand_lock",!1),e.addAnimation(0,"Grand_lock_idle",!0))}}),cc._RF.pop()},{LMSlots_Logic_Base:void 0}],JapaneseSinger_PrizePool:[function(e,t,n){"use strict";cc._RF.push(t,"8c26bR6+phOHI85vmscf7j1","JapaneseSinger_PrizePool"),cc.Class({extends:e("LMSlots_PrizePool_Base"),properties:{},ShowNodeLockByNode:function(e,t,n,o,a){if(e){var i=cc.find("spine",e).getComponent(sp.Skeleton);t?a?i.setAnimation(0,"Grand_lock_idle",!0):(i.clearTracks(),i.setToSetupPose(),i.setAnimation(0,"Grand_lock",!1),i.addAnimation(0,"Grand_lock_idle",!0)):a?i.setAnimation(0,"Grand_unlock",!0):i.setAnimation(0,"Grand_unlock",!1)}}}),cc._RF.pop()},{LMSlots_PrizePool_Base:void 0}],JapaneseSinger_Reel:[function(e,t,n){"use strict";cc._RF.push(t,"65590bA4xtNZ7oVBlOixbKK","JapaneseSinger_Reel"),cc.Class({extends:e("LMSlots_Reel_Base"),properties:{},StartMove:function(){this._super()},OnReelSpinEnd:function(){this._super()},playReelStop:function(){this._super();var e=!1;if(this._originResult)for(var t=0;t<this._originResult.length;t++){var n=this._symbols[t];n.GetShowId()===this._cfg.scatterId&&(e=!0,cc.vv.gameData.isInFreeGame()?n.playFreeStopAnimation():n.playStopAnimation())}Global.SlotsSoundMgr.playEffect("reelstop"),e&&Global.SlotsSoundMgr.playEffect("reelscatr")}}),cc._RF.pop()},{LMSlots_Reel_Base:void 0}],JapaneseSinger_Slots:[function(e,t,n){"use strict";function o(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=a(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i,r=!0,s=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return r=e.done,e},e:function(e){s=!0,i=e},f:function(){try{r||null==o.return||o.return()}finally{if(s)throw i}}}}function a(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function r(e,t,n,o,a,i,r){try{var s=e[i](r),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(o,a)}function s(e){return function(){var t=this,n=arguments;return new Promise(function(o,a){var i=e.apply(t,n);function s(e){r(i,o,a,s,c,"next",e)}function c(e){r(i,o,a,s,c,"throw",e)}s(void 0)})}}cc._RF.push(t,"a1695uBsblE9bG8D9j4ab3R","JapaneseSinger_Slots"),cc.Class({extends:e("LMSlots_Slots_Base"),properties:{},Init:function(){this.freeGlow=cc.find("B_Coin_Glow",this.node.parent),this.freeCoin=cc.find("coins",this.freeGlow),this.freeNode=cc.find("free_node",this.node),this.freeEachCoin=cc.find("fg_count_board/coins",this.freeNode),this.freeTimes=cc.find("count_board/times",this.freeNode),this._freeCoins=0,this._super();var e=cc.find("LMSlots_PrizePool_1/prizePool_Grand/spine",this.node.parent).getComponent(sp.Skeleton),t=cc.vv.gameData.getDeskInfo();t.needbet<=t.currmult?e.setAnimation(0,"Grand_unlock",!1):e.setAnimation(0,"Grand_lock_idle",!0),this.updateCollectProgress(t.collectGame)},StartMove:function(){cc.vv.gameData.IsBonusGame()||(this._super(),Global.SlotsSoundMgr.playNormalBgm(),cc.vv.gameData.isInFreeGame()&&(this.freeTimes.getComponent(cc.Label).string=cc.vv.gameData.GetTotalFree()-cc.vv.gameData.GetFreeTime()+"/"+cc.vv.gameData.GetTotalFree()))},StopMove:function(){cc.vv.gameData.IsBonusGame()?cc.vv.gameData.GetBonusScript().StopMove():this._super()},ReconnectShow:function(){var e=this;return s(regeneratorRuntime.mark(function t(){var n,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=cc.vv.gameData.getDeskInfo(),o=cc.vv.gameData.GetFreeTime(),1!==n.collectGame.state?(e._bottomScript.ShowBtnsByState("moveing_1"),e.clearCollectProgress(),cc.vv.gameData.GetBonusScript().startBonusGame(n.collectGame)):o?(e._bottomScript.ShowBtnsByState("moveing_1"),e.ShowGameview(!0),Global.SlotsSoundMgr.stopBgm(),Global.SlotsSoundMgr.playBgm("fgbgm"),e.freeEachCoin.getComponent(cc.Label).string=Global.formatNumShort(n.freeGameInfo.baseCoin),e._freeCoins=n.freeGameInfo.totalCoin,e.freeCoin.getComponent(cc.Label).string=Global.formatNumShort(e._freeCoins,0),e.CanDoNextRound()):(e.ShowGameview(!1),e.CanDoNextRound());case 3:case"end":return t.stop()}},t)}))()},onMsgSpine:function(e){var t=this;return s(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:cc.vv.gameData.IsBonusGame()?cc.vv.gameData.GetBonusScript().onMsgSpine(e):(t._super(e),e.collectGame&&cc.vv.gameData.setCollectGame(e.collectGame));case 1:case"end":return n.stop()}},n)}))()},SetSlotsResult:function(e){for(var t=e.length/this._col,n=[],a=0;a<e.length;a++){Math.floor(a/t);var i=a%this._col;if(this._cfg.symbol[e[a]]){var r={};if(r.sid=e[a],e[a]===this._cfg.scatterId){var s,c=o(this._gameInfo.scatterInfo);try{for(c.s();!(s=c.n()).done;){var l=s.value;if(l.idx===a+1){r.data=l;break}}}catch(e){c.e(e)}finally{c.f()}}n[i]||(n[i]=[]),n[i].unshift(r)}}for(var m=0;m<this._reels.length;m++){var u=this._reels[m],p=n[m];u.SetResult(p)}},CheckEnterFreeGame:function(){return cc.vv.gameData.GetTotalFree()>0&&cc.vv.gameData.GetFreeTime()===cc.vv.gameData.GetTotalFree()},CheckExtraFreeGame:function(){return!!(this._gameInfo.freeResult&&this._gameInfo.freeResult.freeInfo&&this._gameInfo.freeResult.freeInfo.freeCnt>0)},CheckExitFreeGame:function(){return cc.vv.gameData.GetTotalFree()>0&&0===cc.vv.gameData.GetFreeTime()},ShowWinTrace:function(){var e=this;return s(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e._super();case 1:case"end":return t.stop()}},t)}))()},OnSpinEnd:function(){var e=this;return s(regeneratorRuntime.mark(function t(){var n,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collectWilds();case 2:if(!cc.vv.gameData.isInFreeGame()){t.next=5;break}return t.next=5,e.collectFreeCoins();case 5:e.ShowWinTrace(),n=cc.vv.gameData.GetGameWin(),o=cc.vv.gameData.GetGameWin(),cc.vv.gameData.GetTotalFree()>0&&cc.vv.gameData.GetTotalFree()!==cc.vv.gameData.GetFreeTime()&&(o=cc.vv.gameData.GetGameTotalFreeWin()),e.ShowBottomWin(n,o,!0,s(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(2!==e._gameInfo.collectGame.state){t.next=3;break}return t.next=3,e.triggerBonusGame();case 3:e.CheckEnterFreeGame()?e.triggerFreeGame():e.CheckExtraFreeGame()?e.triggerExtraFreeGame():e.CheckExitFreeGame()?e.triggerExitFreeGame():e.CanDoNextRound();case 4:case"end":return t.stop()}},t)})));case 10:case"end":return t.stop()}},t)}))()},triggerBonusGame:function(){var e=this;return s(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.cutScene(),t.next=3,cc.vv.gameData.awaitTime(2);case 3:return e.clearCollectProgress(),t.next=6,cc.vv.gameData.GetBonusScript().startBonusGame(e._gameInfo.collectGame);case 6:case"end":return t.stop()}},t)}))()},cutScene:function(){Global.SlotsSoundMgr.playEffect("transition");var e=cc.find("transition",this.node.parent);e.active=!0,e.getComponent(sp.Skeleton).setAnimation(0,"skill",!1),e.getComponent(sp.Skeleton).setCompleteListener(function(){e.getComponent(sp.Skeleton).setCompleteListener(null),e.active=!1})},ShowGameview:function(e){this._super(e),this.freeGlow.active=e,this.freeNode.active=e,cc.find("role",this.node.parent).active=!e,cc.find("info_board",this.node.parent).active=!e},triggerFreeGame:function(){var e=this;return s(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(e._bottomScript.ShowBtnsByState("moveing_1"),Global.SlotsSoundMgr.playEffect("triggering"),n=0;n<e._gameInfo.resultCards.length;n++)e._gameInfo.resultCards[n]===e._cfg.scatterId&&e.GetSymbolByIdx(n+1).playWinAnimation();return t.next=5,cc.vv.gameData.awaitTime(1);case 5:return e.ShowGameview(!0),e._freeCoins=0,e.freeEachCoin.getComponent(cc.Label).string=Global.formatNumShort(e._gameInfo.freeGameInfo.baseCoin,0),e.freeTimes.getComponent(cc.Label).string="1/5",e.freeCoin.getComponent(cc.Label).string="",t.next=12,e.popFreeDialog();case 12:return t.next=14,cc.vv.gameData.awaitTime(1);case 14:Global.SlotsSoundMgr.stopBgm(),Global.SlotsSoundMgr.playBgm("fgbgm"),e.CanDoNextRound();case 17:case"end":return t.stop()}},t)}))()},triggerExtraFreeGame:function(){var e=this;return s(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._bottomScript.ShowBtnsByState("moveing_1"),t.next=3,cc.vv.gameData.awaitTime(1);case 3:return t.next=5,e.popExtraFreeDialog();case 5:e.CanDoNextRound();case 6:case"end":return t.stop()}},t)}))()},triggerExitFreeGame:function(){var e=this;return s(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._bottomScript.ShowBtnsByState("moveing_1"),t.next=3,cc.vv.gameData.awaitTime(1);case 3:return t.next=5,e.popFreeResultDialog();case 5:e.ShowGameview(!1),e.ShowBottomWin(cc.vv.gameData.GetGameTotalFreeWin(),cc.vv.gameData.GetGameTotalFreeWin(),!0,function(){Global.SlotsSoundMgr.stopBgm(),Global.SlotsSoundMgr.playNormalBgm(),e.CanDoNextRound()});case 7:case"end":return t.stop()}},t)}))()},popFreeDialog:function(){var e=this;return new Promise(function(){var t=s(regeneratorRuntime.mark(function t(n){var o,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Global.SlotsSoundMgr.playEffect("fg_trigger"),(o=cc.find("dialog_node",e.node.parent)).active=!0,(a=cc.find("common_enter_node",o)).active=!0,a.scale=0,cc.tween(a).to(.5,{scale:1},{easing:"backOut"}).start(),cc.find("title/coins",a).getComponent(cc.Label).string=Global.formatNumShort(e._gameInfo.freeGameInfo.baseCoin),t.next=11,cc.vv.gameData.awaitTime(1.5);case 11:cc.tween(a).to(.5,{scale:0},{easing:"backIn"}).call(function(){o.active=!1,a.active=!1,n()}).start();case 12:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())},popExtraFreeDialog:function(){var e=this;return new Promise(function(){var t=s(regeneratorRuntime.mark(function t(n){var o,a,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Global.SlotsSoundMgr.playEffect("add1spin"),Global.SlotsSoundMgr.playEffect("fg_trigger"),(o=cc.find("dialog_node",e.node.parent)).active=!0,(a=cc.find("extra_node",o)).active=!0,a.scale=0,cc.tween(a).to(.5,{scale:1},{easing:"backOut"}).start(),i=cc.find("title",a),e._gameInfo.freeResult.freeInfo.freeCnt>1?i.getComponent("ImgSwitchCmp").setIndex(1):i.getComponent("ImgSwitchCmp").setIndex(0),cc.find("title/times",a).getComponent(cc.Label).string="+"+e._gameInfo.freeResult.freeInfo.freeCnt,t.next=14,cc.vv.gameData.awaitTime(1);case 14:cc.tween(a).to(.5,{scale:0},{easing:"backIn"}).call(function(){o.active=!1,a.active=!1,n()}).start();case 15:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())},popFreeResultDialog:function(){var e=this;return new Promise(function(){var t=s(regeneratorRuntime.mark(function t(n){var o,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Global.SlotsSoundMgr.playEffect("fgend"),(o=cc.find("dialog_node",e.node.parent)).active=!0,(a=cc.find("result_node",o)).active=!0,a.scale=0,cc.tween(a).to(.5,{scale:1},{easing:"backOut"}).start(),cc.find("coin",a).getComponent(cc.Label).string=Global.FormatNumToComma(cc.vv.gameData.GetGameTotalFreeWin()),t.next=10,cc.vv.gameData.awaitTime(1.5);case 10:cc.tween(a).to(.5,{scale:0},{easing:"backIn"}).call(function(){o.active=!1,a.active=!1,n()}).start();case 11:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())},updateCollectProgress:function(e){return s(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))()},clearCollectProgress:function(){},collectWilds:function(){var e=this;return s(regeneratorRuntime.mark(function t(){var n,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e._gameInfo.wildIdxs&&e._gameInfo.wildIdxs.length>0)){t.next=12;break}n=0;case 2:if(!(n<e._gameInfo.wildIdxs.length)){t.next=12;break}if(!(o=e.GetSymbolByIdx(e._gameInfo.wildIdxs[n]))){t.next=9;break}return o.playStopAnimation(),t.next=8,cc.vv.gameData.awaitTime(1);case 8:o.ShowNormal();case 9:n++,t.next=2;break;case 12:case"end":return t.stop()}},t)}))()},collectFreeCoins:function(){var e=this;return s(regeneratorRuntime.mark(function t(){var n,o,a,i,r,s,c,l,m;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e._gameInfo.scatterInfo&&e._gameInfo.scatterInfo.length>0)){t.next=26;break}n=0;case 2:if(!(n<e._gameInfo.scatterInfo.length)){t.next=23;break}if(o=e._gameInfo.scatterInfo[n],!(a=e.GetSymbolByIdx(o.idx))){t.next=20;break}return a.playFreeAppearAnimation(),e._freeCoins+=e._gameInfo.freeGameInfo.baseCoin,Global.SlotsSoundMgr.playEffect("scatr_fg"),(i=cc.instantiate(cc.find("particle_star",e.node.parent))).active=!0,i.parent=e.node.parent,r=a.node.convertToWorldSpaceAR(cc.v2(0,0)),r=e.node.parent.convertToNodeSpaceAR(r),i.position=r,s=e.freeGlow.convertToWorldSpaceAR(cc.v2(0,0)),s=e.node.parent.convertToNodeSpaceAR(s),cc.tween(i).to(.5,{position:s}).call(function(){e.freeCoin.getComponent(cc.Label).string=Global.formatNumShort(e._freeCoins)}).removeSelf().start(),t.next=20,cc.vv.gameData.awaitTime(.7);case 20:n++,t.next=2;break;case 23:for(c=0;c<e._gameInfo.scatterInfo.length;c++)l=e._gameInfo.scatterInfo[c],(m=e.GetSymbolByIdx(l.idx))&&m.playFreeWinAnimation();return t.next=26,cc.vv.gameData.awaitTime(.5);case 26:case"end":return t.stop()}},t)}))()}}),cc._RF.pop()},{LMSlots_Slots_Base:void 0}],JapaneseSinger_Symbol:[function(e,t,n){"use strict";cc._RF.push(t,"5b669Wahv5OwoO8tzZtvHe0","JapaneseSinger_Symbol"),cc.Class({extends:e("LMSlots_Symbol_Base"),properties:{},StartMove:function(){this._super()},ShowRandomSymbol:function(){this._super(),cc.vv.gameData.IsBonusGame()||(cc.find("free_coin",this.node).active=!1,cc.find("times",this.node).active=!1,this.showCoin())},ShowById:function(e,t){this._super(e,t),e===cc.vv.gameData.getGameCfg().scatterId&&(cc.vv.gameData.isInFreeGame()?(cc.find("coin",this.node).active=!1,this._showNode.getComponent("ImgSwitchCmp").setIndex(1)):1!==cc.vv.gameData.getCollectGame().state?this._showNode.getComponent("ImgSwitchCmp").setIndex(t?t.type-1:1):this._showNode.getComponent("ImgSwitchCmp").setIndex(0)),this.showCoin()},SetSymbolIdx:function(e){this._super(e)},GetSymbolIdx:function(){return this._symbolIdx},showCoin:function(){var e=cc.find("coin",this.node);if(cc.vv.gameData.isInFreeGame()||cc.vv.gameData.IsBonusGame())e&&(e.active=!1);else if(e&&this._id===cc.vv.gameData.getGameCfg().scatterId)if(this._data)this._data.coin>0&&(e.active=!0,e.getComponent(cc.Label).string=Global.formatNumShort(this._data.coin,0));else{e.active=!0;var t=[.25,.5,.75,1,2,5,10],n=cc.vv.gameData.GetTotalBet()*t[Math.floor(Math.random()*t.length)];e.getComponent(cc.Label).string=Global.formatNumShort(n,0)}else e.active=!1},playFreeStopAnimation:function(){var e=this._id,t=cc.vv.gameData.getGameCfg();if(t.symbol[e]&&t.symbol[e].win_node){this._state="stop",this._showNode&&(this._showNode.active=!1),this._showNode=cc.find(t.symbol[e].win_node,this.node),this._showNode.active=!0,this.node.zIndex=t.symbol[e].stop_ani.zIndex-this._symbolIdx+10*this._reelIdx;var n=this._showNode.getComponent(sp.Skeleton);n&&n.setAnimation(0,"Scatter_yellow_down",!1)}},playBonusStopAnimation:function(){var e=this._id,t=cc.vv.gameData.getGameCfg();if(t.symbol[e]&&t.symbol[e].win_node){this._state="stop";var n=this.setAnimationToTop(!0);n.active=!0;var o=cc.find(t.symbol[e].win_node,n);o.active=!0;var a="Scatter_yellow_down";this._data&&3===this._data.type&&(a="Scatter_green_down"),n.zIndex=t.symbol[e].win_ani.zIndex-this._symbolIdx+10*this._reelIdx;var i=o.getComponent(sp.Skeleton);i&&i.setAnimation(0,a,!1)}},playBonusWinAnimation:function(){this._showNode&&(this._showNode.active=!1);var e=this._id,t=cc.vv.gameData.getGameCfg();if(t.symbol[e]&&t.symbol[e].win_node){this._showNode&&(this._showNode.active=!1);var n=this.setAnimationToTop(!0);n.active=!0;var o=cc.find(t.symbol[e].win_node,n);o.active=!0;var a="Scatter_red_win";this._data&&2===this._data.type?a="Scatter_yellow_win":this._data&&3===this._data.type&&(a="Scatter_green_win"),n.zIndex=t.symbol[e].win_ani.zIndex-this._symbolIdx+10*this._reelIdx;var i=o.getComponent(sp.Skeleton);i&&i.setAnimation(0,a,!0)}},showBonusCoin:function(e){var t=this.setAnimationToTop(!0),n=cc.find("free_coin",t);n.active=!0,n.getComponent(cc.Label).string=Global.formatNumShort(e,0)},playFreeAppearAnimation:function(){var e=this,t=this.setAnimationToTop(!0),n=cc.vv.gameData.getGameCfg(),o=cc.find(n.symbol[this._id].win_node,t),a=cc.find("jiesuan",o);a&&(a.active=!0,a.getComponent(sp.Skeleton).setAnimation(0,"Scatter_yellow_jiesuan",!1));var i=o.getComponent(sp.Skeleton);i&&(i.setAnimation(0,"Scatter_yellow_appear",!1),cc.tween(this.node).delay(.3).call(function(){a.active=!1;var n=cc.find("free_coin",t);if(n.active=!0,n.getComponent(cc.Label).string=Global.formatNumShort(e._data.coin,0),n.scale=0,cc.tween(n).to(.2,{scale:1},{easing:"backOut"}).start(),e._data.freeCnt&&e._data.freeCnt>0){var o=cc.find("times",t);o.active=!0,o.scale=0,cc.tween(o).to(.2,{scale:1},{easing:"backOut"}).start()}}).start())},playFreeWinAnimation:function(){var e=this.setAnimationToTop(!0),t=cc.find(cc.vv.gameData.getGameCfg().symbol[this._id].win_node,e).getComponent(sp.Skeleton);t&&t.setAnimation(0,"Scatter_yellow_win",!0)},playAddSpinAnimation:function(){this._id,cc.vv.gameData.getGameCfg();this._showNode&&(this._showNode.active=!1);var e=this.setAnimationToTop(!0);e.active=!0;var t=cc.find("Spin1",e);t.active=!0,e.zIndex=300-this._symbolIdx+10*this._reelIdx;var n=t.getComponent(sp.Skeleton);n&&n.setAnimation(0,"Spin1",!1)},showBonus:function(){this._showNode&&(this._showNode.active=!1);var e=this._id,t=cc.vv.gameData.getGameCfg();if(t.symbol[e]&&t.symbol[e].win_node){this._showNode&&(this._showNode.active=!1);var n=this.setAnimationToTop(!0);n.active=!0;var o=cc.find(t.symbol[e].win_node,n);o.active=!0;var a=cc.find("mask",n);a&&(a.active=!1);var i="Scatter_red_down";this._data&&2===this._data.type?i="Scatter_yellow_down":this._data&&3===this._data.type&&(i="Scatter_green_down"),n.zIndex=t.symbol[e].win_ani.zIndex-this._symbolIdx+10*this._reelIdx;var r=o.getComponent(sp.Skeleton);if(r){r.setAnimation(0,i,!1);var s=cc.find("free_coin",n);this._data&&1===this._data.type&&(s=cc.find("coin",n)),s.active=!0,s.getComponent(cc.Label).string=Global.formatNumShort(this._data.coin,0)}}},playBonusAppearAnimation:function(){this._showNode&&(this._showNode.active=!1);var e=this._id,t=cc.vv.gameData.getGameCfg();if(t.symbol[e]&&t.symbol[e].win_node){this._showNode&&(this._showNode.active=!1);var n=this.setAnimationToTop(!0);n.active=!0,n.scale=0,cc.tween(n).to(.2,{scale:1}).start();var o=cc.find(t.symbol[e].win_node,n);o.active=!0;var a=cc.find("mask",n);a&&(a.active=!1),n.zIndex=t.symbol[e].win_ani.zIndex-this._symbolIdx+10*this._reelIdx;var i=o.getComponent(sp.Skeleton);i&&i.setAnimation(0,"Scatter_red_appear",!1);var r=cc.find("coin",n);r.active=!0,r.getComponent(cc.Label).string=Global.formatNumShort(this._data.coin,0),cc.tween(r).to(.2,{scale:1},{easing:"backOut"}).start()}}}),cc._RF.pop()},{LMSlots_Symbol_Base:void 0}]},{},["JapaneseSinger_BonusGame","JapaneseSinger_BonusReel","JapaneseSinger_BonusSlots","JapaneseSinger_Cfg","JapaneseSinger_GameData","JapaneseSinger_Logic","JapaneseSinger_PrizePool","JapaneseSinger_Reel","JapaneseSinger_Slots","JapaneseSinger_Symbol"]);
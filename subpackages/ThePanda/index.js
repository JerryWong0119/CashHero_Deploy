window.__require=function e(t,n,a){function o(i,c){if(!n[i]){if(!t[i]){var r=i.split("/");if(r=r[r.length-1],!t[r]){var l="function"==typeof __require&&__require;if(!c&&l)return l(r,!0);if(s)return s(r,!0);throw new Error("Cannot find module '"+i+"'")}i=r}var u=n[i]={exports:{}};t[i][0].call(u.exports,function(e){return o(t[i][1][e]||e)},u,u.exports,e,t,n,a)}return n[i].exports}for(var s="function"==typeof __require&&__require,i=0;i<a.length;i++)o(a[i]);return o}({ThePanda_Bottom:[function(e,t,n){"use strict";cc._RF.push(t,"d5b6aDTABpMM6PPN+qEGHRC","ThePanda_Bottom"),cc.Class({extends:e("LMSlots_Bottom_Base"),properties:{},OnClickSpin:function(){var e=cc.vv.gameData.GetSlotsScript();this._CheckCoinEnough()&&e.onSpin(),this._super()},CanDoNextRound:function(){this._bStartRound=!1,this.ShowBtnsByState("idle"),this._checkForsePoptips();var e=cc.vv.gameData.GetSelectData();if(cc.vv.gameData.GetBounusData().state||e.state)this.SendSpinReq();else if(cc.vv.gameData.GetAutoModelTime()>0){var t=cc.vv.gameData.getGameCfg();this.scheduleOnce(this.DoAutoSpine.bind(this),t.autoModelDelay)}}}),cc._RF.pop()},{LMSlots_Bottom_Base:void 0}],ThePanda_Cfg:[function(e,t,n){"use strict";var a;function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}cc._RF.push(t,"eba2a8S559PEZWEzQFFslVi","ThePanda_Cfg");var s={symbol:(a={},o(a,1,{node:"s1",win_node:"w1",win_ani:{name:"animation",zIndex:100}}),o(a,2,{node:"s1",win_node:"w2",win_ani:{name:"animation",zIndex:100}}),o(a,3,{node:"s1",win_node:"w3",win_ani:{name:"animation",zIndex:100}}),o(a,4,{node:"s1",win_node:"w4",win_ani:{name:"animation",zIndex:100}}),o(a,5,{node:"s1",win_node:"w5",win_ani:{name:"animation",zIndex:100}}),o(a,6,{node:"s1",win_node:"w6",win_ani:{name:"animation",zIndex:100}}),o(a,7,{node:"s1",win_node:"w7",win_ani:{name:"animation",zIndex:100}}),o(a,8,{node:"s1",win_node:"w8",win_ani:{name:"animation",zIndex:100}}),o(a,9,{node:"null",win_node:"",win_ani:""}),a),shadowSymbolNode:"s2",puzzleCfg:{atlas:"puzzle_14",bg:"theme_store_puzzle14_bg",full:"theme_store_puzzle14_full",pieces:["theme_store_puzzle_14_1","theme_store_puzzle_14_2","theme_store_puzzle_14_3","theme_store_puzzle_14_4","theme_store_puzzle_14_5","theme_store_puzzle_14_6","theme_store_puzzle_14_7","theme_store_puzzle_14_8","theme_store_puzzle_14_9","theme_store_puzzle_14_10","theme_store_puzzle_14_11","theme_store_puzzle_14_12"]},scripts:{Top:"LMSlots_Top_Base",Bottom:"ThePanda_Bottom",Slots:"ThePanda_Slots",Reels:"LMSlots_Reel_Base",Symbols:"ThePanda_Symbol"},col:5,row:4,randomSymbols:[2,3,4,5,6,7],scatterId:1,symbolPrefab:"LMSlots_Symbol",symbolSize:{width:150,height:85},kuang:"kuang",speed:3e3,reelStopInter:.2,auto_stop_time:1,bounce:!0,normalBgm:"base_bgm",winningBox:[["sp1","sp2","sp3","sp4","sp5","sp6"],["sp4","sp7","sp8","sp9","sp10","sp11"],["sp12","sp13","sp6","sp14","sp15","sp16"],["sp14","sp5","sp11","sp17","sp18","sp19"],["sp17","sp10","sp20","sp21","sp22","sp23"],["sp24","sp25","sp16","sp26","sp27","sp28"],["sp26","sp15","sp19","sp29","sp30","sp31"],["sp29","sp18","sp23","sp32","sp33","sp34"],["sp32","sp22","sp35","sp36","sp37","sp38"],["sp39","sp27","sp31","sp40","sp41","sp42"],["sp40","sp30","sp34","sp43","sp44","sp45"],["sp43","sp33","sp38","sp46","sp47","sp48"],["sp49","sp41","sp45","sp50","sp51","sp52"],["sp50","sp44","sp48","sp53","sp54","sp55"]],commEffect:{path:"games/ThePanda/",win1:["win1","win1end"],win2:["win2","win2end"]},helpItems:["games/ThePanda/prefab/Panda_Help_item1","games/ThePanda/prefab/Panda_Help_item2","games/ThePanda/prefab/Panda_Help_item3","games/ThePanda/prefab/Panda_Help_item4","games/ThePanda/prefab/Panda_Help_item5"]};t.exports=s,cc._RF.pop()},{}],ThePanda_FreeGame:[function(e,t,n){"use strict";function a(e,t,n,a,o,s,i){try{var c=e[s](i),r=c.value}catch(e){return void n(e)}c.done?t(r):Promise.resolve(r).then(a,o)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(o,s){var i=e.apply(t,n);function c(e){a(i,o,s,c,r,"next",e)}function r(e){a(i,o,s,c,r,"throw",e)}c(void 0)})}}cc._RF.push(t,"cf467y3zE1EX5NSw9K8p3ad","ThePanda_FreeGame"),cc.Class({extends:cc.Component,properties:{_nextStep:cc.callFunc,_maxBetEnterBonus:13,_isReConnect:!1},onLoad:function(){this._startSpine=cc.find("safe_node/screenspine/startfree",this.node),this._pressStartSpine=cc.find("safe_node/freeui/pressstart/sp",this.node),this._collectSpine=cc.find("safe_node/freeui/collectsp",this.node),this._collectResultSp=cc.find("safe_node/freeui/collectresultsp",this.node),this._pressNode=cc.find("safe_node/freeui/pressstart",this.node),this._pressNode.on(cc.Node.EventType.TOUCH_END,this.onPressStart,this),Global.registerEvent(cc.vv.gameData._EventId.SLOT_TOTALBET_UPDATED,this.onChangeBetValue,this)},onEnable:function(){cc.vv.NetManager.registerMsg(MsgId.SLOT_SUBGAME_DATA,this.onRcvSubGameAction,this)},onDisable:function(){cc.vv.NetManager.unregisterMsg(MsgId.SLOT_SUBGAME_DATA,this.onRcvSubGameAction,!1,this)},reConnectShowPressStart:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this._isReConnect=1==t,this.scheduleOnce(function(){e._pressNode.active=!0,e._pressStartSpine.scale=1,Global.playHSEffect("bonus_start"),e.showFreeGameUI(!0),cc.vv.gameData.playSpine(e._pressStartSpine,"animation1",!1,function(){e._pressShow=!0,cc.vv.gameData.playSpine(e._pressStartSpine,"animation2",!0,null)}),cc.vv.gameData.checkAutoPlay(e._pressNode,function(){e._pressShow&&(e._pressShow=!1,Global.playHSEffect("button_start"),cc.tween(e._pressStartSpine).to(.5,{scale:0},{easing:"backInOut"}).call(function(){e._pressNode.active=!1,e.scheduleOnce(function(){e.sendEnterFreeeGame()},.5)}).start())})},t)},enterFreeGame:function(e,t){var n=this;return o(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new Promise(function(a){if(n._nextStep=a,n._symbolScript=e,cc.vv.gameData.GetSelectData().state||t)AppLog.log("#####\u8fdb\u5165\u514d\u8d39"),n.playEnterFreeAni(function(){n.updateFreeGame(!0)}),n.scheduleOnce(function(){n.showFreeGameUI(!0),n._symbolScript&&n._symbolScript.forEach(function(e){e.enterBonusGame()})},.3);else{var o=cc.vv.gameData.GetBounusData();if(o.state){var s=n.isAddCoin(o.data);n.updateFreeGame(!1,s)}else a()}}));case 1:case"end":return a.stop()}},a)}))()},isAddCoin:function(e){for(var t in e)if(e[t].addpool>0||e[t].addcoin>0)return!0;return!1},updateFreeGame:function(e,t){var n=this;if(this.scheduleOnce(function(){n._symbolScript&&n._symbolScript.forEach(function(e){e.moveCoinOrJackpot()})},.5),e)this.reConnectShowPressStart(3);else{var a=t?3:.5;this.scheduleOnce(function(){n._nextStep&&(n._nextStep(),n._nextStep=null)},a)}},freeGameOver:function(e){var t=cc.find("safe_node/slots/descui/freetimes",this.node);cc.tween(t).to(1,{opacity:0}).call(function(){t.active=!1,t.opacity=255,cc.find("Canvas/safe_node/LMSlots_Collect_Puzzle").active=!0}).start(),this.playCollectCoin(e)},playEnterFreeAni:function(e){Global.playHSEffect("bonus_transiton"),cc.vv.gameData.playSpine(this._startSpine,"animation",!1,function(){e&&e()})},onPressStart:function(){var e=this;this._pressShow&&(this._pressShow=!1,this._pressNode.stopAllActions(),Global.playHSEffect("button_start"),cc.tween(this._pressStartSpine).to(.5,{scale:0},{easing:"backInOut"}).call(function(){e._pressNode.active=!1,e.scheduleOnce(function(){e.sendEnterFreeeGame()},.5)}).start())},showFreeGameUI:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;e?Global.SlotsSoundMgr.playBgm("bonus_bgm"):Global.SlotsSoundMgr.stopBgm(),this.changeBg(e),cc.find("safe_node/slots/descui/desc1",this.node).active=!e,cc.find("safe_node/slots/descui/freetimes",this.node).active=e,this.updateFreetimes(t,!0)},updateFreetimes:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=cc.vv.gameData.GetAtlasByName("base");if(cc.find("safe_node/slots/descui/freetimes/freecount",this.node).getComponent(cc.Sprite).spriteFrame=n.getSpriteFrame("theme132_cnt"+e),3==e&&!t){var a=cc.find("safe_node/slots/descui/freetimes/respin",this.node);a.active=!0,cc.vv.gameData.playSpine(a,"animation",!1,null)}},playCollectCoin:function(e){this._collectSpine.active=!0;var t=0,n=0,a=cc.find("safe_node",this.node),o=cc.vv.gameData.GetBottomScript().getWinLabelNor();this._collectResultSp.position=a.convertToNodeSpaceAR(o.convertToWorldSpaceAR(cc.v2(0,0)));var s=this;(function i(){if(t>=e.length)return AppLog.log("###\u9000\u51fa\u6536\u96c6"),void s.scheduleOnce(function(){s.playEnterFreeAni(function(){cc.vv.gameData.GetBottomScript().SetWin(0),s.collectOverHandle()}),s.scheduleOnce(function(){cc.vv.gameData.GetSlotsScript().resetEnterFreeCards(),s.showFreeGameUI(!1)},.5)},1);var c=s.getBonusDataByindex(t+1);if(c){var r=e[t].node;if(c.pool>0)if(cc.find("topbag",r).active){var l=cc.find("topbag/spine",r);cc.vv.gameData.playSpine(l,"animation",!1,null);var u=cc.vv.gameData.getPoolbyType(c.pool);n+=u,s.scheduleOnce(function(){s.collectChangeFrameColor(cc.find("topbag",r)),s.showJackpotCollectUI(c.pool,u)},.5),s.scheduleOnce(function(){cc.vv.gameData.GetBottomScript().SetWin(n),cc.vv.gameData.clearBonusDataPool(t+1),i()},6)}else i();else if(c.coin>0){if(cc.find("bottombg",r).active){var p=cc.find("bottombg/spine",r);cc.vv.gameData.playSpine(p,"animation",!1,null);var m=a.convertToNodeSpaceAR(p.convertToWorldSpaceAR(cc.v2(0,0))),h=a.convertToNodeSpaceAR(o.convertToWorldSpaceAR(cc.v2(0,0)));s._collectSpine.getComponent(sp.Skeleton).setAnimation(0,"animation",!1);var d=cc.v2(h.x,h.y).sub(cc.v2(m.x,m.y)),_=d.mag();s._collectSpine.scale=_/460;var f=d.signAngle(cc.v2(1,0));s._collectSpine.angle=-f*cc.macro.DEG+90,s._collectSpine.position=m,n+=c.coin,Global.playHSEffect("bonus_hit"),s.collectChangeFrameColor(cc.find("bottombg",r)),s.scheduleOnce(function(){s._collectResultSp.active=!0,s._collectResultSp.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),cc.vv.gameData.GetBottomScript().SetWin(n)},.5)}t++,s.scheduleOnce(function(){i()},1)}else t++,i()}else t++,i()})()},showJackpotCollectUI:function(e,t){for(var n,a=cc.find("safe_node/freeui/jackpotui",this.node),o=cc.find("mainnode",a),s=cc.find("framebg",o),i=cc.find("bottomdesc",o),c=1;c<5;c++)e==c?(n=cc.find("head"+c,o)).active=!0:cc.find("head"+c,o).active=!1;var r=cc.vv.gameData.GetAtlasByName("dialog1"),l=cc.find("bg",o),u=this.getJackputUIBgSpritename(e);l.getComponent(cc.Sprite).spriteFrame=r.getSpriteFrame(u),a.active=!0,o.scale=0,i.scale=0,n.scale=0,s.scale=0,Global.playHSEffect("bonus_collect"),cc.tween(o).to(.4,{scale:1},{easing:"backInOut"}).call(function(){cc.tween(n).to(.3,{scale:1},{easing:"backInOut"}).start(),cc.tween(s).to(.6,{scale:1},{easing:"backInOut"}).call(function(){var e=cc.find("mainnode/framebg/totalnum",a);Global.doRoallNumEff(e,0,t,1,function(){Global.playHSEffect("bonus_end")},null,0,!0)}).start(),cc.tween(i).to(.3,{scale:1},{easing:"backInOut"}).start()}).start(),this.scheduleOnce(function(){cc.tween(o).to(.5,{scale:0}).call(function(){a.active=!1}).start()},5)},getJackputUIBgSpritename:function(e){switch(e){case 1:return"theme132_dialog_bg4";case 2:return"theme132_dialog_bg3";case 3:return"theme132_dialog_bg4";case 4:return"theme132_dialog_bg1"}},collectChangeFrameColor:function(e){e.color=cc.color(64,91,255)},collectOverHandle:function(){cc.vv.gameData.GetSlotsScript().freeOverHideObj(),cc.vv.gameData.clearBonusState()},getBonusDataByindex:function(e){var t=cc.vv.gameData.GetBounusData().data;for(var n in t)if(t[n].idx==e)return t[n];return null},getRotationAngle:function(e){switch(e){case 1:return-12;case 7:return-18;case 13:return-35;case 2:case 8:return-2;case 14:return-3;case 3:return-20;case 4:return-10;case 10:return-35;case 5:return 5;case 12:return 10;case 6:return-33;case 9:return 15;case 11:return-15}return 0},changeLightAngleAndScale:function(e,t,n,a,o,s){var i=t.convertToWorldSpaceAR(cc.v2(0,0)),c=e.convertToWorldSpaceAR(cc.v2(0,0)),r=i.x-c.x,l=i.y-c.y,u=cc.v2(r,l),p=u.signAngle(cc.v2(0,1))/Math.PI*180;e.angle=p*a+o;var m=Math.abs(u.mag());e.scale=m/s},getScaleMul:function(e,t){var n=cc.v2(t.x,t.y).sub(cc.v2(e.x,e.y)),a=n.mag();this._flash.scale=a/220;var o=n.signAngle(cc.v2(1,0));switch(this._flash.angle=-o*cc.macro.DEG-90,this._flash.position=e,pos){case 1:case 2:return 1.5;case 3:case 4:case 5:return 1.3;case 6:case 7:case 8:case 9:return 1.1;case 10:case 11:case 12:return.75;case 13:case 14:return.45}return 1},onChangeBetValue:function(e){var t=cc.find("safe_node/slots/descui/desc1",this.node);if(t.active){var n=cc.find("safe_node/slots/descui/desc1/changespine",this.node),a=cc.vv.gameData.GetBetIdx(),o=cc.vv.gameData.GetAtlasByName("base"),s=cc.find("num",t);a<this._maxBetEnterBonus?6!=cc.vv.gameData.getNeedBonusIconNum()&&(Global.playHSEffect("board_change"),cc.vv.gameData.playSpine(n,"animation",!1,null),cc.vv.gameData.setBonusIconNum(6),s.getComponent(cc.Sprite).spriteFrame=o.getSpriteFrame("theme132_tip2")):5!=cc.vv.gameData.getNeedBonusIconNum()&&(Global.playHSEffect("board_change"),cc.vv.gameData.playSpine(n,"animation",!1,null),cc.vv.gameData.setBonusIconNum(5),s.getComponent(cc.Sprite).spriteFrame=o.getSpriteFrame("theme132_tip1"))}},changeBg:function(e){var t=cc.find("safe_node/bg",this.node).getComponent("ImgSwitchCmp");e?t.setIndex(1):t.setIndex(0)},sendEnterFreeeGame:function(){var e={c:MsgId.SLOT_SUBGAME_DATA,data:{}};e.data.rtype=1,e.gameid=cc.vv.gameData.getGameId(),cc.vv.NetManager.send(e,!0)},onRcvSubGameAction:function(e){if(200==e.code)if(20==e.data.rtype);else if(1==e.data.rtype){if(cc.vv.gameData.GetCollectGame()&&null==e.data.chipGame)return cc.vv.gameData.GetBottomScript().SendSpinReq(),void cc.vv.gameData.SetCollectGame(!1);var t=cc.vv.gameData.GetSelectData();this._isReConnect&&t.state?(cc.vv.gameData.GetSlotsScript().autoStartSpin(),this._isReConnect=!1):this._nextStep&&(this._nextStep(),this._nextStep=null)}}}),cc._RF.pop()},{}],ThePanda_GameData:[function(e,t,n){"use strict";cc._RF.push(t,"2ad16Sx+AhDjY+NsMLubJ5K","ThePanda_GameData"),cc.Class({extends:e("LMSlots_GameData_Base"),properties:{_needBonusNum:6,_isCollectGame:!1},init:function(e,t,n){this._super(e,t,n),this._bonusData=this._deskInfo.bonusData,this._selectData=this._deskInfo.select,this._poolList=this._bonusData.poolList},OnRcvNetSpine:function(e){200==e.code&&(this._bonusData=e.bonusData,this._selectData=e.select,this._bonusData&&(this._poolList=this._bonusData.poolList),this._super(e))},getPoolbyType:function(e){return this._poolList?this._poolList[e-1]:0},GetBounusData:function(){return this._bonusData},clearBonusState:function(){this._bonusData.state=!1},GetSelectData:function(){return this._selectData},clearSelectState:function(){this._selectData.state=!1},SetGameScript:function(e){this._freeGame=e},GetFreeGameScript:function(){return this._freeGame},SetCollectGame:function(e){this._isCollectGame=e},GetCollectGame:function(){return this._isCollectGame},isFreeGame:function(){return this._bonusData.state},getNeedBonusIconNum:function(){return this._needBonusNum},setBonusIconNum:function(e){this._needBonusNum=e},clearBonusDataPool:function(e){var t=this._bonusData.data;for(var n in t)if(t[n].idx==e){t[n].pool=0;break}},playSpine:function(e,t,n,a){if(e){e.active=!0;var o=e.getComponent(sp.Skeleton);o&&(o.setAnimation(0,t,n),o.setCompleteListener(function(){a&&a()}))}}}),cc._RF.pop()},{LMSlots_GameData_Base:void 0}],ThePanda_Logic:[function(e,t,n){"use strict";cc._RF.push(t,"c13f0T33BVE9IyL+ffFNJ+S","ThePanda_Logic"),cc.Class({extends:e("LMSlots_Logic_Base"),properties:{},onLoad:function(){Global.playHSMusic=function(e,t){cc.vv.AudioManager.playBgm("games/ThePanda/",e,!0,t)},Global.playHSEffect=function(e,t,n,a){cc.vv.AudioManager.playEff("games/ThePanda/",e,!0,t,n,a)},Global.stopHSEffect=function(e){cc.vv.AudioManager.stopEffectByName(e)};var e=this.node.addComponent("ThePanda_FreeGame");cc.vv.gameData.SetGameScript(e),this._super()}}),cc._RF.pop()},{LMSlots_Logic_Base:void 0}],ThePanda_Slots:[function(e,t,n){"use strict";function a(e,t,n,a,o,s,i){try{var c=e[s](i),r=c.value}catch(e){return void n(e)}c.done?t(r):Promise.resolve(r).then(a,o)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(o,s){var i=e.apply(t,n);function c(e){a(i,o,s,c,r,"next",e)}function r(e){a(i,o,s,c,r,"throw",e)}c(void 0)})}}cc._RF.push(t,"81c34eqeBdG1q6RAXPpSL3T","ThePanda_Slots"),cc.Class({extends:e("LMSlots_Slots_Base"),properties:{_symbolCount:14,_symbols:[],_stopAutoShowSymbol:!1,_enterCards:[],_reverseSpeed:.2},Init:function(){var e=this;this._enterCards=[3,2,3,4,5,6,7,2,3,4,7,2,4,7],this._topScript=cc.vv.gameData.GetTopScript(),this._bottomScript=cc.vv.gameData.GetBottomScript(),this._cfg=cc.vv.gameData.getGameCfg(),this.createSymbol(),this._bottomScript.ShowBtnsByState("idle"),this.RegisterEvent(),this.ReconnectShow(),this.node.parent.parent.getComponent("LMSlots_Puzzle").setCallback(function(t,n){console.log("---1\u6536\u96c6\u6e38\u620f\u7684callback\u903b\u8f91"),e._gameInfo?(e._enterCards=e._gameInfo.resultCards,e._enterBonusData=e._gameInfo.bonusData):(e._enterCards=[],e._enterBonusData=cc.vv.gameData.GetBounusData()),e._enterBonusData.data=[],cc.vv.gameData.SetCollectGame(!0),cc.vv.gameData.GetFreeGameScript().enterFreeGame(null,!0);for(var a=0;a<e._symbols.length;a++)e._symbols[a].enterCollectGame();e.hideSymbols()})},ReconnectShow:function(){var e=cc.vv.gameData.GetSelectData(),t=cc.vv.gameData.GetBounusData();if(e.state||t.state){for(var n=0;n<this._symbols.length;n++){var a=this.GetCoinData(n+1);this._symbols[n].initShowSymbol(t.cards[n],a.pool,a.coin,e.state)}e.state?cc.vv.gameData.GetFreeGameScript().reConnectShowPressStart():(cc.vv.gameData.GetFreeGameScript().showFreeGameUI(!0,t.num),this.autoStartSpin())}},autoStartSpin:function(){var e=this;this.scheduleOnce(function(){e.hideSymbols()},.5),this.scheduleOnce(function(){e.CanDoNextRound()},1)},StartMove:function(){this._super(),Global.SlotsSoundMgr.playNormalBgm()},onMsgSpine:function(e){var t=this;return o(regeneratorRuntime.mark(function n(){var a,o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t._gameInfo=e,e.select&&e.select.state&&(t._enterCards=e.resultCards,t._enterBonusData=e.bonusData),t._stopAutoShowSymbol=!1,n.next=5,t.startReverseCards(t._gameInfo.bonusData);case 5:if(t._stopTime=-1,a=cc.vv.gameData.GetBounusData(),(o=cc.vv.gameData.GetSelectData()).state&&Global.playHSEffect("bell"),a.state||o.state){n.next=13;break}return t.ShowWinTrace(),n.next=13,t.playBottomWin();case 13:return n.next=15,cc.vv.gameData.GetFreeGameScript().enterFreeGame(t._symbols);case 15:return n.next=17,t.spineOver();case 17:t.CanDoNextRound();case 18:case"end":return n.stop()}},n)}))()},spineOver:function(){var e=this;return o(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){e._nextStep=t;var n=cc.vv.gameData.GetBounusData();n&&n.state?(AppLog.log("####\u65cb\u8f6c\u7ed3\u675f:"+n.num),n.num>0?(e.onSpin(),e.scheduleOnce(function(){t()},1)):cc.vv.gameData.GetFreeGameScript().freeGameOver(e._symbols)):(cc.vv.gameData.GetSelectData().state&&e.onSpin(),e.scheduleOnce(function(){t()},.5))}));case 1:case"end":return t.stop()}},t)}))()},playBottomWin:function(){var e=this;return o(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){var n=cc.vv.gameData.GetGameWin(),a=n,o=!0,s=cc.vv.gameData.GetBounusData();(cc.vv.gameData.GetSelectData().state||s.state)&&(a=s.coin,o=!0),e.ShowBottomWin(n,a,o,function(){t()})}));case 1:case"end":return t.stop()}},t)}))()},StopMove:function(){var e=this;return o(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e._super(),AppLog.log("###\u70b9\u51fb\u505c\u6b62\u79fb\u52a8"),e._stopAutoShowSymbol=!0;case 3:case"end":return t.stop()}},t)}))()},onSpin:function(){this.hideSymbols()},hideSymbols:function(){Global.playHSEffect("reel_change");for(var e=0;e<this._symbols.length;e++)this._symbols[e].spineHideSymbol();var t=cc.vv.gameData.GetBounusData();if(t.state)cc.vv.gameData.GetFreeGameScript().updateFreetimes(t.num-1);else{this.hideAllWinningBox();var n=cc.vv.gameData.GetSelectData();n&&n.state&&cc.vv.gameData.GetFreeGameScript().updateFreetimes(2)}},startReverseCards:function(e){var t=this;return o(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.startShowCards();case 2:return e.state&&(t.showNewCoinKuangGuang(),cc.vv.gameData.GetFreeGameScript().updateFreetimes(e.num)),e.state&&0==e.num&&Global.playHSEffect("bouns_play_end"),n.next=6,t.awaitTime(.5);case 6:case"end":return n.stop()}},n)}))()},showNewCoinKuangGuang:function(){for(var e=0;e<this._symbols.length;e++)this._symbols[e].newCoinShowKuang()},startShowCards:function(){var e=this;return o(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){var n=e._gameInfo.resultCards,a=0,o=e,s=0;e._reverseSpeed=.2;var i=function(){for(var e=0;e<o._symbols.length;e++)o.showSymbols(o._symbols[e],n[e],e+1),o._symbols[e].coinSpeedLightShow(!1)},c=cc.vv.gameData.getNeedBonusIconNum()-1;(function e(){if(o._symbols[a]){8==n[a]?++s>=c?Global.playHSEffect("bonus_land_3"):cc.vv.gameData.isFreeGame()?Global.playHSEffect("bonus_land_2"):Global.playHSEffect("bonus_land_1"):Global.playHSEffect("reel_stop");var r=cc.vv.gameData.GetBounusData();s>=c&&!r.state&&(o._reverseSpeed=1.2,o._symbols.length>a+1&&o._symbols[a+1].coinSpeedLightShow(!0)),o._symbols[a].coinSpeedLightShow(!1),o.showSymbols(o._symbols[a],n[a],a+1),a++,o.scheduleOnce(function(){o._stopAutoShowSymbol?(i(),t()):e()},o._reverseSpeed)}else t()})()}));case 1:case"end":return t.stop()}},t)}))()},showSymbols:function(e,t,n){var a=this.GetCoinData(n);e.reverseSymbol(t,a)},GetCoinData:function(e){var t=cc.vv.gameData.GetBounusData().data;if(t)for(var n in t)if(t[n].idx==e)return t[n];return 0},createSymbol:function(){for(var e=this._cfg.scripts.Symbols,t=0;t<this._symbolCount;t++){var n=cc.find("reels/Panda_Symbol"+(t+1),this.node).addComponent(e);n.Init(t),this._symbols.push(n)}},ShowWinTrace:function(){for(var e=[],t=0;t<this._gameInfo.zjLuXian.length;t++)for(var n=this._gameInfo.zjLuXian[t],a=0;a<n.indexs.length;a++)e[n.indexs[a]]=1;if(this._gameInfo.scatterZJLuXian&&this._gameInfo.scatterZJLuXian.indexs)for(var o=0;o<this._gameInfo.scatterZJLuXian.indexs.length;o++){e[this._gameInfo.scatterZJLuXian.indexs[o]]=1}for(var s in e){var i=this.GetSymbolByIdx(Number(s));i&&i.playWinAnimation()}this.showWinningBox(e)},showWinningBox:function(e){var t=cc.vv.gameData.getGameCfg().winningBox,n={};for(var a in e){t[a-1].forEach(function(e){n[e]?n[e]+=1:n[e]=1})}var o=cc.find("node_frame",this.node);for(var s in n)1==n[s]&&(o.getChildByName(s).active=!0)},hideAllWinningBox:function(){for(var e=cc.find("node_frame",this.node).children,t=0,n=e.length;t<n;t++)e[t].active=!1},freeOverHideObj:function(){var e=this;return o(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.hideAllWinningBox(),t.next=3,e.playBottomWin();case 3:e._nextStep&&e._nextStep();case 4:case"end":return t.stop()}},t)}))()},GetSymbolByIdx:function(e){return this._symbols[e-1]},resetEnterFreeCards:function(){for(var e=0;e<this._symbols.length;e++){var t=this.GetEnterBonusData(e+1);this._symbols[e].resetEnterFreeSymbol(this._enterCards[e],t)}},GetEnterBonusData:function(e){if(this._enterBonusData&&this._enterBonusData.data){var t=this._enterBonusData.data;for(var n in t)if(t[n].idx==e)return t[n]}return 0},awaitTime:function(e){var t=this;return new Promise(function(n){t.scheduleOnce(function(){n()},e)})}}),cc._RF.pop()},{LMSlots_Slots_Base:void 0}],ThePanda_Symbol:[function(e,t,n){"use strict";cc._RF.push(t,"338ea0OCHFMAbXdqbuvnjbe","ThePanda_Symbol"),cc.Class({extends:e("LMSlots_Symbol_Base"),properties:{totalCoin:0,pool:0,showtype:0},onLoad:function(){this._num=cc.find("num",this.node),this._jackpot=cc.find("getjackpot",this.node),this._bottom=cc.find("bottombg",this.node),this._top=cc.find("topbag",this.node),this._kuangguang=cc.find("kuang_guang",this.node),this._kuang=cc.find("kuang",this.node),this._numscalesp=cc.find("numscalesp",this.node),this._nummovebtsp=cc.find("nummovebtsp",this.node),this._freeSymbolName=cc.vv.gameData.getGameCfg().shadowSymbolNode},initShowSymbol:function(e,t,n,a){if(this._id=e,this._pool=t,this._showNode=cc.find(this._freeSymbolName,this.node),this.playSymbolAni(1),(t||n)&&(this._kuang.active=!0),t){this.resetFrameColor(this._top);var o=cc.find("jackpotimg",this._top);this.updateJackpotImg(o,"base","theme132_s_top"+(28+t))}n&&(this.resetFrameColor(this._bottom),cc.find("totalnum",this._bottom).getComponent(cc.Label).string=Global.convertNumToShort(n,1e3,0))},ShowRandomSymbol:function(){var e=cc.vv.gameData.getGameCfg(),t=Global.random(1,e.randomSymbols.length);this._id=e.randomSymbols[t-1],e.symbol[this._id]&&e.symbol[this._id].node?(this._showNode=cc.find(e.symbol[this._id].node,this.node),this.playSymbolAni(1)):console.log("\u672a\u627e\u5230\u914d\u7f6eid:"+this._id)},reverseSymbol:function(e,t){var n=this;this._id=e,this.playSymbolAni(3),8==this._id?(this.showKuang(),this.scheduleOnce(function(){n.showCoinNum(t.addcoin,t.addpool)},.2)):this.showtype=0},showCoinNum:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e>0?(this.showtype=1,this.totalCoin+=e,this._jackpot.active=!1,this._num.active=!0,this._num.getComponent(cc.Label).string=Global.convertNumToShort(e,1e3,0),this._num.scaleY=0,cc.tween(this._num).to(.2,{scaleY:1}).start()):t>0?(this.showtype=2,this.pool=t,this._num.active=!1,this._jackpot.active=!0,this.updateJackpotImg(this._jackpot,"symbol","theme132_s_"+(28+t)),this._jackpot.scaleY=0,cc.tween(this._jackpot).to(.2,{scaleY:1}).start()):n&&cc.vv.gameData.isFreeGame()&&Global.playHSEffect("bonus_land_3")},playSymbolAni:function(e){if(this._showNode&&this._state!=e){this._showNode.active=!0;var t=this._showNode.getComponent(sp.Skeleton),n=8==this._id?"animationj_"+e:"animation"+this._id+"_"+e;t.setAnimation(0,n,!1),this._state=e}},playScatterAnimation:function(e){if(1==this._id){var t=cc.vv.gameData.getGameCfg(),n=cc.find(t.symbol[this._id].win_node,this.node);e?(n.active=!0,n.getComponent(sp.Skeleton).setAnimation(0,"animation",!0)):n.active=!1}},spineHideSymbol:function(){var e=cc.vv.gameData.GetBounusData(),t=cc.vv.gameData.GetSelectData();e.state||t.state?cc.find("s1",this.node).active=!1:this.hideOtherNode(),this.playSymbolAni(2)},hideOtherNode:function(){for(var e=this.node.children,t=0,n=e.length;t<n;t++)"s1"!=e[t].name&&(e[t].active=!1);this.clearData()},enterBonusGame:function(){8==this._id&&(this._kuang.active=!0),this._showNode.active=!1,this._showNode=cc.find(this._freeSymbolName,this.node),this.playSymbolAni(1)},enterCollectGame:function(){this._kuang.active=!1,this.totalCoin=0,this._showNode=cc.find(this._freeSymbolName,this.node),this._showNode.active=!0},moveCoinOrJackpot:function(){1==this.showtype?this.moveCoinToBottom():2==this.showtype&&this.moveJackpotToTop()},moveCoinToBottom:function(){var e=this,t=cc.instantiate(this._num);t.parent=this.node,this._num.getComponent(cc.Label).string="";var n=this._bottom.position;cc.tween(t).to(.3,{scale:0}).call(function(){cc.vv.gameData.playSpine(e._numscalesp,"animation",!1,null),Global.playHSEffect("bonus_collect"),e.resetFrameColor(e._bottom),cc.tween(t).to(1,{scale:1},{easing:"backInOut"}).call(function(){cc.vv.gameData.playSpine(e._nummovebtsp,"animation1",!1,null),cc.tween(t).to(1,{position:n,scale:0},{easing:"backInOut"}).call(function(){t.destroy(),cc.find("totalnum",e._bottom).getComponent(cc.Label).string=Global.convertNumToShort(e.totalCoin,1e3,0)}).start()}).start()}).start()},moveJackpotToTop:function(){var e=this,t=cc.instantiate(this._jackpot);t.parent=this.node,this._jackpot.active=!1;var n=this._top.position;cc.tween(t).to(.3,{scale:0}).call(function(){cc.vv.gameData.playSpine(e._numscalesp,"animation",!1,null),Global.playHSEffect("bonus_collect"),e.resetFrameColor(e._top),cc.tween(t).to(1,{scale:1},{easing:"backInOut"}).call(function(){cc.vv.gameData.playSpine(e._nummovebtsp,"animation2",!1,null),cc.tween(t).to(1,{position:n,scale:0},{easing:"backInOut"}).call(function(){t.destroy();var n=cc.find("jackpotimg",e._top);n.active=!0,e.updateJackpotImg(n,"base","theme132_s_top"+(28+e.pool))}).start()}).start()}).start()},updateJackpotImg:function(e,t,n){var a=cc.vv.gameData.GetAtlasByName(t);e.getComponent(cc.Sprite).spriteFrame=a.getSpriteFrame(n)},coinSpeedLightShow:function(e){var t=cc.find("speedlight",this.node);t.active=e,e&&(cc.vv.gameData.playSpine(t,"animation",!1,null),Global.shakeNode(this.node,3,1,this.node.position),Global.playHSEffect("bonus_notify"))},clearData:function(){cc.find("totalnum",this._bottom).getComponent(cc.Label).string="",cc.find("jackpotimg",this._top).active=!1},hideFreeObject:function(){this._bottom.active=!1,this._top.active=!1,this._num.active=!0,"s1"!=this._showNode.name&&(this._showNode.active=!1,this._showNode=cc.find("s1",this.node),this.playSymbolAni(1))},showKuang:function(){var e=cc.vv.gameData.GetBounusData();!this._kuang.active&&e.state&&(this._kuang.active=!0,this._kuangguang.active=!0,cc.vv.gameData.playSpine(this._kuangguang,"animation1",!0,null))},newCoinShowKuang:function(){var e=this;this._kuangguang.active&&cc.vv.gameData.playSpine(this._kuangguang,"animation2",!1,function(){e._kuangguang.active=!1})},resetEnterFreeSymbol:function(e,t){cc.find("s2",this.node).active=!1,this._id=e,this._showNode=cc.find("s1",this.node),this.playSymbolAni(1),this._bottom.active=!1,this._top.active=!1,this.showCoinNum(t.coin,t.pool,!1),this.totalCoin=0,this._kuang.active=!1},resetFrameColor:function(e){e.active=!0,e.color=cc.color(255,255,255)}}),cc._RF.pop()},{LMSlots_Symbol_Base:void 0}]},{},["ThePanda_Bottom","ThePanda_Cfg","ThePanda_FreeGame","ThePanda_GameData","ThePanda_Logic","ThePanda_Slots","ThePanda_Symbol"]);
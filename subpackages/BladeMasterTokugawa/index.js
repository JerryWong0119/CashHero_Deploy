window.__require=function e(t,n,a){function o(r,s){if(!n[r]){if(!t[r]){var c=r.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(i)return i(c,!0);throw new Error("Cannot find module '"+r+"'")}r=c}var u=n[r]={exports:{}};t[r][0].call(u.exports,function(e){return o(t[r][1][e]||e)},u,u.exports,e,t,n,a)}return n[r].exports}for(var i="function"==typeof __require&&__require,r=0;r<a.length;r++)o(a[r]);return o}({BladeMasterTokugawa_Cfg:[function(e,t,n){"use strict";var a;function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}cc._RF.push(t,"f9925xi4/9FWL0YODifaxw0","BladeMasterTokugawa_Cfg");var i={symbol:(a={},o(a,1,{node:"s1",win_node:"w1",win_ani:{name:"animation2",zIndex:300}}),o(a,2,{node:"s2",win_node:"w2",win_ani:{name:"animation3",zIndex:300},stop_ani:{name:"animation",zIndex:100},idle_ani:{name:"animation2",zIndex:200},trigger_ani:{name:"animation3",zIndex:400}}),o(a,3,{node:"s3",win_node:"w3",win_ani:{name:"animation2",zIndex:300}}),o(a,4,{node:"s4",win_node:"w3",win_ani:{name:"animation2",zIndex:300},unlockAni:"animation1"}),o(a,5,{node:"s5",win_node:"w5",win_ani:{name:"animation",zIndex:300}}),o(a,6,{node:"s6",win_node:"w6",win_ani:{name:"animation",zIndex:300}}),o(a,7,{node:"s7",win_node:"w7",win_ani:{name:"animation",zIndex:300}}),o(a,8,{node:"s8",win_node:"w8",win_ani:{name:"animation",zIndex:300}}),o(a,9,{node:"s9",win_node:"w9",win_ani:{name:"animation",zIndex:300}}),o(a,10,{node:"s10",win_node:"w10",win_ani:{name:"animation",zIndex:300}}),o(a,11,{node:"s11",win_node:"w11",win_ani:{name:"animation",zIndex:300}}),o(a,12,{node:"s12",win_node:"w12",win_ani:{name:"animation",zIndex:300}}),o(a,13,{node:"s13",win_node:"w13",win_ani:{name:"animation",zIndex:300}}),o(a,14,{node:"s14",win_node:"w14",win_ani:{name:"animation",zIndex:300}}),o(a,101,{node:"s1",win_node:"w1",win_ani:{name:"animation2",zIndex:300}}),o(a,102,{node:"s1",win_node:"w1",win_ani:{name:"animation2",zIndex:300}}),o(a,2001,{node:"s2001",win_node:"w2001",win_ani:{name:"animation3",zIndex:300}}),o(a,2101,{node:"s2001",win_node:"w2001",win_ani:{name:"animation3",zIndex:300},labelAni:""}),o(a,2102,{node:"s2001",win_node:"w2001",win_ani:{name:"animation3",zIndex:300},labelAni:""}),o(a,2201,{node:"s2201",win_node:""}),o(a,2301,{node:"s2301",win_node:""}),o(a,2401,{node:"s2401",win_node:""}),a),scatterId:2,scripts:{Top:"LMSlots_Top_Base",Bottom:"LMSlots_Bottom_Base",Slots:"BladeMasterTokugawa_Slots",Reels:"BladeMasterTokugawa_Reel",Symbols:"BladeMasterTokugawa_symbol"},col:5,row:8,symbolPrefab:"LMSlots_Symbol",symbolSize:{height:92.5},helpItems:["games/BladeMasterTokugawa/prefab/LMSlots_Help_item1","games/BladeMasterTokugawa/prefab/LMSlots_Help_item2","games/BladeMasterTokugawa/prefab/LMSlots_Help_item3","games/BladeMasterTokugawa/prefab/LMSlots_Help_item4"],randomSymbols:[3,5,6,7,8,9,10,11,12,13,14],kuang:"kuang",speed:3e3,reelStopInter:.2,auto_stop_time:1,autoModelDelay:1,AddAntiTime:1.5,bounceInfo:{distance:20,time:.1},normalBgm:"base_bgm",reelStateInfo:[{id:[2],mini:3,counts:[1,1,1,1,1],antiNode:"node_anti",path:"games/BladeMasterTokugawa/",reelStopSound:"reel_stop",symbolStopSound:"scatter_notify",antSound:"reel_notify",antSpeed:2e3}],isWild:function(e){return 1==e||101==e||102==e||2001==e||2101==e||2102==e},isMultipleWild:function(e){return 101==e||2101==e||102==e||2102==e}};t.exports=i,cc._RF.pop()},{}],BladeMasterTokugawa_FlowCtrl:[function(e,t,n){"use strict";function a(e,t,n,a,o,i,r){try{var s=e[i](r),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(a,o)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(o,i){var r=e.apply(t,n);function s(e){a(r,o,i,s,c,"next",e)}function c(e){a(r,o,i,s,c,"throw",e)}s(void 0)})}}cc._RF.push(t,"a1e98nJ5mdHqoVnXOoo0yei","BladeMasterTokugawa_FlowCtrl"),cc.Class({extends:cc.Component,enterRoom:function(){return o(regeneratorRuntime.mark(function e(){var t,n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=SlotsFacade.dm.GetTotalFree(),(n=SlotsFacade.dm.GetFreeTime())>0&&(SlotsFacade.bottomCmp.ShowFreeModel(!0,t-n,t),a=cc.vv.gameData.GetTotalFreeWin(),SlotsFacade.bottomCmp.SetWin(a),SlotsFacade.topCmp.SetBackLobby(!1),SlotsFacade.bottomCmp.ShowBtnsByState("moveing_1"),SlotsFacade.mainPanel.showBg(!0),SlotsFacade.slots.setBorderVisible(!1),SlotsFacade.slots.showSlotsState(!0),SlotsFacade.freeGame.reconnect(),SlotsFacade.slots.CanDoNextRound());case 3:case"end":return e.stop()}},e)}))()},spinEnd:function(){var e=this;return o(regeneratorRuntime.mark(function t(){var n,a,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return SlotsFacade.dm.isFistTriggerFree()||SlotsFacade.slots.resetReelBg(),t.next=3,SlotsFacade.freeGame.processUnlock();case 3:return t.next=5,SlotsFacade.slots.changeWildMultiple();case 5:return t.next=7,e.jpGame();case 7:return SlotsFacade.slots.ShowWinTrace(),n=cc.vv.gameData.GetGameWin(),a=n,cc.vv.gameData.GetTotalFree()>0&&(a=cc.vv.gameData.GetGameTotalFreeWin()),t.next=13,new Promise(function(e){SlotsFacade.slots.ShowBottomWin(n,a,0==SlotsFacade.dm.GetTotalFree(),e)});case 13:if(!SlotsFacade.dm.isTriggerFree()){t.next=30;break}return SlotsFacade.bottomCmp.ShowBtnsByState("moveing_1"),t.next=17,SlotsFacade.slots.playScatter(SlotsFacade.dm.getScatterIndexs());case 17:return SlotsFacade.dm.isFistTriggerFree()&&SlotsFacade.slots.Backup(),t.next=20,SlotsFacade.popup.showWinFreeCnt(SlotsFacade.dm.triggerFreeCnt(),SlotsFacade.dm.isFistTriggerFree());case 20:if(!SlotsFacade.dm.isFistTriggerFree()){t.next=26;break}return SlotsFacade.mainPanel.showSceneTransition(),t.next=24,SlotsFacade.delayTime(2);case 24:return t.next=26,e.enterFreeGame();case 26:return t.next=28,SlotsFacade.delayTime(1);case 28:t.next=47;break;case 30:if(!cc.vv.gameData.hasFree()){t.next=33;break}t.next=47;break;case 33:if(!cc.vv.gameData.isLastEndFree()){t.next=47;break}return SlotsFacade.bottomCmp.ShowBtnsByState("moveing_1"),o=SlotsFacade.dm.getFreeWinCoin(),t.next=38,SlotsFacade.popup.showWinGold(o);case 38:return SlotsFacade.mainPanel.showSceneTransition(),t.next=41,SlotsFacade.delayTime(1);case 41:return SlotsFacade.slots.Resume(),e.enterNormalGame(),t.next=45,SlotsFacade.delayTime(2.8);case 45:return t.next=47,new Promise(function(e){SlotsFacade.slots.ShowBottomWin(o,o,!0,e)});case 47:SlotsFacade.slots.CanDoNextRound();case 48:case"end":return t.stop()}},t)}))()},enterFreeGame:function(){return o(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return SlotsFacade.slots.resetReelBg(),SlotsFacade.mainPanel.showBg(!0),SlotsFacade.soundMgr.playFreeBgm(),SlotsFacade.freeGame.show(),SlotsFacade.slots.showSlotsState(!0,!0,1.5,.5),SlotsFacade.slots.setBorderVisible(!1),SlotsFacade.topCmp.SetBackLobby(!1),SlotsFacade.bottomCmp.ShowBtnsByState("moveing_1"),e.next=10,SlotsFacade.delayTime(2.5);case 10:case"end":return e.stop()}},e)}))()},enterNormalGame:function(){SlotsFacade.bottomCmp.ShowFreeModel(!1),SlotsFacade.slots.setBorderVisible(!0),SlotsFacade.mainPanel.showBg(!1),SlotsFacade.freeGame.hide(),SlotsFacade.slots.showSlotsState(!1),SlotsFacade.slots.setBorderVisible(!0),SlotsFacade.slots.clearFreeSymbols(),Global.SlotsSoundMgr.stopBgm(),SlotsFacade.soundMgr.playBgm()},jpGame:function(){return o(regeneratorRuntime.mark(function e(){var t,n,a,o,i,r,s,c,l,u,d,m,f,p,h,g;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=SlotsFacade.dm.getSpinData().jackpotInfo){e.next=3;break}return e.abrupt("return");case 3:SlotsFacade.topCmp.SetBackLobby(!1),SlotsFacade.bottomCmp.ShowBtnsByState("moveing_1"),n=0,a=0;case 7:if(!(a<t.jackpotIds.length)){e.next=24;break}return o=t.jackpotIds[a],i=t.coins[a],r=t.idxs[a],s=!1,c=r[0],2==r.length&&(s=!0,c=r[1]),l=SlotsFacade.slots.GetSymbolByIdx(c),e.next=17,l.playJp(o,s);case 17:return e.next=19,SlotsFacade.popup.showJpWinGold(o,i);case 19:n+=i,SlotsFacade.bottomCmp.SetWin(n);case 21:a++,e.next=7;break;case 24:u=SlotsFacade.dm.getSpinData().resultCards,d=0;case 26:if(!(d<t.jackpotIds.length)){e.next=43;break}m=t.idxs[d],f=[],2==m.length?(f.push(u[m[0]-1]),f.push(u[m[0]-1]+2e3)):(p=m[0])+5>40?f.push(u[p-1]):f.push(u[p-1]+2e3),h=0;case 31:if(!(h<m.length)){e.next=40;break}if((g=SlotsFacade.slots.GetSymbolByIdx(m[h])).ShowById(f[h]),h!=m.length-1){e.next=37;break}return e.next=37,g.jpToWild(2==m.length);case 37:h++,e.next=31;break;case 40:d++,e.next=26;break;case 43:return e.next=45,SlotsFacade.delayTime(.5);case 45:case"end":return e.stop()}},e)}))()}}),cc._RF.pop()},{}],BladeMasterTokugawa_FreeGame:[function(e,t,n){"use strict";function a(e,t,n,a,o,i,r){try{var s=e[i](r),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(a,o)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(o,i){var r=e.apply(t,n);function s(e){a(r,o,i,s,c,"next",e)}function c(e){a(r,o,i,s,c,"throw",e)}s(void 0)})}}cc._RF.push(t,"b567cZIZO1Cv6NHTSqxq3VQ","BladeMasterTokugawa_FreeGame"),cc.Class({extends:cc.Component,properties:{_lockItems:null,up:cc.Node,down:cc.Node,border:cc.Node},onLoad:function(){this._lockItems=[];for(var e=0;e<4;e++){var t=this.border.getChildByName("row"+(e+1)).getComponent("BladeMasterTokugawa_LockItem");this._lockItems.push(t)}this.border.y=-370},reset:function(){this._lockItems.forEach(function(e){e.reset()})},show:function(){var e=this;return o(regeneratorRuntime.mark(function t(){var n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.up.active=!0,e.down.active=!0,SlotsFacade.soundMgr.playEffect("reel_raise"),e.border.y=-370,cc.tween(e.border).delay(.5).to(1.5,{y:0}).start(),n=SlotsFacade.dm.getJungleKing(),a=0;case 7:if(!(a<e._lockItems.length)){t.next=15;break}return e._lockItems[a].show(n.tierCfg[a]-n.total),t.next=12,SlotsFacade.delayTime(.1*a);case 12:a++,t.next=7;break;case 15:case"end":return t.stop()}},t)}))()},hide:function(){this.reset(),this.up.active=!1,this.down.active=!1},reconnect:function(){var e=this;this.scheduleOnce(function(){SlotsFacade.soundMgr.playFreeBgm(),e.up.active=!0,e.down.active=!0,e.border.y=0;for(var t=SlotsFacade.dm.getJungleKing(),n=0;n<e._lockItems.length;n++){e._lockItems[n].setNeedCnt(t.tierCfg[n]-t.total)}})},processUnlock:function(){var e=this;return o(regeneratorRuntime.mark(function t(){var n,a,o,i,r,s,c,l,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(SlotsFacade.dm.inFree()){t.next=2;break}return t.abrupt("return");case 2:if(n=SlotsFacade.dm.getJungleKing(),!((a=n.idxs.length)<1)){t.next=6;break}return t.abrupt("return");case 6:if(o=n.tierCfg[n.tierCfg.length-1],i=n.total-a,!(o<=i)){t.next=10;break}return t.abrupt("return");case 10:r=0;case 11:if(!(r<a)){t.next=26;break}return s=SlotsFacade.slots.GetSymbolByIdx(n.idxs[r]),t.next=15,s.showJKAni();case 15:for(c=[],l=0;l<e._lockItems.length;l++)u=e._lockItems[l],c.push(u.minusCnt());return SlotsFacade.soundMgr.playEffect("number_add"),t.next=20,Promise.all(c);case 20:if(!(o<=++i)){t.next=23;break}return t.abrupt("break",26);case 23:r++,t.next=11;break;case 26:case"end":return t.stop()}},t)}))()}}),cc._RF.pop()},{}],BladeMasterTokugawa_GameData:[function(e,t,n){"use strict";cc._RF.push(t,"07fc4IoGVtFNauGzErIlmrF","BladeMasterTokugawa_GameData"),cc.Class({extends:e("LMSlots_GameData_Base"),properties:{afterProcessingCards:null},SetSubGameData:function(e){this._subGame=e},GetSubGameData:function(){return this._subGame},processResultCards:function(e){for(var t=e.concat(),n=this.getGameCfg(),a={1:2001,101:2101,102:2102},o=0;o<t.length;o++){var i=t[o];if(n.isWild(i)){var r=Math.floor(o/5),s=!1,c=!1;s=0!=r&&(n.isWild(t[o-5])&&a[t[o-5]]),c=7!=r&&n.isWild(t[o+5]),0==r?c||(t[o]=a[i]):s&&(t[o]=a[i])}}var l=this._gameInfo.jackpotInfo;if(l)for(var u=0;u<l.jackpotIds.length;u++){var d=l.idxs[u];1==d.length?t[d[0]-1]=2201:2==d.length&&(t[d[0]-1]=2301,t[d[1]-1]=2401)}return t},getMultipleWildIdxPairs:function(){for(var e=[],t=this.afterProcessingCards.concat(),n=0;n<t.length;n++){var a=n+1;if(this.isUnlockIdx(a,!0)){var o=[],i=t[n];this.getGameCfg().isMultipleWild(i)&&(i<2e3?(o.push(a),a+5<=40&&t[n+5]==i+2e3&&(o.push(a+5),t[n+5]=0)):o.push(a),e.push(o))}}return e},getSpinData:function(){return this._gameInfo},getJungleKing:function(){return this._gameInfo?this._gameInfo.jungleKing:this._deskInfo.jungleKing},hasFree:function(){return this.GetTotalFree()>0&&this.GetFreeTime()!==this.GetTotalFree()&&this.GetFreeTime()>0},inFree:function(){return this.GetTotalFree()>0&&this.GetFreeTime()!==this.GetTotalFree()},isTriggerFree:function(){return this.triggerFreeCnt()>0},triggerFreeCnt:function(){var e=this._gameInfo.freeResult;return e&&e.triFreeCnt&&e.freeInfo&&e.freeInfo.freeCnt?e.freeInfo.freeCnt:0},isFistTriggerFree:function(){return this.GetTotalFree()>0&&this.GetFreeTime()==this.GetTotalFree()},isLastEndFree:function(){return 0===this.GetFreeTime()&&this.GetTotalFree()>0},getFreeWinCoin:function(){return this._gameInfo.freeWinCoin},getScatterIndexs:function(){return this.triggerFreeCnt()>0?this._gameInfo.freeResult.freeInfo.scatterIdx.concat():[]},isUnlockIdx:function(e,t){if(e>20)return!0;if(!this.hasFree())return!1;if(this.isFistTriggerFree())return!1;t=t||!1;var n=[],a=this.getJungleKing(),o=a.total;return t||(o-=a.idxs.length),o>=3&&n.push(17,18,19),o>=7&&n.push(12,13,14),o>=11&&n.push(7,8,9),o>=15&&n.push(2,3,4),!!n.includes(e)}}),cc._RF.pop()},{LMSlots_GameData_Base:void 0}],BladeMasterTokugawa_LockItem:[function(e,t,n){"use strict";function a(e,t,n,a,o,i,r){try{var s=e[i](r),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(a,o)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(o,i){var r=e.apply(t,n);function s(e){a(r,o,i,s,c,"next",e)}function c(e){a(r,o,i,s,c,"throw",e)}s(void 0)})}}cc._RF.push(t,"b3783VEG/NOQ4fvvBMPDI51","BladeMasterTokugawa_LockItem"),cc.Class({extends:cc.Component,properties:{tenmanType:0,tenman:sp.Skeleton,mask:cc.Node,label:cc.Label,labelEffect:sp.Skeleton,wenzi:sp.Skeleton,taishaniconguang:sp.Skeleton,cnt:0},onLoad:function(){this.reset()},reset:function(){this.tenman.node.active=!1,this.mask.active=!0,this.label.node.active=!1,this.labelEffect.node.active=!1,this.wenzi.node.active=!1,this.taishaniconguang.node.active=!1,this.cnt=0},show:function(e){var t=this;return o(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t.mask.opacity=255,t.reset(),t.cnt=e,t.lock(e);case 4:case"end":return n.stop()}},n)}))()},hide:function(){var e=this;return o(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.unlock();case 2:return t.next=4,new Promise(function(t){cc.tween(e.mask).to(.5,{opacity:0}).call(function(){t()}).start()});case 4:case"end":return t.stop()}},t)}))()},lock:function(e){var t=this;return o(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.label.string=e.toString(),n.next=3,new Promise(function(e){cc.tween(t.node).call(function(){SlotsFacade.soundMgr.playEffect("vine1"),t.tenman.node.active=!0,t.tenman.setAnimation(0,["animation1","animation2"][t.tenmanType],!1),t.tenman.setCompleteListener(function(){t.tenman.setCompleteListener(null),t.tenman.setAnimation(0,["animation3","animation4"][t.tenmanType],!0)})}).delay(.7).call(function(){SlotsFacade.soundMgr.playEffect("number_appear"),t.labelEffect.node.active=!0,t.labelEffect.setAnimation(0,"animation",!1),t.labelEffect.setCompleteListener(function(){t.labelEffect.setCompleteListener(null),t.labelEffect.node.active=!1})}).delay(.5).call(function(){t.label.node.active=!0,t.wenzi.node.active=!0,t.wenzi.setAnimation(0,"animation1",!1),t.wenzi.setCompleteListener(function(){t.wenzi.setCompleteListener(null),t.wenzi.setAnimation(0,"animation3",!0)})}).delay(.5).call(function(){e()}).start()});case 3:case"end":return n.stop()}},n)}))()},unlock:function(){var e=this;return o(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,SlotsFacade.delayTime(.5);case 2:return e.labelEffect.node.active=!0,e.labelEffect.setAnimation(0,"animation",!1),e.labelEffect.setCompleteListener(function(){e.labelEffect.node.active=!1}),e.label.node.active=!1,e.wenzi.node.active=!1,SlotsFacade.soundMgr.playEffect("vine2"),t.next=10,new Promise(function(t){e.tenman.node.active=!0,e.tenman.setAnimation(0,["animation1_1","animation2_1"][e.tenmanType],!1),e.tenman.setCompleteListener(function(){e.tenman.node.active=!1,t()})});case 10:case"end":return t.stop()}},t)}))()},setNeedCnt:function(e,t){e>0?(this.cnt=e,this.label.node.active=!0,this.label.string=e.toString(),this.wenzi.node.active=!0,this.wenzi.setAnimation(0,"animation3",!0),this.tenman.node.active=!0,this.tenman.setAnimation(0,["animation3","animation4"][this.tenmanType],!0)):this.node.active=!1},minusCnt:function(){var e=this;return o(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.cnt<1)){t.next=2;break}return t.abrupt("return");case 2:if(1!=e.cnt){t.next=8;break}return e.cnt--,t.next=6,e.hide();case 6:t.next=17;break;case 8:e.cnt--,e.label.string=e.cnt.toString(),e.labelEffect.node.active=!0,e.labelEffect.setAnimation(0,"animation",!1),e.labelEffect.setCompleteListener(function(){e.labelEffect.setCompleteListener(null),e.labelEffect.node.active=!1}),e.taishaniconguang.node.active=!0,e.taishaniconguang.setAnimation(0,"animation",!1),e.taishaniconguang.setCompleteListener(function(){e.taishaniconguang.setCompleteListener(null),e.taishaniconguang.node.active=!1}),SlotsFacade.delayTime(.5);case 17:case"end":return t.stop()}},t)}))()}}),cc._RF.pop()},{}],BladeMasterTokugawa_Logic:[function(e,t,n){"use strict";cc._RF.push(t,"a812d9pRvlMF7LqaNUegLhl","BladeMasterTokugawa_Logic"),cc.Class({extends:e("LMSlots_Logic_Base"),properties:{},onLoad:function(){this.InitCommComponent(),window.SlotsFacade=this,this.dm=cc.vv.gameData,this.mainPanel=cc.find("safe_node",this.node).addComponent("BladeMasterTokugawa_MainPanel"),this.flowCtrl=this.addComponent("BladeMasterTokugawa_FlowCtrl"),this.soundMgr=this.addComponent("BladeMasterTokugawa_Sound"),this.popup=this.mainPanel.popup_node.addComponent("BladeMasterTokugawa_Popup"),this.freeGame=this.mainPanel.slots_free.getComponent("BladeMasterTokugawa_FreeGame"),this.topCmp=cc.vv.gameData.GetTopScript(),this.bottomCmp=cc.vv.gameData.GetBottomScript(),this.slots=cc.vv.gameData.GetSlotsScript()},delayTime:function(e){var t=this;return new Promise(function(n,a){t.scheduleOnce(function(){n()},e)})},onDestroy:function(){window.SlotsFacade=null,this.dm=null}}),cc._RF.pop()},{LMSlots_Logic_Base:void 0}],BladeMasterTokugawa_MainPanel:[function(e,t,n){"use strict";cc._RF.push(t,"4efebwt4l9OPaFZq7dTWqhW","BladeMasterTokugawa_MainPanel"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.bg=this.node.getChildByName("bg"),this.bg_free=this.node.getChildByName("bg_free"),this.slots=this.node.getChildByName("slots"),this.slots_free=this.slots.getChildByName("free_frame"),this.character=this.slots.getChildByName("character"),this.extra_wild_game_node=this.slots.getChildByName("extra_wild_game_node"),this.popup_node=this.node.getChildByName("popup_node"),this.transition_node=this.node.getChildByName("transition_node"),this.spineSceneTransition=this.transition_node.getChildByName("spine").getComponent(sp.Skeleton)},showBg:function(e){this.bg_free.active=e,this.character.active=!e},showSceneTransition:function(e){var t=this;SlotsFacade.soundMgr.playEffect("wow"),this.spineSceneTransition.node.active=!0,this.spineSceneTransition.setAnimation(0,"skill",!1),this.spineSceneTransition.setCompleteListener(function(){t.spineSceneTransition.setCompleteListener(null),t.spineSceneTransition.node.active=!1,e&&e()})}}),cc._RF.pop()},{}],BladeMasterTokugawa_Popup:[function(e,t,n){"use strict";function a(e,t,n,a,o,i,r){try{var s=e[i](r),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(a,o)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(o,i){var r=e.apply(t,n);function s(e){a(r,o,i,s,c,"next",e)}function c(e){a(r,o,i,s,c,"throw",e)}s(void 0)})}}cc._RF.push(t,"47a6fRsND5P/5LhRjLXy++4","BladeMasterTokugawa_Popup"),cc.Class({extends:cc.Component,properties:{bg:cc.Node},onLoad:function(){this.bg=this.node.getChildByName("bg")},showBg:function(e){this.bg.active=e},showWinGold:function(e){var t=this;return o(regeneratorRuntime.mark(function n(){var a,o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return SlotsFacade.soundMgr.playEffect("free_dialog_collect_show"),t.showBg(!0),(a=t.node.getChildByName("panel_win_coin")).active=!0,a.scale=0,a.getChildByName("label").getComponent("LabelRollCmp").startRoll(0,e),(o=a.getChildByName("btn_ok")).getComponent(cc.Button).interactable=!0,n.next=10,new Promise(function(e){cc.tween(a).to(.5,{scale:1},{easing:"backOut"}).start();var n=cc.find("theme171_free_more_you_win",a);n.scale=0,cc.tween(n).delay(.2).to(.5,{scale:1},{easing:"backOut"}).start();var i=cc.find("label",a);i.scale=0,cc.tween(i).delay(.2).to(.5,{scale:1},{easing:"backOut"}).start();var r=function(){o.off(cc.Node.EventType.TOUCH_END),o.getComponent(cc.Button).interactable=!1,SlotsFacade.soundMgr.playEffect("common_click"),cc.tween(a).to(.5,{scale:0},{easing:"backIn"}).call(function(){t.showBg(!1),a.active=!1,e()}).start()};cc.vv.gameData.checkAutoPlay(o,r),o.on(cc.Node.EventType.TOUCH_END,function(){o.stopAllActions(),r()})});case 10:case"end":return n.stop()}},n)}))()},showJpWinGold:function(e,t){var n=this;return o(regeneratorRuntime.mark(function a(){var o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return SlotsFacade.soundMgr.playEffect("jp_popup_in"),n.showBg(!0),(o=n.node.getChildByName("panel_win_jp_coin")).active=!0,o.scale=0,o.getChildByName("label").getComponent("LabelRollCmp").startRoll(0,t),o.getChildByName("bg").getComponent("ImgSwitchCmp").setIndex(e-1),o.getChildByName("spine_title").getComponent(sp.Skeleton).setAnimation(0,"animation"+[0,5,4,3,1,2][e],!0),a.next=11,new Promise(function(e){cc.tween(o).to(.5,{scale:1},{easing:"backOut"}).start(),cc.tween(o).delay(4).to(.5,{scale:0},{easing:"backIn"}).call(function(){n.showBg(!1),o.active=!1,SlotsFacade.soundMgr.playEffect("popup_out"),e()}).start()});case 11:case"end":return a.stop()}},a)}))()},showWinFreeCnt:function(e,t){var n=this;return o(regeneratorRuntime.mark(function a(){var o,i;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n.showBg(!0),(o=n.node.getChildByName("panel_win_free_cnt")).active=!0,o.scale=0,o.getChildByName("label").getComponent(cc.Label).string=e.toString(),(i=o.getChildByName("btn_ok")).getComponent(cc.Button).interactable=!0,i.active=t,a.next=10,new Promise(function(e){var a=cc.tween(o);if(a=a.to(.5,{scale:1},{easing:"backOut"}),t){SlotsFacade.soundMgr.playEffect("free_dialog_start_show");var r=function(){SlotsFacade.soundMgr.playEffect("common_click"),i.off(cc.Node.EventType.TOUCH_END),i.getComponent(cc.Button).interactable=!1,cc.tween(o).to(.5,{scale:0},{easing:"backIn"}).call(function(){n.showBg(!1),o.active=!1,SlotsFacade.soundMgr.playEffect("popup_out"),e()}).start()};cc.vv.gameData.checkAutoPlay(i,r),i.on(cc.Node.EventType.TOUCH_END,function(){i.stopAllActions(),r()})}else SlotsFacade.soundMgr.playEffect("free_dialog_more_show"),a=a.delay(1).to(.5,{scale:0},{easing:"backIn"}).call(function(){n.showBg(!1),o.active=!1,e()}),cc.find("label",o).scale=0,cc.tween(cc.find("label",o)).delay(.2).to(.5,{scale:1},{easing:"backOut"}).start();a.start()});case 10:case"end":return a.stop()}},a)}))()}}),cc._RF.pop()},{}],BladeMasterTokugawa_Reel:[function(e,t,n){"use strict";function a(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=o(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,r=!0,s=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return r=e.done,e},e:function(e){s=!0,i=e},f:function(){try{r||null==a.return||a.return()}finally{if(s)throw i}}}}function o(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}cc._RF.push(t,"cf1e1frK2pJF4jXt+9Ivfy+","BladeMasterTokugawa_Reel"),cc.Class({extends:e("LMSlots_Reel_Base"),properties:{bg:cc.Node},Init:function(e,t,n){this._super(e,t,n),this.bg=cc.find("reels_bg/reel_bg"+(this._reelIdx+1),this.node.parent.parent)},ShowAntiEffect:function(e,t){if(this._super(e,t),e){var n=cc.find("mask/"+t,this.node);if(n)n.active=e,n.getComponent(sp.Skeleton).setAnimation(0,"animation1",!1)}},changeReelBg:function(e){var t=this.bg.getComponent("ImgSwitchCmp");t&&(e?t.setIndex(1):t.setIndex(0))},playReelStop:function(){this._super();for(var e=0;e<this._symbols.length;e++){var t,n=this._symbols[e],o=a(this._reelState);try{for(o.s();!(t=o.n()).done;){var i=t.value;if(i.isStop&&i.id.includes(n.GetShowId()))return void this.changeReelBg(!0)}}catch(e){o.e(e)}finally{o.f()}}}}),cc._RF.pop()},{LMSlots_Reel_Base:void 0}],BladeMasterTokugawa_Slots:[function(e,t,n){"use strict";function a(e,t,n,a,o,i,r){try{var s=e[i](r),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(a,o)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(o,i){var r=e.apply(t,n);function s(e){a(r,o,i,s,c,"next",e)}function c(e){a(r,o,i,s,c,"throw",e)}s(void 0)})}}function i(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=r(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o,i=!0,s=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw o}}}}function r(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}cc._RF.push(t,"8413b5DEmVLzZOc+3yshOTx","BladeMasterTokugawa_Slots"),cc.Class({extends:e("LMSlots_Slots_Base"),properties:{},Init:function(){this._super()},StartMove:function(){this._super(),0==SlotsFacade.dm.GetTotalFree()&&SlotsFacade.soundMgr.playBgm(),this.resetReelBg()},SetReelStateInfo:function(e){for(var t=this,n=[],a=0;a<e.length;a++)if(SlotsFacade.dm.isUnlockIdx(a+1,!1)){var o=e[a],r=a%this._col;n[r]||(n[r]=[]),n[r].push(o)}var s,c=!SlotsFacade.dm.hasFree()||SlotsFacade.dm.isFistTriggerFree(),l=i(this._cfg.reelStateInfo);try{var u=function(){var e=s.value,a=Global.copy(e);a.isStop=!1,a.isAnt=!1;for(var o=a.mini,i=Global.copy(a.counts),r=0,l=0;l<n.length;l++){var u=t._reels[l],d=n[l];a.isStop=!1,a.isAnt=!1,c&&r>=o-1&&a.counts[l]>0&&(a.isAnt=!0);var m=d.reduce(function(e,t){return a.id.includes(t)?e+1:e+0},0);r+=m,i.shift();var f=(i.length>0?i.reduce(function(e,t){return e+t}):0)+r;m>0&&f>=o&&(a.isStop=!0),u.AddReelStateInfo(Global.copy(a))}};for(l.s();!(s=l.n()).done;)u()}catch(e){l.e(e)}finally{l.f()}},onMsgSpine:function(e){this._gameInfo=e;var t=SlotsFacade.dm.processResultCards(e.resultCards);SlotsFacade.dm.afterProcessingCards=t.concat(),this.SetSlotsResult(t),this.SetReelStateInfo(t)},OnSpinEnd:function(){SlotsFacade.flowCtrl.spinEnd()},hasScatter:function(e){for(var t=cc.vv.gameData.getGameCfg().scatterId,n=this._reels[e]._symbols,a=0;a<4;a++)if(n[a].GetShowId()==t)return!0;return!1},ReconnectShow:function(){this.scheduleOnce(function(){SlotsFacade.flowCtrl.enterRoom()})},showSlotsState:function(e,t,n,a){for(var o=1;o<4;o++){var i=this._reels[o];e?t?(cc.tween(i.GetResizeHeightObjs()[0]).delay(a).to(n,{height:760}).start(),cc.tween(i.GetResizeHeightObjs()[1]).delay(a).to(n,{height:760}).start()):(i.GetResizeHeightObjs()[0].height=760,i.GetResizeHeightObjs()[1].height=760):(i.GetResizeHeightObjs()[0].height=380,i.GetResizeHeightObjs()[1].height=380)}},setBorderVisible:function(e){this.node.getChildByName("reels_frame").active=e},playScatter:function(e){var t=this;return o(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return SlotsFacade.soundMgr.playEffect("bell"),e.forEach(function(e){t.GetSymbolByIdx(e).playWinAnimation()}),n.next=4,SlotsFacade.delayTime(1.5);case 4:case"end":return n.stop()}},n)}))()},changeWildMultiple:function(){var e=this;return o(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if((n=SlotsFacade.dm.getMultipleWildIdxPairs()).forEach(function(t){var n=e.GetSymbolByIdx(t[t.length-1]);n.canPlayWinMultiple=!0,n.showMultiple(!0,1,1==t.length)}),!n||!n.length){t.next=6;break}return SlotsFacade.soundMgr.playEffect("wild"),t.next=6,SlotsFacade.delayTime(.5);case 6:case"end":return t.stop()}},t)}))()},getSymbolsByServerIds:function(e){var t=this,n=[];return e.forEach(function(e){n.push(t.GetSymbolByIdx(e))}),n},resetReelBg:function(){this._reels.forEach(function(e){e.changeReelBg(!1)})},clearFreeSymbols:function(){for(var e=0;e<this._reels.length;e++)for(var t=this._reels[e]._symbols,n=0;n<t.length;n++)n>3&&t[n].StartMove()}}),cc._RF.pop()},{LMSlots_Slots_Base:void 0}],BladeMasterTokugawa_Sound:[function(e,t,n){"use strict";cc._RF.push(t,"d1379X2K21AvoWTmFmPReZl","BladeMasterTokugawa_Sound"),cc.Class({extends:cc.Component,properties:{_soundPath:"games/BladeMasterTokugawa/",_isPlayBgm:!1},playEffect:function(e,t){return cc.vv.AudioManager.playEff(this._soundPath,e,!0,t)},stopEffectByName:function(e){cc.vv.AudioManager.stopEffectByName(e)},stopEffect:function(){cc.vv.AudioManager.stopAudio()},playBgm:function(e){e?(Global.SlotsSoundMgr.stopBgm(),Global.SlotsSoundMgr.playBgm(e)):Global.SlotsSoundMgr.playNormalBgm()},playFreeBgm:function(){this.playBgm("freegame_bgm")}}),cc._RF.pop()},{}],BladeMasterTokugawa_symbol:[function(e,t,n){"use strict";function a(e,t,n,a,o,i,r){try{var s=e[i](r),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(a,o)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(o,i){var r=e.apply(t,n);function s(e){a(r,o,i,s,c,"next",e)}function c(e){a(r,o,i,s,c,"throw",e)}s(void 0)})}}cc._RF.push(t,"ec01fUktKJNcI5tUjRca9w2","BladeMasterTokugawa_symbol"),cc.Class({extends:e("LMSlots_Symbol_Base"),properties:{canPlayWinMultiple:!1,isSingle:!1},StartMove:function(){this._super(),this.showMultiple()},showJKAni:function(){var e=this;return o(regeneratorRuntime.mark(function t(){var n,a,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(4==e._id){t.next=2;break}return t.abrupt("return");case 2:if(e._showNode&&(e._showNode.active=!1),n=e._id,!(a=cc.vv.gameData.getGameCfg()).symbol[n]||!a.symbol[n].win_node){t.next=13;break}if(e._showNode=cc.find(a.symbol[n].win_node,e.node),e._showNode.active=!0,!a.symbol[n].win_ani){t.next=13;break}if(!(o=e._showNode.getComponent(sp.Skeleton))){t.next=13;break}return t.next=13,new Promise(function(e){SlotsFacade.soundMgr.playEffect("sbonus_notify"),o.setAnimation(0,a.symbol[n].unlockAni,!1),o.setCompleteListener(function(){o.setCompleteListener(null),e()})});case 13:case"end":return t.stop()}},t)}))()},playWinAnimation:function(){this._super(),this.canPlayWinMultiple&&this.showMultiple(!0,2,this.isSingle)},showMultiple:function(e,t,n){if(e){var a=this.GetShowId();if(![101,102,2101,2102].includes(a))return;this.isSingle=n;var o=this.setAnimationToTop(!0);o.active=!0;var i=null;(i=101==a||2101==a?o.getChildByName("multiple2").getComponent(sp.Skeleton):o.getChildByName("multiple3").getComponent(sp.Skeleton)).node.active=!0,n?i.setAnimation(0,"animation2_".concat(t),2==t):i.setAnimation(0,"animation1_".concat(t),2==t)}else this.node.getChildByName("multiple2").active=!1,this.node.getChildByName("multiple3").active=!1,this.canPlayWinMultiple=!1},playJp:function(e,t){var n=this;return o(regeneratorRuntime.mark(function a(){var o,i,r,s,c,l,u,d;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n._showNode&&(n._showNode.active=!1),(o=n.setAnimationToTop(!0)).active=!0,(i=cc.find("w_jp",o)).active=!0,r="bg".concat(t?"2":"","_").concat(e),(s=i.getChildByName(r).getComponent(sp.Skeleton)).node.active=!0,s.setAnimation(0,"animation",!0),c="flash".concat(t?"2":"1"),(l=i.getChildByName(c).getComponent(sp.Skeleton)).node.active=!0,a.next=14,new Promise(function(e){l.setAnimation(0,"animation",!1),l.setCompleteListener(function(){l.setCompleteListener(null),l.node.active=!1,e()})});case 14:return u="label".concat(t?"2":"","_").concat(e),(d=i.getChildByName(u).getComponent(sp.Skeleton)).node.active=!0,d.setAnimation(0,"animation",!0),a.next=20,SlotsFacade.delayTime(1.5);case 20:case"end":return a.stop()}},a)}))()},jpToWild:function(e){var t=this;return o(regeneratorRuntime.mark(function n(){var a,o,i,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.canPlayWinMultiple=!0,t.setAnimationToTop(!1),(a=t.setAnimationToTop(!0)).active=!0,(o=cc.find("w_jp",a)).active=!0,i="flash".concat(e?"2":"1"),(r=o.getChildByName(i).getComponent(sp.Skeleton)).node.active=!0,n.next=11,new Promise(function(e){r.setAnimation(0,"animation",!1),r.setCompleteListener(function(){r.setCompleteListener(null),r.node.active=!1,e()})});case 11:t.showMultiple(!0,1,!e);case 12:case"end":return n.stop()}},n)}))()}}),cc._RF.pop()},{LMSlots_Symbol_Base:void 0}]},{},["BladeMasterTokugawa_Cfg","BladeMasterTokugawa_FlowCtrl","BladeMasterTokugawa_FreeGame","BladeMasterTokugawa_GameData","BladeMasterTokugawa_LockItem","BladeMasterTokugawa_Logic","BladeMasterTokugawa_MainPanel","BladeMasterTokugawa_Popup","BladeMasterTokugawa_Reel","BladeMasterTokugawa_Slots","BladeMasterTokugawa_Sound","BladeMasterTokugawa_symbol"]);
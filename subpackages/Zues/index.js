window.__require=function e(t,n,i){function a(r,s){if(!n[r]){if(!t[r]){var c=r.split("/");if(c=c[c.length-1],!t[c]){var u="function"==typeof __require&&__require;if(!s&&u)return u(c,!0);if(o)return o(c,!0);throw new Error("Cannot find module '"+r+"'")}r=c}var _=n[r]={exports:{}};t[r][0].call(_.exports,function(e){return a(t[r][1][e]||e)},_,_.exports,e,t,n,i)}return n[r].exports}for(var o="function"==typeof __require&&__require,r=0;r<i.length;r++)a(i[r]);return a}({Zues_BonusGame:[function(e,t,n){"use strict";function i(e,t,n,i,a,o,r){try{var s=e[o](r),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(i,a)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(a,o){var r=e.apply(t,n);function s(e){i(r,a,o,s,c,"next",e)}function c(e){i(r,a,o,s,c,"throw",e)}s(void 0)})}}cc._RF.push(t,"78013eY6W5I6Z2d24FjZXZE","Zues_BonusGame");var o=1,r=2,s=3,c=4;cc.Class({extends:cc.Component,properties:{_grailItemList:[],_giveUpItemList:[],_roundTimes:0,_totalRoundTimes:5,_currCnt:0},Init:function(){this._gameUI=cc.find("safe_node/bonus_game",this.node),this._gameUI.active=!1,this._left_multi=cc.find("node_left",this._gameUI),this._right_multi=cc.find("node_right",this._gameUI),this._node_centre=cc.find("node_centre",this._gameUI),this._node_nowGrail=cc.find("select/node_nowGrail",this._node_centre),this._node_offers=cc.find("select/node_offers",this._node_centre);for(var e=cc.find("node_lbl",this._node_offers),t=0;t<e.childrenCount;t++){var n=cc.find("lbl_"+(t+1),e);n.active=!1,this._giveUpItemList.push(n)}this._node_items=cc.find("node_items",this._gameUI);for(var i=0;i<this._node_items.childrenCount;i++){var a=cc.find("item_"+(i+1),this._node_items);Global.btnClickEvent(a,this.onChooseGrail,this),this._grailItemList.push(a)}this._item_mask=cc.find("item_mask",this._gameUI),this._item_mask.active=!0,this._tit_goodLuck=cc.find("tit_goodLuck",this._gameUI),this._tit_choose=cc.find("tit_choose",this._gameUI),this._tit_selectTimes=cc.find("tit_selectTimes",this._gameUI),this._bg_mask=cc.find("mask",this._gameUI),this._item_big=cc.find("item_big",this._gameUI),this._node_popup=cc.find("node_popup",this._gameUI),this._pop_start_end=cc.find("pop_start_end",this._node_popup),this._pop_round=cc.find("pop_round",this._node_popup),this._pop_spine_offer=cc.find("pop_spine_offer",this._node_popup),this._pop_select=cc.find("pop_select",this._node_popup),this._pop_select_offer=cc.find("pop_select/node_1",this._node_popup),this._pop_select_grail=cc.find("pop_select/node_2",this._node_popup),cc.find("panel_click",this._gameUI).active=!1,this._bonusNode_mask=cc.find("mask",this._gameUI),this._bonusNode_mask.active=!1},onEnable:function(){cc.vv.NetManager.registerMsg(MsgId.SLOT_SUBGAME_DATA,this.onRcvSubGameAction,this)},onDisable:function(){cc.vv.NetManager.unregisterMsg(MsgId.SLOT_SUBGAME_DATA,this.onRcvSubGameAction,!1,this)},backToGame:function(){var e=this;return new Promise(function(){var t=a(regeneratorRuntime.mark(function t(n,i){var a,o,r,s,c,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(e._gameEndCall=n,e.setBonusGameState(!0),a=cc.vv.gameData.GetCurrCnt(),e.initGrailItems(a),o=cc.vv.gameData.GetCurrState(),r=o.state,e._gainMulti=cc.vv.gameData.GetGainMult(),e._prize=cc.vv.gameData.GetPrize(),e.initCentreNode("full"),e.initCentreGrail(),e.setTitleState("goodLuck"),e.initMultiMaskNode(!0),s=cc.vv.gameData.GetUnpickedMult(),c=0;c<s.length;c++)e.setMultMaskState(s[c],!1);e.initGrailItemsState(),e.showHistoryMulti(),1===r?(e.popStartPanel(),e._item_mask.active=!1):2===r?(e._nextRound=o.nextRound,e._nextCount=o.nextCount,e.startNewRound()):3===r?(u=cc.vv.gameData.GetHistoryMult(),e._roundTimes=u.length+1,e.popShowSelectOffer()):4===r&&(e._options=cc.vv.gameData.GetLastChoice(),e.popShowSelectGrail());case 17:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}())},enterBonusGame:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise(function(){var n=a(regeneratorRuntime.mark(function n(i,o){var r,s,c,u;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.setBonusGameState(!0),t._item_mask.active=!0,r=cc.vv.gameData.GetCurrCnt(),s=t,1!==e){n.next=19;break}return cc.vv.gameData.GetBottomScript().ShowBtnsByState("moveing_1"),t.initGrailItems(r),t.initCentreNode("normal"),t.setTitleState("goodLuck"),n.next=11,t.awaitTime(.5);case 11:(c=cc.find("panel_click",t._gameUI)).active=!0,c.off("click"),u=function(){var e=a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c.active=!1,s.setBonusGameState(!1),e.next=4,s.awaitTime(.5);case 4:cc.vv.gameData.GetBottomScript().ShowBtnsByState("idle"),i();case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),cc.vv.gameData.checkAutoPlay(c,u,!0),c.on("click",a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c.stopAllActions(),e.next=3,u();case 3:case"end":return e.stop()}},e)}))),n.next=45;break;case 19:if(2!==e){n.next=45;break}if(t.initGrailItems(r-1),t.initCentreNode(26===r?"full":"normal"),t.setTitleState("goodLuck"),!(r<26)){n.next=36;break}return t.initMultiMaskNode(!0),n.next=27,t.showGrailItem(r);case 27:return n.next=29,t.awaitTime(2);case 29:return s.setBonusGameState(!1),n.next=32,s.awaitTime(.5);case 32:Global.SlotsSoundMgr.stopBgm(),i(),n.next=45;break;case 36:return t.initMultiMaskNode(!1),n.next=39,t.showGrailItem(r);case 39:return n.next=41,t.awaitTime(1);case 41:return n.next=43,t.popStartPanel();case 43:t._item_mask.active=!1,t._gameEndCall=i;case 45:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}()));case 1:case"end":return n.stop()}},n)}))()},initData:function(){this._roundTimes=0,this._chooseIdxList=[],this._node_nowGrail.active=!1,cc.find("item",this._node_nowGrail).active=!1,cc.find("spine",this._node_nowGrail).active=!1,cc.find("item/lbl",this._node_nowGrail).getComponent(cc.Label).string="",cc.vv.gameData.SetHistoryMult([]),this.showHistoryMulti(),this.initMultiMaskNode(!0),cc.vv.gameData.SetCurrCnt(0)},onSendSeq:function(e){var t={c:MsgId.SLOT_SUBGAME_DATA};t.gameid=cc.vv.gameData.getGameId(),t.data=e,cc.vv.NetManager.send(t,!0)},onRcvSubGameAction:function(e){if(AppLog.log("\u63a5\u6536\u6e38\u620f\u52a8\u4f5c\u6570\u636e"),200==e.code){var t=e.data,n=t.rtype;if(n===o)this._freeBags=t.freeBage,this._nextRound=t.nextRound,this._nextCount=t.nextCount,this.startNewRound();else if(n===r)this._grailMultiList=t.items,this._gainMulti=t.mult,this._prize=t.prize,this.showRoundResult();else if(n===s){t.takeIt?(this._winCoin=t.winCoin,this._gainMulti=t.mult,this._prize=t.prize,this.popEndPanel()):(this._nextRound=t.nextRound,this._nextCount=t.nextCount,this._giveUpMult=t.mult,this._options=t.options,this.selectLeaveOffer())}else n===c&&(this._winCoin=t.winCoin,this._gainMulti=t.mult,this._prize=t.prize,this.showResultSelectGrail())}},setBonusGameState:function(e){var t=this;e&&!this._gameUI.active?(this._gameUI.active=!0,this._gameUI.opacity=0,cc.tween(this._gameUI).to(.5,{opacity:255}).start()):!e&&this._gameUI.active&&cc.tween(this._gameUI).to(.5,{opacity:0}).call(function(){t._gameUI.active=!1}).start()},initMultiMaskNode:function(e){for(var t=0;t<this._left_multi.childrenCount;t++)this._left_multi.children[t].getChildByName("mask").active=e;for(var n=0;n<this._right_multi.childrenCount;n++)this._right_multi.children[n].getChildByName("mask").active=e},setMultMaskState:function(e,t){var n;n=e<50?this._left_multi:this._right_multi,cc.find("item_"+e+"/mask",n).active=t},initCentreNode:function(e){this._node_centre.getChildByName("img_normal").active="normal"===e,this._node_centre.getChildByName("select").active="full"===e},initCentreGrail:function(){var e=cc.vv.gameData.GetLastChoice(),t=cc.find("item",this._node_nowGrail);e&&e.length>0?(this._node_nowGrail.active=!0,t.active=!0,t.getChildByName("lbl").getComponent(cc.Label).string=e[0],cc.find("spine",this._node_nowGrail).active=!0):(this._node_nowGrail.active=!1,t.active=!1,cc.find("spine",this._node_nowGrail).active=!1)},initGrailItems:function(e){for(var t=0;t<e;t++)this._grailItemList[t].active=!0;for(var n=e;n<this._node_items.childrenCount;n++)this._grailItemList[n].active=!1},initGrailItemsState:function(){this.initGrailItems(26);for(var e=cc.vv.gameData.GetChoices(),t=0;t<e.length;t++)this._grailItemList[e[t]-1].active=!1;var n=cc.vv.gameData.GetLastChoice();n&&n.length>0&&(this._grailItemList[n[0]-1].active=!1)},showGrailItem:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise(function(){var n=a(regeneratorRuntime.mark(function n(i,a){var o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.awaitTime(.5);case 2:(o=t._node_items.getChildByName("item_"+e)).active=!0,o.setScale(0),cc.tween(o).to(.5,{scale:1},{easing:"backOut"}).start(),i();case 7:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}()));case 1:case"end":return n.stop()}},n)}))()},setTitleState:function(e){this._tit_goodLuck.active="goodLuck"===e,this._tit_choose.active="choose"===e,this._tit_selectTimes.active="selectTimes"===e,this._tit_choose.stopAllActions(),"goodLuck"===e||"choose"===e&&this._tit_choose.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.8,1.12,1.12),cc.scaleTo(.8,1,1))))},updateTitSelectTimes:function(e){cc.log("times _nextCount:",this._nextCount,"  nowT:",e),this._tit_selectTimes.getChildByName("lbl").getComponent(cc.Label).string=cc.js.formatStr("%s/%s",e,this._nextCount)},showHistoryMulti:function(){for(var e=cc.vv.gameData.GetHistoryMult(),t=0;t<this._giveUpItemList.length;t++)this._giveUpItemList[t].getComponent(cc.Label).string=e[t]?cc.js.formatStr("%sX",e[t]):"",this._giveUpItemList[t].active=!0},popStartPanel:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=a(regeneratorRuntime.mark(function t(n,i){var o,r,s,c,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Global.SlotsSoundMgr.stopBgm(),e._pop_start_end.active=!0,e._pop_start_end.setScale(1),o=cc.find("spine_bg",e._pop_start_end),r=cc.find("node_start",e._pop_start_end),cc.find("node_end",e._pop_start_end).active=!1,o.getComponent(sp.Skeleton).setAnimation(0,"animation2",!1),o.getComponent(sp.Skeleton).addAnimation(0,"animation2_1",!0),r.active=!0,(s=r.getChildByName("btn_start")).setScale(0),t.next=13,e.awaitTime(.5);case 13:return cc.tween(s).to(.5,{scale:1},{easing:"backOut"}).start(),t.next=16,e.awaitTime(.5);case 16:c=e,s.getComponent(cc.Button).interactable=!0,s.off("click"),u=function(){var e=a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Global.SlotsSoundMgr.playBgm("bonus_bgm"),s.getComponent(cc.Button).interactable=!1,cc.tween(c._pop_start_end).to(.7,{scale:0},{easing:"backIn"}).start(),e.next=5,c.awaitTime(.7);case 5:c._pop_start_end.active=!1,c.setTitleState("choose"),n();case 8:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),cc.vv.gameData.checkAutoPlay(s,u,!0),s.on("click",a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s.stopAllActions(),e.next=3,u();case 3:case"end":return e.stop()}},e)})));case 22:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},popEndPanel:function(){var e=this;return a(regeneratorRuntime.mark(function t(){var n,i,o,r,s,c,u,_;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Global.SlotsSoundMgr.stopBgm(),Global.SlotsSoundMgr.playEffect("bonus_end_show"),e._pop_select_offer.active=!1,e._pop_select.active=!1,e._pop_start_end.active=!0,e._pop_start_end.setScale(1),cc.find("node_start",e._pop_start_end).active=!1,n=cc.find("spine_bg",e._pop_start_end),i=cc.find("node_end",e._pop_start_end),n.getComponent(sp.Skeleton).setAnimation(0,"animation1",!1),n.getComponent(sp.Skeleton).addAnimation(0,"animation1_1",!1),t.next=13,e.awaitTime(.5);case 13:return i.active=!0,o=Global.convertNumToShort(e._prize),r=Global.convertNumToShort(e._gainMulti*e._prize),(s=i.getChildByName("lbl_coin")).getComponent(cc.Label).string="",i.getChildByName("lbl_detail").getComponent(cc.Label).string=cc.js.formatStr("%sx%s=%s",e._gainMulti,o,r),Global.doRoallNumEff(s,0,e._winCoin,2,null,null,0,!0),(c=i.getChildByName("btn_collect")).setScale(0),cc.tween(c).to(.5,{scale:1},{easing:"backOut"}).start(),t.next=25,e.awaitTime(.5);case 25:u=e,c.getComponent(cc.Button).interactable=!0,c.off("click"),_=function(){var t=a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c.getComponent(cc.Button).interactable=!1,u._currCnt=0,cc.tween(u._pop_start_end).to(.7,{scale:0},{easing:"backIn"}).start(),t.next=5,u.awaitTime(.7);case 5:return cc.vv.gameData.GetPopupScript().playBonusQpAnim(),t.next=8,u.awaitTime(1);case 8:return u._pop_start_end.active=!1,u.setBonusGameState(!1),u.initData(),t.next=13,u.awaitTime(.5);case 13:u._gameEndCall&&(u._gameEndCall(),u._gameEndCall=null,cc.vv.gameData.SetCurrCnt(0),e.initMultiMaskNode(!0));case 14:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),cc.vv.gameData.checkAutoPlay(c,_,!0),c.on("click",a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c.stopAllActions(),e.next=3,_();case 3:case"end":return e.stop()}},e)})));case 31:case"end":return t.stop()}},t)}))()},popRound:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=a(regeneratorRuntime.mark(function t(n,i){var a,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._pop_round.active=!0,e.setTitleState("goodLuck"),a=e._totalRoundTimes,cc.find("normal",e._pop_round).active=e._roundTimes<a,cc.find("last",e._pop_round).active=e._roundTimes===a,cc.find("normal/lbl_round",e._pop_round).getComponent(cc.Label).string=e._nextRound,cc.find("normal/lbl_pick",e._pop_round).getComponent(cc.Label).string=e._nextCount,e._pop_round.setScale(0),cc.tween(e._pop_round).to(.7,{scale:1},{easing:"backOut"}).start(),t.next=11,e.awaitTime(1);case 11:return o=e,cc.tween(e._pop_round).to(.7,{scale:0},{easing:"backIn"}).call(function(){o._pop_round.active=!1}).start(),t.next=15,e.awaitTime(1);case 15:n();case 16:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},popShowSpineOffer:function(){var e=this;return a(regeneratorRuntime.mark(function t(){var n,i,o,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e._pop_spine_offer.active=!0,Global.SlotsSoundMgr.playEffect("change1"),(n=cc.find("spine_tuitukuang",e._pop_spine_offer)).getComponent(sp.Skeleton).setAnimation(0,"animation1",!1),n.getComponent(sp.Skeleton).addAnimation(0,"animation2",!0),i=e,(o=cc.find("panel_click",e._pop_spine_offer)).getComponent(cc.Button).interactable=!0,o.off("click"),r=function(){o.getComponent(cc.Button).interactable=!1,Global.SlotsSoundMgr.playEffect("change2");var e=n.getComponent(sp.Skeleton).setAnimation(0,"animation3",!1);n.getComponent(sp.Skeleton).setTrackCompleteListener(e,function(){i._pop_spine_offer.active=!1,i.popShowSelectOffer()})},cc.vv.gameData.checkAutoPlay(o,r,!0),o.on("click",a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o.stopAllActions(),r();case 2:case"end":return e.stop()}},e)})));case 12:case"end":return t.stop()}},t)}))()},popShowSelectOffer:function(){this._pop_select.active=!0,this._pop_select_offer.active=!0,this._pop_select_grail.active=!1,this._pop_select_offer.opacity=255;var e=cc.find("bg_myOffer/lbl_get",this._pop_select_offer),t=cc.find("bg_myOffer/lbl_all",this._pop_select_offer),n=Global.convertNumToShort(this._prize),i=Global.convertNumToShort(this._gainMulti*this._prize);e.getComponent(cc.Label).string=cc.js.formatStr("%sX",this._gainMulti),t.getComponent(cc.Label).string=cc.js.formatStr("%sX%s=%s",this._gainMulti,n,i);var o=cc.find("btn_take",this._pop_select_offer),r=cc.find("btn_leave",this._pop_select_offer),s=this;o.getComponent(cc.Button).interactable=!0,o.off("click"),r.getComponent(cc.Button).interactable=!0,r.off("click");var c=function(e){o.getComponent(cc.Button).interactable=!1,r.getComponent(cc.Button).interactable=!1,Global.SlotsSoundMgr.playEffect("click");var t={rtype:3,takeIt:e};s.onSendSeq(t),s.setTitleState("goodLuck")};o.on("click",a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:c(!0);case 1:case"end":return e.stop()}},e)}))),r.on("click",a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:c(!1);case 1:case"end":return e.stop()}},e)})))},popShowSelectGrail:function(){this._pop_select.active=!0,this._pop_select_grail.active=!0,this._pop_select_offer.active=!1,cc.find("item_keep/lbl",this._pop_select_grail).getComponent(cc.Label).string=this._options[0],cc.find("item_trade/lbl",this._pop_select_grail).getComponent(cc.Label).string=this._options[1];var e=cc.find("btn_keep",this._pop_select_grail),t=cc.find("btn_trade",this._pop_select_grail);e.getComponent(cc.Button).interactable=!0,e.off("click"),t.getComponent(cc.Button).interactable=!0,t.off("click");var n=this,i=function(i){e.getComponent(cc.Button).interactable=!1,t.getComponent(cc.Button).interactable=!1,Global.SlotsSoundMgr.playEffect("click"),n._selectGrailType="keep";var a={rtype:4,keep:i};n.onSendSeq(a),n.setTitleState("goodLuck")};e.on("click",a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i(!0);case 1:case"end":return e.stop()}},e)}))),t.on("click",a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i(!1);case 1:case"end":return e.stop()}},e)})))},showRoundResult:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=a(regeneratorRuntime.mark(function t(n,i){var o,r,s,c,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:(o=e._chooseIdxList).sort(function(e,t){return e-t}),r=e._item_big.getChildByName("spine_coin"),s=e._item_big.getChildByName("lbl_multi"),c=regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise(function(){var t=a(regeneratorRuntime.mark(function t(i,c){var u,_,p;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._bonusNode_mask.active=!0,t.next=3,e.awaitTime(1);case 3:return Global.SlotsSoundMgr.playEffect("grail_open"),u=o[n],e._grailItemList[u-1].active=!1,e._grailItemList[u-1].getChildByName("spine_select").active=!1,e._item_big.active=!0,e._item_big.setScale(0),e._item_big.opacity=255,cc.tween(e._item_big).to(.7,{scale:1},{easing:"backOut"}).start(),e._item_big.getChildByName("lbl").getComponent(cc.Label).string=u,t.next=14,e.awaitTime(.7);case 14:return(_=e._grailMultiList[n].length>1)&&e._grailMultiList[n].sort(function(e,t){return t-e}),p=e._grailMultiList[n][1]?e._grailMultiList[n][1]:e._grailMultiList[n][0],r.active=!0,r.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),s.active=!0,s.getComponent(cc.Label).string=cc.js.formatStr("%sX",e._grailMultiList[n][0]),t.next=23,e.awaitTime(.8);case 23:if(!_){t.next=26;break}return t.next=26,new Promise(function(){var t=a(regeneratorRuntime.mark(function t(i,a){var o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:Global.SlotsSoundMgr.playEffect("1000x"),(o=e._item_big.getChildByName("spine_tihuang")).active=!0,o.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),o.getComponent(sp.Skeleton).setCompleteListener(function(){o.active=!1,s.getComponent(cc.Label).string=cc.js.formatStr("%sX",e._grailMultiList[n][1]),i()});case 5:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}());case 26:return e.setMultMaskState(p,!0),t.next=29,e.awaitTime(1);case 29:return cc.tween(e._item_big).to(.5,{opacity:0}).start(),t.next=32,e.awaitTime(.5);case 32:r.active=!1,s.active=!1,e._bonusNode_mask.active=!1,i();case 36:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}},t)}),u=0;case 6:if(!(u<o.length)){t.next=11;break}return t.delegateYield(c(u),"t0",8);case 8:u++,t.next=6;break;case 11:e.popShowSpineOffer(),n();case 13:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},onChooseGrail:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){var i,a,o,r,s,c,u;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(Global.SlotsSoundMgr.playEffect("choose"),t._item_mask.active=!0,i=e.target,a=parseInt(i.name.slice(5)),cc.log("select grail idx = ",a),(o=i.getChildByName("spine_select")).active=!0,o.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),!(t._roundTimes>0)){n.next=12;break}t._chooseIdxList.includes(a)?t._item_mask.active=!1:(t._chooseIdxList.push(a),cc.log(t._chooseIdxList),t._chooseIdxList.length<t._nextCount?(t.updateTitSelectTimes(t._chooseIdxList.length),t._item_mask.active=!1):(t.setTitleState("goodLuck"),r={rtype:2,choices:t._chooseIdxList},t.onSendSeq(r))),n.next=30;break;case 12:return t.setTitleState("goodLuck"),t._node_nowGrail.active=!0,s=t._node_nowGrail.convertToNodeSpaceAR(i.convertToWorldSpaceAR(cc.v2(0,0))),(c=cc.find("item",t._node_nowGrail)).active=!0,c.getChildByName("lbl").getComponent(cc.Label).string=a,c.position=s,n.next=21,t.awaitTime(1);case 21:return i.active=!1,o.active=!1,Global.SlotsSoundMgr.playEffect("grail_fly"),cc.tween(c).to(1,{position:cc.v2(0,0)}).start(),n.next=27,t.awaitTime(1);case 27:cc.find("spine",t._node_nowGrail).active=!0,u={rtype:1,choices:[a]},t.onSendSeq(u);case 30:case"end":return n.stop()}},n)}))()},startNewRound:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=a(regeneratorRuntime.mark(function t(n,i){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._chooseIdxList=[],t.next=3,e.awaitTime(1);case 3:return t.next=5,e.popRound();case 5:e.setTitleState("selectTimes"),e.updateTitSelectTimes(0),e._item_mask.active=!1,++e._roundTimes,n();case 10:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},selectLeaveOffer:function(){this._giveUpItemList[this._roundTimes-1].getComponent(cc.Label).string=cc.js.formatStr("%sX",this._giveUpMult),this._giveUpItemList[this._roundTimes-1].active=!0;var e=this._totalRoundTimes;if(this._roundTimes<e)this._pop_select.active=!1,this.startNewRound();else{var t=this,n=cc.find("spine_bianshen",this._pop_select);n.active=!0,n.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),n.getComponent(sp.Skeleton).setCompleteListener(function(){n.active=!1,cc.tween(t._pop_select_offer).to(.5,{opacity:0}).call(function(){t._pop_select_offer.active=!1,t._pop_select_offer.opacity=255}).start(),t.popShowSelectGrail()})}this.setTitleState("goodLuck")},showResultSelectGrail:function(){var e,t=this,n=this._item_big.getChildByName("spine_coin"),i=this._item_big.getChildByName("lbl_multi");this._item_big.active=!0,this._item_big.getChildByName("lbl").getComponent(cc.Label).string="",e="keep"==this._selectGrailType?cc.find("item_keep",this._pop_select_grail):cc.find("item_trade",this._pop_select_grail);this._gameUI.convertToNodeSpaceAR(e.convertToWorldSpaceAR(cc.v2(0,0)));var a=this._item_big.position;cc.tween(this._item_big).to(1,{scale:cc.v2(1,1),position:a}).call(function(){n.active=!0,n.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),i.active=!0,i.getComponent(cc.Label).string="X"}).delay(1).call(function(){t.popEndPanel()}).start()},awaitTime:function(e){var t=this;return new Promise(function(n,i){t.scheduleOnce(function(){n()},e)})}}),cc._RF.pop()},{}],Zues_Cfg:[function(e,t,n){"use strict";var i;function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}cc._RF.push(t,"04c08GW3C9KeqNTCH3zMT88","Zues_Cfg");var o={symbol:(i={},a(i,1,{node:"s1",win_node:"w1",win_ani:{name:"animation2",zIndex:300},stop_ani:{name:"animation1",zIndex:100}}),a(i,2,{node:"s2",win_node:"w2",trigger_ani:{name:"animation",zIndex:300},stop_ani:{name:"animation1",zIndex:100}}),a(i,3,{node:"s3",win_node:"w3",win_ani:{name:"animation1_1",zIndex:300}}),a(i,4,{node:"s4",win_node:"w4",win_ani:{name:"animation",zIndex:300}}),a(i,5,{node:"s5",win_node:"w5",win_ani:{name:"animation",zIndex:300}}),a(i,6,{node:"s6",win_node:"w6",win_ani:{name:"animation",zIndex:300}}),a(i,7,{node:"s7",win_node:"w7",win_ani:{name:"animation",zIndex:300}}),a(i,8,{node:"s8",win_node:"w8",win_ani:{name:"animation",zIndex:300}}),a(i,9,{node:"s9",win_node:"w9"}),i),scripts:{Top:"LMSlots_Top_Base",Bottom:"LMSlots_Bottom_Base",Slots:"Zues_Slots",Reels:"Zues_Reels",Symbols:"Zues_Symbol"},col:5,row:4,symbolPrefab:"LMSlots_Symbol",symbolSize:{height:97},randomSymbols:[3,4,5,6,7,8,9],kuang:"kuang",autoModelDelay:1,speed:2500,reelStopInter:.2,auto_stop_time:1,bounceInfo:{distance:30,time:.1},helpItems:["games/Zues/prefab/help_node/page_1","games/Zues/prefab/help_node/page_2","games/Zues/prefab/help_node/page_3","games/Zues/prefab/help_node/page_4","games/Zues/prefab/help_node/page_5"],commEffect:{path:"games/Zues/",win1:["win1","win1end"],win2:["win2","win2end"]},AddAntiTime:1.6,reelStateInfo:[{id:[2],mini:3,counts:[1,1,1,1,1],antiNode:"node_anti",path:"games/Zues/",reelStopSound:"reel_stop",symbolStopSound:"symbol_scatter",antSound:"reel_notify",antSpeed:2400}],normalBgm:"Zeus_Sound_NorBg"};t.exports=o,cc._RF.pop()},{}],Zues_GameData:[function(e,t,n){"use strict";cc._RF.push(t,"297b2odniRJwKiIrl2XWI7F","Zues_GameData"),cc.Class({extends:e("LMSlots_GameData_Base"),properties:{},start:function(){},init:function(e,t,n){this._allCustomData=e.customDatas,this._freeCustomData=e.freeCustomData,this._customData=e.customData,this._energyData=e.collection,this._needBet=e.collection.needBet,this._freeBags=e.freeBags,this._freeWinCoin=e.freeWinCoin,this._super(e,t,n)},OnRcvNetSpine:function(e){if(200==e.code){this._customData=e.customData,this._energyData=e.energyData,this._freeBags=e.freeBags;var t=cc.vv.gameData.GetBetIdx();if(e.allFreeCnt>0&&e.allFreeCnt===e.freeCnt){this.SetAllCustomDataByBet(t,this._customData);this.SetFreeCustomDataByBet({lightningFrames:[],lightningIdx:[],convertList:[],remainIndexes:[]})}else e.allFreeCnt>0&&e.allFreeCnt!=e.freeCnt?this.SetFreeCustomDataByBet(this._customData):this.SetAllCustomDataByBet(t,this._customData);this._freeWinCoin=e.freeWinCoin}this._super(e)},SetPopupScript:function(e){this._popupScp=e},GetPopupScript:function(){return this._popupScp},SetBonusScript:function(e){this._bonusScp=e},GetBonusScript:function(){return this._bonusScp},GetAllCustomData:function(){return this._allCustomData},SetAllCustomDataByBet:function(e,t){this._allCustomData[e-1]=t},GetFreeCustomData:function(){return this._freeCustomData},SetFreeCustomDataByBet:function(e){this._freeCustomData=e},GetLightningFrames:function(){return this._customData&&this._customData.lightningFrames?this._customData.lightningFrames:[]},GetLightningIdx:function(){return this._customData&&this._customData.lightningIdx?this._customData.lightningIdx:[]},GetRemainIndexs:function(){return this._customData&&this._customData.remainIndexs?this._customData.remainIndexs:[]},GetConvertList:function(){return this._customData&&this._customData.convertList?this._customData.convertList:[]},GetNeedBet:function(){return this._needBet},GetCurRoundValue:function(){return this._energyData.currRoundValue},GetCurValue:function(){return this._energyData.currValue},SetCurValue:function(e){this._energyData.currValue=e},GetFullValue:function(){return this._energyData.fullValue},IsTriBonus:function(){var e=this._energyData.cmpInfo;return e&&e.next_game},GetFreeBags:function(){return this._freeBags},GetUnpickedMult:function(){return this._freeBags.unpickedMult},GetGainMult:function(){return this._freeBags.mult},GetPrize:function(){return this._freeBags.prize},GetChoices:function(){return this._freeBags.choices},GetHistoryMult:function(){return this._freeBags.historyMult},SetHistoryMult:function(e){this._freeBags.historyMult=e},GetCurrCnt:function(){return this._freeBags.currCnt},SetCurrCnt:function(e){this._freeBags.currCnt=e},GetLastChoice:function(){return this._freeBags.lastChoice},GetCurrState:function(){return this._freeBags.currState},GetFreeWinCoin:function(){return this._freeWinCoin}}),cc._RF.pop()},{LMSlots_GameData_Base:void 0}],Zues_Logic:[function(e,t,n){"use strict";cc._RF.push(t,"3a5e6RivaNIaLf/p/a6i078","Zues_Logic"),cc.Class({extends:e("LMSlots_Logic_Base"),properties:{},InitCommComponent:function(){var e=this.node.addComponent("Zues_Popup");e.Init(),cc.vv.gameData.SetPopupScript(e);var t=this.node.addComponent("Zues_BonusGame");t.Init(),cc.vv.gameData.SetBonusScript(t),this._super()}}),cc._RF.pop()},{LMSlots_Logic_Base:void 0}],Zues_Popup:[function(e,t,n){"use strict";function i(e,t,n,i,a,o,r){try{var s=e[o](r),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(i,a)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(a,o){var r=e.apply(t,n);function s(e){i(r,a,o,s,c,"next",e)}function c(e){i(r,a,o,s,c,"throw",e)}s(void 0)})}}cc._RF.push(t,"c3f57zloglNmqM7Gmbibx+G","Zues_Popup"),cc.Class({extends:cc.Component,properties:{},start:function(){},Init:function(){this._node_popup=cc.find("safe_node/node_popup",this.node),this._node_popup.active=!1,this._node_free_start=cc.find("node_free_start",this._node_popup),this._node_free_end=cc.find("node_free_end",this._node_popup),this._node_win_jp=cc.find("node_win_jp",this._node_popup),this._node_free_start.active=!1,this._node_free_end.active=!1,this._node_win_jp.active=!1,this._spine_free_qp=cc.find("safe_node/spine_baseZS",this.node),this._spine_win_jp=cc.find("safe_node/spine_win_jp",this.node),this._spine_Bonus_qp=cc.find("safe_node/spine_super_grail",this.node),this._spine_free_qp.active=!1,this._spine_win_jp.active=!1,this._spine_Bonus_qp.active=!1},showFreeStart:function(e){var t=this;return new Promise(function(){var n=a(regeneratorRuntime.mark(function n(i,o){var r,s,c,u,_;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return Global.SlotsSoundMgr.stopBgm(),cc.vv.gameData.GetBottomScript().ShowBtnsByState("moveing_1"),Global.SlotsSoundMgr.playEffect("free_dialog_start_show"),t._node_popup.active=!0,t._node_free_start.active=!0,t._node_free_start.setScale(1),(r=cc.find("spine",t._node_free_start)).getComponent(sp.Skeleton).setAnimation(0,"animation2",!1),r.getComponent(sp.Skeleton).addAnimation(0,"animation2_1",!0),(s=cc.find("lbl_times",t._node_free_start)).getComponent(cc.Label).string=e,c=t._node_free_start.getChildByName("btn_start"),s.setScale(0),c.setScale(0),n.next=16,t.awaitTime(.5);case 16:return cc.tween(s).delay(.1).to(.4,{scale:1}).start(),cc.tween(c).to(.5,{scale:1}).start(),n.next=20,t.awaitTime(.5);case 20:u=t,c.getComponent(cc.Button).interactable=!0,c.off("click"),_=function(){var e=a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c.getComponent(cc.Button).interactable=!1,cc.tween(t._node_free_start).to(.7,{scale:0},{easing:"backIn"}).start(),e.next=4,t.awaitTime(.7);case 4:u._node_popup.active=!1,u._node_free_start.active=!1,i();case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),cc.vv.gameData.checkAutoPlay(c,_,!0),c.on("click",a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c.stopAllActions(),e.next=3,_();case 3:case"end":return e.stop()}},e)})));case 26:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}())},showFreeEnd:function(e){var t=this;return new Promise(function(){var n=a(regeneratorRuntime.mark(function n(i,o){var r,s,c,u,_;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return Global.SlotsSoundMgr.stopBgm(),cc.vv.gameData.GetBottomScript().ShowBtnsByState("moveing_1"),Global.SlotsSoundMgr.playEffect("free_dialog_collect_show"),t._node_popup.active=!0,t._node_free_end.active=!0,t._node_free_end.setScale(1),(r=cc.find("spine",t._node_free_end)).getComponent(sp.Skeleton).setAnimation(0,"animation1",!1),r.getComponent(sp.Skeleton).addAnimation(0,"animation1_1",!1),s=cc.find("lbl_win",t._node_free_end),c=t._node_free_end.getChildByName("btn_collect"),s.setScale(0),c.setScale(0),n.next=15,t.awaitTime(.5);case 15:return u=t,Global.doRoallNumEff(s,0,e,2,null,null,0,!0),cc.tween(s).delay(.1).to(.4,{scale:1}).start(),cc.tween(c).to(.5,{scale:1}).start(),n.next=21,t.awaitTime(.5);case 21:c.getComponent(cc.Button).interactable=!0,c.off("click"),_=function(){var e=a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c.getComponent(cc.Button).interactable=!1,cc.tween(t._node_free_end).to(.7,{scale:0},{easing:"backIn"}).start(),e.next=4,t.awaitTime(.7);case 4:u._node_popup.active=!1,u._node_free_end.active=!1,i();case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),cc.vv.gameData.checkAutoPlay(c,_,!0),c.on("click",a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c.stopAllActions(),e.next=3,_();case 3:case"end":return e.stop()}},e)})));case 26:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}())},playFreeQpAnim:function(){var e=this;return a(regeneratorRuntime.mark(function t(){var n,i,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=cc.find("Canvas/safe_node/spine_zs"),i=n.active,a=e,Global.SlotsSoundMgr.playEffect("transition_free"),n.active=!1,e._spine_free_qp.active=!0,e._spine_free_qp.getComponent(sp.Skeleton).setAnimation(0,"animation3",!1),e._spine_free_qp.getComponent(sp.Skeleton).setCompleteListener(function(){a._spine_free_qp.active=!1}),t.next=10,cc.vv.gameData.awaitTime(.8);case 10:n.active=i;case 11:case"end":return t.stop()}},t)}))()},playJackPotQpAnim:function(){var e=this;Global.SlotsSoundMgr.playEffect(""),this._spine_win_jp.active=!0,this._spine_win_jp.getComponent(sp.Skeleton).setAnimation(0,"animation2",!1),this._spine_win_jp.getComponent(sp.Skeleton).setCompleteListener(function(){e._spine_win_jp.active=!1})},showJackPotWin:function(e,t){var n=this;return new Promise(function(){var i=a(regeneratorRuntime.mark(function i(o,r){var s,c,u,_,p,l;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return n._node_popup.active=!0,n._node_win_jp.active=!0,n._node_win_jp.setScale(1),s="",2===e?s=3:3===e?s=2:4===e&&(s=1),(c=cc.find("spine",n._node_win_jp)).getComponent(sp.Skeleton).setAnimation(0,"animation"+s,!1),c.getComponent(sp.Skeleton).addAnimation(0,"animation"+s+"_1",!0),u=cc.find("lbl_win",n._node_win_jp),_=cc.find("btn_collect",n._node_win_jp),u.setScale(0),_.setScale(0),i.next=14,n.awaitTime(.5);case 14:return Global.doRoallNumEff(u,0,t,2,null,null,0,!0),cc.tween(u).delay(.1).to(.4,{scale:1}).start(),cc.tween(_).to(.5,{scale:1}).start(),i.next=19,n.awaitTime(.5);case 19:p=n,_.getComponent(cc.Button).interactable=!0,_.off("click"),l=function(){var e=a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return _.getComponent(cc.Button).interactable=!1,cc.tween(n._node_win_jp).to(.7,{scale:0},{easing:"backIn"}).start(),e.next=4,n.awaitTime(.7);case 4:p._node_popup.active=!1,p._node_win_jp.active=!1,o();case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),cc.vv.gameData.checkAutoPlay(_,l,!0),_.on("click",a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return _.stopAllActions(),e.next=3,l();case 3:case"end":return e.stop()}},e)})));case 25:case"end":return i.stop()}},i)}));return function(e,t){return i.apply(this,arguments)}}())},playBonusQpAnim:function(){var e=this;Global.SlotsSoundMgr.playEffect("transition_bonus"),this._spine_Bonus_qp.active=!0,this._spine_Bonus_qp.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),this._spine_Bonus_qp.getComponent(sp.Skeleton).setCompleteListener(function(){e._spine_Bonus_qp.active=!1})},awaitTime:function(e){var t=this;return new Promise(function(n,i){t.scheduleOnce(function(){n()},e)})}}),cc._RF.pop()},{}],Zues_Reels:[function(e,t,n){"use strict";cc._RF.push(t,"c5767V+WQxNbYabCzT8zuvG","Zues_Reels"),cc.Class({extends:e("LMSlots_Reel_Base"),properties:{},start:function(){}}),cc._RF.pop()},{LMSlots_Reel_Base:void 0}],Zues_Slots:[function(e,t,n){"use strict";function i(e,t,n,i,a,o,r){try{var s=e[o](r),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(i,a)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(a,o){var r=e.apply(t,n);function s(e){i(r,a,o,s,c,"next",e)}function c(e){i(r,a,o,s,c,"throw",e)}s(void 0)})}}cc._RF.push(t,"cb53dV4vglBVIQRjERPfuSE","Zues_Slots"),cc.Class({extends:e("LMSlots_Slots_Base"),properties:{_remainFramesList:[],_wildList:[],_spinEnd:!1},start:function(){},Init:function(e,t){this._spine_zs=cc.find("spine_zs",this.node.parent),this._mask_jdt=cc.find("node_energy/bg/mask_jdt",this.node),this._mask_jdt.on("click",this.onClickJdtBtn.bind(this)),this._spine_jdt=cc.find("spine_jdt",this._mask_jdt),this._spine_jdt_sz=cc.find("node_energy/bg/spine_jdt_sz",this.node),this._spine_jdt_sz.active=!1,this._spine_jdt_jm=cc.find("node_energy/bg/spine_jdt_jm",this.node),this._spine_jdt_jm.active=!1,this._spine_lock=cc.find("node_energy/bg/spine_lock",this.node),this._node_sd=cc.find("node_energy/bg/img_sd",this.node),this._btn_grail=cc.find("node_energy/bg/btn_grail",this.node),this._btn_grail.on("click",this.onClickGrailBtn.bind(this)),this._spine_wild=cc.find("node_wild/spine_wild",this.node),this._spine_wild.active=!1,this._spine_sd_fly=cc.find("spine_sd_fly",this.node),this._spine_sd_fly.active=!1,this._spine_sd_hit=cc.find("spine_sd_hit",this.node),this._spine_sd_hit.active=!1,this._remain_frames=cc.find("remain_kuang",this.node);for(var n=0;n<this._remain_frames.childrenCount;n++){var i=this._remain_frames.children[n];i.active=!1,this._remainFramesList.push(i)}this._spinEnd=!1,this._super(e,t)},RegisterEvent:function(){this._super(),Global.registerEvent(cc.vv.gameData._EventId.SLOT_TOTALBET_UPDATED,this.onEventTotalbetUpdated,this)},ReconnectShow:function(){var e=this;return a(regeneratorRuntime.mark(function t(){var n,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.initEnergyBar(),n=cc.vv.gameData.GetBetIdx(),cc.vv.gameData.GetTotalFree()>0?(e.ShowGameview(!0),e.setRemainFramesByBet(n,!0)):(e.ShowGameview(!1),e.setRemainFramesByBet(n,!1)),!((i=cc.vv.gameData.GetCurrState())&&i.state>0)){t.next=10;break}return cc.vv.gameData.GetBottomScript().ShowBtnsByState("moveing_1"),t.next=8,cc.vv.gameData.GetBonusScript().backToGame();case 8:return t.next=10,e.awaitTime(.5);case 10:if(!(cc.vv.gameData.GetTotalFree()>0&&0==cc.vv.gameData.GetFreeTime())){t.next=13;break}return t.next=13,e.CheckExitFreeGame();case 13:e._topScript.StopMove(),e._bottomScript.CanDoNextRound();case 15:case"end":return t.stop()}},t)}))()},StartMove:function(){this._super(),Global.SlotsSoundMgr.playNormalBgm(),this.hideAllWild(),this._jp_kuang&&(this._jp_kuang.active=!1,this._jp_kuang=null),this._jp_sd&&(this._jp_sd.active=!1,this._jp_sd=null)},onMsgSpine:function(e){this._super(e);var t=cc.vv.gameData.GetLightningIdx();this._hitSdList=Global.copy(t)},StopMove:function(){this._super()},OnReelBounsActionDeep:function(e){this._super(e);for(var t=!1,n=0;n<this._row;n++){var i=this._reels[e].GetSymbolByRow(n);9===i.GetShowId()&&(i.playStopAnimation(),t=!0)}t&&Global.SlotsSoundMgr.playEffect("symbol_bonus");for(var a=cc.vv.gameData.GetLightningIdx(),o=0;o<this._row;o++){var r=this._reels[e].GetSymbolByRow(o),s=this.GetIdxByRowCol(o,e),c=this._remainFramesList[s-1];9!==r.GetShowId()||c.active||this.setRemainFrameState(s,"popup"),a.includes(s)&&this.playHitAnim(o,e,c.active)}},OnSpinEnd:function(){this._spinEnd=!0},onSpinEndAction:function(){var e=this;return a(regeneratorRuntime.mark(function t(){var n,i,a,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e._isLockJdtState){t.next=3;break}return t.next=3,e.playSdFlyAnim();case 3:return t.next=5,e.showWildExtend();case 5:if(n=0,!(e._gameInfo.jackpot&&e._gameInfo.jackpot.jackpotId>1)){t.next=10;break}return n=e._gameInfo.jackpot.winCoin,t.next=10,e.triJackPotGame();case 10:return e.ShowWinTrace(),i=cc.vv.gameData.GetGameWin()+n,a=i,cc.vv.gameData.GetTotalFree()>0&&cc.vv.gameData.GetTotalFree()!=cc.vv.gameData.GetFreeTime()&&(a=cc.vv.gameData.GetGameTotalFreeWin()),t.next=16,new Promise(function(t,n){e.ShowBottomWin(i,a,!0,t)});case 16:if(!cc.vv.gameData.IsTriBonus()){t.next=19;break}return t.next=19,e.triBonusGame();case 19:if(!((o=e._gameInfo.freeResult.freeInfo)&&o.freeCnt>0)){t.next=23;break}return t.next=23,e.CheckEnterFreeGame();case 23:if(!(e._gameInfo.allFreeCnt>0&&0==e._gameInfo.freeCnt)){t.next=26;break}return t.next=26,e.CheckExitFreeGame();case 26:e.CanDoNextRound();case 27:case"end":return t.stop()}},t)}))()},triJackPotGame:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=a(regeneratorRuntime.mark(function t(n,i){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._spine_zs.getComponent(sp.Skeleton).setAnimation(0,"animation2",!1),e._spine_zs.getComponent(sp.Skeleton).addAnimation(0,"animation1",!0),t.next=4,e.awaitTime(1.2);case 4:return cc.vv.gameData.GetPopupScript().playJackPotQpAnim(),t.next=7,e.awaitTime(.8);case 7:return 2===(a=e._gameInfo.jackpot).jackpotId?(e._jp_kuang=cc.find("LMSlots_PrizePool_1/prizePool_Minor/spine_kuang",e.node.parent),e._jp_sd=cc.find("LMSlots_PrizePool_1/prizePool_Minor/spine_sd",e.node.parent)):3===a.jackpotId?(e._jp_kuang=cc.find("LMSlots_PrizePool_1/prizePool_Major/spine_kuang",e.node.parent),e._jp_sd=cc.find("LMSlots_PrizePool_1/prizePool_Major/spine_sd",e.node.parent)):4===a.jackpotId&&(e._jp_kuang=cc.find("LMSlots_PrizePool_1/prizePool_Grand/spine_kuang",e.node.parent),e._jp_sd=cc.find("LMSlots_PrizePool_1/prizePool_Grand/spine_sd",e.node.parent)),e._jp_sd&&(e._jp_sd.active=!0,e._jp_sd.getComponent(sp.Skeleton).setAnimation(0,"animation",!1)),e._jp_kuang&&(e._jp_kuang.active=!0),t.next=13,e.awaitTime(.8);case 13:return t.next=15,cc.vv.gameData.GetPopupScript().showJackPotWin(a.jackpotId,a.winCoin);case 15:n();case 16:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},triBonusGame:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=a(regeneratorRuntime.mark(function t(n,i){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Global.SlotsSoundMgr.playEffect("collect_full"),t.next=3,e.awaitTime(.5);case 3:return e._spine_jdt_jm.active=!0,e._spine_jdt_jm.getComponent(sp.Skeleton).setAnimation(0,"animation",!0),t.next=7,e.awaitTime(2);case 7:return e._spine_jdt_jm.getComponent(sp.Skeleton).setCompleteListener(null),e._spine_jdt_jm.active=!1,t.next=11,cc.vv.gameData.GetBonusScript().enterBonusGame(2);case 11:return cc.vv.gameData.SetCurValue(0),e.initEnergyBar(),t.next=15,e.awaitTime(1);case 15:n();case 16:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},CheckEnterFreeGame:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=a(regeneratorRuntime.mark(function t(n,i){var a,o,r,s,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if((a=e._gameInfo.freeResult)&&a.freeInfo&&a.freeInfo.scatterIdx){for(o=0;o<a.freeInfo.scatterIdx.length;o++)r=a.freeInfo.scatterIdx[o],(s=e.GetSymbolByIdx(r))&&s.playTriggerAnimation();Global.SlotsSoundMgr.playEffect("bell")}return t.next=4,e.awaitTime(1.5);case 4:return e.Backup(),t.next=7,cc.vv.gameData.GetPopupScript().showFreeStart(e._gameInfo.freeCnt);case 7:return cc.vv.gameData.GetPopupScript().playFreeQpAnim(),t.next=10,e.awaitTime(1.2);case 10:e.ShowGameview(!0),c=cc.vv.gameData.GetBetIdx(),e.setRemainFramesByBet(c,!0),n();case 14:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},CheckExitFreeGame:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=a(regeneratorRuntime.mark(function t(n,i){var a,o,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,cc.vv.gameData.GetPopupScript().showFreeEnd(cc.vv.gameData.GetGameTotalFreeWin());case 2:return cc.vv.gameData.GetPopupScript().playFreeQpAnim(),t.next=5,e.awaitTime(1.2);case 5:return e.Resume(),e.hideAllWild(),e.ShowGameview(!1),a=cc.vv.gameData.GetBetIdx(),e.setRemainFramesByBet(a,!1),t.next=12,e.awaitTime(.5);case 12:return o=cc.vv.gameData.GetGameTotalFreeWin(),r=o,t.next=16,new Promise(function(t,n){e.ShowBottomWin(o,r,!0,t)});case 16:n();case 17:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},setRemainFramesByBet:function(e,t){var n=[];if(t){var i=cc.vv.gameData.GetFreeCustomData();i&&i.lightningFrames&&(n=i.lightningFrames)}else{var a=cc.vv.gameData.GetAllCustomData();a[e-1]&&a[e-1].lightningFrames&&(n=a[e-1].lightningFrames)}for(var o=0;o<this._remainFramesList.length;o++)n.includes(o+1)?this.setRemainFrameState(o+1,"idle"):this.setRemainFrameState(o+1,"hide")},setRemainFrameState:function(e,t){var n=this._remainFramesList[e-1];return"popup"===t?(n.active=!0,n.getComponent(sp.Skeleton).setAnimation(0,"animation1",!1),n.getComponent(sp.Skeleton).addAnimation(0,"animation2",!0)):"idle"===t?(n.active=!0,n.getComponent(sp.Skeleton).setAnimation(0,"animation2",!0)):"hide"===t&&(n.active=!1),n},playHitAnim:function(e,t,n){var i=this;return a(regeneratorRuntime.mark(function a(){var o,r,s;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return Global.SlotsSoundMgr.playEffect("lightning1"),i._spine_zs.getComponent(sp.Skeleton).setCompleteListener(null),o=i._spine_zs.getComponent(sp.Skeleton).setAnimation(0,"animation2",!1),i._spine_zs.getComponent(sp.Skeleton).setTrackCompleteListener(o,function(){i._spine_zs.getComponent(sp.Skeleton).setAnimation(0,"animation1",!0)}),a.next=6,i.awaitTime(.5);case 6:(r=cc.instantiate(i._spine_sd_hit)).parent=i.node,r.active=!0,s=i._reels[t].GetSymbolByRow(e),r.position=i.node.convertToNodeSpaceAR(s.node.convertToWorldSpaceAR(cc.v2(0,0))),t<2&&(r.scaleX=-1),i,r.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),r.getComponent(sp.Skeleton).setCompleteListener(function(){var n=i.getWildNode(e,t);n&&n.active||(n||(n=i.setWildNode(e,t)),n.active=!0,n.getComponent(sp.Skeleton).setCompleteListener(null),n.getComponent(sp.Skeleton).setAnimation(0,"animation1",!1));var a=i.GetIdxByRowCol(e,t);i._hitSdList.splice(i._hitSdList.indexOf(a),1),r.destroy()}),n&&i.playWindowShake();case 16:case"end":return a.stop()}},a)}))()},playSdFlyAnim:function(){var e=this;return new Promise(function(){var t=a(regeneratorRuntime.mark(function t(n,i){var a,o,r,s,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(a=!1,o=e.node.convertToNodeSpaceAR(e._node_sd.convertToWorldSpaceAR(cc.v2(0,0))),r=0;r<e._col;r++)for(s=0;s<e._row;s++)9===(c=e._reels[r].GetSymbolByRow(s)).GetShowId()&&function(){a=!0;var t=cc.instantiate(e._spine_sd_fly);t.parent=e.node,t.active=!0,t.position=e.node.convertToNodeSpaceAR(c.node.convertToWorldSpaceAR(cc.v2(0,0)));t.getComponent(sp.Skeleton).setAnimation(0,"animation3",!1),t.getComponent(sp.Skeleton).setCompleteListener(function(){t.destroy()}),Global.SlotsSoundMgr.playEffect("collect_fly"),cc.tween(t).delay(.4).to(.6,{position:o}).start()}();if(!a){t.next=7;break}return t.next=6,e.awaitTime(1.2);case 6:e.moveEnergyBar();case 7:n();case 8:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}())},onEventTotalbetUpdated:function(){var e=cc.vv.gameData.GetBetIdx();this.setRemainFramesByBet(e,!1);var t=cc.vv.gameData.GetNeedBet();e<t&&!this._isLockJdtState?(Global.SlotsSoundMgr.playEffect("collect_lock"),this._isLockJdtState=!0,this._spine_lock.active=!0,this._spine_lock.getComponent(sp.Skeleton).setAnimation(0,"lock",!1),this._spine_lock.getComponent(sp.Skeleton).addAnimation(0,"idle",!0),this._node_sd.getChildByName("spine").active=!1):e>=t&&this._isLockJdtState&&(Global.SlotsSoundMgr.playEffect("collect_unlock"),this._isLockJdtState=!1,this._spine_lock.active=!0,this._spine_lock.getComponent(sp.Skeleton).setAnimation(0,"unlock",!1),this._node_sd.getChildByName("spine").active=!0)},initEnergyBar:function(){var e=cc.vv.gameData.GetBetIdx(),t=cc.vv.gameData.GetNeedBet();cc.log(e,t),e<t?(this._isLockJdtState=!0,this._spine_lock.active=!0,this._spine_lock.getComponent(sp.Skeleton).setAnimation(0,"idle",!0)):(this._isLockJdtState=!1,this._spine_lock.active=!1);var n=cc.vv.gameData.GetCurValue()/cc.vv.gameData.GetFullValue(),i=this._mask_jdt.width*n;this._spine_jdt.x=i-.6;var a=this._spine_jdt_sz.parent.convertToNodeSpaceAR(this._mask_jdt.convertToWorldSpaceAR(cc.v2(i,0)));this._spine_jdt_sz.position=a},moveEnergyBar:function(){var e=this,t=cc.vv.gameData.GetCurValue()/cc.vv.gameData.GetFullValue();t=Math.min(t,1);var n=this._mask_jdt.width*t;this._spine_jdt_sz.active=!0,this._spine_jdt_sz.getComponent(sp.Skeleton).setAnimation(0,"animation",!0);var i=this._spine_jdt_sz.parent.convertToNodeSpaceAR(this._mask_jdt.convertToWorldSpaceAR(cc.v2(n,0)));cc.tween(this._spine_jdt).to(.5,{position:cc.v2(n,0)}).start(),cc.tween(this._spine_jdt_sz).to(.5,{position:i}).call(function(){e._spine_jdt_sz.active=!1}).start()},showWildExtend:function(){var e=this;return new Promise(function(){var t=a(regeneratorRuntime.mark(function t(n,i){var a,o,r,s,c,u,_,p;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!((a=cc.vv.gameData.GetLightningIdx()).length>0)){t.next=18;break}for(o=!1,r=.5,s=0;s<a.length;s++)c=a[s],e._remainFramesList[c-1].active&&(o=!0,e.playExtendWild(c,r));if(!o){t.next=18;break}return Global.SlotsSoundMgr.playEffect("expand"),(u=cc.find("spine_sd_quanping",e.node)).active=!0,u.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),t.next=12,e.awaitTime(r+.2);case 12:return e.frameIntoWild(),_=cc.vv.gameData.GetBetIdx(),p=cc.vv.gameData.GetTotalFree()>0,e.setRemainFramesByBet(_,p),t.next=18,e.awaitTime(.3);case 18:n();case 19:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}())},playExtendWild:function(e,t){for(var n=this.GetColByIdx(e),i=this.GetRowByIdx(e),a=this.getWildNode(i,n).position,o=Math.max(n-1,0);o<=Math.min(this._col-1,n+1);o++)for(var r=Math.max(i-1,0);r<=Math.min(this._row-1,i+1);r++){var s=this.getWildNode(r,o);if(s&&s.active);else{s||(s=this.setWildNode(r,o)),s.active=!0,s.getComponent(sp.Skeleton).setAnimation(0,"animation1",!1);var c=s.position;s.position=a,cc.tween(s).to(t,{position:c}).start()}}},frameIntoWild:function(){cc.log("left");for(var e=0;e<this._remainFramesList.length;e++)if(this._remainFramesList[e].active){var t=this.GetColByIdx(e+1),n=this.GetRowByIdx(e+1);cc.log(e+1,t,n);var i=this.getWildNode(n,t);i&&i.active||(i||(i=this.setWildNode(n,t)),i.active=!0,i.getComponent(sp.Skeleton).setAnimation(0,"animation1",!1))}},setWildNode:function(e,t){var n=cc.instantiate(this._spine_wild);n.parent=this._spine_wild.parent,n.name=cc.js.formatStr("wild_%s_%s",e,t),this._wildList.push(n);var i=this._reels[t].GetSymbolByRow(e);return n.position=this.node.convertToNodeSpaceAR(i.node.convertToWorldSpaceAR(cc.v2(0,0))),Global.SlotsSoundMgr.playEffect("change_wild"),n},getWildNode:function(e,t){for(var n=0;n<this._wildList.length;n++)if(this._wildList[n].name===cc.js.formatStr("wild_%s_%s",e,t))return this._wildList[n];return null},hideAllWild:function(){for(var e=0;e<this._wildList.length;e++)this._wildList[e].getComponent(sp.Skeleton).setCompleteListener(null),this._wildList[e].active=!1},GetIdxByRowCol:function(e,t){return(this._row-e-1)*this._col+t+1},GetColByIdx:function(e){return(e-1)%this._col},GetRowByIdx:function(e){return this._row-Math.floor((e-1)/this._col)-1},onClickJdtBtn:function(){if(cc.vv.gameData.GetBottomScript().GetSpinBtnState()&&!this._isFreeGame&&!(cc.vv.gameData.GetAutoModelTime()>0)&&this._isLockJdtState){var e=cc.vv.gameData.GetNeedBet();this._bottomScript.SetBetIdx(e)}},onClickGrailBtn:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(cc.vv.gameData.GetBottomScript().GetSpinBtnState()){t.next=2;break}return t.abrupt("return");case 2:if(!e._isFreeGame){t.next=4;break}return t.abrupt("return");case 4:if(!(cc.vv.gameData.GetAutoModelTime()>0)){t.next=6;break}return t.abrupt("return");case 6:if(!e._isLockJdtState){t.next=8;break}return t.abrupt("return");case 8:return Global.SlotsSoundMgr.playEffect("popup_out"),e._btn_grail.getComponent(cc.Button).interactable=!1,cc.vv.gameData.GetBonusScript().enterBonusGame(1),t.next=13,e.awaitTime(.5);case 13:e._btn_grail.getComponent(cc.Button).interactable=!0;case 14:case"end":return t.stop()}},t)}))()},ShowGameview:function(e){if(e){Global.SlotsSoundMgr.playBgm("Zeus_Sound_FSBg");var t=cc.vv.gameData.GetTotalFree(),n=cc.vv.gameData.GetFreeTime();this._bottomScript.ShowFreeModel(!0,t-n,t);var i=cc.vv.gameData.GetFreeWinCoin();this._bottomScript.SetWin(i)}else this._bottomScript.ShowFreeModel(!1);this._isFreeGame=e;var a=cc.find("Canvas/safe_node/bg"),o=cc.find("Canvas/safe_node/spine_bg_free");o&&(a&&(a.active=!e),o.active=e)},playWindowShake:function(){var e=cc.find("Canvas/safe_node");cc.find("LMSlots_Top",e),cc.find("LMSlots_Bottom",e);cc.tween(e).by(.1,{position:cc.v2(-9,-7)}).by(.1,{position:cc.v2(14,0)}).by(.1,{position:cc.v2(-9,14)}).by(.1,{position:cc.v2(8,-6)}).by(.1,{position:cc.v2(-16,-7)}).by(.1,{position:cc.v2(16,0)}).by(.1,{position:cc.v2(-8,14)}).by(.1,{position:cc.v2(4,-7)}).by(.1,{position:cc.v2(-7,8)}).to(.1,{position:cc.v2(0,0)}).start()},awaitTime:function(e){var t=this;return new Promise(function(n,i){t.scheduleOnce(function(){n()},e)})},update:function(e){this._super(e),this._spinEnd&&this._hitSdList.length<=0&&(this._spinEnd=!1,this.onSpinEndAction())}}),cc._RF.pop()},{LMSlots_Slots_Base:void 0}],Zues_Symbol:[function(e,t,n){"use strict";cc._RF.push(t,"5b5b8YDWkJI57k2AvZlSqH2","Zues_Symbol"),cc.Class({extends:e("LMSlots_Symbol_Base"),properties:{},GetKuangShowParent:function(){return cc.find("Canvas/safe_node/slots/top_kuang")},playWinAnimation:function(){var e=cc.vv.gameData.GetSlotsScript().getWildNode(this._symbolIdx,this._reelIdx);e&&e.active?e.getComponent(sp.Skeleton).setAnimation(0,"animation2",!0):this._super()}}),cc._RF.pop()},{LMSlots_Symbol_Base:void 0}]},{},["Zues_BonusGame","Zues_Cfg","Zues_GameData","Zues_Logic","Zues_Popup","Zues_Reels","Zues_Slots","Zues_Symbol"]);
window.__require=function e(t,n,a){function o(i,r){if(!n[i]){if(!t[i]){var s=i.split("/");if(s=s[s.length-1],!t[s]){var m="function"==typeof __require&&__require;if(!r&&m)return m(s,!0);if(c)return c(s,!0);throw new Error("Cannot find module '"+i+"'")}i=s}var l=n[i]={exports:{}};t[i][0].call(l.exports,function(e){return o(t[i][1][e]||e)},l,l.exports,e,t,n,a)}return n[i].exports}for(var c="function"==typeof __require&&__require,i=0;i<a.length;i++)o(a[i]);return o}({EmperorQin_Cfg:[function(e,t,n){"use strict";var a;function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}cc._RF.push(t,"65523AChstOCK1U6ADgC8Gv","EmperorQin_Cfg");var c={symbol:(a={},o(a,1,{node:"symbol_1",win_node:"animation_1",stop_ani:{name:"animation1",zIndex:100},win_ani:{name:"animation2",zIndex:300}}),o(a,2,{node:"symbol_2",win_node:"animation_2",stop_ani:{name:"animation1",zIndex:100},win_ani:{name:"animation2",zIndex:300}}),o(a,3,{node:"symbol_3"}),o(a,4,{node:"symbol_4"}),o(a,5,{node:"symbol_5"}),o(a,6,{node:"symbol_6"}),o(a,7,{node:"symbol_7"}),o(a,8,{node:"symbol_8"}),o(a,9,{node:"symbol_9"}),o(a,10,{node:"symbol_10"}),o(a,11,{node:"symbol_11"}),o(a,12,{node:"symbol_12"}),o(a,13,{node:"symbol_13"}),a),coinCfg:[{rotation:-60,endPos:{x:-225,y:80}},{rotation:60,endPos:{x:-75,y:80}},{rotation:-60,endPos:{x:75,y:80}},{rotation:60,endPos:{x:225,y:80}},{rotation:-60,endPos:{x:-225,y:-100}},{rotation:60,endPos:{x:-75,y:-100}},{rotation:-60,endPos:{x:75,y:-100}},{rotation:60,endPos:{x:225,y:-100}},{rotation:-60,endPos:{x:-225,y:-280}},{rotation:60,endPos:{x:-75,y:-280}},{rotation:-60,endPos:{x:75,y:-280}},{rotation:60,endPos:{x:225,y:-280}}],freegameSymbolsCfg:[[1,2,3,4,5,6,7,8,9,10,11,12,13],[1,2,7,8,9,10,11,12,13],[1,2,6,8,9,10,11,12,13],[1,2,5,8,9,10,11,12,13],[1,2,4,8,9,10,11,12,13],[1,2,3,8,9,10,11,12,13]],scripts:{Top:"LMSlots_Top_Base",Bottom:"LMSlots_Bottom_Base",Slots:"EmperorQin_Slots",Reels:"EmperorQin_Reel",Symbols:"EmperorQin_Symbol"},col:5,row:3,symbolPrefab:"symbol",symbolSize:{width:128,height:128},randomSymbols:[1,2,3,4,5,6,7,8,9,10,11,12,13],wildId:1,scatterId:2,speed:3e3,reelStopInter:.2,auto_stop_time:1,bounce:!0,helpItems:["games/EmperorQin/prefab/help_item_1","games/EmperorQin/prefab/help_item_2"],commEffect:{path:"games/EmperorQin/",win1:["win1","win1end"],win2:["win2","win2end"],win3:["win3","win3end"],win4:["win4","win4end"]},bounceInfo:{distance:20,time:.1},normalBgm:"base_bgm"};t.exports=c,cc._RF.pop()},{}],EmperorQin_GameData:[function(e,t,n){"use strict";cc._RF.push(t,"dbddaUrJqZO44DzXL2y5SB3","EmperorQin_GameData"),cc.Class({extends:e("LMSlots_GameData_Base"),properties:{},_checkTimeout:function(){(this._super(),this._bmoveTimeout&&this._bReconnect)||this._deskInfo.jackpotGame&&(cc.vv.gameData.GetBottomScript().ShowBtnsByState("unstoped"),cc.vv.gameData.GetSlotsScript().reconnectSelectJackpotGame())}}),cc._RF.pop()},{LMSlots_GameData_Base:void 0}],EmperorQin_Logic:[function(e,t,n){"use strict";cc._RF.push(t,"391b4jXOFxC/at36KS3JAUm","EmperorQin_Logic"),cc.Class({extends:e("LMSlots_Logic_Base"),properties:{},onLoad:function(){this._super();var e=cc.find("safe_node/select_jackpot_game",this.node).getComponent("EmperorQin_SelectJackpotGame");cc.vv.gameData.GetSlotsScript().setJackpotGameScript(e);var t=cc.find("safe_node/free_dialog/enter_node",this.node).getComponent("EmperorQin_SelectFreeTimes");cc.vv.gameData.GetSlotsScript().setSelectFreeTimesScript(t)}}),cc._RF.pop()},{LMSlots_Logic_Base:void 0}],EmperorQin_Reel:[function(e,t,n){"use strict";cc._RF.push(t,"496d1bdR0lKJ7qpfVjAJBQF","EmperorQin_Reel"),cc.Class({extends:e("LMSlots_Reel_Base"),properties:{},OnReelSpinEnd:function(){this._super();for(var e=cc.vv.gameData.getGameCfg(),t=0;t<e.row;t++){var n=this._symbols[t];n.GetShowId()===e.wildId&&(n.playStopAnimation(),cc.vv.gameData.GetSlotsScript().playCoinFlyAnimation(n))}},playReelStop:function(){this._super(),cc.vv.AudioManager.playEff("games/EmperorQin/","reel_stop",!0);for(var e=0;e<cc.vv.gameData.getGameCfg().row;e++){if(this._symbols[e].GetShowId()===cc.vv.gameData.getGameCfg().scatterId&&cc.vv.gameData.GetSlotsScript().isPlaySymbolScatterAudio(this._reelIdx)){cc.vv.AudioManager.playEff("games/EmperorQin/","symbol_scatter",!0);break}}},hasScatter:function(){for(var e=0;e<cc.vv.gameData.getGameCfg().row;e++){if(this._symbols[e].GetShowId()===cc.vv.gameData.getGameCfg().scatterId)return!0}return!1}}),cc._RF.pop()},{LMSlots_Reel_Base:void 0}],EmperorQin_SelectFreeTimes:[function(e,t,n){"use strict";function a(e,t,n,a,o,c,i){try{var r=e[c](i),s=r.value}catch(e){return void n(e)}r.done?t(s):Promise.resolve(s).then(a,o)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(o,c){var i=e.apply(t,n);function r(e){a(i,o,c,r,s,"next",e)}function s(e){a(i,o,c,r,s,"throw",e)}r(void 0)})}}cc._RF.push(t,"d2bd2pMWT1DTIOhVMm7YSom","EmperorQin_SelectFreeTimes"),cc.Class({extends:cc.Component,properties:{_successCallback:null,_canSelect:!1},onLoad:function(){for(var e=this,t=function(t){cc.find("node_"+t,e.node).on(cc.Node.EventType.TOUCH_END,function(){if(e._canSelect){var n={c:MsgId.SLOT_SUBGAME_DATA};n.gameid=cc.vv.gameData.getGameId(),n.data={},n.data.rtype=2,n.data.choiceId=t,6===t?(cc.vv.AudioManager.playEff("games/EmperorQin/","fanpai1",!0),n.data.choiceItem=e._symbols[Math.floor(5*Math.random())]):(cc.vv.AudioManager.playEff("games/EmperorQin/","fanpai2",!0),n.data.choiceItem=e._symbols[t-1]),cc.vv.NetManager.send(n,!0),e._canSelect=!1}})},n=1;n<7;n++)t(n);this._symbols=[7,6,5,4,3],cc.vv.NetManager.registerMsg(MsgId.SLOT_SUBGAME_DATA,this.onRcvSubgameData,this)},startGame:function(e){var t=this;this.reset(),this._successCallback=e;var n=this.node.parent;n.active=!0;var a=n.getChildByName("free_bg");if(a.opacity=0,a.runAction(cc.fadeTo(.3,230)),this.node.opacity=0,this.node.active=!0,this.node.runAction(cc.sequence(cc.fadeIn(.3),cc.callFunc(function(){cc.find("node_3/spine_light",t.node).active=!0}),cc.delayTime(.25),cc.callFunc(function(){cc.find("node_2/spine_light",t.node).active=!0,cc.find("node_6/spine_light",t.node).active=!0}),cc.delayTime(.25),cc.callFunc(function(){cc.find("node_1/spine_light",t.node).active=!0,cc.find("node_5/spine_light",t.node).active=!0}),cc.delayTime(.25),cc.callFunc(function(){cc.find("node_4/spine_light",t.node).active=!0}))),this._canSelect=!0,cc.vv.gameData.isNeedAutoPlay()){var o=cc.find("node_6",this.node);cc.tween(o).delay(cc.vv.gameData.getManualAutoPlayTime()).call(function(){if(t._canSelect){var e={c:MsgId.SLOT_SUBGAME_DATA};e.gameid=cc.vv.gameData.getGameId(),e.data={},e.data.rtype=2,e.data.choiceId=6,cc.vv.AudioManager.playEff("games/EmperorQin/","fanpai1",!0),e.data.choiceItem=t._symbols[Math.floor(5*Math.random())],cc.vv.NetManager.send(e,!0),t._canSelect=!1}}).start()}},exitGame:function(){this.node.parent.active=!1,this.node.active=!1;var e=cc.vv.gameData.getGameCfg();e.randomSymbols=e.freegameSymbolsCfg[0]},onRcvSubgameData:function(e){var t=this;return o(regeneratorRuntime.mark(function n(){var a,c,i,r,s,m;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(a=e.data,c=cc.vv.gameData.getGameCfg(),2===a.rtype){n.next=4;break}return n.abrupt("return");case 4:cc.vv.gameData.SetTotalFree(6),cc.vv.gameData.SetFreeTime(6),c.randomSymbols=c.freegameSymbolsCfg[a.choiceId],(i=cc.find("node_"+a.choiceId,t.node))&&(6===a.choiceId?(i.getChildByName("bg").active=!1,(r=i.getChildByName("spine_choose")).active=!0,r.getComponent(sp.Skeleton).clearTracks(),r.getComponent(sp.Skeleton).setAnimation(0,"animation2",!1),r.getComponent(sp.Skeleton).setCompleteListener(function(e){if("animation2"===(e.animation?e.animation.name:"")){var n=cc.instantiate(cc.find("node_"+(t._symbols.indexOf(a.choiceItem)+1),t.node));n.parent=i.getChildByName("result_parent");var c=i.getChildByName("pick_light");n.position=cc.v2(0,0);var s=n.getChildByName("spine_select");s.active=!0,s.getComponent(sp.Skeleton).clearTracks(),s.getComponent(sp.Skeleton).setAnimation(0,"animation1",!1),s.getComponent(sp.Skeleton).setCompleteListener(o(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s.active=!1,c.active=!0,e.next=4,t.awaitTime(2);case 4:c.active=!1,t._successCallback&&t._successCallback();case 6:case"end":return e.stop()}},e)}))),r.active=!1}}),(s=i.getChildByName("spine")).active=!0,s.getComponent(sp.Skeleton).clearTracks(),s.getComponent(sp.Skeleton).setAnimation(0,"animation3",!1),s.getComponent(sp.Skeleton).setCompleteListener(function(e){s.active=!1})):((m=i.getChildByName("spine_select")).active=!0,m.getComponent(sp.Skeleton).clearTracks(),m.getComponent(sp.Skeleton).setAnimation(0,"animation1",!1),m.getComponent(sp.Skeleton).setCompleteListener(o(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return m.active=!1,e.next=3,t.awaitTime(2);case 3:t._successCallback&&t._successCallback();case 4:case"end":return e.stop()}},e)})))));case 9:case"end":return n.stop()}},n)}))()},reset:function(){for(var e=1;e<6;e++){cc.find("node_"+e,this.node).getChildByName("spine_light").active=!1}var t=cc.find("node_6",this.node);t.getChildByName("bg").active=!0,t.getChildByName("spine_light").active=!1,t.getChildByName("result_parent").removeAllChildren(),this._successCallback=null,this._canSelect=!1},awaitTime:function(e){var t=this;return new Promise(function(n,a){t.scheduleOnce(function(){n()},e)})},onDestroy:function(){cc.vv.NetManager.unregisterMsg(MsgId.SLOT_SUBGAME_DATA,this.onRcvSubgameData,!1,this)}}),cc._RF.pop()},{}],EmperorQin_SelectJackpotGame:[function(e,t,n){"use strict";function a(e,t,n,a,o,c,i){try{var r=e[c](i),s=r.value}catch(e){return void n(e)}r.done?t(s):Promise.resolve(s).then(a,o)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(o,c){var i=e.apply(t,n);function r(e){a(i,o,c,r,s,"next",e)}function s(e){a(i,o,c,r,s,"throw",e)}r(void 0)})}}function c(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=i(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o,c=!0,r=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return c=e.done,e},e:function(e){r=!0,o=e},f:function(){try{c||null==a.return||a.return()}finally{if(r)throw o}}}}function i(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}cc._RF.push(t,"a28bbSrUplG7axGGqBmvzf/","EmperorQin_SelectJackpotGame"),cc.Class({extends:cc.Component,properties:{prizepool_grand_num:cc.Node,prizepool_major_num:cc.Node,prizepool_minor_num:cc.Node,prizepool_mini_num:cc.Node,result_bg:cc.Node,result_grand:cc.Node,result_major:cc.Node,result_minor:cc.Node,result_mini:cc.Node,spine_winner:cc.Node,particle_celebration:cc.Node,coin_parent:cc.Node,_successCallback:null,_canSelect:!1,_haveOpenReward:null,_winCoin:0},onLoad:function(){var e=this;this._haveOpenReward=[];for(var t=function(t){cc.find("coin_"+(t+1),e.node).on(cc.Node.EventType.TOUCH_END,function(){if(e._canSelect){var n,a=c(e._haveOpenReward);try{for(a.s();!(n=a.n()).done;){if(n.value.choiceId===t+1)return}}catch(e){a.e(e)}finally{a.f()}e._canSelect=!1;var o={c:MsgId.SLOT_SUBGAME_DATA};o.gameid=cc.vv.gameData.getGameId(),o.data={},o.data.rtype=1,o.data.choiceId=t+1,cc.vv.NetManager.send(o,!0)&&(e._canSelect=!1)}})},n=0;n<12;n++)t(n);cc.vv.NetManager.registerMsg(MsgId.SLOT_SUBGAME_DATA,this.onRcvSubgameData,this)},reconnect:function(e,t){var n=this;return o(regeneratorRuntime.mark(function a(){var o,c,i,r,s,m,l,u,p,f;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:for(cc.vv.AudioManager.playBgm("games/EmperorQin/","bonus_bgm",!0),n.reset(),n._successCallback=t,n.node.active=!0,o=cc.vv.gameData.getGameCfg(),e.jackpotValues.length>=4&&(n.prizepool_mini_num.getComponent(cc.Label).string=Global.FormatNumToComma(e.jackpotValues[0]),n.prizepool_minor_num.getComponent(cc.Label).string=Global.FormatNumToComma(e.jackpotValues[1]),n.prizepool_major_num.getComponent(cc.Label).string=Global.FormatNumToComma(e.jackpotValues[2]),n.prizepool_grand_num.getComponent(cc.Label).string=Global.FormatNumToComma(e.jackpotValues[3])),c=0;c<12;c++)i=cc.find("coin_"+(c+1),n.node),r=o.coinCfg[c],(s=i.getChildByName("coin")).active=!0,s.getComponent(sp.Skeleton).clearTracks(),s.getComponent(sp.Skeleton).setToSetupPose(),s.getComponent(sp.Skeleton).setAnimation(0,"animation02",!0),i.position=r.endPos,i.angle=0;for(m=0;m<e.choiceIdxs.length;m++)l=e.choiceIdxs[m],(u=cc.find("coin_"+l,n.node))&&(u.getChildByName("coin").active=!1,(p=u.getChildByName("fuwa")).active=!0,f="animation0"+n._getFuwaAnimationIndex(e.choiceItems[m]),p.getComponent(sp.Skeleton).clearTracks(),p.getComponent(sp.Skeleton).setToSetupPose(),p.getComponent(sp.Skeleton).setAnimation(0,f,!1),n._haveOpenReward.push({choiceId:l,choiceItem:e.choiceItems[m]}));return a.next=10,n.awaitTime(2);case 10:n._updateAllOpenRewardAnimation(),n._canSelect=!0;case 12:case"end":return a.stop()}},a)}))()},startGame:function(e,t){cc.vv.AudioManager.playBgm("games/EmperorQin/","bonus_bgm",!0),this.reset(),this._successCallback=e,this.node.active=!0,t.length>=4&&(this.prizepool_mini_num.getComponent(cc.Label).string=Global.FormatNumToComma(t[0]),this.prizepool_minor_num.getComponent(cc.Label).string=Global.FormatNumToComma(t[1]),this.prizepool_major_num.getComponent(cc.Label).string=Global.FormatNumToComma(t[2]),this.prizepool_grand_num.getComponent(cc.Label).string=Global.FormatNumToComma(t[3])),this.playCoinFly()},exitGame:function(){this.node.active=!1},onRcvSubgameData:function(e){var t=this,n=e.data;if(1===n.rtype){this._haveOpenReward.push({choiceId:n.choiceId,choiceItem:n.choiceItem});var a=cc.find("coin_"+n.choiceId,this.node);if(a){a.getChildByName("coin").active=!1;var i=a.getChildByName("fuwa");0===n.jackpotGame.winCoin?cc.vv.AudioManager.playEff("games/EmperorQin/","bonus_coin",!0):cc.vv.AudioManager.playEff("games/EmperorQin/","bonus_hit",!0),i.active=!0;var r="animation0"+this._getFuwaAnimationIndex(n.choiceItem);i.getComponent(sp.Skeleton).clearTracks(),i.getComponent(sp.Skeleton).setToSetupPose(),i.getComponent(sp.Skeleton).setAnimation(0,r,!1),cc.log("animation name = "+r),i.getComponent(sp.Skeleton).setCompleteListener(function(){var e=o(regeneratorRuntime.mark(function e(a){var o,s,m,l,u,p,f,d,g,v,_,h,S,y;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i.getComponent(sp.Skeleton).setCompleteListener(),(a.animation?a.animation.name:"")!==r){e.next=30;break}if(0!==n.jackpotGame.winCoin){e.next=9;break}t._canSelect=!0,cc.log(t._canSelect),t._updateAllOpenRewardAnimation(),e.next=30;break;case 9:return cc.log(n),t._winCoin=n.jackpotGame.winCoin,cc.vv.gameData.AddCoin(n.jackpotGame.winCoin),e.next=14,t.awaitTime(2);case 14:t.result_bg.active=!0,o=t._findRewardJackpotItem(n.jackpotGame.jackpotId),s=c(o);try{for(s.s();!(m=s.n()).done;)l=m.value,u=cc.find("coin_"+l.choiceId,t.node),p=cc.instantiate(u),f=u.convertToWorldSpaceAR(cc.v2(0,0)),f=t.coin_parent.convertToNodeSpaceAR(f),p.parent=t.coin_parent,p.position=f,d="animation0"+t._getFuwaAnimationIndex(l.choiceItem)+"_2",p.getChildByName("coin").active=!1,(g=p.getChildByName("fuwa")).active=!0,g.getComponent(sp.Skeleton).clearTracks(),g.getComponent(sp.Skeleton).setToSetupPose(),g.getComponent(sp.Skeleton).setAnimation(0,d,!0)}catch(e){s.e(e)}finally{s.f()}for(v=0;v<n.jackpotGame.restIdxs.length;v++)(_=cc.find("coin_"+n.jackpotGame.restIdxs[v],t.node)).getChildByName("coin").active=!1,h="animation0"+t._getFuwaAnimationIndex(n.jackpotGame.restItems[v]),(S=_.getChildByName("fuwa")).active=!0,S.getComponent(sp.Skeleton).clearTracks(),S.getComponent(sp.Skeleton).setToSetupPose(),S.getComponent(sp.Skeleton).setAnimation(0,h,!1);return e.next=21,t.awaitTime(2);case 21:return(y=t._getResultNode(n.jackpotGame.jackpotId)).getChildByName("num").getComponent(cc.Label).string=Global.FormatNumToComma(n.jackpotGame.winCoin),y.runAction(cc.sequence(cc.fadeIn(2),cc.callFunc(function(){t._successCallback&&t._successCallback()}))),e.next=26,t.awaitTime(1);case 26:t.spine_winner.active=!0,t.spine_winner.getComponent(sp.Skeleton).setToSetupPose(),t.spine_winner.getComponent(sp.Skeleton).setAnimation(0,"animation01",!1),t.particle_celebration.active=!0;case 30:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}}},getWinCoin:function(){return this._winCoin},reset:function(){for(var e=cc.vv.gameData.getGameCfg(),t=0;t<12;t++){var n=cc.find("coin_"+(t+1),this.node),a=e.coinCfg[t];n.angle=a.rotation,n.getChildByName("coin").active=!0,n.getChildByName("fuwa").active=!1,n.position=cc.v2(0,900)}this.result_bg.active=!1,this.result_grand.opacity=0,this.result_major.opacity=0,this.result_minor.opacity=0,this.result_mini.opacity=0,this.spine_winner.active=!1,this.particle_celebration.active=!1,this.coin_parent.removeAllChildren(),this._successCallback=null,this._canSelect=!1,this._haveOpenReward=[],this._winCoin=0},playCoinFly:function(){for(var e=this,t=cc.vv.gameData.getGameCfg(),n=function(n){var a=cc.find("coin_"+(n+1),e.node),o=t.coinCfg[n],c=a.getChildByName("coin");c.active=!0,c.getComponent(sp.Skeleton).clearTracks(),c.getComponent(sp.Skeleton).setToSetupPose(),c.getComponent(sp.Skeleton).setAnimation(0,"animation01",!1),c.getComponent(sp.Skeleton).setCompleteListener(function(e){"animation01"===(e.animation?e.animation.name:"")&&(c.getComponent(sp.Skeleton).clearTracks(),c.getComponent(sp.Skeleton).setToSetupPose(),c.getComponent(sp.Skeleton).setAnimation(0,"animation02",!0))}),a.runAction(cc.sequence(cc.spawn(cc.rotateTo(1,0),cc.moveTo(1,o.endPos)),cc.delayTime(2),cc.callFunc(function(){e._canSelect||(e._canSelect=!0)})))},a=0;a<12;a++)n(a)},_getFuwaAnimationIndex:function(e){var t=0;switch(e){case 1:t=4;break;case 2:t=3;break;case 3:t=2;break;case 4:t=1}return t},_updateAllOpenRewardAnimation:function(){for(var e=this,t=function(t){var n=e._haveOpenReward.filter(function(e){return e.choiceItem===t});if(2===n.length){var a,o=c(n);try{for(o.s();!(a=o.n()).done;){var i=a.value,r=cc.find("coin_"+i.choiceId,e.node);if(r){var s=r.getChildByName("fuwa"),m="animation0"+e._getFuwaAnimationIndex(i.choiceItem)+"_1";s.getComponent(sp.Skeleton).clearTracks(),s.getComponent(sp.Skeleton).setToSetupPose(),s.getComponent(sp.Skeleton).setAnimation(0,m,!0)}}}catch(e){o.e(e)}finally{o.f()}}},n=1;n<5;n++)t(n)},_findRewardJackpotItem:function(e){return this._haveOpenReward.filter(function(t){return t.choiceItem===e})},_getResultNode:function(e){var t=null;switch(e){case 1:t=this.result_mini;break;case 2:t=this.result_minor;break;case 3:t=this.result_major;break;case 4:t=this.result_grand}return t},awaitTime:function(e){var t=this;return new Promise(function(n,a){t.scheduleOnce(function(){n()},e)})},onDestroy:function(){cc.vv.NetManager.unregisterMsg(MsgId.SLOT_SUBGAME_DATA,this.onRcvSubgameData,!1,this)}}),cc._RF.pop()},{}],EmperorQin_Slots:[function(e,t,n){"use strict";function a(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=o(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c,i=!0,r=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return i=e.done,e},e:function(e){r=!0,c=e},f:function(){try{i||null==a.return||a.return()}finally{if(r)throw c}}}}function o(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function i(e,t,n,a,o,c,i){try{var r=e[c](i),s=r.value}catch(e){return void n(e)}r.done?t(s):Promise.resolve(s).then(a,o)}function r(e){return function(){var t=this,n=arguments;return new Promise(function(a,o){var c=e.apply(t,n);function r(e){i(c,a,o,r,s,"next",e)}function s(e){i(c,a,o,r,s,"throw",e)}r(void 0)})}}cc._RF.push(t,"e1fe3jmr6BEIoivol3GuX7L","EmperorQin_Slots"),cc.Class({extends:e("LMSlots_Slots_Base"),properties:{_curCoinInBowlIndex:0,_jackpotGameScript:null,_selectFreeTimesScript:null,_playBowlLight:!0,_bowlLightTimer:10,_bg:null,_qinshihuangTransition:null},Init:function(){this._super();var e=cc.vv.gameData.getDeskInfo();e&&e.coinPot&&this.updateCoinInBowl(e.coinPot),this._bg=cc.find("reels_frame/bg",this.node),this._qinshihuangTransition=cc.find("transition/qinshihuang",this.node.parent),this._qinshihuangTransition.active=!1,Global.SlotsSoundMgr.playEffect("gameStart"),Global.SlotsSoundMgr.playEffect("KingEnter")},StartMove:function(){this._super(),Global.SlotsSoundMgr.playNormalBgm()},ReconnectShow:function(){var e=this;return r(regeneratorRuntime.mark(function t(){var n,a,o,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if((n=cc.vv.gameData.getDeskInfo()).jackpotGame&&(e._bottomScript.ShowBtnsByState("unstoped"),e.reconnectSelectJackpotGame()),!n.freeGameOptions){t.next=29;break}if(1!==n.freeGameOptions.state){t.next=16;break}return t.next=6,e.enterSelectFreeTimes();case 6:return e.cutScenes(),t.next=9,e.awaitTime(.5);case 9:return e._selectFreeTimesScript.exitGame(),t.next=12,e.awaitTime(2);case 12:cc.vv.AudioManager.playBgm("games/EmperorQin/","fgbgm",!0),e.CanDoNextRound(),t.next=29;break;case 16:if(2!==n.freeGameOptions.state){t.next=29;break}a=cc.vv.gameData.getGameCfg(),o=1;case 19:if(!(o<a.freegameSymbolsCfg.length)){t.next=27;break}if(-1===(c=a.freegameSymbolsCfg[o]).indexOf(n.freeGameOptions.choiceSymbol)){t.next=24;break}return a.randomSymbols=c,t.abrupt("break",27);case 24:o++,t.next=19;break;case 27:e.ShowGameview(!0),e.CanDoNextRound();case 29:case"end":return t.stop()}},t)}))()},OnSpinEnd:function(){var e=this;return r(regeneratorRuntime.mark(function t(){var n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.ShowWinTrace(),n=cc.vv.gameData.GetGameWin(),a=cc.vv.gameData.GetGameWin(),cc.vv.gameData.GetTotalFree()>0&&cc.vv.gameData.GetTotalFree()!==cc.vv.gameData.GetFreeTime()&&(a=cc.vv.gameData.GetGameTotalFreeWin()),e.ShowBottomWin(n,a,!0,r(regeneratorRuntime.mark(function t(){var n,o,c,i,s,m,l,u,p,f,d,g;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e._gameInfo||!e._gameInfo.jackpotGame){t.next=3;break}return t.next=3,e.triggerJackpotGame();case 3:if(!e.CheckEnterFreeGame()){t.next=22;break}return e._bottomScript.ShowBtnsByState("stopped"),e.Backup(),cc.vv.AudioManager.playEff("games/EmperorQin/","bell",!0),t.next=9,e.awaitTime(1);case 9:return t.next=11,e.enterSelectFreeTimes();case 11:return e.cutScenes(),t.next=14,e.awaitTime(.5);case 14:return e.ShowGameview(!0),e._selectFreeTimesScript.exitGame(),t.next=18,e.awaitTime(2);case 18:cc.vv.AudioManager.playBgm("games/EmperorQin/","fgbgm",!0),e.CanDoNextRound(),t.next=83;break;case 22:if(!e.CheckExtraFreeGame()){t.next=43;break}return e._bottomScript.ShowBtnsByState("stopped"),t.next=26,e.awaitTime(1);case 26:return(n=cc.find("free_dialog",e.node.parent)).active=!0,(o=cc.find("extra_node",n)).active=!0,cc.vv.AudioManager.playEff("games/EmperorQin/","fgend",!0),(c=cc.find("bg",o)).scale=0,c.runAction(cc.scaleTo(.1,1)),t.next=36,e.awaitTime(4);case 36:return cc.vv.AudioManager.playEff("games/EmperorQin/","popup_out",!0),c.runAction(cc.sequence(cc.scaleTo(.1,0),cc.callFunc(function(){o.active=!1,n.active=!1}))),t.next=40,e.awaitTime(2);case 40:e.CanDoNextRound(),t.next=83;break;case 43:if(!e.CheckExitFreeGame()){t.next=80;break}return e._bottomScript.ShowBtnsByState("moveing_1"),t.next=47,e.awaitTime(1);case 47:return(i=cc.find("free_dialog",e.node.parent)).active=!0,cc.vv.AudioManager.playEff("games/EmperorQin/","jpwin",!0),(s=cc.find("free_bg",i)).opacity=0,s.runAction(cc.fadeTo(.1,200)),(m=cc.find("result_node",i)).active=!0,(l=cc.find("bg",m)).scale=0,l.opacity=0,l.runAction(cc.sequence(cc.spawn(cc.fadeIn(.1),cc.scaleTo(.1,1.1)),cc.scaleTo(.1,1))),(u=cc.find("title",l)).opacity=0,u.runAction(cc.fadeIn(.3)),(p=cc.find("coin_bg",l)).opacity=0,p.runAction(cc.fadeIn(.3)),(f=cc.find("coin",l)).getComponent(cc.Label).string=Global.FormatNumToComma(cc.vv.gameData.GetGameTotalFreeWin()),f.runAction(cc.sequence(cc.delayTime(.3),cc.scaleTo(.1,1.2),cc.scaleTo(.4,1))),(d=cc.find("btn_collect",l)).opacity=0,d.scale=0,d.runAction(cc.sequence(cc.delayTime(.3),cc.spawn(cc.scaleTo(.1,1.1),cc.fadeIn(.1)),cc.scaleTo(.1,1))),t.next=74,cc.vv.gameData.awaitTime(.5);case 74:d.off("click"),g=function(){var t=r(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return cc.vv.AudioManager.playEff("games/EmperorQin/","free_dialog_collect_click",!0),l.runAction(cc.sequence(cc.fadeTo(.2,150),cc.spawn(cc.fadeOut(.2),cc.scaleTo(.2,0)))),t.next=4,e.awaitTime(.4);case 4:return(n=cc.find("fg_jiesuan",m)).active=!0,t.next=8,e.awaitTime(.1);case 8:return s.runAction(cc.sequence(cc.delayTime(.4),cc.fadeOut(.2),cc.callFunc(function(){n.active=!1}))),t.next=11,e.awaitTime(.3);case 11:return e.cutScenes(),t.next=14,e.awaitTime(.5);case 14:return e.resetAllSymbol(),e.Resume(),e.ShowGameview(!1),t.next=19,e.awaitTime(2);case 19:a=cc.vv.gameData.GetGameTotalFreeWin(),e.ShowBottomWin(a,a,!0,function(){Global.SlotsSoundMgr.stopBgm(),Global.SlotsSoundMgr.playNormalBgm(),e.CanDoNextRound()});case 21:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),cc.vv.gameData.checkAutoPlay(d,g),d.on("click",r(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.stopAllActions(),e.next=3,g();case 3:case"end":return e.stop()}},e)}))),t.next=83;break;case 80:return t.next=82,e.awaitTime(.1);case 82:e.CanDoNextRound();case 83:case"end":return t.stop()}},t)})));case 5:case"end":return t.stop()}},t)}))()},CheckEnterFreeGame:function(){return!(!this._gameInfo.freeGameOptions||1!==this._gameInfo.freeGameOptions.state)},CheckExtraFreeGame:function(){return!!(this._gameInfo.freeResult&&this._gameInfo.freeResult.freeInfo&&this._gameInfo.freeResult.freeInfo.freeCnt>0)},CheckExitFreeGame:function(){return cc.vv.gameData.GetTotalFree()>0&&0===cc.vv.gameData.GetFreeTime()},triggerFreeGame:function(){return r(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))()},cutScenes:function(){var e=this;cc.vv.AudioManager.playEff("games/EmperorQin/","ngtowheel",!0),this._qinshihuangTransition.active=!0;var t=this._qinshihuangTransition.getComponent(sp.Skeleton);t.setAnimation(0,"skill",!1),t.setCompleteListener(function(){e._qinshihuangTransition.active=!1,t.setCompleteListener(null)})},triggerJackpotGame:function(){var e=this;return r(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=r(regeneratorRuntime.mark(function t(n){var a,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e._bottomScript.ShowBtnsByState("unstoped"),e._playBowlLight=!1,0!==e._curCoinInBowlIndex){t.next=7;break}return t.next=5,e.awaitTime(1);case 5:t.next=14;break;case 7:if(1!==e._curCoinInBowlIndex){t.next=12;break}return t.next=10,e.awaitTime(.5);case 10:t.next=14;break;case 12:return t.next=14,e.awaitTime(.1);case 14:return t.next=16,new Promise(function(t){var n=cc.find("reels_frame/bg",e.node),a=cc.find("reels_frame/spine_bowl",e.node);cc.vv.AudioManager.playEff("games/EmperorQin/","bowl_open",!0),cc.vv.AudioManager.playEff("games/EmperorQin/","wawa",!0),n.active=!1,a.active=!0,a.getComponent(sp.Skeleton).clearTracks(),a.getComponent(sp.Skeleton).setToSetupPose(),a.getComponent(sp.Skeleton).setAnimation(0,"animation3",!1),a.getComponent(sp.Skeleton).setCompleteListener(function(o){var c=o.animation?o.animation.name:"";"animation3"===c?(a.getComponent(sp.Skeleton).clearTracks(),a.getComponent(sp.Skeleton).setToSetupPose(),a.getComponent(sp.Skeleton).setAnimation(0,"animation4",!1)):"animation4"===c?(a.getComponent(sp.Skeleton).clearTracks(),a.getComponent(sp.Skeleton).setToSetupPose(),a.getComponent(sp.Skeleton).setAnimation(0,"animation5",!1)):"animation5"===c&&(a.active=!1,n.active=!0,e._curCoinInBowlIndex=0,t())})});case 16:return t.next=18,e.enterSelectJackpotGame();case 18:a=e._jackpotGameScript.getWinCoin(),o=cc.vv.gameData.GetGameWin()+a,cc.vv.gameData.GetTotalFree()>0&&cc.vv.gameData.GetTotalFree()!==cc.vv.gameData.GetFreeTime()&&(o=cc.vv.gameData.GetGameTotalFreeWin()+a),e.ShowBottomWin(a,o,!0,r(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return cc.vv.AudioManager.playEff("games/EmperorQin/","music_FairyDragon_enter",!0),t.next=3,e.awaitTime(3);case 3:return e.cutScenes(),t.next=6,e.awaitTime(.5);case 6:return e._jackpotGameScript.exitGame(),e.updateCoinInBowl(),t.next=10,e.awaitTime(2);case 10:e._playBowlLight=!0,Global.SlotsSoundMgr.playNormalBgm(),n&&n();case 13:case"end":return t.stop()}},t)})));case 22:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},reconnectSelectJackpotGame:function(){var e=this;return r(regeneratorRuntime.mark(function t(){var n,a,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=cc.vv.gameData.getDeskInfo()).jackpotGame){t.next=4;break}return t.next=4,new Promise(function(t){e._jackpotGameScript.reconnect(n.jackpotGame,t)});case 4:a=e._jackpotGameScript.getWinCoin(),o=n.winCoin?n.winCoin:0+a,cc.vv.gameData.GetTotalFree()>0&&cc.vv.gameData.GetTotalFree()!==cc.vv.gameData.GetFreeTime()&&(o=cc.vv.gameData.GetTotalFreeWin()+a),e.ShowBottomWin(a,o,!0,r(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.awaitTime(3);case 2:return e.cutScenes(),t.next=5,e.awaitTime(.5);case 5:return e._jackpotGameScript.exitGame(),t.next=8,e.awaitTime(2);case 8:Global.SlotsSoundMgr.playNormalBgm(),e.CanDoNextRound();case 10:case"end":return t.stop()}},t)})));case 8:case"end":return t.stop()}},t)}))()},enterSelectJackpotGame:function(){var e=this;return new Promise(function(t){e._jackpotGameScript.startGame(t,e._gameInfo.jackpotGame.jackpotValues)})},enterSelectFreeTimes:function(){var e=this;return new Promise(function(t){e._selectFreeTimesScript.startGame(t)})},setJackpotGameScript:function(e){this._jackpotGameScript=e},setSelectFreeTimesScript:function(e){this._selectFreeTimesScript=e},playCoinFlyAnimation:function(e){var t=this;return r(regeneratorRuntime.mark(function n(){var a,o,c,i,r,s,m;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e.playStopAnimation(),a=e.node.convertToWorldSpaceAR(cc.v2(0,0)),n.next=4,t.awaitTime(.3);case 4:for(o=t.node.parent.convertToNodeSpaceAR(a),c=t._bg.convertToWorldSpaceAR(cc.v2(0,0)),(i=t.node.parent.convertToNodeSpaceAR(c)).y+=150,cc.vv.AudioManager.playEff("games/EmperorQin/","coin_fly",!0),r=[cc.v2(101,56),cc.v2(-95.6,48.6),cc.v2(-47.7,40.2),cc.v2(-44,-124),cc.v2(108.5,28),cc.v2(121.6,-11.6),cc.v2(92.7,-10.7),cc.v2(-135,-49.5)],s=function(e){var n=cc.v2(o.x+r[e].x,o.y+r[e].y),a=cc.instantiate(cc.find("spine_coin",t.node));a.active=!0,a.parent=t.node.parent,a.position=o,a.scale=1,a.angle=Global.random(1,360);var c=cc.find("coin",a);c.active=!0;var s=cc.find("star",a);s.active=!1,cc.tween(a).parallel(cc.tween(a).delay(.2).to(.65,{scale:.4},{easing:"quadIn"}).call(function(){c.active=!1,s.active=!0,s.scale=2.5,a.stopAllActions();var e=s.getComponent(sp.Skeleton);e.setAnimation(0,"animation2",!1),e.setCompleteListener(function(){a.parent=null,e.setCompleteListener(null)})}),cc.tween(a).to(.2,{position:n},{easing:"quadIn"}).to(.7,{position:i},{easing:"quadIn"})).start()},m=1;m<r.length;m++)s(m);t.scheduleOnce(function(){cc.vv.AudioManager.playEff("games/EmperorQin/","coin_fall",!0),t._gameInfo&&t._gameInfo.coinPot&&t.updateCoinInBowl(t._gameInfo.coinPot)},.9);case 13:case"end":return n.stop()}},n)}))()},updateCoinInBowl:function(e){var t=cc.find("reels_frame/bg/jubaopen/coin_1",this.node),n=cc.find("reels_frame/bg/jubaopen/coin_2",this.node),a=cc.find("reels_frame/bg/jubaopen/coin_3",this.node);if(e){var o=e.totalCnt/e.needCnt;o<.5?(this._curCoinInBowlIndex=0,t.opacity=255,n.opacity=0,a.opacity=0):o>=1?(0===this._curCoinInBowlIndex?(n.runAction(cc.fadeIn(.3)),a.runAction(cc.sequence(cc.delayTime(.3),cc.fadeIn(.3)))):1===this._curCoinInBowlIndex&&a.runAction(cc.fadeIn(.3)),this._curCoinInBowlIndex=2):(this._curCoinInBowlIndex=1,n.runAction(cc.fadeIn(.3)))}else this._curCoinInBowlIndex=0,t.opacity=255,n.opacity=0,a.opacity=0},isPlaySymbolScatterAudio:function(e){for(var t=!0,n=0;n<e;n++){if(!this._reels[n].hasScatter()){t=!1;break}}return t},update:function(e){if(this._super(e),this._playBowlLight&&(this._bowlLightTimer-=e,this._bowlLightTimer<=0)){this._bowlLightTimer=10;var t=cc.find("reels_frame/bg/jubaopen/spine",this.node);t.getComponent(sp.Skeleton).setToSetupPose(),t.getComponent(sp.Skeleton).setAnimation(0,"animation1",!1)}},awaitTime:function(e){var t=this;return new Promise(function(n,a){t.scheduleOnce(function(){n()},e)})},resetAllSymbol:function(){var e,t=a(this._reels);try{for(t.s();!(e=t.n()).done;){var n,o=a(e.value._symbols);try{for(o.s();!(n=o.n()).done;){n.value.StartMove()}}catch(e){o.e(e)}finally{o.f()}}}catch(e){t.e(e)}finally{t.f()}}}),cc._RF.pop()},{LMSlots_Slots_Base:void 0}],EmperorQin_Symbol:[function(e,t,n){"use strict";cc._RF.push(t,"cde9claRA9HwIFcxJM7z0bI","EmperorQin_Symbol"),cc.Class({extends:e("LMSlots_Symbol_Base"),properties:{},ShowRandomSymbol:function(){var e=cc.vv.gameData.getGameCfg();e.randomSymbols||(e.randomSymbols=e.freegameSymbolsCfg[0]),this._super()},playWinTweenAction:function(){this._showNode.stopAllActions(),cc.tween(this._showNode).repeatForever(cc.tween().to(.35,{opacity:0}).to(.35,{opacity:255}).delay(1)).start()},stopWinTweenAction:function(){this._showNode&&(this._showNode.active=!0,this._showNode.stopAllActions(),this._showNode.opacity=255)}}),cc._RF.pop()},{LMSlots_Symbol_Base:void 0}]},{},["EmperorQin_Cfg","EmperorQin_GameData","EmperorQin_Logic","EmperorQin_Reel","EmperorQin_SelectFreeTimes","EmperorQin_SelectJackpotGame","EmperorQin_Slots","EmperorQin_Symbol"]);
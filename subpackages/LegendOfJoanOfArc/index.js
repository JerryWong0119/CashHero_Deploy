window.__require=function e(t,n,o){function i(r,s){if(!n[r]){if(!t[r]){var c=r.split("/");if(c=c[c.length-1],!t[c]){var _="function"==typeof __require&&__require;if(!s&&_)return _(c,!0);if(a)return a(c,!0);throw new Error("Cannot find module '"+r+"'")}r=c}var u=n[r]={exports:{}};t[r][0].call(u.exports,function(e){return i(t[r][1][e]||e)},u,u.exports,e,t,n,o)}return n[r].exports}for(var a="function"==typeof __require&&__require,r=0;r<o.length;r++)i(o[r]);return i}({LegendOfJoanOfArc_BonusGame:[function(e,t,n){"use strict";function o(e,t,n,o,i,a,r){try{var s=e[a](r),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(o,i)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(i,a){var r=e.apply(t,n);function s(e){o(r,i,a,s,c,"next",e)}function c(e){o(r,i,a,s,c,"throw",e)}s(void 0)})}}cc._RF.push(t,"27c4bCaQiZB3oK25KeYmv0D","LegendOfJoanOfArc_BonusGame"),cc.Class({extends:e("LMSlots_PauseUI_Base"),properties:{_exitCallBack:null,_curTimes:3,_curUnlockNum:0,_reels:[],_shelterList:[],_bonusPoolList:[]},start:function(){},Init:function(){this.initBonusNode(),this._topScript=cc.vv.gameData.GetTopScript(),this._bottomScript=cc.vv.gameData.GetBottomScript(),this._cfg=cc.vv.gameData.getGameCfg(),this._col=this._cfg.bonus_col,this._row=this._cfg.bonus_row,this.createReels(this._col,this._row),this.initBonusUI()},createReels:function(e,t){this._cfg.scripts.Reels;for(var n=0;n<e;n++){var o=cc.find("reels/reel"+(n+1),this._bonus_slots).addComponent("LegendOfJoanOfArc_BonusReel");o.Init(n,1,t,this._topAniNode),this._reels.push(o)}},initBonusNode:function(){this._normal_slots=cc.find("safe_node/slots",this.node),this._bonus_slots=cc.find("safe_node/bonus_slots",this.node),this._prizePool=cc.find("Canvas/safe_node/LMSlots_PrizePool_1"),this._topAniNode=cc.find("top_ani",this._bonus_slots),this._gemTopNode=cc.find("top_gem",this._bonus_slots),this._mask_frame=cc.find("mask_frame",this._bonus_slots),this._frame_top=cc.find("frame_top",this._bonus_slots),this._node_reels=cc.find("reels",this._bonus_slots),this._node_bonus_win=cc.find("node_bonus_win",this._bonus_slots),this._frame_bg=cc.find("bg",this._mask_frame),this._node_col=cc.find("node_col",this._mask_frame),this._node_row_left=cc.find("node_row_left",this._mask_frame),this._node_row_right=cc.find("node_row_right",this._mask_frame),this._bonus_bg=cc.find("bonus_bg",this._mask_frame),this._spr_left=cc.find("spr_left",this._frame_top),this._spr_right=cc.find("spr_right",this._frame_top),this._spr_up=cc.find("spr_up",this._frame_top),this._spr_up_0=cc.find("spr_up_0",this._frame_top),this._par_left=cc.find("par_left",this._frame_top),this._par_right=cc.find("par_right",this._frame_top),this._node_tit=cc.find("node_tit",this._frame_top),this._shelterList.push(cc.find("shelter_1",this._frame_top)),this._shelterList.push(cc.find("shelter_2",this._frame_top)),this._shelterList.push(cc.find("shelter_3",this._frame_top)),this._shelterList.push(cc.find("shelter_4",this._frame_top))},initBonusUI:function(){this._normal_slots.active=!0,this._bonus_slots.active=!1,this._frame_bg.getChildByName("spr").active=!1,this.setLineState(this._node_col,!1),this.setLineState(this._node_row_left,!1),this.setLineState(this._node_row_right,!1),this._spr_up.active=!1,this._spr_up_0.active=!1,this._bonus_bg.active=!1,this._par_left.active=!1,this._par_right.active=!1,this._node_tit.active=!1,this._node_reels.active=!1,this._node_bonus_win.active=!1;for(var e=0;e<this._shelterList.length;e++)this._shelterList[e].active=!1},setLineState:function(e,t){for(var n=0;n<e.childrenCount;n++)e.children[n].active=t},triBonusGame:function(e){var t=this;return i(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t._exitCallBack=e,Global.SlotsSoundMgr.playBgm("bonus_bgm"),n.next=4,t.playTriAnim();case 4:case"end":return n.stop()}},n)}))()},playTriAnim:function(){var e=this;return new Promise(function(){var t=i(regeneratorRuntime.mark(function t(n,o){var i,a,r,s,c,_,u,l,p,f,m,d,h,v,g,b,S,w,y,G,x,B,C;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._normal_slots.active=!1,e._bonus_slots.active=!0,e._frame_bg.y=-383,e._spr_left.y=-383,e._spr_right.y=-383,e._spr_up_0.active=!0,e._spr_up_0.opacity=255,e.lockJackpot(e._bonusPoolList),t.next=10,e.awaitTime(.5);case 10:return Global.SlotsSoundMgr.playEffect("reel_change"),i=.5,cc.tween(e._spr_up_0).to(i,{opacity:0}).start(),t.next=15,e.awaitTime(i);case 15:return a=.8,cc.tween(e._frame_bg).to(a,{position:cc.v2(0,0)}).start(),cc.tween(e._spr_left).to(a,{position:cc.v2(e._spr_left.x,0)}).start(),cc.tween(e._spr_right).to(a,{position:cc.v2(e._spr_right.x,0)}).start(),t.next=21,e.awaitTime(a);case 21:return r=.4,e._spr_up.active=!0,e._spr_up.opacity=0,cc.tween(e._spr_up).to(r,{opacity:255}).start(),(s=e._frame_bg.getChildByName("spr")).active=!0,s.opacity=0,cc.tween(s).to(r,{opacity:155}).start(),t.next=31,e.awaitTime(r);case 31:for(c=1.4,_=function(t){var n=e._node_col.children[t];n.active=!0,n.y=-456,"par"===n.name&&n.getComponent(cc.ParticleSystem).resetSystem(),cc.tween(n).to(c,{position:cc.v2(n.x,456)}).call(function(){"par"===n.name&&(n.active=!1)}).start()},u=0;u<e._node_col.childrenCount;u++)_(u);return e._par_left.active=!0,e._par_left.position=cc.v2(0,-460),e._par_left.getComponent(cc.ParticleSystem).resetSystem(),e._par_right.active=!0,e._par_right.position=cc.v2(0,-460),e._par_right.getComponent(cc.ParticleSystem).resetSystem(),cc.tween(e._par_left).to(c,{position:cc.v2(-340,-460)}).start(),cc.tween(e._par_right).to(c,{position:cc.v2(340,-460)}).start(),t.next=44,e.awaitTime(c);case 44:for(l=1.4,p=function(t){var n=e._node_row_left.children[t];n.active=!0,n.x=-335,"par"===n.name&&n.getComponent(cc.ParticleSystem).resetSystem(),cc.tween(n).to(l,{position:cc.v2(335,n.y)}).call(function(){"par"===n.name&&(n.active=!1)}).start()},f=0;f<e._node_row_left.childrenCount;f++)p(f);for(m=function(t){var n=e._node_row_right.children[t];n.active=!0,n.x=335,"par"===n.name&&n.getComponent(cc.ParticleSystem).resetSystem(),cc.tween(n).to(l,{position:cc.v2(-335,n.y)}).call(function(){"par"===n.name&&(n.active=!1)}).start()},d=0;d<e._node_row_right.childrenCount;d++)m(d);return cc.tween(e._par_left).to(l,{position:cc.v2(-335,460)}).start(),cc.tween(e._par_right).to(l,{position:cc.v2(335,460)}).start(),t.next=53,e.awaitTime(l);case 53:return h=.7,cc.tween(e._par_left).to(h,{position:cc.v2(0,460)}).call(function(){e._par_left.active=!1}).start(),cc.tween(e._par_right).to(h,{position:cc.v2(0,460)}).call(function(){e._par_right.active=!1}).start(),t.next=58,e.awaitTime(h);case 58:return v=.5,e._node_tit.active=!0,e._node_tit.setScale(0),Global.SlotsSoundMgr.playEffect("bonus_respin_board"),cc.tween(e._node_tit).to(v,{scale:1},{easing:"backOut"}).start(),e._curTimes=3,e.setTitleNum(e._curTimes),e._bonus_bg.active=!0,e._node_reels.active=!0,e.initAllSymbol(!0),t.next=70,e.awaitTime(.5);case 70:g=cc.vv.gameData.getGameCfg().bonusUnlockList,b=0;case 72:if(!(b<e._shelterList.length)){t.next=82;break}if(!(e._curUnlockNum<g[b])){t.next=79;break}return Global.SlotsSoundMgr.playEffect("reel_lock"),e._shelterList[b].active=!0,cc.find("spr_lock/lbl_num",e._shelterList[b]).getComponent(cc.Label).string=g[b]-e._curUnlockNum,t.next=79,e.awaitTime(.3);case 79:b++,t.next=72;break;case 82:for(y in S=1,w=cc.vv.gameData.GetBonusInfo(),Global.SlotsSoundMgr.playEffect("bonus_coin_land"),w)G=Number(y.substring("idx_".length)),G+=20,x=e.getColByIdx(G),B=e.getRowByIdx(G),(C=e.cloneSymToTop(B,x)).node.active=!0,C.playBonusWin(!0),C.playBonusAnim();return t.next=88,e.awaitTime(S);case 88:return t.next=90,cc.vv.gameData.GetPopupScript().showBonusPress();case 90:cc.vv.gameData.SetIsBonusGame(!0),e.sendNextRound(),n();case 93:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}())},enterBonusGame:function(e){var t=this;return i(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t._exitCallBack=e,Global.SlotsSoundMgr.playBgm("bonus_bgm"),t.showEnterState(),n.next=5,t.awaitTime(2);case 5:cc.vv.gameData.SetIsBonusGame(!0),t.sendNextRound();case 7:case"end":return n.stop()}},n)}))()},showEnterState:function(){this._normal_slots.active=!1,this._bonus_slots.active=!0,this._spr_left.position=cc.v2(this._spr_left.x,0),this._spr_right.position=cc.v2(this._spr_right.x,0),this._spr_up.active=!0,this._spr_up.opacity=255,this.lockJackpot(this._bonusPoolList);for(var e=0;e<this._node_col.childrenCount;e++)"par"===this._node_col.children[e].name?this._node_col.children[e].active=!1:(this._node_col.children[e].active=!0,this._node_col.children[e].position=cc.v2(this._node_col.children[e].x,375));for(var t=0;t<this._node_row_left.childrenCount;t++)"par"===this._node_row_left.children[t].name?this._node_row_left.children[t].active=!1:(this._node_row_left.children[t].active=!0,this._node_row_left.children[t].position=cc.v2(329,this._node_row_left.children[t].y));for(var n=0;n<this._node_row_right.childrenCount;n++)"par"===this._node_row_right.children[n].name?this._node_row_right.children[n].active=!1:(this._node_row_right.children[n].active=!0,this._node_row_right.children[n].position=cc.v2(-329,this._node_row_right.children[n].y));this._node_tit.active=!0,this._node_tit.setScale(1),this._curTimes=cc.vv.gameData.GetBonusRestNum(),this.setTitleNum(this._curTimes),this._bonus_bg.active=!0,this._node_reels.active=!0,this.initAllSymbol(!1);for(var o=cc.vv.gameData.getGameCfg().bonusUnlockList,i=0;i<this._shelterList.length;i++)this._curUnlockNum<o[i]?(this._shelterList[i].active=!0,cc.find("spr_lock/lbl_num",this._shelterList[i]).getComponent(cc.Label).string=o[i]-this._curUnlockNum):this._shelterList[i].active=!1;var a=cc.vv.gameData.GetBonusInfo();for(var r in a){var s=Number(r.substring("idx_".length)),c=this.getColByIdx(s),_=this.getRowByIdx(s),u=this.cloneSymToTop(_,c);u.node.active=!0,u.playBonusWin(!0),u.playBonusAnim()}},exitBonusGame:function(){this.initBonusUI(),cc.vv.gameData.SetIsBonusGame(!1),this._gemTopNode.destroyAllChildren()},initPoolList:function(){for(var e=0;e<this._bonusPoolList.length;e++){var t=cc.vv.gameData.GetBonusPool();cc.find("lbl_num",this._bonusPoolList[e]).getComponent(cc.Label).string=Global.FormatNumToComma(t[e])}},setTitleNum:function(e){var t=cc.find("lbl_remain",this._node_tit);e>0?(t.active=!0,t.getComponent(cc.Label).string=e):t.active=!1,cc.find("spr_spins",this._node_tit).active=e>1,cc.find("spr_spin",this._node_tit).active=1===e,cc.find("spr_last",this._node_tit).active=0===e,cc.find("spr_complete",this._node_tit).active=e<0;var n=cc.find("spine",this._node_tit);this._curTimes<e?(n.active=!0,n.getComponent(sp.Skeleton).setAnimation(0,"animation",!1)):n.active=!1,this._curTimes=e},initAllSymbol:function(e){var t=cc.vv.gameData.GetBonusInfo(),n=this.creatReelData(t,e);this._curUnlockNum=0;for(var o=0;o<this._col*this._row;o++){var i=this.GetSymbolByIdx(o+1);if(14===n[o].sid){var a=cc.vv.gameData.getGameCfg(),r=Global.random(1,a.randomSymbolsFirst.length);n[o].sid=a.randomSymbolsFirst[r-1]}else n[o].data&&n[o].data.unlock&&(this._curUnlockNum+=1);i.ShowById(n[o].sid,n[o].data)}},cloneSymToTop:function(e,t){var n=cc.vv.gameData.getGameCfg().scripts.Symbols,o=cc.find(cc.js.formatStr("top_Gem_%s_%s",e,t),this._gemTopNode);if(o)return o.active=!0,o.getComponent(n);var i=this._reels[t].GetSymbolByRow(e);if(i){var a=i.node.convertToWorldSpaceAR(cc.v2(0)),r=cc.instantiate(i.node);return r.parent=this._gemTopNode,r.name=cc.js.formatStr("top_Gem_%s_%s",e,t),r.position=this._topAniNode.convertToNodeSpaceAR(a),r.getComponent(n)}},getSymbolTopAni:function(e,t){var n=cc.vv.gameData.getGameCfg().scripts.Symbols,o=cc.find(cc.js.formatStr("top_Gem_%s_%s",e,t),this._gemTopNode);return o?(o.active=!0,o.getComponent(n)):null},creatReelData:function(e,t){for(var n=[],o=0;o<this._col*this._row;o++){var i={sid:14,data:{}};n.push(i)}for(var a in e){var r=Number(a.substring("idx_".length));t&&(r+=20),n[r-1].sid=4,n[r-1].data=e[a]}return n},StartMove:function(){this._bStopRightnow=null,this._gameInfo=null,this._topScript.StartMove(),this.MoveReels(this._reels),this._stopTime=this.GetStopTime(),this._curTimes-=1,this.setTitleNum(this._curTimes),Global.SlotsSoundMgr.playEffect("bonus_remaining")},MoveReels:function(e){this.moveReelLastIdx=-1;for(var t=0;t<e.length;t++){var n=e[t];n.StartMove();var o=n.GetReelIdx();o>this.moveReelLastIdx&&(this.moveReelLastIdx=o)}},StopMove:function(){this._bStopRightnow=!0,this._bottomScript.ShowBtnsByState("moveing_1"),this._stopTime=-1;for(var e=0;e<this._reels.length;e++){var t=this._reels[e];t.StopMove(0),t.StopMoveRightNow()}},onMsgSpine:function(e){this._gameInfo=e;var t=e.resultCards;this.SetSlotsResult(t)},SetSlotsResult:function(e){for(var t=e.length/this._col,n=[],o=0;o<e.length;o++){Math.floor(o/t);var i=o%this._col;if(this._cfg.symbol[e[o]]){var a={};if(a.sid=e[o],14===a.sid){var r=cc.vv.gameData.getGameCfg(),s=Global.random(1,r.randomSymbolsFirst.length);a.sid=r.randomSymbolsFirst[s-1]}var c=cc.vv.gameData.GetBonusInfo();for(var _ in c){Number(_.substring("idx_".length))===o+1&&(a.data=c[_])}n[i]||(n[i]=[]),n[i].unshift(a)}}for(var u=0;u<this._reels.length;u++){var l=this._reels[u],p=n[u];l.SetResult(p)}},OnReelBounsActionEnd:function(e){for(var t=0;t<this._row;t++){if(this.getSymbolTopAni(t,e));else{var n=this._reels[e].GetSymbolByRow(t);if(this._cfg.gemIdList.includes(n.GetShowId())){4===n.GetShowId()?Global.SlotsSoundMgr.playEffect("bonus_coin_land"):Global.SlotsSoundMgr.playEffect("bonus_coin_effect");var o=this.cloneSymToTop(t,e);o.node.active=!0,o.playBonusWin(!0),o.playBonusAnim(),o.GetData()&&o.GetData().unlock&&(this._curUnlockNum+=1)}}}this._bStopRightnow||this.hideShelter(e)},OnSpinEnd:function(){var e=this;return i(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=cc.vv.gameData.GetBonusRestNum(),e.setTitleNum(n),3===n&&Global.SlotsSoundMgr.playEffect("bonus_remainingReset"),t.next=5,e.hideShelter();case 5:if(0!==n){t.next=19;break}return t.next=8,e.playCompleteAnim();case 8:return cc.vv.gameData.GetPopupScript().playBonusQpAnim(),t.next=11,e.awaitTime(1);case 11:return e.exitBonusGame(),e._prizePool.active=!0,t.next=15,e.awaitTime(1);case 15:e._exitCallBack&&e._exitCallBack(),cc.vv.gameData.GetSlotsScript().playGameBgm(),t.next=22;break;case 19:return t.next=21,e.awaitTime(1);case 21:e.sendNextRound();case 22:case"end":return t.stop()}},t)}))()},hideShelter:function(e){var t=this;return new Promise(function(){var e=i(regeneratorRuntime.mark(function e(n,o){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(i=cc.vv.gameData.getGameCfg().bonusUnlockList,a=t._shelterList.length-1;a>=0;a--)t._curUnlockNum>=i[a]?t._shelterList[a].active&&function(){Global.SlotsSoundMgr.playEffect("breakup");t._shelterList[a].active=!1;var e=cc.find("unlock_"+a,t._frame_top);e.active=!0,e.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),e.getComponent(sp.Skeleton).setCompleteListener(function(){e.active=!1});for(var n=0;n<t._col;n++){var o=t.getSymbolTopAni(7-a,n);o&&o.GetData()&&!o.GetData().unlock&&(o.GetData().unlock=!0,t._curUnlockNum+=1)}}():cc.find("spr_lock/lbl_num",t._shelterList[a]).getComponent(cc.Label).string=i[a]-t._curUnlockNum;n();case 3:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}())},playCompleteAnim:function(){var e=this;return new Promise(function(){var t=i(regeneratorRuntime.mark(function t(n,o){var i,a,r,s,c,_,u,l,p,f,m,d,h,v;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.setTitleNum(-1),Global.SlotsSoundMgr.playEffect("normal_respin_end"),t.next=4,e.awaitTime(2);case 4:e._node_tit.active=!1,e._node_bonus_win.active=!0,i=e._node_bonus_win.getChildByName("lbl_win"),a=e._node_bonus_win.getChildByName("spine_kuang"),r=e._node_bonus_win.getChildByName("spine_flyFire"),s=e._node_bonus_win.getChildByName("spine_fire"),c=e._node_bonus_win.getChildByName("spr_jp"),i.getComponent(cc.Label).string="",r.active=!1,s.active=!1,c.active=!1,e._prizePool.active=!1,e.resetJackpot(),_=0,u=cc.vv.gameData.GetBottomScript().getCurrentWin(),l=0;case 20:if(!(l<e._col)){t.next=67;break}p=e._row-1;case 22:if(!(p>=0)){t.next=64;break}if(!(f=e.getSymbolTopAni(p,l))){t.next=61;break}if(!(m=f.GetData())||!m.unlock){t.next=61;break}return d=e._node_bonus_win.convertToNodeSpaceAR(f.node.convertToWorldSpaceAR(cc.v2(0,0))),r.active=!0,r.position=d,r.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),f.node.destroy(),cc.tween(r).to(.3,{position:cc.v2(0,-20)}).start(),t.next=35,e.awaitTime(.3);case 35:if(s.active=!0,s.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),"coin"!==m.type){t.next=45;break}Global.SlotsSoundMgr.playEffect("coin_respin_fly"),_+=m.num,i.getComponent(cc.Label).string=Global.formatNumShort(_),a.active=!0,a.getComponent(sp.Skeleton).setAnimation(0,"animation1",!1),t.next=57;break;case 45:if("pool"!==m.type){t.next=57;break}return Global.SlotsSoundMgr.playEffect("coin_respin_fly_jp"),Global.SlotsSoundMgr.playEffect("bell"),h=cc.vv.gameData.GetBonusPool(),Global.doRoallNumEff(i,_,_+h[m.num-1],.8,null,null,0,!0),c.active=!0,c.getComponent(cc.Sprite).spriteFrame=cc.vv.gameData.GetAtlasByName("baseImg").getSpriteFrame("jp"+(5-m.num)+"_1"),_+=h[m.num-1],a.active=!0,a.getComponent(sp.Skeleton).setAnimation(0,"animation2",!1),t.next=57,e.awaitTime(.2);case 57:return cc.vv.gameData.GetBottomScript().SetWin(_+u),t.next=60,e.awaitTime(.7);case 60:c.active=!1;case 61:p--,t.next=22;break;case 64:l++,t.next=20;break;case 67:return v=cc.vv.gameData.GetBonusWinCoin(),t.next=70,new Promise(function(e,t){cc.vv.gameData.GetSlotsScript().ShowBottomWin(v,v,!0,e)});case 70:n();case 71:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}())},sendNextRound:function(){cc.vv.gameData.GetBottomScript().SendSpinReq()},GetStopTime:function(){return this._cfg.auto_stop_time||1},SetStopTime:function(e){this._stopTime=e},GetReelStopInter:function(e){return e*(this._cfg.reelStopInter||.6)},getColByIdx:function(e){return(e-1)%this._col},getRowByIdx:function(e){return this._row-Math.floor((e-1)/this._col)-1},GetSymbolByIdx:function(e){var t=(e-1)%this._col,n=this._row-Math.floor((e-1)/this._col)-1;return this._reels[t].GetSymbolByRow(n)},GetLastStopReelIdx:function(){return this.moveReelLastIdx},update:function(e){if(this._stopTime>0&&(this._stopTime=this._stopTime-e,this._stopTime<=0)){this._bottomScript.ShowBtnsByState("moveing_2");for(var t=0;t<this._reels.length;t++){var n=this._reels[t],o=this.GetReelStopInter(t);n.StopMove(o)}}},lockJackpot:function(e){cc.find("Canvas/safe_node/LMSlots_PrizePool_1").getComponent("LMSlots_PrizePool_Base").PausePool([{prizeType:0,pauseNum:e[0]},{prizeType:1,pauseNum:e[1]},{prizeType:2,pauseNum:e[2]},{prizeType:3,pauseNum:e[3]}])},resetJackpot:function(){cc.find("Canvas/safe_node/LMSlots_PrizePool_1").getComponent("LMSlots_PrizePool_Base").ResumePausePool()},awaitTime:function(e){var t=this;return new Promise(function(n,o){t.scheduleOnce(function(){n()},e)})}}),cc._RF.pop()},{LMSlots_PauseUI_Base:void 0}],LegendOfJoanOfArc_BonusReel:[function(e,t,n){"use strict";function o(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=i(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a,r=!0,s=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return r=e.done,e},e:function(e){s=!0,a=e},f:function(){try{r||null==o.return||o.return()}finally{if(s)throw a}}}}function i(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}cc._RF.push(t,"af712CU8EVNf7gEwWfo8ta0","LegendOfJoanOfArc_BonusReel"),cc.Class({extends:e("LMSlots_PauseUI_Base"),properties:{_maskList:[],_holderData:[]},start:function(){},Init:function(e,t,n,o){this._reelIdx=e,this._holderCount=n,this._nCount=t,this._symbols=[],this._topAniNode=o;for(var i=0;i<this._holderCount;i++){var a={},r=cc.find("mask_"+(i+1),this.node);a.node=cc.find("holder",r),a.OrigPosY=a.node.position.y,a.symbols=[],this._maskList.push(r),this._holderData.push(a)}this.LoadSymbols()},GetReelIdx:function(){return this._reelIdx},LoadSymbols:function(){var e=cc.vv.gameData.getGameCfg().symbolPrefab;this._symbolTemplete||(this._symbolTemplete=cc.vv.gameData.GetPrefabByName(e));for(var t=0;t<this._holderData.length;t++){for(var n=this._holderData[t],o=0;o<2;o++){var i=cc.vv.gameData.getGameCfg(),a=cc.instantiate(this._symbolTemplete);a.parent=n.node;var r=a.addComponent(i.scripts.Symbols),s=o+1;r.Init(s,this._topAniNode),r.SetSymbolReelIdx(this._reelIdx),r.setBonusIndex(t),r.setSymType("bonus"),n.symbols.push(r)}this.ReLayOut(n.symbols)}},ReLayOut:function(e){for(var t=0;t<e.length;t++){var n=e[t];n.node.position=this.GetSymbolPosByRow(t),n.SetSymbolIdx(t)}},GetSymbolByRow:function(e){return this._holderData[e].symbols[0]},GetSymbolPosByRow:function(e){var t=cc.vv.gameData.getGameCfg();return cc.v2(0,(e+.5)*t.symbolSize.height)},StartMove:function(){this._result=null;var e=cc.vv.gameData.getGameCfg();this._curY=0,this._bMoving=!0,this._bStoping=!1,this._fillCount=0;var t,n=o(this._holderData);try{for(n.s();!(t=n.n()).done;){var i,a=o(t.value.symbols);try{for(a.s();!(i=a.n()).done;){var r=i.value;r.node.active=!0,r.StartMove()}}catch(e){a.e(e)}finally{a.f()}}}catch(e){n.e(e)}finally{n.f()}this._speed=e.speed,this._offset=e.symbolSize.height},StopMove:function(e){this._bMoving&&(this._bStoping=!0,this._stopTime=e)},StopMoveRightNow:function(){this._stopRightNow=!0},OnReelSpinEnd:function(){var e=cc.vv.gameData.GetBonusScript(),t=e.GetLastStopReelIdx();this._reelIdx==t&&e.OnSpinEnd()},SetResult:function(e){this._result=e},UpdatePosition:function(e){if(this._stopTime=this._stopTime-e,this._stopTime<=0&&this._bStoping&&this._result&&this._stopRightNow){var t=cc.vv.gameData.getGameCfg();this._speed=Math.max(t.speed/2,this._speed-t.speed*e)}if(this._curY+=e*this._speed,this._curY>this._offset){this._curY=0;var n,i=o(this._holderData);try{for(i.s();!(n=i.n()).done;){var a=n.value;a.node.y=a.OrigPosY;var r=0,s=null;if(this._stopTime<=0&&this._bStoping&&this._result)if(this._fillCount<this._holderCount){var c=this._result.shift();r=c.sid,s=c.data,this._fillCount++}else this._bMoving=!1;var _=a.symbols.shift();r>0?_.ShowById(r,s):_.ShowRandomSymbol(),a.symbols.push(_),this.ReLayOut(a.symbols)}}catch(e){i.e(e)}finally{i.f()}}else{var u,l=o(this._holderData);try{for(l.s();!(u=l.n()).done;){var p=u.value;p.node.y=p.OrigPosY-this._curY}}catch(e){l.e(e)}finally{l.f()}}this._bMoving||this.OnReelBounsAction()},OnReelBounsActionDeep:function(){},OnReelBounsActionEnd:function(){cc.vv.gameData.GetBonusScript().OnReelBounsActionEnd(this._reelIdx),this.OnReelSpinEnd()},OnReelBounsAction:function(){var e,t=cc.vv.gameData.getGameCfg(),n=t.bounceInfo?t.bounceInfo.distance:30,i=t.bounceInfo?t.bounceInfo.time:.3,a=o(this._holderData);try{for(a.s();!(e=a.n()).done;){var r=e.value;cc.tween(r.node).to(n/this._speed,{position:cc.v2(r.node.x,r.OrigPosY-n)}).to(i,{position:cc.v2(r.node.x,r.OrigPosY)}).start()}}catch(e){a.e(e)}finally{a.f()}cc.tween(this.node).delay(n/this._speed).call(this.OnReelBounsActionDeep.bind(this)).delay(i).call(this.OnReelBounsActionEnd.bind(this)).start()},update:function(e){this._bMoving&&this.UpdatePosition(e)}}),cc._RF.pop()},{LMSlots_PauseUI_Base:void 0}],LegendOfJoanOfArc_Cfg:[function(e,t,n){"use strict";var o;function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}cc._RF.push(t,"6b641WQYMhDzrkifp45VFf1","LegendOfJoanOfArc_Cfg");var a={symbol:(o={},i(o,1,{node:"s1",zIndex:100,bonus_node:"s1_0",win_node:"w1",win_ani:{name:"animation",zIndex:300}}),i(o,2,{node:"s2",zIndex:300,bonus_node:"s2_0",win_node:"w2",trigger_ani:{name:"animation2",zIndex:300},stop_ani:{name:"animation1",zIndex:100}}),i(o,3,{node:"s3",zIndex:300,bonus_node:"s3_0",win_node:"w3",trigger_ani:{name:"animation2",zIndex:300},stop_ani:{name:"animation1",zIndex:100}}),i(o,4,{node:"s4",zIndex:200,bonus_node:"s4",win_node:"w4",bonus_ani:{name:"animation3",zIndex:300}}),i(o,401,{node:"s401",zIndex:200,bonus_node:"s401",win_node:"w4",bonus_ani:{name:"animation50",zIndex:300}}),i(o,402,{node:"s402",zIndex:200,bonus_node:"s402",win_node:"w4",bonus_ani:{name:"animation60",zIndex:300}}),i(o,403,{node:"s403",zIndex:200,bonus_node:"s403",win_node:"w4",bonus_ani:{name:"animation72",zIndex:300}}),i(o,404,{node:"s404",zIndex:200,bonus_node:"s404",win_node:"w4",bonus_ani:{name:"animation74",zIndex:300}}),i(o,5,{node:"s5",zIndex:100,bonus_node:"s5_0",win_node:"w5",win_ani:{name:"animation",zIndex:300}}),i(o,6,{node:"s6",zIndex:100,bonus_node:"s6_0",win_node:"w6",win_ani:{name:"animation",zIndex:300}}),i(o,7,{node:"s7",zIndex:100,bonus_node:"s7_0",win_node:"w7",win_ani:{name:"animation",zIndex:300}}),i(o,8,{node:"s8",zIndex:100,bonus_node:"s8_0",win_node:"w8",win_ani:{name:"animation",zIndex:300}}),i(o,9,{node:"s9",zIndex:100,bonus_node:"s9_0",win_node:"w9",win_ani:{name:"animation",zIndex:300}}),i(o,10,{node:"s10",zIndex:100,bonus_node:"s10_0",win_node:"w10",win_ani:{name:"animation",zIndex:300}}),i(o,11,{node:"s11",zIndex:100,bonus_node:"s11_0",win_node:"w11",win_ani:{name:"animation",zIndex:300}}),i(o,12,{node:"s12",zIndex:100,bonus_node:"s12_0",win_node:"w12",win_ani:{name:"animation",zIndex:300}}),i(o,13,{node:"s13",zIndex:100,bonus_node:"s13_0",win_node:"w13",win_ani:{name:"animation",zIndex:300}}),i(o,14,{node:"s0",win_node:"",win_ani:""}),o),scripts:{Top:"LMSlots_Top_Base",Bottom:"LMSlots_Bottom_Base",Slots:"LegendOfJoanOfArc_Slots",Reels:"LegendOfJoanOfArc_Reels",Symbols:"LegendOfJoanOfArc_Symbol"},col:5,row:4,bonus_col:5,bonus_row:8,symbolPrefab:"LMSlots_Symbol",symbolSize:{height:114},randomSymbolsFirst:[1,5,6,7,8,9,10,11,12,13],randomSymbols:[1,4,401,5,6,7,8,9,10,11,12,13,1,5,6,7,8,9,10,11,12,13,5,6,7,8,9,10,11,12,13],kuang:"kuang",autoModelDelay:1,speed:3e3,reelStopInter:.2,auto_stop_time:1,bounceInfo:{distance:20,time:.1},gemIdList:[4,401,402,403,404],bonusUnlockList:[20,16,12,8],helpItems:["games/LegendOfJoanOfArc/prefab/help_node/page_1","games/LegendOfJoanOfArc/prefab/help_node/page_2","games/LegendOfJoanOfArc/prefab/help_node/page_3"],commEffect:{path:"games/LegendOfJoanOfArc/",win1:["win1","win1end"],win2:["win2","win2end"]},AddAntiTime:1.7,reelStateInfo:[{id:[2],mini:3,counts:[0,1,1,1,0],antiNode:"node_anti",path:"games/LegendOfJoanOfArc/",reelStopSound:"reel_stop",symbolStopSound:"scatterSmart_stop_1",antSound:"anticipation",antSpeed:2200}],normalBgm:"base_bgm"};t.exports=a,cc._RF.pop()},{}],LegendOfJoanOfArc_GameData:[function(e,t,n){"use strict";cc._RF.push(t,"24b99ZzivZOeqKC4cZ8PEEo","LegendOfJoanOfArc_GameData"),cc.Class({extends:e("LMSlots_GameData_Base"),properties:{},start:function(){},init:function(e,t,n){this._bonusInfo=e.bonusGame.info,this._bonusRestNum=e.bonusGame.num,this._bonusPoolList=e.bonusGame.poolList,this._freeWinCoin=e.freeWinCoin,this._super(e,t,n)},OnRcvNetSpine:function(e){200==e.code&&(this._bonusInfo=e.bonusGame.info,this._bonusRestNum=e.bonusGame.num,this._bonusPoolList=e.bonusGame.poolList,this._freeWinCoin=e.freeWinCoin),this._super(e)},SetPopupScript:function(e){this._popupScp=e},GetPopupScript:function(){return this._popupScp},SetBonusScript:function(e){this._bonusScp=e},GetBonusScript:function(){return this._bonusScp},SetIsBonusGame:function(e){this._isBonusGame=e},IsBonusGame:function(){return this._isBonusGame},GetChangeNumBet:function(){return this._deskInfo.bonusGame.tri.bet},GetBonusInfo:function(){return this._bonusInfo},GetBonusState:function(){return this._deskInfo.bonusGame.state},GetBonusWinCoin:function(){return this._gameInfo.bonusGame.coin},GetBonusRestNum:function(){return this._bonusRestNum},GetBonusPool:function(){return this._bonusPoolList},GetFreeWinCoin:function(){return this._freeWinCoin}}),cc._RF.pop()},{LMSlots_GameData_Base:void 0}],LegendOfJoanOfArc_Logic:[function(e,t,n){"use strict";cc._RF.push(t,"feb2ensrUtPoITRwZFjPvA6","LegendOfJoanOfArc_Logic"),cc.Class({extends:e("LMSlots_Logic_Base"),properties:{},InitCommComponent:function(){this._super();var e=this.node.addComponent("LegendOfJoanOfArc_Popup");e.Init(),cc.vv.gameData.SetPopupScript(e);var t=this.node.addComponent("LegendOfJoanOfArc_BonusGame");t.Init(),cc.vv.gameData.SetBonusScript(t)}}),cc._RF.pop()},{LMSlots_Logic_Base:void 0}],LegendOfJoanOfArc_Popup:[function(e,t,n){"use strict";function o(e,t,n,o,i,a,r){try{var s=e[a](r),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(o,i)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(i,a){var r=e.apply(t,n);function s(e){o(r,i,a,s,c,"next",e)}function c(e){o(r,i,a,s,c,"throw",e)}s(void 0)})}}cc._RF.push(t,"c1987D74WhEY5q0Bs410hlA","LegendOfJoanOfArc_Popup"),cc.Class({extends:cc.Component,properties:{},start:function(){},Init:function(){this._node_popup=cc.find("safe_node/node_popup",this.node),this._node_popup.active=!1,this._node_free_start=cc.find("pop_free_start",this._node_popup),this._node_free_again=cc.find("pop_free_again",this._node_popup),this._node_free_end=cc.find("pop_free_end",this._node_popup),this._spine_triBonus=cc.find("spine_triBonus",this._node_popup),this._node_bonus_press=cc.find("node_bonus_press",this._node_popup),this._node_free_start.active=!1,this._node_free_again.active=!1,this._node_free_end.active=!1,this._spine_triBonus.active=!1,this._node_qp=cc.find("safe_node/node_qpAnim",this.node),this._node_qp.active=!1,this._spine_free_qp=cc.find("shengnvzhende",this._node_qp),this._spine_bonus_qp=cc.find("spine_bonus_qp",this._node_qp),this._spine_free_qp.active=!1,this._spine_bonus_qp.active=!1,this._spine_character=cc.find("safe_node/spine_character",this.node)},showFirstGainFree:function(){var e=this;return i(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=i(regeneratorRuntime.mark(function t(n,o){var i,a,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Global.SlotsSoundMgr.stopBgm(),e._node_popup.active=!0,e._node_free_start.active=!0,Global.SlotsSoundMgr.playEffect("free_intro"),e._node_free_start.setScale(0),cc.tween(e._node_free_start).to(.7,{scale:1},{easing:"backOut"}).start(),i=e._node_free_start.getChildByName("btn_start"),t.next=9,e.awaitTime(.5);case 9:i.getComponent(cc.Button).interactable=!0,i.off("click"),a=e,r=function(){Global.SlotsSoundMgr.playEffect("free_dialog_collect_click"),i.getComponent(cc.Button).interactable=!1,cc.tween(a._node_free_start).to(.7,{scale:0},{easing:"backIn"}).call(function(){a._node_popup.active=!1,a._node_free_start.active=!1,n()}).start()},cc.vv.gameData.checkAutoPlay(i,r),i.on("click",function(){i.stopAllActions(),r()});case 15:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},showAgainGainFree:function(e){var t=this;return new Promise(function(){var n=i(regeneratorRuntime.mark(function n(o,i){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t._node_popup.active=!0,t._node_free_again.active=!0,t._node_free_again.getChildByName("lbl_num").getComponent(cc.Label).string=e,Global.SlotsSoundMgr.playEffect("retrigger_intro"),t._node_free_again.setScale(0),cc.tween(t._node_free_again).to(.7,{scale:1},{easing:"backOut"}).start(),n.next=9,t.awaitTime(1.5);case 9:return cc.tween(t._node_free_again).to(.7,{scale:0},{easing:"backIn"}).start(),n.next=12,t.awaitTime(.7);case 12:t._node_popup.active=!1,t._node_free_again.active=!1,o();case 15:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}())},showEndFree:function(e){var t=this;return new Promise(function(){var n=i(regeneratorRuntime.mark(function n(o,i){var a,r,s,c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return Global.SlotsSoundMgr.stopBgm(),cc.vv.gameData.GetBottomScript().ShowBtnsByState("moveing_1"),t._node_popup.active=!0,t._node_free_end.active=!0,a=cc.find("win_bg/lbl_winCoin",t._node_free_end),Global.doRoallNumEff(a,0,e,2,null,null,0,!0),Global.SlotsSoundMgr.playEffect("free_dialog_collect_show"),t._node_free_end.setScale(0),cc.tween(t._node_free_end).to(.7,{scale:1},{easing:"backOut"}).start(),r=t._node_free_end.getChildByName("btn_collect"),n.next=12,t.awaitTime(.5);case 12:r.getComponent(cc.Button).interactable=!0,r.off("click"),s=t,c=function(){Global.SlotsSoundMgr.playEffect("free_dialog_collect_click"),r.getComponent(cc.Button).interactable=!1;var t=0;a.stopAllActions(),Global.FormatCommaNumToNum(a.getComponent(cc.Label).string)<e&&(a.getComponent(cc.Label).string=Global.FormatNumToComma(e),t=.2),cc.tween(s._node_free_end).delay(t).to(.7,{scale:0},{easing:"backIn"}).call(function(){s._node_popup.active=!1,s._node_free_end.active=!1,o()}).start()},cc.vv.gameData.checkAutoPlay(r,c),r.on("click",function(){r.stopAllActions(),c()});case 18:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}())},playFreeQpAnim:function(){this._spine_character.active=!1;var e=this;Global.SlotsSoundMgr.playEffect("transition1"),this._node_qp.active=!0,this._spine_free_qp.active=!0,this._spine_free_qp.getComponent(sp.Skeleton).setAnimation(0,"jineng",!1),this._spine_free_qp.getComponent(sp.Skeleton).setCompleteListener(function(){e._spine_free_qp.active=!1,e._spine_character.active=!0,e._node_qp.active=!1})},playTriBonusAnim1:function(){var e=this;return new Promise(function(){var t=i(regeneratorRuntime.mark(function t(n,o){var i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Global.SlotsSoundMgr.stopBgm(),Global.SlotsSoundMgr.playEffect("bonus_trigger"),e._node_popup.active=!0,e._spine_triBonus.active=!0,i=e,e._spine_triBonus.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),t.next=8,e.awaitTime(2.2);case 8:Global.SlotsSoundMgr.playEffect("popup_out"),e._spine_triBonus.getComponent(sp.Skeleton).setCompleteListener(function(){i._node_popup.active=!1,i._spine_triBonus.active=!1,n()});case 10:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}())},playBonusQpAnim:function(){var e=this;Global.SlotsSoundMgr.playEffect("transition2"),this._node_qp.active=!0,this._spine_bonus_qp.active=!0,this._spine_bonus_qp.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),this._spine_bonus_qp.getComponent(sp.Skeleton).setCompleteListener(function(){e._spine_bonus_qp.active=!1,e._node_qp.active=!1})},showBonusPress:function(){var e=this;return new Promise(function(){var t=i(regeneratorRuntime.mark(function t(n,o){var a,r,s,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._node_popup.active=!0,e._node_bonus_press.active=!0,a=cc.find("spr",e._node_bonus_press),r=cc.find("btn_press",e._node_bonus_press),a.setScale(0),Global.SlotsSoundMgr.playEffect("bonus_pressToStart"),cc.tween(a).to(.7,{scale:1},{easing:"backOut"}).start(),t.next=9,e.awaitTime(.5);case 9:r.getComponent(cc.Button).interactable=!0,r.off("click"),s=e,c=function(){var e=i(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Global.SlotsSoundMgr.playEffect("popup_out"),r.getComponent(cc.Button).interactable=!1,cc.tween(a).to(.7,{scale:0},{easing:"backIn"}).start(),e.next=5,s.awaitTime(.7);case 5:s._node_bonus_press.active=!1,s._node_popup.active=!1,n();case 8:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),cc.vv.gameData.checkAutoPlay(r,c),r.on("click",i(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r.stopAllActions(),c();case 2:case"end":return e.stop()}},e)})));case 15:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}())},awaitTime:function(e){var t=this;return new Promise(function(n,o){t.scheduleOnce(function(){n()},e)})}}),cc._RF.pop()},{}],LegendOfJoanOfArc_Reels:[function(e,t,n){"use strict";cc._RF.push(t,"e8ecbJkL3ZKv4b7wcWA04pn","LegendOfJoanOfArc_Reels"),cc.Class({extends:e("LMSlots_Reel_Base"),properties:{},start:function(){}}),cc._RF.pop()},{LMSlots_Reel_Base:void 0}],LegendOfJoanOfArc_Slots:[function(e,t,n){"use strict";function o(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=i(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a,r=!0,s=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return r=e.done,e},e:function(e){s=!0,a=e},f:function(){try{r||null==o.return||o.return()}finally{if(s)throw a}}}}function i(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function r(e,t,n,o,i,a,r){try{var s=e[a](r),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(o,i)}function s(e){return function(){var t=this,n=arguments;return new Promise(function(o,i){var a=e.apply(t,n);function s(e){r(a,o,i,s,c,"next",e)}function c(e){r(a,o,i,s,c,"throw",e)}s(void 0)})}}cc._RF.push(t,"4bc48Z6+69Llr4RLQ0/DZnc","LegendOfJoanOfArc_Slots"),cc.Class({extends:e("LMSlots_Slots_Base"),properties:{_isFiveGem:!1,_isFreeGame:!1},start:function(){},Init:function(e,t){this._node_banner=cc.find("node_banner",this.node),this._super(e,t)},RegisterEvent:function(){this._super(),Global.registerEvent(cc.vv.gameData._EventId.SLOT_TOTALBET_UPDATED,this.onEventTotalbetUpdated,this)},ReconnectShow:function(){var e=this;return s(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.onEventTotalbetUpdated(),!cc.vv.gameData.GetBonusState()){t.next=4;break}return t.next=4,new Promise(function(){var e=s(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:cc.vv.gameData.GetBonusScript().enterBonusGame(t);case 1:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 4:if(!(cc.vv.gameData.GetTotalFree()>0)){t.next=11;break}if(e.ShowGameview(!0),!(cc.vv.gameData.GetTotalFree()>0&&0==cc.vv.gameData.GetFreeTime())){t.next=9;break}return t.next=9,e.CheckExitFreeGame();case 9:t.next=12;break;case 11:e.ShowGameview(!1);case 12:e._topScript.StopMove(),e._bottomScript.CanDoNextRound();case 14:case"end":return t.stop()}},t)}))()},onMsgSpine:function(e){cc.vv.gameData.IsBonusGame()?cc.vv.gameData.GetBonusScript().onMsgSpine(e):this._super(e)},SetSlotsResult:function(e){for(var t=e.length/this._col,n=[],o=0;o<e.length;o++){Math.floor(o/t);var i=o%this._col;if(this._cfg.symbol[e[o]]){var a={};a.sid=e[o];var r=cc.vv.gameData.GetBonusInfo();for(var s in r){Number(s.substring("idx_".length))===o+1&&(a.data=r[s])}n[i]||(n[i]=[]),n[i].unshift(a)}}for(var c=0;c<this._reels.length;c++){var _=this._reels[c],u=n[c];_.SetResult(u)}},SetReelStateInfo:function(e){var t=this;if(!cc.vv.gameData.IsBonusGame()&&this._cfg.reelStateInfo){for(var n=[],i=0;i<e.length;i++){var a=e[i],r=i%this._col;n[r]||(n[r]=[]),n[r].push(a)}var s,c=o(this._cfg.reelStateInfo);try{var _=function(){var e=s.value,o=Global.copy(e);o.isStop=!1,o.isAnt=!1;for(var i=o.mini,a=Global.copy(o.counts),r=0,c=0;c<n.length;c++){var _=t._reels[c],u=n[c];o.isStop=!1,o.isAnt=!1,r>=i-1&&o.counts[c]>0&&(o.isAnt=!0),o.symbolStopSound=2===c?"scatterSmart_stop_2":3===c?"scatterSmart_stop_3":e.symbolStopSound;var l=u.reduce(function(e,t){return o.id.includes(t)?e+1:e+0},0);r+=l,a.shift();var p=(a.length>0?a.reduce(function(e,t){return e+t}):0)+r;l>0&&p>=i&&(o.isStop=!0),_.AddReelStateInfo(Global.copy(o))}};for(c.s();!(s=c.n()).done;)_()}catch(e){c.e(e)}finally{c.f()}}},StartMove:function(){cc.vv.gameData.IsBonusGame()?cc.vv.gameData.GetBonusScript().StartMove():(this._super(),Global.SlotsSoundMgr.playNormalBgm())},StopMove:function(){cc.vv.gameData.IsBonusGame()?cc.vv.gameData.GetBonusScript().StopMove():this._super()},OnReelBounsActionDeep:function(e){this._super(e);for(var t=0;t<this._row;t++){var n=this._reels[e].GetSymbolByRow(t);this._cfg.gemIdList.includes(n.GetShowId())&&(Global.SlotsSoundMgr.playEffect("symbol_coin_land"),cc.tween(n.node).to(.2,{scale:1.2},{easing:"backOut"}).to(.05,{scale:1}).start()),3===n.GetShowId()&&Global.SlotsSoundMgr.playEffect("retrigger_land")}},OnSpinEnd:function(){this.onSpinEndAction()},onSpinEndAction:function(){var e=this;return s(regeneratorRuntime.mark(function t(){var n,o,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.ShowWinTrace(),n=cc.vv.gameData.GetGameWin(),o=n,cc.vv.gameData.GetTotalFree()>0&&cc.vv.gameData.GetTotalFree()!=cc.vv.gameData.GetFreeTime()&&(o=cc.vv.gameData.GetFreeWinCoin()),t.next=6,new Promise(function(t,i){e.ShowBottomWin(n,o,!0,t)});case 6:if(!((i=e._gameInfo.freeResult.freeInfo)&&i.freeCnt>0)){t.next=10;break}return t.next=10,e.CheckEnterFreeGame();case 10:if(!e._gameInfo.bonusGame||!e._gameInfo.bonusGame.start){t.next=13;break}return t.next=13,e.CheckTriggerBonusGame();case 13:if(!(e._gameInfo.allFreeCnt>0&&0==e._gameInfo.freeCnt)){t.next=16;break}return t.next=16,e.CheckExitFreeGame();case 16:e.CanDoNextRound();case 17:case"end":return t.stop()}},t)}))()},CheckEnterFreeGame:function(){var e=this;return s(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=s(regeneratorRuntime.mark(function t(n,i){var a,r,s,c,_;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:Global.SlotsSoundMgr.playEffect("bell"),a=o(e._gameInfo.freeResult.freeInfo.idxs);try{for(a.s();!(r=a.n()).done;)s=r.value,(c=e.GetSymbolByIdx(s))&&c.playTriggerAnimation()}catch(e){a.e(e)}finally{a.f()}return t.next=5,e.awaitTime(1.5);case 5:if(e._gameInfo.freeCnt!==e._gameInfo.allFreeCnt){t.next=15;break}return e.Backup(),t.next=9,cc.vv.gameData.GetPopupScript().showFirstGainFree();case 9:return cc.vv.gameData.GetPopupScript().playFreeQpAnim(),t.next=12,e.awaitTime(1.3);case 12:e.ShowGameview(!0),t.next=20;break;case 15:return _=e._gameInfo.freeResult.freeInfo.freeCnt,t.next=18,cc.vv.gameData.GetPopupScript().showAgainGainFree(_);case 18:return t.next=20,e.awaitTime(.8);case 20:n();case 21:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},CheckExitFreeGame:function(){var e=this;return s(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=s(regeneratorRuntime.mark(function t(n,o){var i,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,cc.vv.gameData.GetPopupScript().showEndFree(cc.vv.gameData.GetFreeWinCoin());case 2:return cc.vv.gameData.GetPopupScript().playFreeQpAnim(),t.next=5,e.awaitTime(1.3);case 5:return e.Resume(),e.ShowGameview(!1),Global.SlotsSoundMgr.stopBgm(),Global.SlotsSoundMgr.playNormalBgm(),t.next=11,e.awaitTime(.5);case 11:return i=cc.vv.gameData.GetFreeWinCoin(),a=i,t.next=15,new Promise(function(t,n){e.ShowBottomWin(i,a,!0,t)});case 15:n();case 16:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},CheckTriggerBonusGame:function(){var e=this;return s(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=s(regeneratorRuntime.mark(function t(n,o){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Global.SlotsSoundMgr.playEffect("bell"),t.next=3,e.awaitTime(1);case 3:return t.next=5,cc.vv.gameData.GetPopupScript().playTriBonusAnim1();case 5:return cc.vv.gameData.GetPopupScript().playBonusQpAnim(),t.next=8,e.awaitTime(.5);case 8:cc.vv.gameData.GetBonusScript().triBonusGame(n);case 9:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},playGameBgm:function(){this._isFreeGame?Global.SlotsSoundMgr.playBgm("free_bgm"):(Global.SlotsSoundMgr.stopBgm(),Global.SlotsSoundMgr.playNormalBgm())},ShowGameview:function(e){if(this._isFreeGame=e,e){Global.SlotsSoundMgr.playBgm("free_bgm");var t=cc.vv.gameData.GetTotalFree(),n=cc.vv.gameData.GetFreeTime();this._bottomScript.ShowFreeModel(!0,t-n,t);var o=cc.vv.gameData.GetFreeWinCoin();this._bottomScript.SetWin(o)}else this._bottomScript.ShowFreeModel(!1);var i=cc.find("Canvas/safe_node/spr_bg_normal"),a=cc.find("Canvas/safe_node/spr_bg_free");a&&(i&&(i.active=!e),a.active=e)},onEventTotalbetUpdated:function(){var e=cc.find("node_4",this._node_banner),t=cc.find("node_5",this._node_banner),n=cc.find("spine_change",this._node_banner),o=cc.vv.gameData.GetBetIdx(),i=cc.vv.gameData.GetChangeNumBet();!this._isFiveGem&&o<i?(Global.SlotsSoundMgr.playEffect("bet_change"),this._isFiveGem=!0,n.active=!0,n.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),e.active=!1,t.active=!0):this._isFiveGem&&o>=i&&(Global.SlotsSoundMgr.playEffect("bet_change"),this._isFiveGem=!1,n.active=!0,n.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),e.active=!0,t.active=!1)},awaitTime:function(e){var t=this;return new Promise(function(n,o){t.scheduleOnce(function(){n()},e)})}}),cc._RF.pop()},{LMSlots_Slots_Base:void 0}],LegendOfJoanOfArc_Symbol:[function(e,t,n){"use strict";cc._RF.push(t,"e4852GQwJtEH4tqA8htm1W0","LegendOfJoanOfArc_Symbol"),cc.Class({extends:e("LMSlots_Symbol_Base"),properties:{_type:"normal"},Init:function(e,t){this._super(e,t)},setSymType:function(e){this._type=e},ShowRandomSymbolFirst:function(){var e=cc.vv.gameData.getGameCfg(),t=Global.random(1,e.randomSymbolsFirst.length),n=e.randomSymbolsFirst[t-1];this.ShowById(n)},ShowRandomSymbol:function(){if(this._super(),4===this._id){var e=Global.random(1,5)*cc.vv.gameData.GetTotalBet();this.setNum(e)}},ShowById:function(e,t){if(4===e&&t?"coin"===t.type?this.setNum(t.num):"pool"===t.type&&(1===t.num?e=401:2===t.num?e=402:3===t.num?e=403:4===t.num&&(e=404),this.setNum()):this.setNum(),"bonus"===this._type){this._id=e,this._data=t,this._state="normal",this._showNode&&(this._showNode.active=!1);var n=cc.vv.gameData.getGameCfg();n.symbol[e]&&n.symbol[e].bonus_node&&(this._showNode=cc.find(n.symbol[e].bonus_node,this.node),this._showNode.active=!0)}else this._super(e,t)},StartMove:function(){this._super()},setNum:function(e){var t=cc.find("lbl_num",this.node);if(e){var n=null;n=e<5*cc.vv.gameData.GetTotalBet()?cc.vv.gameData.GetFontByName("theme125_zzb"):cc.vv.gameData.GetFontByName("theme125_zz"),t.active=!0,t.getComponent(cc.Label).font=n,t.getComponent(cc.Label).string=Global.formatNumShort(e)}else t.active=!1,t.getComponent(cc.Label).string=""},setBonusIndex:function(e){this._bonusIndex=e},playBonusWin:function(e){var t=cc.find("w4_win",this.node),n=cc.vv.gameData.getGameCfg().gemIdList;e&&n.includes(this._id)?(t.active=!0,t.getComponent(sp.Skeleton).setAnimation(0,"animation",!1)):t.active=!1},playBonusAnim:function(){var e=this._id,t=cc.vv.gameData.getGameCfg();if(t.symbol[e]&&t.symbol[e].win_node&&t.symbol[e].bonus_ani&&(this._showNode&&(this._showNode.active=!1),this._showNode=cc.find(t.symbol[e].win_node,this.node),this._showNode.active=!0,""!=t.symbol[e].bonus_ani.name)){var n=this._showNode.getComponent(sp.Skeleton);n&&n.setAnimation(0,t.symbol[e].bonus_ani.name,!0)}}}),cc._RF.pop()},{LMSlots_Symbol_Base:void 0}]},{},["LegendOfJoanOfArc_BonusGame","LegendOfJoanOfArc_BonusReel","LegendOfJoanOfArc_Cfg","LegendOfJoanOfArc_GameData","LegendOfJoanOfArc_Logic","LegendOfJoanOfArc_Popup","LegendOfJoanOfArc_Reels","LegendOfJoanOfArc_Slots","LegendOfJoanOfArc_Symbol"]);
window.__require=function e(t,n,a){function o(r,c){if(!n[r]){if(!t[r]){var s=r.split("/");if(s=s[s.length-1],!t[s]){var l="function"==typeof __require&&__require;if(!c&&l)return l(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+r+"'")}r=s}var u=n[r]={exports:{}};t[r][0].call(u.exports,function(e){return o(t[r][1][e]||e)},u,u.exports,e,t,n,a)}return n[r].exports}for(var i="function"==typeof __require&&__require,r=0;r<a.length;r++)o(a[r]);return o}({LuckySanta_Cfg:[function(e,t,n){"use strict";var a;function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}cc._RF.push(t,"de341YgPbpIIZzJqcWGF63V","LuckySanta_Cfg");var i={symbol:(a={},o(a,1,{node:"s_1",dark:!0,win_node:"w_1",win_ani:{name:"animation2",zIndex:100},stop_ani:{name:"animation1",zIndex:200}}),o(a,2,{node:"s_14",dark:!1,win_node:"w_14",win_ani:{name:"animation",zIndex:100}}),o(a,3,{node:"s_2",dark:!0,win_node:"w_2",win_ani:{name:"animation",zIndex:100}}),o(a,4,{node:"s_3",dark:!0,win_node:"w_3",win_ani:{name:"animation",zIndex:100}}),o(a,5,{node:"s_4",dark:!0,win_node:"w_4",win_ani:{name:"animation",zIndex:100}}),o(a,6,{node:"s_5",dark:!0,win_node:"w_5",win_ani:{name:"animation",zIndex:100}}),o(a,7,{node:"s_6",dark:!0}),o(a,8,{node:"s_7",dark:!0}),o(a,9,{node:"s_8",dark:!0}),o(a,10,{node:"s_9",dark:!0}),o(a,11,{node:"s_10",dark:!0}),o(a,12,{node:"s_11",dark:!0}),o(a,13,{node:"s_12",dark:!0}),o(a,14,{node:"s_15",dark:!1,stop_ext_ani:{node:"w_151",name:"animation",zIndex:200},appear_ani:{node:"w_152",name:"animation",zIndex:200}}),o(a,15,{node:"s_16",dark:!1,stop_ext_ani:{node:"w_151",name:"animation",zIndex:200},appear_ani:{node:"w_152",name:"animation",zIndex:200}}),o(a,16,{node:"s_17",dark:!1,win_node:"w17",win_ani:{name:"animation",zIndex:100},stop_ani:{name:"animation",zIndex:200}}),a),scripts:{Top:"LMSlots_Top_Base",Bottom:"LMSlots_Bottom_Base",Slots:"LuckySanta_Slots",Reels:"LMSlots_Reel_Base",Symbols:"LuckySanta_Symbol",Sound:"LMSlots_Sound"},helpItems:["games/LuckySanta/prefab/LMSlots_Help_item1","games/LuckySanta/prefab/LMSlots_Help_item2","games/LuckySanta/prefab/LMSlots_Help_item3"],col:5,row:3,scatterId:3,wildId:1,collectId:2,symbolPrefab:"LMSlots_Symbol",symbolSize:{height:128},randomSymbols:[1,2,3,4,5,6,7,8,9,10,11,12,13],respinRandomSymbols:[1,3,4,5,6,7,14,15,16],kuang:"kuang",speed:3e3,reelStopInter:.2,auto_stop_time:1,AddAntiTime:2,bounce:!0,bounceInfo:{distance:20,time:.1},reelStateInfo:[{id:[2],mini:6,counts:[3,3,3,3,3],antiNode:"node_anti",path:"games/LuckySanta/",reelStopSound:"reel_stop",symbolStopSound:"symbol_star",antSound:"anticipation",antSpeed:2500},{id:[14,15],mini:0,counts:[3,3,3,3,3],path:"games/LuckySanta/",reelStopSound:"reel_stop",symbolStopSound:"symbol_star"}],normalBgm:"base_bgm"};t.exports=i,cc._RF.pop()},{}],LuckySanta_Character:[function(e,t,n){"use strict";cc._RF.push(t,"b516bWydRtA4ZHxq6bUAlP4","LuckySanta_Character"),cc.Class({extends:cc.Component,properties:{role:sp.Skeleton,posGift:cc.Node,_curRoleState:""},onLoad:function(){this.setRoleAnimation()},start:function(){},getGiftPos:function(){return this.posGift.convertToWorldSpaceAR(cc.v2(0,0))},playCollectGiftEffect:function(){var e=this.posGift.getChildByName("effect").getComponent(sp.Skeleton);e.node.active=!0,e.setAnimation(0,"animation",!1),e.setCompleteListener(function(){e.setCompleteListener(null),e.node.active=!1}),this.setRoleAnimation()},triBonusAnim:function(){var e=this.posGift.getChildByName("tri").getComponent(sp.Skeleton);e.node.active=!0,e.setAnimation(0,"animation",!1),e.setCompleteListener(function(){e.setCompleteListener(null),e.node.active=!1})},setRoleAnimation:function(){var e=cc.vv.gameData.totalWildCnt?cc.vv.gameData.totalWildCnt:0;e<15?("idle"!==this._curRoleState&&this.role.setAnimation(0,"idle",!0),this._curRoleState="idle"):e<40?("idle1"!==this._curRoleState&&this.role.setAnimation(0,"idle1",!0),this._curRoleState="idle1"):e<75?("idle2"!==this._curRoleState&&this.role.setAnimation(0,"idle2",!0),this._curRoleState="idle2"):("idle3"!==this._curRoleState&&this.role.setAnimation(0,"idle3",!0),this._curRoleState="idle3")},show:function(){this.role.node.active=!0},hide:function(){this.role.node.active=!1}}),cc._RF.pop()},{}],LuckySanta_CollectProgress:[function(e,t,n){"use strict";function a(e,t,n,a,o,i,r){try{var c=e[i](r),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(a,o)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(o,i){var r=e.apply(t,n);function c(e){a(r,o,i,c,s,"next",e)}function s(e){a(r,o,i,c,s,"throw",e)}c(void 0)})}}cc._RF.push(t,"dcbf0uc4udCGai/u7Lsblyw","LuckySanta_CollectProgress"),cc.Class({extends:cc.Component,properties:{percent:0,_isCollectState:!1,collectSpr:cc.Node,spine_collectSymbol:cc.Node,spine_collectReceiveEff:sp.Skeleton,spine_lock:sp.Skeleton,spine_progress_complete:sp.Skeleton,spine_progress_add:sp.Skeleton},onLoad:function(){var e=cc.vv.gameData.energyData;this.setProgress(e.needCoins>0?e.totalCoin/e.needCoins:0),this._initListener()},start:function(){this.showCollect(cc.vv.gameData.isOpenCollectProgress())},_initListener:function(){Global.btnClickEvent(cc.find("btnUnlock",this.node),this.onBtnUnlockClicked,this),Global.btnClickEvent(cc.find("btn_collect_info",this.node),this.onBtnShowInfoClicked,this),Global.registerEvent(cc.vv.gameData._EventId.SLOT_TOTALBET_UPDATED,this.onEventTotalbetUpdated,this)},onBtnUnlockClicked:function(){cc.vv.gameData.GetFreeTime()>0||this.spine_lock.node.active&&cc.vv.gameData.GetMaxBetIdx()>=cc.vv.gameData.needBet&&(cc.vv.gameData.SetBetIdx(cc.vv.gameData.needBet),cc.vv.gameData._serverRawMult=cc.vv.gameData.needBet,cc.vv.UserManager.setEnterSelectBet(null),cc.vv.gameData.GetSlotsScript()._bottomScript.ShowBetCoin(),Global.dispatchEvent(cc.vv.gameData._EventId.SLOT_TOTALBET_UPDATED,cc.vv.gameData.GetTotalBet()))},setBtnsClickEnable:function(e){cc.find("btn_collect_info",this.node).getComponent(cc.Button).interactable=e,cc.find("btnUnlock",this.node).getComponent(cc.Button).interactable=e},onEventTotalbetUpdated:function(e){this.showCollect(cc.vv.gameData.isOpenCollectProgress())},collectEnergy:function(e,t){var n=this;return o(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new Promise(function(){var a=o(regeneratorRuntime.mark(function a(o){var i,r;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!(e.length<=0)){a.next=2;break}return a.abrupt("return");case 2:return t=Math.max(0,Math.min(1,t)),Global.SlotsSoundMgr.playEffect("star_fly"),i=n.spine_collectReceiveEff.node.position,r=[],e.forEach(function(e){var t=n.node.convertToNodeSpaceAR(e),a=cc.instantiate(n.spine_collectSymbol);a.parent=n.node,a.position=t,a.active=!0,r.push(new Promise(function(e){cc.tween(a).call(function(){a.getComponent(sp.Skeleton).setAnimation(0,"animation1",!1),a.getComponent(sp.Skeleton).addAnimation(0,"animation2",!1)}).delay(.4).to(.5,{position:i}).delay(.5).call(function(){a.removeFromParent(),e()}).start()}))}),a.next=9,Promise.all(r);case 9:if(n.setProgress(t),Global.SlotsSoundMgr.playEffect("star_collect"),n.spine_collectReceiveEff.active=!0,n.spine_collectReceiveEff.setAnimation(0,"animation",!1),n.spine_collectReceiveEff.setCompleteListener(function(){n.spine_collectReceiveEff.active=!1,n.spine_collectReceiveEff.setCompleteListener(null)}),1!=t){a.next=17;break}return a.next=17,n.awaitTime(1);case 17:o();case 18:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}()));case 1:case"end":return a.stop()}},a)}))()},showCollect:function(e){var t=this;this._isCollectState!=e&&(e?(Global.SlotsSoundMgr.playEffect("unlock"),this.spine_lock.node.active=!0,this.spine_lock.setAnimation(0,"animation1",!1),this.spine_lock.setCompleteListener(function(){t.spine_lock.node.active=!1,t.spine_lock.setCompleteListener(null)})):(Global.SlotsSoundMgr.playEffect("lock"),this.spine_lock.node.active=!0,this.spine_lock.setAnimation(0,"animation2",!1),this.spine_lock.setCompleteListener(function(){t.spine_lock.setAnimation(0,"animation3",!1),t.spine_lock.setCompleteListener(null)}))),this._isCollectState=e},setProgress:function(e){var t=this;(e=Math.max(0,Math.min(1,e)))>0?(this.spine_progress_add.node.active=!0,this.spine_progress_add.setAnimation(0,"animation",!1),this.spine_progress_add.setCompleteListener(function(){if(t.spine_progress_add.node.active=!1,t.spine_progress_add.setCompleteListener(null),t.collectSpr.x=t.collectSpr.width*e-t.collectSpr.width,1==e){Global.SlotsSoundMgr.playEffect("full"),t.spine_progress_complete.node.active=!0,t.spine_progress_complete.setAnimation(0,"animation",!1),t.spine_progress_complete.setCompleteListener(function(){t.spine_progress_complete.node.active=!1,t.spine_progress_complete.setCompleteListener(null)});var n=cc.find("btn_collect_info/spine",t.node).getComponent(sp.Skeleton);n.setAnimation(0,"animation2",!1),n.setCompleteListener(function(){n.setAnimation(0,"animation1",!1),n.setCompleteListener(null)})}})):this.collectSpr.x=-this.collectSpr.width},onBtnShowInfoClicked:function(){Global.SlotsSoundMgr.playEffect("click"),SlotsFacade.pickGift.enterGame(!0)},awaitTime:function(e){var t=this;return new Promise(function(n){t.scheduleOnce(function(){n()},e)})}}),cc._RF.pop()},{}],LuckySanta_CollectWild:[function(e,t,n){"use strict";function a(e,t,n,a,o,i,r){try{var c=e[i](r),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(a,o)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(o,i){var r=e.apply(t,n);function c(e){a(r,o,i,c,s,"next",e)}function s(e){a(r,o,i,c,s,"throw",e)}c(void 0)})}}cc._RF.push(t,"2c676YPKFlPFJID8slv0fV2","LuckySanta_CollectWild"),cc.Class({extends:cc.Component,properties:{_spine_wildFly:null},onLoad:function(){this._spine_wildFly=cc.find("spine_wildFly",this.node)},collectWild:function(e,t){var n=this;return o(regeneratorRuntime.mark(function a(){var o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!(e.length<=0)){a.next=2;break}return a.abrupt("return");case 2:return Global.SlotsSoundMgr.playEffect("wild_fly"),o=n.node.convertToNodeSpaceAR(SlotsFacade.character.getGiftPos()),e.forEach(function(e){var t=n.node.convertToNodeSpaceAR(e),a=cc.instantiate(n._spine_wildFly);a.parent=n.node,a.position=t,a.active=!0,cc.tween(a).call(function(){a.getComponent(sp.Skeleton).setAnimation(0,"animation1",!1)}).delay(.2).call(function(){a.getComponent(sp.Skeleton).setAnimation(0,"animation1_1",!1)}).to(.5,{position:o}).call(function(){a.removeFromParent()}).start()}),a.next=7,SlotsFacade.delayTime(.7);case 7:return SlotsFacade.character.playCollectGiftEffect(),a.next=10,SlotsFacade.delayTime(.4);case 10:return t&&Global.SlotsSoundMgr.playEffect("tree"),a.next=13,n.awaitTime(t?1.3:.5);case 13:case"end":return a.stop()}},a)}))()},awaitTime:function(e){var t=this;return new Promise(function(n){t.scheduleOnce(function(){n()},e)})}}),cc._RF.pop()},{}],LuckySanta_GameData:[function(e,t,n){"use strict";function a(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=o(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,r=!0,c=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return r=e.done,e},e:function(e){c=!0,i=e},f:function(){try{r||null==a.return||a.return()}finally{if(c)throw i}}}}function o(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}cc._RF.push(t,"0637bKyaVJC44j4hJ5r3bMv","LuckySanta_GameData"),cc.Class({extends:e("LMSlots_GameData_Base"),properties:{energyData:null,totalWildCnt:0,needBet:0},init:function(e,t,n){this._super(e,t,n),this.energyData=this._deskInfo.energyData,this.needBet=this.energyData.minBetIdx,this.totalWildCnt=this._deskInfo.totalWildCnt},GetGameWin:function(){var e=this._gameInfo.wincoin;if(this._gameInfo.mapFreeGameData&&this._gameInfo.mapFreeGameData.length>0){e=0;var t,n=a(this._gameInfo.mapFreeGameData);try{for(n.s();!(t=n.n()).done;){e+=t.value.winCoin}}catch(e){n.e(e)}finally{n.f()}}return e},GetMaxBetIdx:function(){return this._deskInfo.mults.length},SetSubGameData:function(e){this._subGame=e},GetSubGameData:function(){return this._subGame},isTriggerFreeGames:function(){return this._deskInfo.restFreeCount>0&&this._deskInfo.restFreeCount==this._deskInfo.allFreeCount},isFinishFreeGames:function(){return 0==this._deskInfo.restFreeCount&&this._deskInfo.allFreeCount>0},isFreeGamesTime:function(){return this._deskInfo.restFreeCount>0&&this._deskInfo.restFreeCount<this._deskInfo.allFreeCount},isOpenCollectProgress:function(){return this.GetBetIdx()>=this.needBet},ReqSpin:function(e){var t={c:MsgId.SLOT_START};t.betIndex=e,t.gameid=this._gameId,cc.vv.NetManager.send(t,!0)},OnRcvNetSpine:function(e){if(200==e.code){if(e.spcode&&967==e.spcode)return void cc.vv.FloatTip.show("\u6d41\u7a0b\u9519\u8bef\uff01\uff01\uff01");for(var t in e.resultCards)if(e.resultCards[t]){if(e.coinBonus&&e.coinBonus.info){var n=e.coinBonus.info["idx_"+(parseInt(t)+1)];n&&(e.resultCards[t]=Global.StarBonusRespin.getIdByType(n.type))}}else e.resultCards[t]=Global.random(3,13);this._super(e),e.energyData&&(this.energyData=e.energyData,this.needBet=this.energyData.needBetIdx),this.totalWildCnt=e.totalWildCnt}},reqSubGame:function(e){var t=this;return new Promise(function(n){var a={c:MsgId.SLOT_SUBGAME_DATA,gameid:t._gameId,data:e};cc.vv.NetManager.registerMsg(MsgId.SLOT_SUBGAME_DATA,function e(a){cc.vv.NetManager.unregisterMsg(MsgId.SLOT_SUBGAME_DATA,e,!1,t),console.log("reqSubGame-resp:",a),n(a)},t),cc.vv.NetManager.send(a,!0)})}}),cc._RF.pop()},{LMSlots_GameData_Base:void 0}],LuckySanta_Logic:[function(e,t,n){"use strict";cc._RF.push(t,"6b9b52C0mhGTJJz3Dwn65hN","LuckySanta_Logic"),cc.Class({extends:e("LMSlots_Logic_Base"),properties:{},onLoad:function(){window.SlotsFacade=this,this.dm=cc.vv.gameData,this.InitCommComponent(),this.popup=cc.find("Canvas/safe_node/node_ui_pop").addComponent("LuckySanta_Pop"),this.character=cc.find("Canvas/safe_node/slots/charactor").getComponent("LuckySanta_Character"),this.collectProgress=cc.find("Canvas/safe_node/slots/node_energyCollect").getComponent("LuckySanta_CollectProgress"),this.wildCollect=cc.find("Canvas/safe_node/gamePickBonus").getComponent("LuckySanta_CollectWild"),this.pickBonus=cc.find("Canvas/safe_node/gamePickBonus").getComponent("LuckySanta_PickBonus"),this.pickGift=cc.find("Canvas/safe_node/gamePickGift").getComponent("LuckySanta_PickGift"),this.bonusFreeGame=cc.find("Canvas/safe_node/starBonusFreegame").getComponent("LuckySanta_StarBonusFreegame"),this.topCmp=cc.vv.gameData.GetTopScript(),this.bottomCmp=cc.vv.gameData.GetBottomScript(),this.slots=cc.vv.gameData.GetSlotsScript()},onDestroy:function(){window.SlotsFacade=null,this.dm=null},delayTime:function(e){var t=this;return new Promise(function(n,a){t.scheduleOnce(function(){n()},e)})}}),cc._RF.pop()},{LMSlots_Logic_Base:void 0}],LuckySanta_PickBonus:[function(e,t,n){"use strict";function a(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=o(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,r=!0,c=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return r=e.done,e},e:function(e){c=!0,i=e},f:function(){try{r||null==a.return||a.return()}finally{if(c)throw i}}}}function o(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function r(e,t,n,a,o,i,r){try{var c=e[i](r),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(a,o)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(a,o){var i=e.apply(t,n);function c(e){r(i,a,o,c,s,"next",e)}function s(e){r(i,a,o,c,s,"throw",e)}c(void 0)})}}cc._RF.push(t,"d26b1DNb0dCraxlpwRU4621","LuckySanta_PickBonus");var s=function(e,t){var n=this;this.node=e,this.owner=t,this.jackpotIdx=0,this.spine=cc.find("spine",this.node),this.resetInit=function(){n.setJackpotIdx(0),n.setClickEnable(!0)},this.setJackpotIdx=function(e){n.jackpotIdx=e,0==e&&n.showInit()},this.setClickCallback=function(e){n.node.off("click"),Global.btnClickEvent(n.node,function(){n.setClickEnable(!1),e()},n)},this.setClickEnable=function(e){n.node.getComponent(cc.Button).interactable=e},this.isClickEnable=function(){return n.node.getComponent(cc.Button).interactable},this.showInit=function(){n.node.zIndex=0,n.showChooseTips()},this.getResId=function(e){return 5-e},this.showChooseTips=function(){n.owner.playSpine(n.spine,"animation05",!0)},this.showBombing=function(){n.owner.playSpine(n.spine,"animation0"+n.getResId(n.jackpotIdx),!1,function(){n.showResult()})},this.showResult=function(){n.owner.playSpine(n.spine,"animation0"+n.getResId(n.jackpotIdx)+"_1")},this.showWin=function(){n.node.zIndex=2,n.owner.playSpine(n.spine,"animation0"+n.getResId(n.jackpotIdx)+"_2",!0)}};cc.Class({extends:cc.Component,properties:{_uiMain:null,_uiResult:null,_itemsList:null,_subgameInfo:null},onLoad:function(){this._soundCfg=cc.vv.gameData.getGameCfg().soundCfg,this._uiResult=cc.find("uiResult",this.node),this._uiResult.active=!1,this._uiMain=cc.find("uiMain",this.node),this._uiMain.active=!1,cc.find("LMSlots_PrizePool_1",this._uiMain).addComponent("LMSlots_PrizePool_Base"),this._grayLayer=cc.find("itemListBg/List/grayLayer",this._uiMain),this._itemsList=[];var e=cc.find("itemListBg/List",this._uiMain),t=cc.find("ItemTemplate",e);t.active=!1;for(var n=0;n<12;n++){var a=cc.instantiate(t);a.active=!0,a.name=n.toString(),a.parent=e,this._itemsList.push(new s(a,this))}this._resetInit()},enterGame:function(e){var t=arguments,n=this;return c(regeneratorRuntime.mark(function a(){var o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return o=t.length>1&&void 0!==t[1]&&t[1],n._subgameInfo=e,cc.vv.gameData.GetSlotsScript()._bottomScript.ShowBtnsByState("moveing_1"),Global.SlotsSoundMgr.playBgm("pick_bgm"),n._resetInit(),n._lockJackpot(n._subgameInfo.jackpot||[0,0,0,0]),a.next=8,n._showMain(o);case 8:return a.next=10,n._showResultDialouge(n._subgameInfo.wincoin,n._subgameInfo.jackpotId);case 10:return a.next=12,n.exitGame();case 12:case"end":return a.stop()}},a)}))()},exitGame:function(){var e=this;return c(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._playTransition();case 2:e.scheduleOnce(function(){e._resetInit(!1)},.5),cc.vv.gameData.GetSlotsScript()._bottomScript.ShowBtnsByState("idle"),Global.SlotsSoundMgr.stopBgm();case 5:case"end":return t.stop()}},t)}))()},start:function(){var e=this,t=cc.vv.gameData.getDeskInfo();t.christmas&&t.christmas.state&&(this.scheduleOnce(function(){e.enterGame(t.christmas,!0)},.2),cc.vv.gameData.GetSlotsScript()._topScript.SetBackLobby(!1))},_resetInit:function(){var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=a(this.node.children);try{for(n.s();!(e=n.n()).done;){var o=e.value;("spine_transition"!=o.name&&"spine_transition2"!=o.name||t)&&(o.active=!1)}}catch(e){n.e(e)}finally{n.f()}var i,r=a(this._itemsList);try{for(r.s();!(i=r.n()).done;){i.value.resetInit()}}catch(e){r.e(e)}finally{r.f()}this._setGrayLayerVisible(!1),this._setUnSelectItemsClickEnable(!0)},_restoreByServerData:function(){for(var e=this._subgameInfo.choice||[],t=0;t<this._itemsList.length;t++){var n=e[t],a=this._itemsList[t];a.setJackpotIdx(e[t]),n>0&&a.showResult()}this._setUnSelectItemsClickEnable(!0)},_showMain:function(e){var t=this;return c(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.scheduleOnce(function(){t._uiMain.active=!0,e&&t._restoreByServerData()},.5),n.next=3,t._playTransition();case 3:return n.abrupt("return",new Promise(function(){var e=c(regeneratorRuntime.mark(function e(n,o){var i,r,s,l,u,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=t,r=function(){var e=c(regeneratorRuntime.mark(function e(r){var c,l,u,f,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Global.SlotsSoundMgr.playEffect("pick"),c=a(t._itemsList);try{for(c.s();!(l=c.n()).done;)l.value.node.stopAllActions()}catch(e){c.e(e)}finally{c.f()}return i._setUnSelectItemsClickEnable(!1),u=parseInt(r.node.name),e.next=7,cc.vv.gameData.reqSubGame({rtype:1,idx:u+1});case 7:if(200!==(f=e.sent).code){e.next=32;break}return p=f.data,r.setJackpotIdx(p.choice[u]),r.showBombing(),e.next=14,i.awaitTime(1);case 14:if(!(p.wincoin>0)){e.next=28;break}return i._subgameInfo.wincoin=p.wincoin,i._subgameInfo.choice=p.choice,i._subgameInfo.jackpotId=p.jackpotId,i._playWinEffect(p.jackpotId,p.choice),e.next=21,i.awaitTime(3);case 21:Global.SlotsSoundMgr.playEffect("pick_end"),cc.vv.gameData.AddCoin(p.wincoin),cc.vv.gameData.GetSlotsScript()._topScript.ShowCoin(),n(),e.next=30;break;case 28:i._setUnSelectItemsClickEnable(!0),s();case 30:e.next=34;break;case 32:AppLog.warn("\u8fd4\u56de\u6570\u636e\u9519\u8bef!"),o();case 34:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),(s=function(){var e=[];i._itemsList.forEach(function(t){0==t.jackpotIdx&&e.push(t)});var t=e[Global.random(0,e.length-1)];cc.vv.gameData.checkAutoPlay(t.node,function(){r(t)})})(),l=a(t._itemsList);try{for(f=function(){var e=u.value;e.setClickCallback(c(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r(e);case 1:case"end":return t.stop()}},t)})))},l.s();!(u=l.n()).done;)f()}catch(e){l.e(e)}finally{l.f()}case 6:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()));case 4:case"end":return n.stop()}},n)}))()},_setUnSelectItemsClickEnable:function(e){var t,n=a(this._itemsList);try{for(n.s();!(t=n.n()).done;){var o=t.value;0==o.jackpotIdx&&(o.setClickEnable(e),o.showChooseTips())}}catch(e){n.e(e)}finally{n.f()}},_showUnchooseResult:function(e,t){var n,o=a(this._itemsList);try{for(o.s();!(n=o.n()).done;){var i=n.value;if(0==i.jackpotIdx){var r=parseInt(i.node.name);i.setJackpotIdx(t[r]),i.showBombing()}}}catch(e){o.e(e)}finally{o.f()}},_setGrayLayerVisible:function(e){(this._grayLayer.active=e,e)&&(cc.find("itemListBg/List",this._uiMain).getComponent(cc.Layout).enabled=!1,this._grayLayer.width=cc.find("Canvas").width,this._grayLayer.height=cc.find("Canvas").height,this._grayLayer.position=this._grayLayer.parent.convertToNodeSpaceAR(cc.find("Canvas").convertToWorldSpaceAR(cc.v2(0,0))),this._grayLayer.zIndex=1)},_playWinEffect:function(e,t){var n=this;cc.find("itemListBg/List",this._uiMain).getComponent(cc.Layout).enabled=!1,this._setGrayLayerVisible(!0),this._playJackpotWinEffect(e),this.scheduleOnce(function(){n._showUnchooseResult(e,t)},.8)},_playJackpotWinEffect:function(e){Global.SlotsSoundMgr.playEffect("bell"),Global.SlotsSoundMgr.playEffect("pick_hit");var t,n=a(this._itemsList);try{for(n.s();!(t=n.n()).done;){var o=t.value;o.jackpotIdx==e&&o.showWin()}}catch(e){n.e(e)}finally{n.f()}},_convertNodePosToLocalPos:function(e,t){return t.convertToNodeSpaceAR(e.parent.convertToWorldSpaceAR(e.position))},_playTransition:function(){var e=this;return c(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Global.SlotsSoundMgr.playEffect("transition1"),n=cc.find("spine_transition",e.node),t.next=4,e.playSpine(n);case 4:n.active=!1;case 5:case"end":return t.stop()}},t)}))()},_showResultDialouge:function(e,t){var n=this;return c(regeneratorRuntime.mark(function a(){var o,i,r,c;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:for(o=["theme129_popup_text11","theme129_popup_text12","theme129_popup_text10","theme129_popup_text9"],cc.find("jackpot_txt",n._uiResult).getComponent(cc.Sprite).spriteFrame=cc.vv.gameData.GetAtlasByName("dialog").getSpriteFrame(o[t-1]),i=e,r=Global.formatMoney(i),c=0;r.length>10;)i=Math.floor(i/1e3),r=Global.formatMoney(i),c++;return r+=["","K","M","B","T","Q"][c],cc.find("lblWinCoin",n._uiResult).getComponent(cc.Label).string=r,n._uiResult.active=!0,n._uiResult.opacity=0,a.next=15,n.playActions(n._uiResult,[cc.fadeIn(.5)]);case 15:return a.next=17,n.awaitTime(1);case 17:return a.next=19,n.showBottomWin(e);case 19:return a.next=21,n.awaitTime(.5);case 21:case"end":return a.stop()}},a)}))()},showBottomWin:function(e){return c(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){cc.vv.gameData.GetSlotsScript().ShowBottomWin(e,e,!0,function(){t()})}));case 1:case"end":return t.stop()}},t)}))()},_lockJackpot:function(e){cc.find("LMSlots_PrizePool_1",this._uiMain).getComponent("LMSlots_PrizePool_Base").PausePool([{prizeType:0,pauseNum:e[0]},{prizeType:1,pauseNum:e[1]},{prizeType:2,pauseNum:e[2]},{prizeType:3,pauseNum:e[3]}])},playSpine:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"animation",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new Promise(function(o){e?(e.active=!0,AppLog.log("\u64ad\u653e\u8282\u70b9["+e.parent.name+"/"+e.name+"]\u7684spine\u52a8\u4f5c: "+t),e.getComponent(sp.Skeleton).setAnimation(0,t,n),n?o():e.getComponent(sp.Skeleton).setCompleteListener(function(){a&&a(),o()})):(a&&a(),o())})},playActions:function(e,t){return new Promise(function(n){t.push(cc.callFunc(function(){n()})),e.active=!0,e.runAction(cc.sequence(t))})},awaitTime:function(e){var t=this;return new Promise(function(n){t.scheduleOnce(function(){n()},e)})}}),cc._RF.pop()},{}],LuckySanta_PickGift:[function(e,t,n){"use strict";function a(e,t,n,a,o,i,r){try{var c=e[i](r),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(a,o)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(o,i){var r=e.apply(t,n);function c(e){a(r,o,i,c,s,"next",e)}function s(e){a(r,o,i,c,s,"throw",e)}c(void 0)})}}function i(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=r(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o,i=!0,c=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==a.return||a.return()}finally{if(c)throw o}}}}function r(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}cc._RF.push(t,"e28e1NmdwpA8rhIeIA5blWd","LuckySanta_PickGift");var s=[2,3,4,5,6,7,8,9,10,12,15,20,30,50,60,70,80,90,100,150,200,300,500,750,1e3,1500],l=1,u=2,f=3,p=0,m=1,d=2,h=3,v=4,_={GREEN:"green",RED:"red",GRAY:"gray"},g=function(e,t){this.node=e,this._owner=t,this._color=_.GREEN,this.init=function(){cc.find("spine",this.node).active=!1;var e=parseInt(this.node.name);this.setColor(e<13?_.GREEN:_.RED)},this.setMult=function(e){var t=cc.find("lblMult",this.node);t.active=!0,this._owner._setLabel(t,e)},this.playToGray=function(){var e=this,t=cc.find("spine",this.node);this._owner._playSpine(t,"animation",!1,function(){e.setColor(_.GRAY),t.active=!1})},this.setColor=function(e){this._color=e,this._refreshColor()},this._refreshColor=function(){for(var e in _)cc.find(_[e],this.node).active=!1;cc.find(this._color,this.node).active=!0}},S=function(e,t){this.node=e,this._owner=t,this._idNum=0,this._spine_light=cc.find("spine_light",this.node),this.init=function(){var e,t=i(this.node.children);try{for(t.s();!(e=t.n()).done;){e.value.active=!1}}catch(e){t.e(e)}finally{t.f()}cc.find("box",this.node).active=!0,this._idNum=parseInt(this.node.name)+1,this._owner._setLabel(cc.find("box/lblIdxNum",this.node),this._idNum)},this.setClickCallback=function(e){var t=this;this.node.off("click"),Global.btnClickEvent(this.node,function(){t.setClickEnable(!1),e()},this)},this.setClickEnable=function(e){this.node.getComponent(cc.Button).interactable=e},this.isClickEnable=function(){return this.node.getComponent(cc.Button).interactable},this.getId=function(){return this._idNum},this.playAppearEff=function(){this.node.active=!0;var e=cc.find("box",this.node);e.scale=0;var t=cc.find("spine_coming",this.node);this._owner._playSpine(t,"animation",!1,function(){t.active=!1}),cc.tween(e).to(.3,{scale:.35}).to(.1,{scale:.19}).start()},this.playDisappear=function(){this.init(),this.node.active=!1},this.playPinkStroke=function(){var e=this;this._owner._playSpine(this._spine_light,"animation1",!1,function(){e._owner._playSpine(e._spine_light,"animation2")})},this.hasStrokeEff=function(){return this._spine_light.active},this.removeStrokeEff=function(){this._spine_light.active=!1},this.flyToYourGift=function(e,t){var n=this;Global.SlotsSoundMgr.playEffect("gift_fly"),this._playParticleEff(!0),this._playWhiteStroke(function(){Global.SlotsSoundMgr.playEffect("gift_out1"),cc.tween(n.node).to(.5,{position:t,scale:1.68}).call(function(){n._playParticleEff(!1),n.removeStrokeEff()}).start()})},this._playWhiteStroke=function(e){var t=this;this._owner._playSpine(this._spine_light,"animation3",!1,function(){t._owner._playSpine(t._spine_light,"animation4"),e&&e()})},this._playParticleEff=function(e){var t=cc.find("tuoweiPtcl",this.node);(t.active=e,e)&&t.getComponent(cc.ParticleSystem).resetSystem()}};cc.Class({extends:cc.Component,properties:{_isLook:!1,_uiMain:null,_uiBg1:null,_uiBg2:null,_yourGiftBoxItem:null,_multItemsList:null,_boxItemsList:null,_giveMultLblList:null,_freeBags:null,_multConf:null,_totalRound:0,_currRound:null,_currCount:0,_historyMult:null,_gainMult:null,_prize:null,_hasChoices:null,_unpickedMult:null,_state:null,_nextRound:null,_nextChooseCount:null,_options:null,_lastChoice:null,_curRoundPickBoxList:null},onLoad:function(){this._initData(),this._uiMain=cc.find("uiMain",this.node),this._uiBg1=cc.find("uiBg1",this._uiMain),this._uiBg2=cc.find("uiBg2",this._uiMain),cc.find("box_pos",this._uiBg2).active=!1;var e,t=cc.find("multList",this._uiMain),n=i(t.children);try{for(n.s();!(e=n.n()).done;){e.value.active=!1}}catch(e){n.e(e)}finally{n.f()}this._multItemsList=[];for(var a=0;a<26;a++){var o=cc.instantiate(cc.find("ItemTemplate",t));o.name=a.toString(),o.active=!0,o.position=cc.find("Item"+(a+1),t).position,o.parent=t;var r=new g(o,this);r.init(),r.setMult(this._multConf[a]),r.setColor(_.GREEN),this._multItemsList.push(r)}var c,s=cc.find("boxList",this._uiMain),l=i(s.children);try{for(l.s();!(c=l.n()).done;){c.value.active=!1}}catch(e){l.e(e)}finally{l.f()}this._boxItemsList=[];for(var u=0;u<26;u++){var f=cc.instantiate(cc.find("ItemTemplate",s));f.name=u.toString(),f.active=!0,f.position=cc.find("Item"+(u+1),s).position,f.parent=s;var p=new S(f,this);p.init(),this._boxItemsList.push(p)}this._giveMultLblList=[];for(var m=1;m<=5;m++)this._giveMultLblList.push(cc.find("giveupMultList/lblMult"+m,this._uiBg2));var d,h=i(this.node.children);try{for(h.s();!(d=h.n()).done;){d.value.active=!1}}catch(e){h.e(e)}finally{h.f()}},start:function(){},enterGame:function(){var e=arguments,t=this;return o(regeneratorRuntime.mark(function n(){var a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a=e.length>0&&void 0!==e[0]&&e[0],t._isLook=a,a||Global.SlotsSoundMgr.playBgm("deal_bgm"),cc.vv.gameData.GetSlotsScript()._bottomScript.ShowBtnsByState("moveing_1"),n.next=6,t._showMain();case 6:return n.next=8,t.exitGame();case 8:case"end":return n.stop()}},n)}))()},exitGame:function(){var e=this;return o(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._disappearFadeOut();case 2:e._freeBags=null,cc.vv.gameData.GetSlotsScript()._bottomScript.ShowBtnsByState("idle"),Global.SlotsSoundMgr.stopBgm();case 5:case"end":return t.stop()}},t)}))()},_onInit:function(){this._uiBg1.active=!0,this._uiBg2.active=!1;var e,t=i(this._multItemsList);try{for(t.s();!(e=t.n()).done;){e.value.init()}}catch(e){t.e(e)}finally{t.f()}var n,a=i(this._boxItemsList);try{for(a.s();!(n=a.n()).done;){var o=n.value;o.init(),o.node.active=!1}}catch(e){a.e(e)}finally{a.f()}var r,c=i(this._giveMultLblList);try{for(c.s();!(r=c.n()).done;){var s=r.value;this._setLabel(s,"")}}catch(e){c.e(e)}finally{c.f()}cc.find("clickMaskTouch",this._uiMain).active=!1,this._setTitleType(l),this._setAllBoxItemsClickEnable(!1),cc.find("xiangshangParticle",this._uiBg2).active=!1},_initData:function(){this._freeBags||(this._freeBags=cc.vv.gameData.getGameInfo()?cc.vv.gameData.getGameInfo().freeBags:cc.vv.gameData.getDeskInfo().freeBags),this._multConf=this._freeBags.conf||s,this._currCount=this._freeBags.currCnt,this._totalRound=5,this._currRound=this._freeBags.picked,this._unpickedMult=this._freeBags.unpickedMult,this._historyMult=this._freeBags.historyMult,this._gainMult=this._freeBags.mult,this._prize=this._freeBags.prize,this._hasChoices=this._freeBags.choices;var e=this._freeBags.currState;this._state=e.state||0,this._nextRound=e.nextRound,this._nextChooseCount=e.nextCount,this._options=e.options,this._lastChoice=this._freeBags.lastChoice},_restoreByServerData:function(){this._showModule(this._state==p);this._currCount;this._isLook||this._state!=p&&this._state!=m||this._currCount;for(var e=0;e<this._currCount;e++)this._boxItemsList[e].node.active=!0;var t,n=i(this._hasChoices);try{for(n.s();!(t=n.n()).done;){var a=t.value;this._boxItemsList[a-1].node.active=!1}}catch(e){n.e(e)}finally{n.f()}for(var o in this._historyMult)this._setLabel(this._giveMultLblList[o],this._historyMult[o]+"X");var r,c=i(this._multItemsList);try{for(c.s();!(r=c.n()).done;){var s=r.value;s.setColor(_.GRAY),s.node.opacity=this._state==p?150:255}}catch(e){c.e(e)}finally{c.f()}var l,u=i(this._unpickedMult);try{for(u.s();!(l=u.n()).done;){var f=l.value;this._multItemsList[this._getIdxByMult(f)].init()}}catch(e){u.e(e)}finally{u.f()}},_showMain:function(){var e=this;return o(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._uiMain.active=!0,t.abrupt("return",new Promise(function(){var t=o(regeneratorRuntime.mark(function t(n,a){var o,r,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._onInit(),e._freeBags=null,e._initData(),e._restoreByServerData(),t.next=6,e._appearFadeIn();case 6:if(!e._isLook){t.next=12;break}(o=cc.find("clickMaskTouch",e._uiMain)).active=!0,Global.btnClickEvent(o,function(){o.active=!1,Global.SlotsSoundMgr.playEffect("click"),n()}),t.next=66;break;case 12:if(e._isLook||e._state!=p){t.next=22;break}return Global.SlotsSoundMgr.playEffect("deal_scene_open"),t.next=16,e._playCollecGiftBoxEff();case 16:return t.next=18,e._awaitTime(1);case 18:SlotsFacade.collectProgress.setProgress(0),n(),t.next=66;break;case 22:if(e._isLook||e._state!=m){t.next=26;break}return Global.SlotsSoundMgr.playEffect("full"),t.next=26,e._playCollecGiftBoxEff();case 26:if(e._state!=m){t.next=36;break}r=i(e._multItemsList);try{for(r.s();!(c=r.n()).done;)c.value.node.opacity=255}catch(e){r.e(e)}finally{r.f()}return AppLog.warn("\u7b2c\u4e00\u6b21\u9009\u62e9",e._currRound,e._totalRound),e._showModule(!1),t.next=33,e.popUIStartTips();case 33:return t.next=35,e._chooseYourBox();case 35:AppLog.warn("\u7b2c\u4e00\u6b21\u9009\u62e9---\u7ed3\u675f",e._currRound,e._totalRound);case 36:if(!(e._currRound<e._totalRound)){t.next=56;break}if(e._state!=d){t.next=47;break}return AppLog.warn("\u9009\u62e9\u4e00\u8f6e\u5f00\u59cb",e._currRound,e._totalRound),e._yourGiftBoxItem||e._showYourBox(e._boxItemsList[e._lastChoice[0]-1],!1),e._setTitleType(l),t.next=43,e.popUIRoundTips(e._nextRound,e._nextChooseCount);case 43:return e._setTitleType(f,e._nextChooseCount),t.next=46,e._chooseCurRoundBox(e._nextChooseCount);case 46:AppLog.warn("\u9009\u62e9\u4e00\u8f6e\u7ed3\u675f",e._currRound,e._totalRound);case 47:if(e._state!=h){t.next=54;break}return AppLog.warn("\u4e00\u8f6e\u7ed3\u7b97",e._currRound,e._totalRound),t.next=51,e.popUIRoundResultTips();case 51:if(!t.sent){t.next=54;break}return t.abrupt("break",56);case 54:t.next=36;break;case 56:if(e._state!=v){t.next=59;break}return t.next=59,e.popUILastRoundSelectTip(e._lastChoice[0],e._lastChoice[1]);case 59:return AppLog.warn("\u5927\u7ed3\u7b97",e._currRound,e._totalRound),t.next=62,e.popUIEndResultTips();case 62:return t.next=64,e._awaitTime(1);case 64:SlotsFacade.collectProgress.setProgress(0),n();case 66:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()));case 2:case"end":return t.stop()}},t)}))()},_getIdxByMult:function(e){for(var t in this._multConf){if(this._multConf[t]==e)return t}},_chooseYourBox:function(){var e=this;return new Promise(function(){var t=o(regeneratorRuntime.mark(function t(n){var a,r,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e._setAllBoxItemsClickEnable(!0),a=i(e._boxItemsList);try{for(c=function(){var t=r.value;t.setClickCallback(o(regeneratorRuntime.mark(function a(){var o,i;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e._setAllBoxItemsClickEnable(!1),a.next=3,cc.vv.gameData.reqSubGame({rtype:3,act:1,choices:[t.getId()]});case 3:if(200!==(o=a.sent).code){a.next=13;break}return i=o.data,e._setSubGameData(i.freeBags),e._setTitleType(l),a.next=10,e._showYourBox(t,!0);case 10:n(),a.next=15;break;case 13:AppLog.err("\u8fd4\u56de\u62a5\u9519\u4e86"),n();case 15:case"end":return a.stop()}},a)})))},a.s();!(r=a.n()).done;)c()}catch(e){a.e(e)}finally{a.f()}case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())},_showYourBox:function(e,t){var n=this;this._yourGiftBoxItem&&(this._yourGiftBoxItem.node.removeFromParent(),this._yourGiftBoxItem=null),this._yourGiftBoxItem=new S(cc.instantiate(e.node),this),this._yourGiftBoxItem.node.parent=this._uiBg2,this._yourGiftBoxItem.node.active=!0;var a=this._cvtToLocalPos(e.node,this._uiBg2),i=cc.find("box_pos",this._uiBg2).position;return new Promise(function(){var r=o(regeneratorRuntime.mark(function o(r){var c;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!t){o.next=8;break}return e.playDisappear(),n._yourGiftBoxItem.node.position=a,n._yourGiftBoxItem.flyToYourGift(a,i),o.next=6,n._awaitTime(2);case 6:o.next=10;break;case 8:n._yourGiftBoxItem.node.position=i,n._yourGiftBoxItem.node.scale=1.68;case 10:(c=cc.find("xiangshangParticle",n._uiBg2)).active=!0,c.getComponent(cc.ParticleSystem).resetSystem(),r();case 14:case"end":return o.stop()}},o)}));return function(e){return r.apply(this,arguments)}}())},_chooseCurRoundBox:function(e){var t=this,n=0;return new Promise(function(){var a=o(regeneratorRuntime.mark(function a(r){var c,s,u;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t._setAllBoxItemsClickEnable(!0),c=i(t._boxItemsList);try{for(u=function(){var a=s.value;a.setClickCallback(o(regeneratorRuntime.mark(function o(){var c,s,u,p,m,d;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(Global.SlotsSoundMgr.playEffect("click_deal"),t._setAllBoxItemsClickEnable(!1),!a.hasStrokeEff()){o.next=9;break}return a.removeStrokeEff(),n--,o.next=7,t._awaitTime(.21);case 7:o.next=13;break;case 9:return a.playPinkStroke(),n++,o.next=13,t._awaitTime(.15);case 13:if(t._setTitleType(f,n),n!=e){o.next=41;break}t._setTitleType(l),c=[],s=i(t._boxItemsList);try{for(s.s();!(u=s.n()).done;)(p=u.value).node.active&&p.hasStrokeEff()&&c.push(p.getId())}catch(e){s.e(e)}finally{s.f()}return t._curRoundPickBoxList=c,o.next=22,cc.vv.gameData.reqSubGame({rtype:3,act:2,choices:c});case 22:if(200!==(m=o.sent).code){o.next=37;break}if(!(d=m.data).spcode||967!=d.spcode){o.next=29;break}return cc.vv.FloatTip.show("\u6d41\u7a0b\u9519\u8bef\uff01\uff01\uff01"),r(),o.abrupt("return");case 29:return t._setSubGameData(d.freeBags),o.next=32,t._awaitTime(.8);case 32:return o.next=34,t._playOpenRewardEff(c,d.items);case 34:r(),o.next=39;break;case 37:AppLog.err("\u8fd4\u56de\u62a5\u9519\u4e86"),r();case 39:o.next=42;break;case 41:t._setAllBoxItemsClickEnable(!0);case 42:case"end":return o.stop()}},o)})))},c.s();!(s=c.n()).done;)u()}catch(e){c.e(e)}finally{c.f()}case 3:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}())},_setTitleType:function(e,t){for(var n=1;n<=3;n++)cc.find("listBg/sprTitle"+n,this._uiMain).active=!1;cc.find("listBg/sprTitle"+e,this._uiMain).active=!0,e==f?this._setLabel(cc.find("listBg/lblCount",this._uiMain),this._nextChooseCount-t):this._setLabel(cc.find("listBg/lblCount",this._uiMain),"")},_setAllBoxItemsClickEnable:function(e){var t,n=i(this._boxItemsList);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.node.active?a.setClickEnable(e):a.setClickEnable(!1)}}catch(e){n.e(e)}finally{n.f()}},_playCollecGiftBoxEff:function(){var e=this;return new Promise(function(){var t=o(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._boxItemsList[e._currCount-1].playAppearEff(),t.next=3,e._awaitTime(1);case 3:n();case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())},_playOpenRewardEff:function(e,t){var n=this;return new Promise(function(){var a=o(regeneratorRuntime.mark(function a(o){var i,r,c,s,u,f,p,m,d,h,v;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:n._setTitleType(l),(i=cc.find("uiRewardEff",n.node)).active=!0,(r=cc.find("box",i)).scale=0,c=cc.find("lblIdxNum",r),(s=cc.find("particle",i)).active=!1,(u=cc.find("openBox",i)).opacity=255,(f=cc.find("spine_light",u)).scale=0,(p=cc.find("spine_box",u)).active=!1,(m=cc.find("lblMult",u)).scale=0,(d=cc.find("spine_break",u)).active=!1,n.scheduleOnce(function(){s.getComponent(cc.ParticleSystem).resetSystem()},.5),Global.SlotsSoundMgr.playEffect("bonus_dialog2"),h=regeneratorRuntime.mark(function a(o){var i,s,l,h;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return i=t[o][0],s=i,t[o].length>1&&(s=t[o][1]),n._setLabel(c,e[o]),n._setLabel(m,s+"X"),r.scale=0,m.scale=0,f.scale=0,u.opacity=255,p.active=!1,(l=n._boxItemsList[e[o]-1]).node.active&&l.playDisappear(),s>=1e3&&Global.SlotsSoundMgr.playEffect("1000_ohno"),n._playActions(f,[cc.scaleTo(.5,1)]),a.next=16,n._playActions(r,[cc.scaleTo(.4,.9),cc.scaleTo(.2,.6)]);case 16:return a.next=18,n._awaitTime(.6);case 18:return r.scale=0,o==e.length-1?Global.SlotsSoundMgr.playEffect("gift_final"):Global.SlotsSoundMgr.playEffect("gift_open"),a.next=22,n._playSpine(p,"animation1");case 22:return a.next=24,n._awaitTime(.4);case 24:return a.next=26,n._playActions(m,[cc.scaleTo(.3,1.4),cc.scaleTo(.1,1)]);case 26:if(i==s){a.next=30;break}return n.scheduleOnce(function(){n._setLabel(m,i+"X"),Global.SlotsSoundMgr.playEffect("1000X")},2),a.next=30,n._playSpine(d,"animation",!1,function(){d=!1});case 30:return(h=n._getIdxByMult(i))&&n._multItemsList[h].playToGray(),a.next=34,n._awaitTime(.8);case 34:return a.next=36,n._playActions(u,[cc.fadeTo(.5,0)]);case 36:return a.next=38,n._awaitTime(.8);case 38:case"end":return a.stop()}},a)}),a.t0=regeneratorRuntime.keys(e);case 22:if((a.t1=a.t0()).done){a.next=27;break}return v=a.t1.value,a.delegateYield(h(v),"t2",25);case 25:a.next=22;break;case 27:return a.next=29,n._awaitTime(.2);case 29:i.active=!1,o();case 31:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}())},_showModule:function(e){var t=this,n=this._uiBg1.active!=e;e?(this._uiBg1.active=!0,n?(this._uiBg2.opacity=255,cc.tween(this._uiBg2).to(.4,{opacity:0}).call(function(){t._uiBg2.active=!1}).start()):this._uiBg2.active=!1):(this._uiBg1.active=!1,this._uiBg2.active=!0,n&&(this._uiBg2.opacity=0,cc.tween(this._uiBg2).to(.4,{opacity:255}).start()))},popUIStartTips:function(){var e=this;return o(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=o(regeneratorRuntime.mark(function t(n){var a,i,r,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(a=cc.find("uiStartTips",e.node)).active=!0,(i=cc.find("ui",a)).scale=0,(r=i.getChildByName("btnStart")).getComponent(cc.Button).enabled=!1,Global.SlotsSoundMgr.playEffect("bonus_dialog1"),t.next=9,e._playActions(i,[cc.scaleTo(.3,1.2),cc.scaleTo(.1,1)]);case 9:e._setTitleType(u),r.getComponent(cc.Button).enabled=!0,r.off("click"),c=function(){var t=o(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r.getComponent(cc.Button).enabled=!1,t.next=3,e._playActions(i,[cc.scaleTo(.1,1.2),cc.scaleTo(.3,0)]);case 3:a.active=!1,n();case 5:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),cc.vv.gameData.checkAutoPlay(r,c),Global.btnClickEvent(r,o(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.stopAllActions(),e.next=3,c();case 3:case"end":return e.stop()}},e)})),e);case 15:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},popUIRoundTips:function(e,t){var n=this;return o(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new Promise(function(){var a=o(regeneratorRuntime.mark(function a(o){var i,r,c,s;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return(i=cc.find("uiRoundTips",n.node)).active=!0,(r=i.getChildByName("ui")).scale=0,c=cc.find("noraml",r),s=cc.find("lastChance",r),e==n._totalRound?(c.active=!1,s.active=!0):(c.active=!0,s.active=!1,n._setLabel(cc.find("noraml/lblRound",r),e),n._setLabel(cc.find("noraml/lblPickNum",r),t)),a.next=9,n._playActions(r,[cc.scaleTo(.3,1.2),cc.scaleTo(.1,1)]);case 9:return a.next=11,n._awaitTime(1);case 11:return Global.SlotsSoundMgr.playEffect("change"),a.next=14,n._playActions(r,[cc.scaleTo(.1,1.2),cc.scaleTo(.3,0)]);case 14:i.active=!1,o();case 16:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}()));case 1:case"end":return a.stop()}},a)}))()},popUIRoundResultTips:function(){var e=this;return o(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=o(regeneratorRuntime.mark(function t(n){var a,i,r,c,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(a=cc.find("uiRoundResultTips",e.node)).active=!0,(i=a.getChildByName("btnLetter")).zIndex=2,i.getComponent(cc.Button).enabled=!1,(r=a.getChildByName("ui")).zIndex=1,r.active=!1,r.y=-185,e._setLabel(r.getChildByName("lblMult"),e._gainMult+"X"),c=Global.convertNumToShort(e._prize)+" X "+e._gainMult+" = "+Global.convertNumToShort(e._prize*e._gainMult),e._setLabel(r.getChildByName("lblContent"),c),a.getChildByName("spine_btm").active=!1,a.getChildByName("spine").zIndex=2,Global.SlotsSoundMgr.playEffect("envelope"),t.next=17,e._playSpine(a.getChildByName("spine"),"animation1");case 17:Global.SlotsSoundMgr.playEffect("envelope_intro"),e._playSpine(a.getChildByName("spine"),"animation2",!0),i.getComponent(cc.Button).enabled=!0,i.off("click"),s=function(){var t=o(regeneratorRuntime.mark(function t(){var c,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i.getComponent(cc.Button).enabled=!1,Global.SlotsSoundMgr.playEffect("envelope_open"),t.next=4,e._playSpine(a.getChildByName("spine"),"animation3");case 4:return r.active=!0,r.scale=1,r.angle=-18,e._playSpine(a.getChildByName("spine"),"animation4"),e._playSpine(a.getChildByName("spine_btm"),"animation5"),t.next=11,e._awaitTime(1.5);case 11:return t.next=13,e._playActions(r,[cc.moveTo(.3,cc.v2(r.x,200)),cc.callFunc(function(){r.zIndex=3}),cc.spawn(cc.moveTo(.3,cc.v2(r.x,-185)),cc.scaleTo(.3,1.5),cc.rotateTo(.3,0))]);case 13:Global.SlotsSoundMgr.playEffect("envelope_out"),(c=r.getChildByName("btnTakeIt")).off("click"),c.getComponent(cc.Button).enabled=!0,Global.btnClickEvent(c,o(regeneratorRuntime.mark(function t(){var o,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c.getComponent(cc.Button).enabled=!1,t.next=3,cc.vv.gameData.reqSubGame({rtype:3,act:3,takeIt:!0});case 3:200===(o=t.sent).code?((i=o.data).freeBags.winCoin=i.winCoin,i.freeBags.mult=i.mult,i.freeBags.prize=i.prize,e._setSubGameData(i.freeBags),n(!0)):(AppLog.err("\u8fd4\u56de\u62a5\u9519\u4e86"),n()),a.active=!1,n();case 7:case"end":return t.stop()}},t)})),e),(s=r.getChildByName("btnLeaveIt")).off("click"),s.getComponent(cc.Button).enabled=!0,Global.btnClickEvent(s,o(regeneratorRuntime.mark(function t(){var o,i,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s.getComponent(cc.Button).enabled=!1,t.next=3,cc.vv.gameData.reqSubGame({rtype:3,act:3,takeIt:!1});case 3:if(200===(o=t.sent).code){for(r in i=o.data,e._setSubGameData(i.freeBags),e._historyMult)e._setLabel(e._giveMultLblList[r],e._historyMult[r]+"X");n(!1)}else AppLog.err("\u8fd4\u56de\u62a5\u9519\u4e86"),n();a.active=!1,n();case 7:case"end":return t.stop()}},t)})),e);case 22:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),cc.vv.gameData.checkAutoPlay(i,s),Global.btnClickEvent(i,o(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.stopAllActions(),e.next=3,s();case 3:case"end":return e.stop()}},e)})),e);case 24:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},popUILastRoundSelectTip:function(e,t){var n=this;return o(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new Promise(function(){var a=o(regeneratorRuntime.mark(function a(i){var r,c,s,l,u,f;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return(r=cc.find("uiLastRoundSelectTips",n.node)).active=!0,(c=r.getChildByName("ui")).scale=0,cc.find("Item1",c).active=!0,n._setLabel(cc.find("Item1/lblIdxNum",c),e),cc.find("Item2",c).active=!0,n._setLabel(cc.find("Item2/lblIdxNum",c),t),(s=c.getChildByName("btnKeep")).getComponent(cc.Button).enabled=!1,(l=c.getChildByName("btnTrade")).getComponent(cc.Button).enabled=!1,Global.SlotsSoundMgr.playEffect("deal_scene_open"),a.next=15,n._playActions(c,[cc.scaleTo(.3,1.8),cc.scaleTo(.1,1.5)]);case 15:u=function(){s.getComponent(cc.Button).enabled=!1,l.getComponent(cc.Button).enabled=!1},f=function(){var e=o(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._playActions(c,[cc.scaleTo(.1,1.8),cc.scaleTo(.3,0)]);case 2:r.active=!1,i();case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),s.getComponent(cc.Button).enabled=!0,s.off("click"),Global.btnClickEvent(s,o(regeneratorRuntime.mark(function t(){var a,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return u(),t.next=3,cc.vv.gameData.reqSubGame({rtype:3,act:4,keep:!0});case 3:if(200!==(a=t.sent).code){t.next=16;break}return(o=a.data).freeBags.winCoin=o.winCoin,o.freeBags.mult=o.mult,o.freeBags.prize=o.prize,n._setSubGameData(o.freeBags),cc.find("Item1",c).active=!1,t.next=13,n._playOpenRewardEff([e],[[o.mult]]);case 13:i(!1),t.next=18;break;case 16:AppLog.err("\u8fd4\u56de\u62a5\u9519\u4e86"),i();case 18:f();case 19:case"end":return t.stop()}},t)}))),l.getComponent(cc.Button).enabled=!0,l.off("click"),Global.btnClickEvent(l,o(regeneratorRuntime.mark(function e(){var a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u(),e.next=3,cc.vv.gameData.reqSubGame({rtype:3,act:4,keep:!1});case 3:if(200!==(a=e.sent).code){e.next=16;break}return(o=a.data).freeBags.winCoin=o.winCoin,o.freeBags.mult=o.mult,o.freeBags.prize=o.prize,n._setSubGameData(o.freeBags),cc.find("Item2",c).active=!1,e.next=13,n._playOpenRewardEff([t],[[o.mult]]);case 13:i(!1),e.next=18;break;case 16:AppLog.err("\u8fd4\u56de\u62a5\u9519\u4e86"),i();case 18:f();case 19:case"end":return e.stop()}},e)})));case 23:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}()));case 1:case"end":return a.stop()}},a)}))()},popUIEndResultTips:function(){var e=this;return o(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=o(regeneratorRuntime.mark(function t(n){var a,i,r,c,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(a=cc.find("uiResultDialuage",e.node)).active=!0,(i=a.getChildByName("ui")).scale=0,e._setLabel(i.getChildByName("lblCoinNum"),Global.FormatNumToComma(e._freeBags.winCoin)),r=e._gainMult+" X "+Global.convertNumToShort(e._prize)+" = "+Global.convertNumToShort(e._freeBags.winCoin),e._setLabel(i.getChildByName("lblContent"),r),(c=i.getChildByName("btnCollect")).getComponent(cc.Button).enabled=!1,Global.SlotsSoundMgr.playEffect("multipler"),t.next=12,e._playActions(i,[cc.scaleTo(.3,1.2),cc.scaleTo(.1,1)]);case 12:c.getComponent(cc.Button).enabled=!0,c.off("click"),s=function(){var t=o(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c.getComponent(cc.Button).enabled=!1,t.next=3,e._playActions(i,[cc.scaleTo(.1,1.2),cc.scaleTo(.3,0)]);case 3:a.active=!1,n();case 5:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),cc.vv.gameData.checkAutoPlay(c,s),Global.btnClickEvent(c,o(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c.stopAllActions(),e.next=3,s();case 3:case"end":return e.stop()}},e)})));case 17:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}))()},_setSubGameData:function(e){e&&(this._freeBags=e,this._initData())},_appearFadeIn:function(){var e=this;return new Promise(function(t){e.node.active=!0,e.node.opacity=0,cc.tween(e.node).to(.3,{opacity:255}).call(function(){t()}).start()})},_disappearFadeOut:function(){var e=this;return new Promise(function(t){e.node.active=!0,e.node.opacity=255,cc.tween(e.node).to(.3,{opacity:0}).call(function(){e.node.active=!1,t()}).start()})},_playSpine:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"animation",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new Promise(function(o){e?(e.active=!0,AppLog.log("\u64ad\u653e\u8282\u70b9["+e.parent.name+"/"+e.name+"]\u7684spine\u52a8\u4f5c: "+t),e.getComponent(sp.Skeleton).setAnimation(0,t,n),n?o():e.getComponent(sp.Skeleton).setCompleteListener(function(){a&&a(),o()})):(a&&a(),o())})},_playActions:function(e,t){return new Promise(function(n){t.push(cc.callFunc(function(){n()})),e.active=!0,e.runAction(cc.sequence(t))})},_awaitTime:function(e){var t=this;return new Promise(function(n){t.scheduleOnce(function(){n()},e)})},_setLabel:function(e,t){e&&(e.getComponent(cc.Label).string=t)},_cvtToLocalPos:function(e,t){return t.convertToNodeSpaceAR(e.parent.convertToWorldSpaceAR(e.position))}}),cc._RF.pop()},{}],LuckySanta_Pop:[function(e,t,n){"use strict";function a(e,t,n,a,o,i,r){try{var c=e[i](r),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(a,o)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(o,i){var r=e.apply(t,n);function c(e){a(r,o,i,c,s,"next",e)}function s(e){a(r,o,i,c,s,"throw",e)}c(void 0)})}}cc._RF.push(t,"6dd97K6R2NLLpQhCeiGoAko","LuckySanta_Pop"),cc.Class({extends:cc.Component,properties:{_showNode:null},showFreegameResultDialog:function(e,t){var n=this;return o(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new Promise(function(){var a=o(regeneratorRuntime.mark(function a(i){var r,c,s,l;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return(r=e?cc.find("uiWinCoinDialouge_o",n.node):cc.find("uiWinCoinDialouge_h",n.node)).active=!0,(c=r.getChildByName("uiResult")).scale=0,c.getChildByName("lblWinCoin").getComponent(cc.Label).string="",(s=c.getChildByName("btn_collect")).getComponent(cc.Button).enabled=!1,Global.SlotsSoundMgr.playEffect("normal_dialog_show2"),a.next=10,n.playActions(c,[cc.scaleTo(.3,1.2),cc.scaleTo(.1,1)]);case 10:return Global.SlotsSoundMgr.playEffect("rollNum"),Global.doRoallNumEff(c.getChildByName("lblWinCoin"),0,t,3,null,null,0,!0),a.next=14,n.delayTime(2);case 14:s.getComponent(cc.Button).enabled=!0,s.off("click"),l=function(){var e=o(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s.getComponent(cc.Button).enabled=!1,Global.SlotsSoundMgr.playEffect("click"),Global.SlotsSoundMgr.playEffect("normal_dialog_close"),e.next=5,n.playActions(c,[cc.scaleTo(.3,1.8),cc.scaleTo(.1,0)]);case 5:r.active=!1,i();case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),cc.vv.gameData.checkAutoPlay(s,l),Global.btnClickEvent(s,o(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s.stopAllActions(),e.next=3,l();case 3:case"end":return e.stop()}},e)})),n);case 19:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}()));case 1:case"end":return a.stop()}},a)}))()},showStarBonusSelect:function(e){var t=this;return o(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise(function(){var n=o(regeneratorRuntime.mark(function n(a){var i,r,c,s,l,u,f,p;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return(i=cc.find("uiStarBonusSelect",t.node)).active=!0,r=i.getChildByName("ui"),c=cc.find("btm_info",r),cc.find("lblWinCoin",c).getComponent(cc.Label).string=Global.convertNumToShort(e),s=cc.find("item1",r),l=cc.find("item2",r),cc.find("spine",s).active=!1,cc.find("spine",l).active=!1,Global.showSpriteGray(cc.find("Background",s),!1),Global.showSpriteGray(cc.find("text",s),!1),Global.showSpriteGray(cc.find("Background",l),!1),Global.showSpriteGray(cc.find("text",l),!1),Global.SlotsSoundMgr.playEffect("show_dialog"),s.getComponent(cc.Button).enabled=!1,l.getComponent(cc.Button).enabled=!1,cc.tween(s).call(function(){s.scale=2,s.opacity=0}).to(.2,{scale:1,opacity:255}).start(),cc.tween(l).call(function(){l.scale=2,l.opacity=0}).delay(.2).to(.2,{scale:1,opacity:255}).start(),cc.tween(c).call(function(){c.scale=2,c.opacity=0}).delay(.4).to(.2,{scale:1,opacity:255}).start(),(u=cc.find("bg",r)).opacity=0,n.next=23,t.playActions(u,[cc.fadeIn(.5)]);case 23:s.getComponent(cc.Button).enabled=!0,l.getComponent(cc.Button).enabled=!0,t.playSpine(cc.find("spine",s),null,"animation1",!0),t.playSpine(cc.find("spine",l),null,"animation3",!0),(f=cc.find("select_tips",c)).stopAllActions(),f.scale=1,f.runAction(cc.repeatForever(cc.sequence(cc.delayTime(1),cc.scaleTo(.2,1.3),cc.scaleTo(.2,1.1),cc.scaleTo(.2,1.3),cc.scaleTo(.2,1)))),s.off("click"),Global.btnClickEvent(s,o(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.stopAllActions(),Global.SlotsSoundMgr.playEffect("choose"),f.stopAllActions(),s.getComponent(cc.Button).enabled=!1,l.getComponent(cc.Button).enabled=!1,t.playSpine(cc.find("spine",s),null,"animation2",!1),cc.find("spine",l).active=!1,Global.showSpriteGray(cc.find("Background",l),!0),Global.showSpriteGray(cc.find("text",l),!0),e.next=11,t.delayTime(2.3);case 11:if(!Global.StarBonusRespin){e.next=14;break}return e.next=14,Global.StarBonusRespin.onSelected();case 14:i.active=!1,a();case 16:case"end":return e.stop()}},e)})),t),l.off("click"),p=function(){var e=o(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Global.SlotsSoundMgr.playEffect("choose"),f.stopAllActions(),s.getComponent(cc.Button).enabled=!1,l.getComponent(cc.Button).enabled=!1,cc.find("spine",s).active=!1,t.playSpine(cc.find("spine",l),null,"animation4",!0),e.next=8,t.delayTime(2.3);case 8:if(!SlotsFacade.bonusFreeGame){e.next=11;break}return e.next=11,SlotsFacade.bonusFreeGame.onSelected();case 11:i.active=!1,a();case 13:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),cc.vv.gameData.isNeedAutoPlay()&&(l.stopAllActions(),cc.tween(l).delay(cc.vv.gameData.getManualAutoPlayTime()).call(function(){p()}).start()),Global.btnClickEvent(l,o(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.stopAllActions(),e.next=3,p();case 3:case"end":return e.stop()}},e)})),t);case 37:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()));case 1:case"end":return n.stop()}},n)}))()},showTransition:function(){var e=this;return o(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Global.SlotsSoundMgr.playEffect("nudge"),(n=cc.find("spine_transition",e.node).getComponent(sp.Skeleton)).node.active=!0,n.setAnimation(0,"skill",!1),n.setCompleteListener(function(){n.setCompleteListener(null),n.node.active=!1}),t.next=7,SlotsFacade.delayTime(1.2);case 7:case"end":return t.stop()}},t)}))()},showTransition2:function(){var e=this;return o(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Global.SlotsSoundMgr.playEffect("nudge"),(n=cc.find("spine_transition2",e.node).getComponent(sp.Skeleton)).node.active=!0,n.setAnimation(0,"animation",!1),n.setCompleteListener(function(){n.setCompleteListener(null),n.node.active=!1}),t.next=7,SlotsFacade.delayTime(1.8);case 7:case"end":return t.stop()}},t)}))()},delayTime:function(e){var t=this;return new Promise(function(n,a){t.scheduleOnce(function(){n()},e)})},playSpine:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"animation",a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e?(e.active=!0,e.getComponent(sp.Skeleton).setAnimation(0,n,a),a||e.getComponent(sp.Skeleton).setCompleteListener(function(){t&&t()})):t&&t()},stopSpine:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e&&e.getComponent(sp.Skeleton)&&e.getComponent(sp.Skeleton).clearTrack(t)},playActions:function(e,t){return new Promise(function(n){t.push(cc.callFunc(function(){n()})),e.active=!0,e.runAction(cc.sequence(t))})}}),cc._RF.pop()},{}],LuckySanta_Slots:[function(e,t,n){"use strict";function a(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=o(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,r=!0,c=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return r=e.done,e},e:function(e){c=!0,i=e},f:function(){try{r||null==a.return||a.return()}finally{if(c)throw i}}}}function o(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function r(e,t,n,a,o,i,r){try{var c=e[i](r),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(a,o)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(a,o){var i=e.apply(t,n);function c(e){r(i,a,o,c,s,"next",e)}function s(e){r(i,a,o,c,s,"throw",e)}c(void 0)})}}cc._RF.push(t,"0d9b1LMZm1DwK1DXBMDWHjJ","LuckySanta_Slots"),cc.Class({extends:e("LMSlots_Slots_Base"),properties:{_respinSlot:null,_isInitEntry:!0},Init:function(){this._isInitEntry=!0,Global.registerEvent(EventId.END_QUEUE_POP,this.onEventEndQueuePop,this),this._super()},RegisterEvent:function(){},start:function(){this._super(),this._respinSlot=cc.find("slots_respin",this.node.parent).addComponent("LuckySanta_StarBonusRespin"),this._respinSlot.node.active=!0,this._respinSlot.Init()},ReconnectShow:function(){var e=this;return c(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e._bottomScript.ShowBtnsByState("moveing_1"),!cc.vv.gameData.getDeskInfo().select){t.next=12;break}if(2!=cc.vv.gameData.getDeskInfo().select.state){t.next=9;break}return t.next=5,cc.vv.gameData.awaitTime(.5);case 5:return t.next=7,SlotsFacade.popup.showStarBonusSelect(cc.vv.gameData.getDeskInfo().coinBonus.silvery||0);case 7:t.next=12;break;case 9:if(3!=cc.vv.gameData.getDeskInfo().select.state){t.next=12;break}return t.next=12,SlotsFacade.pickGift.enterGame();case 12:if(!(n=cc.vv.gameData.getDeskInfo()).christmas||!n.christmas.state){t.next=16;break}return t.next=16,SlotsFacade.pickBonus.enterGame(n.christmas,!0);case 16:n.coinBonus&&n.coinBonus.state||e._bottomScript.CanDoNextRound();case 17:case"end":return t.stop()}},t)}))()},onEventEndQueuePop:function(){this._isInitEntry&&(this._isInitEntry=!1,cc.vv.gameData.GetTotalFree()>0||this.playEnterGameEff())},playEnterGameEff:function(){Global.SlotsSoundMgr.playEffect("enter")},StartMove:function(){Global.SlotsSoundMgr.playNormalBgm(),this._bStopRightnow=null,this._gameInfo=null,this._topScript.StartMove(),cc.vv.gameData.ClearOneRoundData(),this.MoveReels(this._reels),SlotsFacade.collectProgress&&SlotsFacade.collectProgress.setBtnsClickEnable(!1),this._stopTime=this.GetStopTime(),SlotsFacade.bonusFreeGame.bEnable()&&SlotsFacade.bonusFreeGame.setRestSpinTimes(cc.vv.gameData.GetFreeTime()||0)},SetSlotsResult:function(e){for(var t=e.length/this._col,n=[],a=0;a<e.length;a++){Math.floor(a/t);var o=a%this._col;if(this._cfg.symbol[e[a]]){var i={};i.sid=e[a],i.data=this.getCoinData(a+1),n[o]||(n[o]=[]),n[o].unshift(i)}}for(var r=0;r<this._reels.length;r++){var c=this._reels[r],s=n[r];c.SetResult(s)}},getCoinData:function(e){if(this._gameInfo.coinBonus)for(var t in this._gameInfo.coinBonus.info){if(parseInt(t.split("_")[1])==e){var n=this._gameInfo.coinBonus.info[t];return{t:"coin",type:n.type,num:n.num}}}return null},onMsgSpine:function(e){this._gameInfo=e;var t=e.resultCards;this.SetSlotsResult(t),this.SetReelStateInfo(t)},showCollectEnegy:function(){var e=this;return new Promise(function(){var t=c(regeneratorRuntime.mark(function t(n){var a,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(a=cc.vv.gameData.energyData)){t.next=13;break}if(o=[],e._reels.forEach(function(t){if(t.node.active)for(var n=0;n<e._row;n++){var a=t.GetSymbolByRow(n);a.GetShowId()==cc.vv.gameData.getGameCfg().collectId&&o.push(a.node.parent.convertToWorldSpaceAR(a.node.position))}}),!(o.length>0&&SlotsFacade.collectProgress)){t.next=13;break}if(!(a.totalCoin/a.needCoins>=1)){t.next=12;break}return t.next=8,SlotsFacade.collectProgress.collectEnergy(o,a.totalCoin/a.needCoins);case 8:return t.next=10,SlotsFacade.pickGift.enterGame();case 10:t.next=13;break;case 12:SlotsFacade.collectProgress.collectEnergy(o,a.totalCoin/a.needCoins);case 13:n();case 14:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())},showCollectWild:function(){var e=this;return new Promise(function(){var t=c(regeneratorRuntime.mark(function t(n){var a,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=[],e._reels.forEach(function(t){if(t.node.active)for(var n=0;n<e._row;n++){var o=t.GetSymbolByRow(n);o.GetShowId()==cc.vv.gameData.getGameCfg().wildId&&a.push(o.node.parent.convertToWorldSpaceAR(cc.v2(o.node.position.x+40,o.node.position.y-40)))}}),!(a.length>0&&SlotsFacade.wildCollect)){t.next=10;break}if(!(o=cc.vv.gameData.getGameInfo().select&&1==cc.vv.gameData.getGameInfo().select.state)){t.next=9;break}return t.next=7,SlotsFacade.wildCollect.collectWild(a,o);case 7:t.next=10;break;case 9:SlotsFacade.wildCollect.collectWild(a,o);case 10:n();case 11:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())},triggerStarBonus:function(){var e=this;return new Promise(function(){var t=c(regeneratorRuntime.mark(function t(n){var a,o,i,r,c,s,l,u,f,p;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=[],e._reels.forEach(function(e){if(e.node.active)for(var t=2;t>=0;t--){var n=e.GetSymbolByRow(t);n.GetShowId()==cc.vv.gameData.getGameCfg().collectId&&(n.playStarAnimation(),a.push(n))}}),t.next=4,e.awaitTime(2);case 4:return o=cc.find("btm_bonus_remaining",e.node),(i=cc.find("btm_win_tips/tips_bg",o)).active=!0,i.y=-i.height,(r=cc.find("lblWinCoin",i)).getComponent(cc.Label).string="",cc.tween(i).to(.3,{y:0}).start(),t.next=13,e.awaitTime(.5);case 13:c=0,s=cc.find("pl_collect_fly",o),l=o.convertToNodeSpaceAR(r.parent.convertToWorldSpaceAR(r.position)),u=regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=p[f],s.active=!0,s.position=o.convertToNodeSpaceAR(n.node.convertToWorldSpaceAR(cc.v2(0,0))),s.getComponent(cc.ParticleSystem).resetSystem(),Global.SlotsSoundMgr.playEffect("add"),cc.tween(s).to(.8,{position:l}).call(function(){s.active=!1,c+=n.GetCoinNum(),r.getComponent(cc.Label).string=Global.convertNumToShort(c)}).start(),t.next=8,e.awaitTime(.8);case 8:case"end":return t.stop()}},t)}),f=0,p=a;case 18:if(!(f<p.length)){t.next=23;break}return t.delegateYield(u(),"t0",20);case 20:f++,t.next=18;break;case 23:return t.next=25,e.awaitTime(.3);case 25:return cc.tween(i).to(.3,{y:-i.height}).start(),t.next=28,e.awaitTime(.5);case 28:n();case 29:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())},OnSpinEnd:function(){var e=this;return c(regeneratorRuntime.mark(function t(){var n,o,i,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=a(e._reels);try{for(n.s();!(o=n.n()).done;)o.value.ShowAntiEffect(!1)}catch(e){n.e(e)}finally{n.f()}if(e.ShowWinTrace(),i=cc.vv.gameData.getGameInfo().select.state,!cc.vv.gameData.isOpenCollectProgress()||2==i||SlotsFacade.bonusFreeGame.bEnable()){t.next=7;break}return t.next=7,e.showCollectEnegy();case 7:if(2==i||SlotsFacade.bonusFreeGame.bEnable()){t.next=10;break}return t.next=10,e.showCollectWild();case 10:if(!SlotsFacade.bonusFreeGame.bEnable()){t.next=14;break}return e._bottomScript.ShowBtnsByState("moveing_1"),t.next=14,SlotsFacade.bonusFreeGame.playCollectSilverStar(e._reels);case 14:return t.next=16,e.playBottomWin();case 16:if(r=!0,2!=cc.vv.gameData.getGameInfo().select.state){t.next=23;break}return e._bottomScript.ShowBtnsByState("moveing_1"),Global.SlotsSoundMgr.playEffect("bell"),Global.SlotsSoundMgr.playEffect("trigger_star_bonus"),t.next=23,e.triggerStarBonus();case 23:if(1!=cc.vv.gameData.getGameInfo().select.state){t.next=32;break}return e._bottomScript.ShowBtnsByState("moveing_1"),SlotsFacade.character.triBonusAnim(),t.next=28,cc.vv.gameData.awaitTime(.5);case 28:return t.next=30,SlotsFacade.pickBonus.enterGame(cc.vv.gameData.getGameInfo().christmas);case 30:t.next=38;break;case 32:if(2!=cc.vv.gameData.getGameInfo().select.state){t.next=38;break}return e._bottomScript.ShowBtnsByState("moveing_1"),Global.SlotsSoundMgr.stopBgm(),t.next=37,SlotsFacade.popup.showStarBonusSelect(cc.vv.gameData.getGameInfo().coinBonus.silvery);case 37:r=!1;case 38:if(!e.CheckFreeGameFinish()){t.next=54;break}return e._bottomScript.ShowBtnsByState("moveing_1"),SlotsFacade.bonusFreeGame.setRestSpinTimes(-1),t.next=43,e.awaitTime(.2);case 43:return Global.SlotsSoundMgr.stopBgm(),t.next=46,SlotsFacade.popup.showFreegameResultDialog(!0,cc.vv.gameData._gameInfo.freeWinCoin);case 46:return t.next=48,SlotsFacade.popup.showTransition();case 48:return SlotsFacade.bonusFreeGame.ShowFreeGame(!1),SlotsFacade.character.show(),t.next=52,cc.vv.gameData.awaitTime(.4);case 52:return t.next=54,e.playBottomWin(!0);case 54:return t.next=56,e.awaitTime(.2);case 56:SlotsFacade.collectProgress&&SlotsFacade.collectProgress.setBtnsClickEnable(!0),r&&e.CanDoNextRound();case 58:case"end":return t.stop()}},t)}))()},playBottomWin:function(e){var t=this;return c(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise(function(){var n=c(regeneratorRuntime.mark(function n(a){var o,i,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(o=cc.vv.gameData.GetGameWin(),i=o,r=!0,cc.vv.gameData.GetTotalFree()>0&&cc.vv.gameData.GetTotalFree()!=cc.vv.gameData.GetFreeTime()&&(i=cc.vv.gameData.GetGameTotalFreeWin(),r=0==cc.vv.gameData.GetFreeTime()),e&&(o=cc.vv.gameData.GetGameTotalFreeWin(),i=o,r=!0),!(o>0)){n.next=10;break}return n.next=8,t.ShowBottomWin(o,i,r,function(){a()});case 8:n.next=11;break;case 10:a();case 11:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()));case 1:case"end":return n.stop()}},n)}))()},awaitTime:function(e){var t=this;return new Promise(function(n){t.scheduleOnce(function(){n()},e)})},CheckSpecialReward:function(){return this.CheckEnterFreeGame()||this.CheckFreeGameFinish()},CheckEnterFreeGame:function(){return cc.vv.gameData.isTriggerFreeGames()},CheckFreeGameFinish:function(){return cc.vv.gameData.isFinishFreeGames()},ShowTranstion:function(e){var t=cc.find("Canvas/safe_node/translate_node");t.active=!0,t.getComponent(sp.Skeleton).setAnimation(0,"animation",!1);this.scheduleOnce(function(){e&&e()},.5)},ShowGameview:function(e){this._super(e),cc.find("reels_bg_base",this.node).active=!e,cc.find("reels_bg_free",this.node).active=e,e?(Global.SlotsSoundMgr.stopBgm(),Global.SlotsSoundMgr.playBgm("free_bgm")):Global.SlotsSoundMgr.stopBgm()}}),cc._RF.pop()},{LMSlots_Slots_Base:void 0}],LuckySanta_StarBonusFreegame:[function(e,t,n){"use strict";function a(e,t,n,a,o,i,r){try{var c=e[i](r),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(a,o)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(o,i){var r=e.apply(t,n);function c(e){a(r,o,i,c,s,"next",e)}function s(e){a(r,o,i,c,s,"throw",e)}c(void 0)})}}function i(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=r(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o,i=!0,c=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==a.return||a.return()}finally{if(c)throw o}}}}function r(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}cc._RF.push(t,"505b2qcwyJM+4hGHr6SxOme","LuckySanta_StarBonusFreegame"),cc.Class({extends:cc.Component,properties:{_enable:!1},onLoad:function(){var e,t=i(this.node.children);try{for(t.s();!(e=t.n()).done;){e.value.active=!1}}catch(e){t.e(e)}finally{t.f()}},start:function(){(cc.vv.gameData.isFreeGamesTime()||cc.vv.gameData.isTriggerFreeGames())&&(cc.vv.gameData.getDeskInfo().select&&2==cc.vv.gameData.getDeskInfo().select.state||this.ShowFreeGame(!0,!0))},onSelected:function(){var e=this;return o(regeneratorRuntime.mark(function t(){var n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,cc.vv.gameData.reqSubGame({rtype:2,idx:2});case 2:if(200!==(n=t.sent).code){t.next=13;break}return a=n.data,cc.vv.gameData.SetFreeTime(a.freeCnt),cc.vv.gameData.SetTotalFree(a.allFreeCnt),t.next=9,SlotsFacade.popup.showTransition();case 9:e.ShowFreeGame(!0,!1),SlotsFacade.character.hide(),t.next=14;break;case 13:AppLog.err("\u8fd4\u56de\u62a5\u9519\u4e86");case 14:case"end":return t.stop()}},t)}))()},playCollectSilverStar:function(e){var t=this;return new Promise(function(){var n=o(regeneratorRuntime.mark(function n(a){var o,r,c,s,l;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=33;break}o=i(e),n.prev=2,o.s();case 4:if((r=o.n()).done){n.next=22;break}c=r.value,s=0;case 7:if(!(s<3)){n.next=20;break}if(14!=(l=c.GetSymbolByRow(s)).GetShowId()&&15!=l.GetShowId()){n.next=17;break}return l.playCoinAppear(),n.next=13,t._awaitTime(1.5);case 13:return t._starBonus+=l.GetCoinNum(),t.setStarBonus(t._starBonus),n.next=17,t._awaitTime(.5);case 17:s++,n.next=7;break;case 20:n.next=4;break;case 22:n.next=27;break;case 24:n.prev=24,n.t0=n.catch(2),o.e(n.t0);case 27:return n.prev=27,o.f(),n.finish(27);case 30:a(),n.next=34;break;case 33:a();case 34:case"end":return n.stop()}},n,null,[[2,24,27,30]])}));return function(e){return n.apply(this,arguments)}}())},bEnable:function(){return this._enable},ShowFreeGame:function(e,t){var n=this;this._enable=e;var a,o=i(this.node.children);try{for(o.s();!(a=o.n()).done;){a.value.active=e}}catch(e){o.e(e)}finally{o.f()}if(cc.find("Canvas/safe_node/slots/node_energyCollect").active=!e,this.ShowGameview(e),cc.vv.gameData.GetSlotsScript()._bottomScript.ShowFreeModel(e,cc.vv.gameData.GetTotalFree()-cc.vv.gameData.GetFreeTime(),cc.vv.gameData.GetTotalFree()),e){Global.SlotsSoundMgr.stopBgm(),Global.SlotsSoundMgr.playBgm("free_bgm"),SlotsFacade.character.hide(),this.refreshSpinTimes();var r=cc.vv.gameData,c=r.getGameInfo()?r.getGameInfo().coinBonus.silvery:r.getDeskInfo().coinBonus.silvery;this.setEachSilveryStarWinsCoin(c||0),this.setEachGoldStarWinsCoin(),this._starBonus=t?cc.vv.gameData.getDeskInfo().starBonus:0,this.setStarBonus(this._starBonus,!1),this.scheduleOnce(function(){Global.SlotsSoundMgr.playEffect("star_added"),n.ShowGameBottom(e)},1),this.scheduleOnce(function(){cc.vv.gameData.GetSlotsScript().CanDoNextRound()},2)}},ShowGameview:function(e){var t=cc.find("Canvas/safe_node/spr_bg_normal"),n=cc.find("Canvas/safe_node/spr_bg_free");n&&(t&&(t.active=!e),n.active=e)},ShowGameBottom:function(e){if(e){var t=cc.vv.gameData.GetTotalFree(),n=cc.vv.gameData.GetFreeTime();cc.vv.gameData.GetSlotsScript()._bottomScript.ShowFreeModel(!0,t-n,t);var a=cc.vv.gameData.GetTotalFreeWin();cc.vv.gameData.GetSlotsScript()._bottomScript.SetWin(a)}else cc.vv.gameData.GetSlotsScript()._bottomScript.ShowFreeModel(!1)},refreshSpinTimes:function(){this.setRestSpinTimes(cc.vv.gameData.GetFreeTime()||0)},setRestSpinTimes:function(e){var t=cc.find("bg/freeTipsBg/tips",this.node),n=cc.vv.gameData.GetAtlasByName("bonus");e>0?t.getComponent(cc.Sprite).spriteFrame=n.getSpriteFrame("theme129_remaining_text4"):0==e?t.getComponent(cc.Sprite).spriteFrame=n.getSpriteFrame("theme129_remaining_text1"):e<0&&(t.getComponent(cc.Sprite).spriteFrame=n.getSpriteFrame("theme129_remaining_text2"));var a=cc.find("bg/freeTipsBg/lbTimes",this.node);this._setLabel(a,e>0?e:"")},setStarBonus:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=cc.find("starBonus/lblWinCoin",this.node);this._setLabel(n,e>0?Global.convertNumToShort(e):""),e>0&&t&&(Global.SlotsSoundMgr.playEffect("star_value"),n.scale=1,cc.tween(n).to(.3,{scale:1.3}).to(.2,{scale:1}).start())},setEachSilveryStarWinsCoin:function(e){var t=cc.find("bg/item1/lblWinCoin",this.node);this._setLabel(t,Global.convertNumToShort(e,null,2))},setEachGoldStarWinsCoin:function(e){var t=cc.find("bg/item2/lblWinCoin",this.node),n=cc.find("bg/item2/grand",this.node);e?(t.active=!0,this._setLabel(t,Global.convertNumToShort(e,null,2)),n.active=!1):(t.active=!1,n.active=!0)},_playSpine:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"animation",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new Promise(function(o){e?(e.active=!0,AppLog.log("\u64ad\u653e\u8282\u70b9["+e.parent.name+"/"+e.name+"]\u7684spine\u52a8\u4f5c: "+t),e.getComponent(sp.Skeleton).setAnimation(0,t,n),n?o():e.getComponent(sp.Skeleton).setCompleteListener(function(){a&&a(),o()})):(a&&a(),o())})},_playActions:function(e,t){return new Promise(function(n){t.push(cc.callFunc(function(){n()})),e.active=!0,e.runAction(cc.sequence(t))})},_awaitTime:function(e){var t=this;return new Promise(function(n){t.scheduleOnce(function(){n()},e)})},_setLabel:function(e,t){e&&(e.getComponent(cc.Label).string=t)},_cvtToLocalPos:function(e,t){return t.convertToNodeSpaceAR(e.parent.convertToWorldSpaceAR(e.position))}}),cc._RF.pop()},{}],LuckySanta_StarBonusRespin:[function(e,t,n){"use strict";function a(e,t,n,a,o,i,r){try{var c=e[i](r),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(a,o)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(o,i){var r=e.apply(t,n);function c(e){a(r,o,i,c,s,"next",e)}function s(e){a(r,o,i,c,s,"throw",e)}c(void 0)})}}function i(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=r(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o,i=!0,c=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==a.return||a.return()}finally{if(c)throw o}}}}function r(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}cc._RF.push(t,"25410z+l9VGj6xG2JQ2VWyt","LuckySanta_StarBonusRespin"),cc.Class({extends:e("LMSlots_Slots_Base"),properties:{_enable:!1,_restSpinTimes:0,_goldenNum:0,_top_star_symbols:null,_star_top_anim:null},onLoad:function(){this._super(),this._top_star_symbols=[],this._star_top_anim=cc.find("star_top_ani",this.node),this._spine_addCoin=cc.find("spine_addCoin",this._star_top_anim),this._spine_addCoin.active=!1,this._spine_addCoin.zIndex=800,Global.StarBonusRespin=this},onDestroy:function(){Global.StarBonusRespin=null},ReconnectShow:function(){cc.vv.gameData.getDeskInfo().coinBonus&&cc.vv.gameData.getDeskInfo().coinBonus.state?(this._bottomScript.ShowBtnsByState("moveing_1"),this.showRespin(!0,!0),this._restSpinTimes=cc.vv.gameData.getDeskInfo().coinBonus.num||5,this.setRestSpinTimes(this._restSpinTimes)):this.showRespin(!1,!0)},StartMove:function(){Global.SlotsSoundMgr.playEffect("remaining"),this.setRestSpinTimes(this._restSpinTimes-1),this._super();var e,t=i(this._reels);try{for(t.s();!(e=t.n()).done;){e.value.SetSpeed(2500)}}catch(e){t.e(e)}finally{t.f()}},Init:function(){this._topScript=cc.vv.gameData.GetTopScript(),this._bottomScript=cc.vv.gameData.GetBottomScript(),this._cfg=cc.vv.gameData.getGameCfg(),this._col=15,this._row=1,this.createReels(this._col,this._row),this.RegisterEvent(),this.ReconnectShow()},bEnable:function(){return this._enable},onSelected:function(){var e=this;return o(regeneratorRuntime.mark(function t(){var n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,cc.vv.gameData.reqSubGame({rtype:2,idx:1});case 2:if(200!==(n=t.sent).code){t.next=16;break}return a=n.data,(cc.vv.gameData.getGameInfo()||cc.vv.gameData.getDeskInfo()).coinBonus=a,cc.vv.gameData.SetFreeTime(0),cc.vv.gameData.SetTotalFree(0),e._bottomScript.ShowBtnsByState("moveing_1"),t.next=12,SlotsFacade.popup.showTransition2();case 12:e.showRespin(!0),SlotsFacade.character.hide(),t.next=17;break;case 16:AppLog.err("\u8fd4\u56de\u62a5\u9519\u4e86");case 17:case"end":return t.stop()}},t)}))()},setRestSpinTimes:function(e){cc.vv.gameData.SetRespinTime(e);var t=cc.find("respin_bg/respinTipsBg/tips",this.node),n=cc.vv.gameData.GetAtlasByName("bonus");t.getComponent(cc.Sprite).spriteFrame=e>1?n.getSpriteFrame("theme129_remaining_text6"):1==e?n.getSpriteFrame("theme129_remaining_text5"):0==e?n.getSpriteFrame("theme129_remaining_text1"):n.getSpriteFrame("theme129_remaining_text2");var a=cc.find("respin_bg/respinTipsBg/lbTimes",this.node);this._setLabel(a,e>0?e:"")},setStarsNum:function(e){var t=cc.find("respin_bg/nodeCenter/lblRespinTimes",this.node);this._setLabel(t,e>0?e:"")},setEachSilveryStarWinsCoin:function(e){var t=cc.find("respin_bg/item1/lblWinCoin",this.node);this._setLabel(t,Global.convertNumToShort(e,null,2))},setEachGoldStarWinsCoin:function(e){var t=cc.find("respin_bg/item2/lblWinCoin",this.node),n=cc.find("respin_bg/item2/grand",this.node);e?(this._goldenNum=e,t.active=!0,this._setLabel(t,Global.convertNumToShort(e,null,2)),n.active=!1):(t.active=!1,n.active=!0)},getIdByType:function(e){switch(e){case 1:return 2;case 2:return 14;case 3:return 15;case 4:return 16}},showRespin:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._enable=e;var a=function(){t.node.active=e;var n,a=i(t.node.children);try{for(a.s();!(n=a.n()).done;){n.value.active=e}}catch(e){a.e(e)}finally{a.f()}};if(e){Global.SlotsSoundMgr.playBgm("respin_bgm"),a(),cc.find("respin_bg/nodeCenter",this.node).active=!0,cc.find("respin_bg/winnerBg",this.node).active=!1,this._setLabel(cc.find("respin_bg/winnerBg/lblWinCoin",this.node),""),cc.find("uiPopGrand",this.node).active=!1;for(var o=cc.vv.gameData.getGameInfo()?cc.vv.gameData.getGameInfo().coinBonus:cc.vv.gameData.getDeskInfo().coinBonus,r=cc.vv.gameData.GetSlotsScript(),c=1;c<=15;c++)if(o){var s=this.GetSymbolByIdx(c);if(o.info&&o.info["idx_"+c]){var l=this.getIdByType(o.info["idx_"+c].type),u={t:"coin",type:o.info["idx_"+c].type,num:o.info["idx_"+c].num};s.ShowById(l,u,!1),s.SetCoinNum(Global.convertNumToShort(u.num)),this.setSymbolToTop(s,c-1,!1,u)}else{var f=r.GetSymbolByIdx(c).GetShowId(),p=Global.copy(r.GetSymbolByIdx(c).GetData());s.ShowById(f,p)}}var m=0;for(var d in o.info)m++;this.setStarsNum(m),cc.vv.gameData.SetSlotsScript(this),this._restSpinTimes=o.num||5,this.setRestSpinTimes(this._restSpinTimes),this.setEachSilveryStarWinsCoin(o.silvery),this.setEachGoldStarWinsCoin(o.golden),this.scheduleOnce(function(){t.CanDoNextRound()},1)}else{this.removeAllSymbolOfTop();var h=cc.vv.gameData.getGameCfg(),v=cc.find("slots",this.node.parent).getComponent(h.scripts.Slots);cc.vv.gameData.SetSlotsScript(v),a(),n||this._bottomScript.ShowBtnsByState("idle")}},showGrand:function(e){var t=this;return o(regeneratorRuntime.mark(function n(){var a,o,i,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:for(a=cc.find("uiPopGrand",t.node),o=e,i=Global.formatMoney(o),r=0;i.length>10;)o=Math.floor(o/1e3),i=Global.formatMoney(o),r++;return i+=["","K","M","B","T","Q"][r],cc.find("lblWinCoin",a).getComponent(cc.Label).string=i,Global.SlotsSoundMgr.playEffect("grand"),a.active=!0,a.opacity=0,n.next=14,t._playActions(a,[cc.fadeIn(.5)]);case 14:return n.next=16,t._awaitTime(2);case 16:return n.next=18,t._playActions(a,[cc.fadeOut(.2)]);case 18:a.active=!1;case 19:case"end":return n.stop()}},n)}))()},GetReelStopInter:function(e){return e%5*.2},OnReelSpinEnd:function(e){this._super();var t=this._reels[e].GetSymbolByRow(0);14!=t.GetShowId()&&15!=t.GetShowId()||this.setSymbolToTop(t,e,!0)},MoveReels:function(e){this.moveReelLastIdx=-1;for(var t=-1,n=0;n<e.length;n++){var a=e[n];if(a.node.active){a.StartMove();var o=a.GetReelIdx(),i=o%5;o>this.moveReelLastIdx&&i>t&&(this.moveReelLastIdx=o,t=i)}}},setSymbolToTop:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3?arguments[3]:void 0;if(!this._top_star_symbols[t]){var o=cc.instantiate(e.node),i=e.node.convertToWorldSpaceAR(cc.v2(0));o.parent=this._star_top_anim,o.position=this._star_top_anim.convertToNodeSpaceAR(i),o.zIndex=100+t,this._top_star_symbols[t]=o;var r=cc.vv.gameData.getGameCfg(),c=o.getComponent(r.scripts.Symbols);c.ShowById(e.GetShowId(),e.GetData(),!1),a&&c.SetCoinNum(Global.convertNumToShort(a.num)),c._isNew=n,this._reels[t].node.active=!1}},removeAllSymbolOfTop:function(){for(var e in this._top_star_symbols)this._top_star_symbols[e]&&(this._top_star_symbols[e].removeFromParent(),this._top_star_symbols[e]=null);this._top_star_symbols=[];var t,n=i(this._reels);try{for(n.s();!(t=n.n()).done;){t.value.node.active=!0}}catch(e){n.e(e)}finally{n.f()}},playStarAddCoin:function(e){var t=this;return new Promise(function(){var n=o(regeneratorRuntime.mark(function n(a){var o,i,r,c,s,l;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:o=cc.vv.gameData.getGameCfg(),i=0,r=0;case 3:if(!(r<5)){n.next=30;break}n.t0=regeneratorRuntime.keys(t._top_star_symbols);case 5:if((n.t1=n.t0()).done){n.next=27;break}if(c=n.t1.value,parseInt(c)%5==r){n.next=9;break}return n.abrupt("continue",5);case 9:if(!(s=t._top_star_symbols[c].getComponent(o.scripts.Symbols))._isNew){n.next=12;break}return n.abrupt("continue",5);case 12:if(!(s.GetShowId()>e.GetShowId())){n.next=14;break}return n.abrupt("continue",5);case 14:if(s.GetShowId()!=e.GetShowId()||14!=s.GetShowId()){n.next=16;break}return n.abrupt("continue",5);case 16:return i+=s.GetCoinNum()||0,t._spine_addCoin.position=s.node.position,t._spine_addCoin.active=!0,l=e.node.position,t._playSpine(t._spine_addCoin,"animation1"),Global.SlotsSoundMgr.playEffect("light_circle1"),t._spine_addCoin.stopAllActions(),n.next=25,t._playActions(t._spine_addCoin,[cc.delayTime(.1),cc.moveTo(.5,l),cc.callFunc(function(){e.playAppearAnimation(!1),e.SetCoinNum(Global.convertNumToShort(i)),Global.SlotsSoundMgr.playEffect("add")})]);case 25:n.next=5;break;case 27:r++,n.next=3;break;case 30:Global.SlotsSoundMgr.playEffect("light_circle2"),t.setEachGoldStarWinsCoin(t._goldenNum+i),e._data={t:"coin",num:i},e._isNew=!1,a();case 35:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}())},showResult:function(){var e=this;return new Promise(function(){var t=o(regeneratorRuntime.mark(function t(n){var a,o,i,r,c,s,l,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(o in cc.find("respin_bg/nodeCenter",e.node).active=!1,(a=cc.find("respin_bg/winnerBg",e.node)).active=!0,e._top_star_symbols)i=e._top_star_symbols[o],e._playSpine(cc.find("w_guang",i),"animation2",!0);return t.next=6,e._awaitTime(1);case 6:r=15==e._top_star_symbols.length?cc.vv.gameData.getGameInfo().jackpot:0,c=cc.vv.gameData.getGameCfg(),s=0;case 9:if(!(s<5)){t.next=23;break}l=regeneratorRuntime.mark(function t(n){var o,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(parseInt(n)%5==s){t.next=2;break}return t.abrupt("return","continue");case 2:return o=e._top_star_symbols[n],i=cc.find("w_guang",o),e._playSpine(i,"animation3"),i.stopAllActions(),t.next=8,e._playActions(i,[cc.delayTime(.1),cc.moveTo(.6,i.convertToNodeSpaceAR(a.convertToWorldSpaceAR(cc.v2(0,0)))),cc.callFunc(function(){r+=o.getComponent(c.scripts.Symbols).GetCoinNum(),e._setLabel(cc.find("lblWinCoin",a),Global.formatMoney(r)),e._playSpine(cc.find("spine_frame",a)),e._bottomScript.SetWin(r),Global.SlotsSoundMgr.playEffect("collect")}),cc.delayTime(.1)]);case 8:case"end":return t.stop()}},t)}),t.t0=regeneratorRuntime.keys(e._top_star_symbols);case 12:if((t.t1=t.t0()).done){t.next=20;break}return u=t.t1.value,t.delegateYield(l(u),"t2",15);case 15:if("continue"!==t.t2){t.next=18;break}return t.abrupt("continue",12);case 18:t.next=12;break;case 20:s++,t.next=9;break;case 23:n();case 24:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())},update:function(e){this._super(e),this.CanStopSlot()&&this._bottomScript.ShowBtnsByState("moveing_1")},onMsgSpine:function(e){this._super(e);var t,n=i(this._reels);try{for(n.s();!(t=n.n()).done;){var a,o=i(t.value._reelState);try{for(o.s();!(a=o.n()).done;){a.value.reelStopSound=""}}catch(e){o.e(e)}finally{o.f()}}}catch(e){n.e(e)}finally{n.f()}},OnSpinEnd:function(){var e=this;return o(regeneratorRuntime.mark(function t(){var n,a,o,r,c,s,l,u,f;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(r in n=cc.vv.gameData.getGameCfg(),a=cc.vv.gameData.getGameInfo().coinBonus,e._restSpinTimes=a.num,o=0,a.info)a.info[r]&&a.info[r].type&&o++;if(e.setStarsNum(o),!(a.addItems&&a.addItems.length>0)){t.next=32;break}c=i(a.addItems),t.prev=8,c.s();case 10:if((s=c.n()).done){t.next=23;break}if(l=s.value,!(u=a.info["idx_"+l])){t.next=21;break}if(4!=u.type){t.next=18;break}e.setRestSpinTimes(e._restSpinTimes),t.next=21;break;case 18:if(!e._top_star_symbols[l-1]){t.next=21;break}return t.next=21,e.playStarAddCoin(e._top_star_symbols[l-1].getComponent(n.scripts.Symbols));case 21:t.next=10;break;case 23:t.next=28;break;case 25:t.prev=25,t.t0=t.catch(8),c.e(t.t0);case 28:return t.prev=28,c.f(),t.finish(28);case 31:e.setEachGoldStarWinsCoin(a.golden);case 32:return t.next=34,e._awaitTime(1);case 34:if(!(e._restSpinTimes<=0||cc.vv.gameData.getGameInfo().jackpot&&cc.vv.gameData.getGameInfo().jackpot>0)){t.next=54;break}if(e.setRestSpinTimes(-1),Global.SlotsSoundMgr.playEffect("spin_end"),!(cc.vv.gameData.getGameInfo().jackpot&&cc.vv.gameData.getGameInfo().jackpot>0)){t.next=40;break}return t.next=40,e.showGrand(cc.vv.gameData.getGameInfo().jackpot);case 40:return t.next=42,e.showResult();case 42:return f=Global.FormatCommaNumToNum(cc.find("respin_bg/winnerBg/lblWinCoin",e.node).getComponent(cc.Label).string),t.next=45,SlotsFacade.popup.showFreegameResultDialog(!1,f);case 45:return t.next=47,e.playBottomWin(f);case 47:return t.next=49,SlotsFacade.popup.showTransition2();case 49:return e.showRespin(!1),Global.SlotsSoundMgr.stopBgm(),SlotsFacade.character.show(),t.next=54,cc.vv.gameData.awaitTime(.3);case 54:e.CanDoNextRound();case 55:case"end":return t.stop()}},t,null,[[8,25,28,31]])}))()},playBottomWin:function(e){var t=this;return o(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise(function(){var n=o(regeneratorRuntime.mark(function n(a){var o,i,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e,r=!0,!((o=e)>0)){n.next=8;break}return n.next=6,t.ShowBottomWin(o,i,r,function(){a()});case 6:n.next=9;break;case 8:a();case 9:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()));case 1:case"end":return n.stop()}},n)}))()},_playSpine:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"animation",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new Promise(function(o){e?(e.active=!0,AppLog.log("\u64ad\u653e\u8282\u70b9["+e.parent.name+"/"+e.name+"]\u7684spine\u52a8\u4f5c: "+t),e.getComponent(sp.Skeleton).setAnimation(0,t,n),n?o():e.getComponent(sp.Skeleton).setCompleteListener(function(){a&&a(),o()})):(a&&a(),o())})},_playActions:function(e,t){return new Promise(function(n){t.push(cc.callFunc(function(){n()})),e.active=!0,e.runAction(cc.sequence(t))})},_awaitTime:function(e){var t=this;return new Promise(function(n){t.scheduleOnce(function(){n()},e)})},_setLabel:function(e,t){e&&(e.getComponent(cc.Label).string=t)},_cvtToLocalPos:function(e,t){return t.convertToNodeSpaceAR(e.parent.convertToWorldSpaceAR(e.position))}}),cc._RF.pop()},{LMSlots_Slots_Base:void 0}],LuckySanta_Symbol:[function(e,t,n){"use strict";cc._RF.push(t,"90066kM25RA3bHkgaHftYsa","LuckySanta_Symbol"),cc.Class({extends:e("LMSlots_Symbol_Base"),properties:{},ShowById:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this._super(e,t);var a=cc.vv.gameData.getGameCfg();if(cc.find("mask",this.node).active=!1,Global.StarBonusRespin&&Global.StarBonusRespin.bEnable()&&n&&a.symbol[e]&&a.symbol[e].dark&&(cc.find("mask",this.node).active=!0),2==this._id){var o=0;o=this._data&&"coin"==this._data.t?this._data.num:Math.floor(cc.vv.gameData.GetTotalBet()*(Global.random(1,10)/2)),this.SetCoinNum(Global.convertNumToShort(o,null,2))}else this.SetCoinNum(null)},ShowNormal:function(){this.ShowById(this._id,this._data),this.setAnimationToTop(!1)},StartMove:function(){this.setAnimationToTop(!1),this.ShowKuang(!1),this.stopWinTweenAction(),this.node.zIndex=50-this._symbolIdx+10*this._reelIdx},ShowRandomSymbol:function(){var e=cc.vv.gameData.getGameCfg(),t=Global.random(1,e.randomSymbols.length),n=e.randomSymbols[t-1];Global.StarBonusRespin&&Global.StarBonusRespin.bEnable()&&(t=Global.random(1,e.respinRandomSymbols.length),n=e.respinRandomSymbols[t-1]),this.ShowById(n)},GetCoinNum:function(){return this._data?this._data.num:0},SetCoinNum:function(e){var t=cc.find("coin_num",this.node);e?(t.scale=1,t.active=!0,t.getComponent(cc.Label).string=Global.formatMoney(e)):t.active=!1},playCoinAppear:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.SetCoinNum(Global.convertNumToShort(this._data?this._data.num:0,null,2));var n=cc.find("coin_num",this.node);t?(n.scale=0,cc.tween(n).call(function(){e.playAppearAnimation()}).delay(.8).to(.3,{scale:1.2}).to(.3,{scale:1}).start()):(n.scale=1,this.playAppearAnimation())},playAppearAnimation:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this._id;if(14==t||15==t){var n=cc.vv.gameData.getGameCfg();if(n.symbol[t]&&n.symbol[t].appear_ani){var a=cc.find(n.symbol[t].appear_ani.node,this.node);if(a.active=!0,""!=n.symbol[t].appear_ani.name){e&&(this.node.zIndex=n.symbol[t].appear_ani.zIndex-this._symbolIdx+10*this._reelIdx);var o=a.getComponent(sp.Skeleton);o&&(o.setAnimation(0,n.symbol[t].appear_ani.name,!1),o.setCompleteListener(function(){a.active=!1,o.setCompleteListener(null)}))}}}},playStopAnimation:function(){var e=this._id;if(14==e||15==e){var t=cc.vv.gameData.getGameCfg();if(t.symbol[e]&&t.symbol[e].stop_ext_ani){this._state="stop";var n=cc.find(t.symbol[e].stop_ext_ani.node,this.node);if(n.active=!0,""!=t.symbol[e].stop_ext_ani.name){this.node.zIndex=t.symbol[e].stop_ext_ani.zIndex-this._symbolIdx+10*this._reelIdx;var a=n.getComponent(sp.Skeleton);a&&(a.setAnimation(0,t.symbol[e].stop_ext_ani.name,!1),a.setCompleteListener(function(){n.active=!1,a.setCompleteListener(null)}))}}}else Global.StarBonusRespin&&Global.StarBonusRespin.bEnable()||this._super()},playStarAnimation:function(){this._showNode&&(this._showNode.active=!1);var e=this._id,t=cc.vv.gameData.getGameCfg();if(e==t.collectId&&t.symbol[e]&&t.symbol[e].win_node){this._state="win",this._showNode&&(this._showNode.active=!1);var n=this.setAnimationToTop(!0);n.active=!0;var a=cc.find(t.symbol[e].win_node,n);if(a.active=!0,t.symbol[e].win_ani&&""!=t.symbol[e].win_ani.name){n.zIndex=t.symbol[e].win_ani.zIndex-this._symbolIdx+10*this._reelIdx;var o=a.getComponent(sp.Skeleton);o&&o.setAnimation(0,t.symbol[e].win_ani.name,!1)}}}}),cc._RF.pop()},{LMSlots_Symbol_Base:void 0}]},{},["LuckySanta_Cfg","LuckySanta_Character","LuckySanta_CollectProgress","LuckySanta_CollectWild","LuckySanta_GameData","LuckySanta_Logic","LuckySanta_PickBonus","LuckySanta_PickGift","LuckySanta_Pop","LuckySanta_Slots","LuckySanta_StarBonusFreegame","LuckySanta_StarBonusRespin","LuckySanta_Symbol"]);